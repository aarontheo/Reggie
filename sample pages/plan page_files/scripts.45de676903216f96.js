var ZP=Object.defineProperty,eO=Object.defineProperties,tO=Object.getOwnPropertyDescriptors,pu=Object.getOwnPropertySymbols,Gw=Object.prototype.hasOwnProperty,Kw=Object.prototype.propertyIsEnumerable,Vw=(B,Ee,ct)=>Ee in B?ZP(B,Ee,{enumerable:!0,configurable:!0,writable:!0,value:ct}):B[Ee]=ct,rt=(B,Ee)=>{for(var ct in Ee||(Ee={}))Gw.call(Ee,ct)&&Vw(B,ct,Ee[ct]);if(pu)for(var ct of pu(Ee))Kw.call(Ee,ct)&&Vw(B,ct,Ee[ct]);return B},Wt=(B,Ee)=>eO(B,tO(Ee)),$w=(B,Ee)=>{var ct={};for(var Pe in B)Gw.call(B,Pe)&&Ee.indexOf(Pe)<0&&(ct[Pe]=B[Pe]);if(null!=B&&pu)for(var Pe of pu(B))Ee.indexOf(Pe)<0&&Kw.call(B,Pe)&&(ct[Pe]=B[Pe]);return ct},Yw=(B,Ee,ct)=>new Promise((Pe,w)=>{var oe=te=>{try{ee(ct.next(te))}catch(ce){w(ce)}},j=te=>{try{ee(ct.throw(te))}catch(ce){w(ce)}},ee=te=>te.done?Pe(te.value):Promise.resolve(te.value).then(oe,j);ee((ct=ct.apply(B,Ee)).next())});!function(B,Ee){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=B.document?Ee(B,!0):function(ct){if(!ct.document)throw new Error("jQuery requires a window with a document");return Ee(ct)}:Ee(B)}("undefined"!=typeof window?window:this,function(B,Ee){"use strict";var ct=[],Pe=Object.getPrototypeOf,w=ct.slice,oe=ct.flat?function(d){return ct.flat.call(d)}:function(d){return ct.concat.apply([],d)},j=ct.push,ee=ct.indexOf,te={},ce=te.toString,Xe=te.hasOwnProperty,Ne=Xe.toString,D=Ne.call(Object),ne={},Y=function(d){return"function"==typeof d&&"number"!=typeof d.nodeType&&"function"!=typeof d.item},fe=function(d){return null!=d&&d===d.window},le=B.document,Le={type:!0,src:!0,nonce:!0,noModule:!0};function Je(d,p,C){var E,A,R=(C=C||le).createElement("script");if(R.text=d,p)for(E in Le)(A=p[E]||p.getAttribute&&p.getAttribute(E))&&R.setAttribute(E,A);C.head.appendChild(R).parentNode.removeChild(R)}function Ve(d){return null==d?d+"":"object"==typeof d||"function"==typeof d?te[ce.call(d)]||"object":typeof d}var z="3.7.0",me=/HTML$/i,b=function(d,p){return new b.fn.init(d,p)};function He(d){var p=!!d&&"length"in d&&d.length,C=Ve(d);return!Y(d)&&!fe(d)&&("array"===C||0===p||"number"==typeof p&&0<p&&p-1 in d)}function We(d,p){return d.nodeName&&d.nodeName.toLowerCase()===p.toLowerCase()}b.fn=b.prototype={jquery:z,constructor:b,length:0,toArray:function(){return w.call(this)},get:function(d){return null==d?w.call(this):d<0?this[d+this.length]:this[d]},pushStack:function(d){var p=b.merge(this.constructor(),d);return p.prevObject=this,p},each:function(d){return b.each(this,d)},map:function(d){return this.pushStack(b.map(this,function(p,C){return d.call(p,C,p)}))},slice:function(){return this.pushStack(w.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(b.grep(this,function(d,p){return(p+1)%2}))},odd:function(){return this.pushStack(b.grep(this,function(d,p){return p%2}))},eq:function(d){var p=this.length,C=+d+(d<0?p:0);return this.pushStack(0<=C&&C<p?[this[C]]:[])},end:function(){return this.prevObject||this.constructor()},push:j,sort:ct.sort,splice:ct.splice},b.extend=b.fn.extend=function(){var d,p,C,E,A,R,M=arguments[0]||{},Q=1,G=arguments.length,ue=!1;for("boolean"==typeof M&&(ue=M,M=arguments[Q]||{},Q++),"object"==typeof M||Y(M)||(M={}),Q===G&&(M=this,Q--);Q<G;Q++)if(null!=(d=arguments[Q]))for(p in d)E=d[p],"__proto__"!==p&&M!==E&&(ue&&E&&(b.isPlainObject(E)||(A=Array.isArray(E)))?(C=M[p],R=A&&!Array.isArray(C)?[]:A||b.isPlainObject(C)?C:{},A=!1,M[p]=b.extend(ue,R,E)):void 0!==E&&(M[p]=E));return M},b.extend({expando:"jQuery"+(z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(d){throw new Error(d)},noop:function(){},isPlainObject:function(d){var p,C;return!(!d||"[object Object]"!==ce.call(d)||(p=Pe(d))&&("function"!=typeof(C=Xe.call(p,"constructor")&&p.constructor)||Ne.call(C)!==D))},isEmptyObject:function(d){var p;for(p in d)return!1;return!0},globalEval:function(d,p,C){Je(d,{nonce:p&&p.nonce},C)},each:function(d,p){var C,E=0;if(He(d))for(C=d.length;E<C&&!1!==p.call(d[E],E,d[E]);E++);else for(E in d)if(!1===p.call(d[E],E,d[E]))break;return d},text:function(d){var p,C="",E=0,A=d.nodeType;if(A){if(1===A||9===A||11===A)return d.textContent;if(3===A||4===A)return d.nodeValue}else for(;p=d[E++];)C+=b.text(p);return C},makeArray:function(d,p){var C=p||[];return null!=d&&(He(Object(d))?b.merge(C,"string"==typeof d?[d]:d):j.call(C,d)),C},inArray:function(d,p,C){return null==p?-1:ee.call(p,d,C)},isXMLDoc:function(d){var C=d&&(d.ownerDocument||d).documentElement;return!me.test(d&&d.namespaceURI||C&&C.nodeName||"HTML")},merge:function(d,p){for(var C=+p.length,E=0,A=d.length;E<C;E++)d[A++]=p[E];return d.length=A,d},grep:function(d,p,C){for(var E=[],A=0,R=d.length,M=!C;A<R;A++)!p(d[A],A)!==M&&E.push(d[A]);return E},map:function(d,p,C){var E,A,R=0,M=[];if(He(d))for(E=d.length;R<E;R++)null!=(A=p(d[R],R,C))&&M.push(A);else for(R in d)null!=(A=p(d[R],R,C))&&M.push(A);return oe(M)},guid:1,support:ne}),"function"==typeof Symbol&&(b.fn[Symbol.iterator]=ct[Symbol.iterator]),b.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,p){te["[object "+p+"]"]=p.toLowerCase()});var Mt=ct.pop,qn=ct.sort,Fe=ct.splice,Ct="[\\x20\\t\\r\\n\\f]",bn=new RegExp("^"+Ct+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ct+"+$","g");b.contains=function(d,p){var C=p&&p.parentNode;return d===C||!(!C||1!==C.nodeType||!(d.contains?d.contains(C):d.compareDocumentPosition&&16&d.compareDocumentPosition(C)))};var ye=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Jt(d,p){return p?"\0"===d?"\ufffd":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d}b.escapeSelector=function(d){return(d+"").replace(ye,Jt)};var fn=le,ln=j;!function(){var d,p,C,E,A,R,M,Q,G,ue,_e=ln,Oe=b.expando,ge=0,Be=0,I=en(),Nt=en(),At=en(),Xt=en(),In=function(F,ie){return F===ie&&(A=!0),0},Rt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Yn="(?:\\\\[\\da-fA-F]{1,6}"+Ct+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Lt="\\["+Ct+"*("+Yn+")(?:"+Ct+"*([*^$|!~]?=)"+Ct+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Yn+"))|)"+Ct+"*\\]",hr=":("+Yn+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Lt+")*)|.*)\\)|)",Bt=new RegExp(Ct+"+","g"),Vt=new RegExp("^"+Ct+"*,"+Ct+"*"),Mi=new RegExp("^"+Ct+"*([>+~]|"+Ct+")"+Ct+"*"),bs=new RegExp(Ct+"|>"),or=new RegExp(hr),jo=new RegExp("^"+Yn+"$"),Co={ID:new RegExp("^#("+Yn+")"),CLASS:new RegExp("^\\.("+Yn+")"),TAG:new RegExp("^("+Yn+"|[*])"),ATTR:new RegExp("^"+Lt),PSEUDO:new RegExp("^"+hr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ct+"*(even|odd|(([+-]|)(\\d*)n|)"+Ct+"*(?:([+-]|)"+Ct+"*(\\d+)|))"+Ct+"*\\)|)","i"),bool:new RegExp("^(?:"+Rt+")$","i"),needsContext:new RegExp("^"+Ct+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ct+"*((?:-\\d)?\\d*)"+Ct+"*\\)|)(?=[^-]|$)","i")},Fo=/^(?:input|select|textarea|button)$/i,cn=/^h\d$/i,Zn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Nn=/[+~]/,_n=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ct+"?|\\\\([^\\r\\n\\f])","g"),er=function(F,ie){var ke="0x"+F.slice(1)-65536;return ie||(ke<0?String.fromCharCode(ke+65536):String.fromCharCode(ke>>10|55296,1023&ke|56320))},So=function(){wr()},ir=Ho(function(F){return!0===F.disabled&&We(F,"fieldset")},{dir:"parentNode",next:"legend"});try{_e.apply(ct=w.call(fn.childNodes),fn.childNodes)}catch(F){_e={apply:function(ie,ke){ln.apply(ie,w.call(ke))},call:function(ie){ln.apply(ie,w.call(arguments,1))}}}function xt(F,ie,ke,Re){var De,ot,dt,Ze,lt,It,kt,st=ie&&ie.ownerDocument,Dt=ie?ie.nodeType:9;if(ke=ke||[],"string"!=typeof F||!F||1!==Dt&&9!==Dt&&11!==Dt)return ke;if(!Re&&(wr(ie),ie=ie||R,Q)){if(11!==Dt&&(lt=Zn.exec(F)))if(De=lt[1]){if(9===Dt){if(!(dt=ie.getElementById(De)))return ke;if(dt.id===De)return _e.call(ke,dt),ke}else if(st&&(dt=st.getElementById(De))&&xt.contains(ie,dt)&&dt.id===De)return _e.call(ke,dt),ke}else{if(lt[2])return _e.apply(ke,ie.getElementsByTagName(F)),ke;if((De=lt[3])&&ie.getElementsByClassName)return _e.apply(ke,ie.getElementsByClassName(De)),ke}if(!(Xt[F+" "]||G&&G.test(F))){if(kt=F,st=ie,1===Dt&&(bs.test(F)||Mi.test(F))){for((st=Nn.test(F)&&no(ie.parentNode)||ie)==ie&&ne.scope||((Ze=ie.getAttribute("id"))?Ze=b.escapeSelector(Ze):ie.setAttribute("id",Ze=Oe)),ot=(It=si(F)).length;ot--;)It[ot]=(Ze?"#"+Ze:":scope")+" "+_o(It[ot]);kt=It.join(",")}try{return _e.apply(ke,st.querySelectorAll(kt)),ke}catch(Tt){Xt(F,!0)}finally{Ze===Oe&&ie.removeAttribute("id")}}}return ro(F.replace(bn,"$1"),ie,ke,Re)}function en(){var F=[];return function ie(ke,Re){return F.push(ke+" ")>p.cacheLength&&delete ie[F.shift()],ie[ke+" "]=Re}}function hn(F){return F[Oe]=!0,F}function sn(F){var ie=R.createElement("fieldset");try{return!!F(ie)}catch(ke){return!1}finally{ie.parentNode&&ie.parentNode.removeChild(ie),ie=null}}function to(F){return function(ie){return We(ie,"input")&&ie.type===F}}function Ji(F){return function(ie){return(We(ie,"input")||We(ie,"button"))&&ie.type===F}}function Uo(F){return function(ie){return"form"in ie?ie.parentNode&&!1===ie.disabled?"label"in ie?"label"in ie.parentNode?ie.parentNode.disabled===F:ie.disabled===F:ie.isDisabled===F||ie.isDisabled!==!F&&ir(ie)===F:ie.disabled===F:"label"in ie&&ie.disabled===F}}function ai(F){return hn(function(ie){return ie=+ie,hn(function(ke,Re){for(var De,ot=F([],ke.length,ie),dt=ot.length;dt--;)ke[De=ot[dt]]&&(ke[De]=!(Re[De]=ke[De]))})})}function no(F){return F&&void 0!==F.getElementsByTagName&&F}function wr(F){var ie,ke=F?F.ownerDocument||F:fn;return ke!=R&&9===ke.nodeType&&ke.documentElement&&(M=(R=ke).documentElement,Q=!b.isXMLDoc(R),ue=M.matches||M.webkitMatchesSelector||M.msMatchesSelector,fn!=R&&(ie=R.defaultView)&&ie.top!==ie&&ie.addEventListener("unload",So),ne.getById=sn(function(Re){return M.appendChild(Re).id=b.expando,!R.getElementsByName||!R.getElementsByName(b.expando).length}),ne.disconnectedMatch=sn(function(Re){return ue.call(Re,"*")}),ne.scope=sn(function(){return R.querySelectorAll(":scope")}),ne.cssHas=sn(function(){try{return R.querySelector(":has(*,:jqfake)"),!1}catch(Re){return!0}}),ne.getById?(p.filter.ID=function(Re){var De=Re.replace(_n,er);return function(ot){return ot.getAttribute("id")===De}},p.find.ID=function(Re,De){if(void 0!==De.getElementById&&Q){var ot=De.getElementById(Re);return ot?[ot]:[]}}):(p.filter.ID=function(Re){var De=Re.replace(_n,er);return function(ot){var dt=void 0!==ot.getAttributeNode&&ot.getAttributeNode("id");return dt&&dt.value===De}},p.find.ID=function(Re,De){if(void 0!==De.getElementById&&Q){var ot,dt,Ze,lt=De.getElementById(Re);if(lt){if((ot=lt.getAttributeNode("id"))&&ot.value===Re)return[lt];for(Ze=De.getElementsByName(Re),dt=0;lt=Ze[dt++];)if((ot=lt.getAttributeNode("id"))&&ot.value===Re)return[lt]}return[]}}),p.find.TAG=function(Re,De){return void 0!==De.getElementsByTagName?De.getElementsByTagName(Re):De.querySelectorAll(Re)},p.find.CLASS=function(Re,De){if(void 0!==De.getElementsByClassName&&Q)return De.getElementsByClassName(Re)},G=[],sn(function(Re){var De;M.appendChild(Re).innerHTML="<a id='"+Oe+"' href='' disabled='disabled'></a><select id='"+Oe+"-\r\\' disabled='disabled'><option selected=''></option></select>",Re.querySelectorAll("[selected]").length||G.push("\\["+Ct+"*(?:value|"+Rt+")"),Re.querySelectorAll("[id~="+Oe+"-]").length||G.push("~="),Re.querySelectorAll("a#"+Oe+"+*").length||G.push(".#.+[+~]"),Re.querySelectorAll(":checked").length||G.push(":checked"),(De=R.createElement("input")).setAttribute("type","hidden"),Re.appendChild(De).setAttribute("name","D"),M.appendChild(Re).disabled=!0,2!==Re.querySelectorAll(":disabled").length&&G.push(":enabled",":disabled"),(De=R.createElement("input")).setAttribute("name",""),Re.appendChild(De),Re.querySelectorAll("[name='']").length||G.push("\\["+Ct+"*name"+Ct+"*="+Ct+"*(?:''|\"\")")}),ne.cssHas||G.push(":has"),G=G.length&&new RegExp(G.join("|")),In=function(Re,De){if(Re===De)return A=!0,0;var ot=!Re.compareDocumentPosition-!De.compareDocumentPosition;return ot||(1&(ot=(Re.ownerDocument||Re)==(De.ownerDocument||De)?Re.compareDocumentPosition(De):1)||!ne.sortDetached&&De.compareDocumentPosition(Re)===ot?Re===R||Re.ownerDocument==fn&&xt.contains(fn,Re)?-1:De===R||De.ownerDocument==fn&&xt.contains(fn,De)?1:E?ee.call(E,Re)-ee.call(E,De):0:4&ot?-1:1)}),R}for(d in xt.matches=function(F,ie){return xt(F,null,null,ie)},xt.matchesSelector=function(F,ie){if(wr(F),Q&&!Xt[ie+" "]&&(!G||!G.test(ie)))try{var ke=ue.call(F,ie);if(ke||ne.disconnectedMatch||F.document&&11!==F.document.nodeType)return ke}catch(Re){Xt(ie,!0)}return 0<xt(ie,R,null,[F]).length},xt.contains=function(F,ie){return(F.ownerDocument||F)!=R&&wr(F),b.contains(F,ie)},xt.attr=function(F,ie){(F.ownerDocument||F)!=R&&wr(F);var ke=p.attrHandle[ie.toLowerCase()],Re=ke&&Xe.call(p.attrHandle,ie.toLowerCase())?ke(F,ie,!Q):void 0;return void 0!==Re?Re:F.getAttribute(ie)},xt.error=function(F){throw new Error("Syntax error, unrecognized expression: "+F)},b.uniqueSort=function(F){var ie,ke=[],Re=0,De=0;if(A=!ne.sortStable,E=!ne.sortStable&&w.call(F,0),qn.call(F,In),A){for(;ie=F[De++];)ie===F[De]&&(Re=ke.push(De));for(;Re--;)Fe.call(F,ke[Re],1)}return E=null,F},b.fn.uniqueSort=function(){return this.pushStack(b.uniqueSort(w.apply(this)))},(p=b.expr={cacheLength:50,createPseudo:hn,match:Co,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(F){return F[1]=F[1].replace(_n,er),F[3]=(F[3]||F[4]||F[5]||"").replace(_n,er),"~="===F[2]&&(F[3]=" "+F[3]+" "),F.slice(0,4)},CHILD:function(F){return F[1]=F[1].toLowerCase(),"nth"===F[1].slice(0,3)?(F[3]||xt.error(F[0]),F[4]=+(F[4]?F[5]+(F[6]||1):2*("even"===F[3]||"odd"===F[3])),F[5]=+(F[7]+F[8]||"odd"===F[3])):F[3]&&xt.error(F[0]),F},PSEUDO:function(F){var ie,ke=!F[6]&&F[2];return Co.CHILD.test(F[0])?null:(F[3]?F[2]=F[4]||F[5]||"":ke&&or.test(ke)&&(ie=si(ke,!0))&&(ie=ke.indexOf(")",ke.length-ie)-ke.length)&&(F[0]=F[0].slice(0,ie),F[2]=ke.slice(0,ie)),F.slice(0,3))}},filter:{TAG:function(F){var ie=F.replace(_n,er).toLowerCase();return"*"===F?function(){return!0}:function(ke){return We(ke,ie)}},CLASS:function(F){var ie=I[F+" "];return ie||(ie=new RegExp("(^|"+Ct+")"+F+"("+Ct+"|$)"))&&I(F,function(ke){return ie.test("string"==typeof ke.className&&ke.className||void 0!==ke.getAttribute&&ke.getAttribute("class")||"")})},ATTR:function(F,ie,ke){return function(Re){var De=xt.attr(Re,F);return null==De?"!="===ie:!ie||(De+="","="===ie?De===ke:"!="===ie?De!==ke:"^="===ie?ke&&0===De.indexOf(ke):"*="===ie?ke&&-1<De.indexOf(ke):"$="===ie?ke&&De.slice(-ke.length)===ke:"~="===ie?-1<(" "+De.replace(Bt," ")+" ").indexOf(ke):"|="===ie&&(De===ke||De.slice(0,ke.length+1)===ke+"-"))}},CHILD:function(F,ie,ke,Re,De){var ot="nth"!==F.slice(0,3),dt="last"!==F.slice(-4),Ze="of-type"===ie;return 1===Re&&0===De?function(lt){return!!lt.parentNode}:function(lt,It,kt){var st,Dt,Tt,Rn,Ln,Xn=ot!==dt?"nextSibling":"previousSibling",xr=lt.parentNode,kr=Ze&&lt.nodeName.toLowerCase(),ar=!kt&&!Ze,tn=!1;if(xr){if(ot){for(;Xn;){for(Tt=lt;Tt=Tt[Xn];)if(Ze?We(Tt,kr):1===Tt.nodeType)return!1;Ln=Xn="only"===F&&!Ln&&"nextSibling"}return!0}if(Ln=[dt?xr.firstChild:xr.lastChild],dt&&ar){for(tn=(Rn=(st=(Dt=xr[Oe]||(xr[Oe]={}))[F]||[])[0]===ge&&st[1])&&st[2],Tt=Rn&&xr.childNodes[Rn];Tt=++Rn&&Tt&&Tt[Xn]||(tn=Rn=0)||Ln.pop();)if(1===Tt.nodeType&&++tn&&Tt===lt){Dt[F]=[ge,Rn,tn];break}}else if(ar&&(tn=Rn=(st=(Dt=lt[Oe]||(lt[Oe]={}))[F]||[])[0]===ge&&st[1]),!1===tn)for(;(Tt=++Rn&&Tt&&Tt[Xn]||(tn=Rn=0)||Ln.pop())&&(!(Ze?We(Tt,kr):1===Tt.nodeType)||!++tn||(ar&&((Dt=Tt[Oe]||(Tt[Oe]={}))[F]=[ge,tn]),Tt!==lt)););return(tn-=De)===Re||tn%Re==0&&0<=tn/Re}}},PSEUDO:function(F,ie){var ke,Re=p.pseudos[F]||p.setFilters[F.toLowerCase()]||xt.error("unsupported pseudo: "+F);return Re[Oe]?Re(ie):1<Re.length?(ke=[F,F,"",ie],p.setFilters.hasOwnProperty(F.toLowerCase())?hn(function(De,ot){for(var dt,Ze=Re(De,ie),lt=Ze.length;lt--;)De[dt=ee.call(De,Ze[lt])]=!(ot[dt]=Ze[lt])}):function(De){return Re(De,0,ke)}):Re}},pseudos:{not:hn(function(F){var ie=[],ke=[],Re=ea(F.replace(bn,"$1"));return Re[Oe]?hn(function(De,ot,dt,Ze){for(var lt,It=Re(De,null,Ze,[]),kt=De.length;kt--;)(lt=It[kt])&&(De[kt]=!(ot[kt]=lt))}):function(De,ot,dt){return ie[0]=De,Re(ie,null,dt,ke),ie[0]=null,!ke.pop()}}),has:hn(function(F){return function(ie){return 0<xt(F,ie).length}}),contains:hn(function(F){return F=F.replace(_n,er),function(ie){return-1<(ie.textContent||b.text(ie)).indexOf(F)}}),lang:hn(function(F){return jo.test(F||"")||xt.error("unsupported lang: "+F),F=F.replace(_n,er).toLowerCase(),function(ie){var ke;do{if(ke=Q?ie.lang:ie.getAttribute("xml:lang")||ie.getAttribute("lang"))return(ke=ke.toLowerCase())===F||0===ke.indexOf(F+"-")}while((ie=ie.parentNode)&&1===ie.nodeType);return!1}}),target:function(F){var ie=B.location&&B.location.hash;return ie&&ie.slice(1)===F.id},root:function(F){return F===M},focus:function(F){return F===function(){try{return R.activeElement}catch(ie){}}()&&R.hasFocus()&&!!(F.type||F.href||~F.tabIndex)},enabled:Uo(!1),disabled:Uo(!0),checked:function(F){return We(F,"input")&&!!F.checked||We(F,"option")&&!!F.selected},selected:function(F){return!0===F.selected},empty:function(F){for(F=F.firstChild;F;F=F.nextSibling)if(F.nodeType<6)return!1;return!0},parent:function(F){return!p.pseudos.empty(F)},header:function(F){return cn.test(F.nodeName)},input:function(F){return Fo.test(F.nodeName)},button:function(F){return We(F,"input")&&"button"===F.type||We(F,"button")},text:function(F){var ie;return We(F,"input")&&"text"===F.type&&(null==(ie=F.getAttribute("type"))||"text"===ie.toLowerCase())},first:ai(function(){return[0]}),last:ai(function(F,ie){return[ie-1]}),eq:ai(function(F,ie,ke){return[ke<0?ke+ie:ke]}),even:ai(function(F,ie){for(var ke=0;ke<ie;ke+=2)F.push(ke);return F}),odd:ai(function(F,ie){for(var ke=1;ke<ie;ke+=2)F.push(ke);return F}),lt:ai(function(F,ie,ke){var Re;for(Re=ke<0?ke+ie:ie<ke?ie:ke;0<=--Re;)F.push(Re);return F}),gt:ai(function(F,ie,ke){for(var Re=ke<0?ke+ie:ke;++Re<ie;)F.push(Re);return F})}}).pseudos.nth=p.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})p.pseudos[d]=to(d);for(d in{submit:!0,reset:!0})p.pseudos[d]=Ji(d);function Zi(){}function si(F,ie){var ke,Re,De,ot,dt,Ze,lt,It=Nt[F+" "];if(It)return ie?0:It.slice(0);for(dt=F,Ze=[],lt=p.preFilter;dt;){for(ot in ke&&!(Re=Vt.exec(dt))||(Re&&(dt=dt.slice(Re[0].length)||dt),Ze.push(De=[])),ke=!1,(Re=Mi.exec(dt))&&(ke=Re.shift(),De.push({value:ke,type:Re[0].replace(bn," ")}),dt=dt.slice(ke.length)),p.filter)!(Re=Co[ot].exec(dt))||lt[ot]&&!(Re=lt[ot](Re))||(ke=Re.shift(),De.push({value:ke,type:ot,matches:Re}),dt=dt.slice(ke.length));if(!ke)break}return ie?dt.length:dt?xt.error(F):Nt(F,Ze).slice(0)}function _o(F){for(var ie=0,ke=F.length,Re="";ie<ke;ie++)Re+=F[ie].value;return Re}function Ho(F,ie,ke){var Re=ie.dir,De=ie.next,ot=De||Re,dt=ke&&"parentNode"===ot,Ze=Be++;return ie.first?function(lt,It,kt){for(;lt=lt[Re];)if(1===lt.nodeType||dt)return F(lt,It,kt);return!1}:function(lt,It,kt){var st,Dt,Tt=[ge,Ze];if(kt){for(;lt=lt[Re];)if((1===lt.nodeType||dt)&&F(lt,It,kt))return!0}else for(;lt=lt[Re];)if(1===lt.nodeType||dt)if(Dt=lt[Oe]||(lt[Oe]={}),De&&We(lt,De))lt=lt[Re]||lt;else{if((st=Dt[ot])&&st[0]===ge&&st[1]===Ze)return Tt[2]=st[2];if((Dt[ot]=Tt)[2]=F(lt,It,kt))return!0}return!1}}function rl(F){return 1<F.length?function(ie,ke,Re){for(var De=F.length;De--;)if(!F[De](ie,ke,Re))return!1;return!0}:F[0]}function li(F,ie,ke,Re,De){for(var ot,dt=[],Ze=0,lt=F.length,It=null!=ie;Ze<lt;Ze++)(ot=F[Ze])&&(ke&&!ke(ot,Re,De)||(dt.push(ot),It&&ie.push(Ze)));return dt}function ys(F,ie,ke,Re,De,ot){return Re&&!Re[Oe]&&(Re=ys(Re)),De&&!De[Oe]&&(De=ys(De,ot)),hn(function(dt,Ze,lt,It){var kt,st,Dt,Tt,Rn=[],Ln=[],Xn=Ze.length,xr=dt||function(ar,tn,Wo){for(var Br=0,Pa=tn.length;Br<Pa;Br++)xt(ar,tn[Br],Wo);return Wo}(ie||"*",lt.nodeType?[lt]:lt,[]),kr=!F||!dt&&ie?xr:li(xr,Rn,F,lt,It);if(ke?ke(kr,Tt=De||(dt?F:Xn||Re)?[]:Ze,lt,It):Tt=kr,Re)for(kt=li(Tt,Ln),Re(kt,[],lt,It),st=kt.length;st--;)(Dt=kt[st])&&(Tt[Ln[st]]=!(kr[Ln[st]]=Dt));if(dt){if(De||F){if(De){for(kt=[],st=Tt.length;st--;)(Dt=Tt[st])&&kt.push(kr[st]=Dt);De(null,Tt=[],kt,It)}for(st=Tt.length;st--;)(Dt=Tt[st])&&-1<(kt=De?ee.call(dt,Dt):Rn[st])&&(dt[kt]=!(Ze[kt]=Dt))}}else Tt=li(Tt===Ze?Tt.splice(Xn,Tt.length):Tt),De?De(null,Ze,Tt,It):_e.apply(Ze,Tt)})}function Cs(F){for(var ie,ke,Re,De=F.length,ot=p.relative[F[0].type],dt=ot||p.relative[" "],Ze=ot?1:0,lt=Ho(function(st){return st===ie},dt,!0),It=Ho(function(st){return-1<ee.call(ie,st)},dt,!0),kt=[function(st,Dt,Tt){var Rn=!ot&&(Tt||Dt!=C)||((ie=Dt).nodeType?lt(st,Dt,Tt):It(st,Dt,Tt));return ie=null,Rn}];Ze<De;Ze++)if(ke=p.relative[F[Ze].type])kt=[Ho(rl(kt),ke)];else{if((ke=p.filter[F[Ze].type].apply(null,F[Ze].matches))[Oe]){for(Re=++Ze;Re<De&&!p.relative[F[Re].type];Re++);return ys(1<Ze&&rl(kt),1<Ze&&_o(F.slice(0,Ze-1).concat({value:" "===F[Ze-2].type?"*":""})).replace(bn,"$1"),ke,Ze<Re&&Cs(F.slice(Ze,Re)),Re<De&&Cs(F=F.slice(Re)),Re<De&&_o(F))}kt.push(ke)}return rl(kt)}function ea(F,ie){var ke,Re,De,ot,dt,Ze,lt=[],It=[],kt=At[F+" "];if(!kt){for(ie||(ie=si(F)),ke=ie.length;ke--;)(kt=Cs(ie[ke]))[Oe]?lt.push(kt):It.push(kt);(kt=At(F,(Re=It,ot=0<(De=lt).length,dt=0<Re.length,Ze=function(st,Dt,Tt,Rn,Ln){var Xn,xr,kr,ar=0,tn="0",Wo=st&&[],Br=[],Pa=C,ol=st||dt&&p.find.TAG("*",Ln),il=ge+=null==Pa?1:Math.random()||.1,gc=ol.length;for(Ln&&(C=Dt==R||Dt||Ln);tn!==gc&&null!=(Xn=ol[tn]);tn++){if(dt&&Xn){for(xr=0,Dt||Xn.ownerDocument==R||(wr(Xn),Tt=!Q);kr=Re[xr++];)if(kr(Xn,Dt||R,Tt)){_e.call(Rn,Xn);break}Ln&&(ge=il)}ot&&((Xn=!kr&&Xn)&&ar--,st&&Wo.push(Xn))}if(ar+=tn,ot&&tn!==ar){for(xr=0;kr=De[xr++];)kr(Wo,Br,Dt,Tt);if(st){if(0<ar)for(;tn--;)Wo[tn]||Br[tn]||(Br[tn]=Mt.call(Rn));Br=li(Br)}_e.apply(Rn,Br),Ln&&!st&&0<Br.length&&1<ar+De.length&&b.uniqueSort(Rn)}return Ln&&(ge=il,C=Pa),Wo},ot?hn(Ze):Ze))).selector=F}return kt}function ro(F,ie,ke,Re){var De,ot,dt,Ze,lt,It="function"==typeof F&&F,kt=!Re&&si(F=It.selector||F);if(ke=ke||[],1===kt.length){if(2<(ot=kt[0]=kt[0].slice(0)).length&&"ID"===(dt=ot[0]).type&&9===ie.nodeType&&Q&&p.relative[ot[1].type]){if(!(ie=(p.find.ID(dt.matches[0].replace(_n,er),ie)||[])[0]))return ke;It&&(ie=ie.parentNode),F=F.slice(ot.shift().value.length)}for(De=Co.needsContext.test(F)?0:ot.length;De--&&!p.relative[Ze=(dt=ot[De]).type];)if((lt=p.find[Ze])&&(Re=lt(dt.matches[0].replace(_n,er),Nn.test(ot[0].type)&&no(ie.parentNode)||ie))){if(ot.splice(De,1),!(F=Re.length&&_o(ot)))return _e.apply(ke,Re),ke;break}}return(It||ea(F,kt))(Re,ie,!Q,ke,!ie||Nn.test(F)&&no(ie.parentNode)||ie),ke}Zi.prototype=p.filters=p.pseudos,p.setFilters=new Zi,ne.sortStable=Oe.split("").sort(In).join("")===Oe,wr(),ne.sortDetached=sn(function(F){return 1&F.compareDocumentPosition(R.createElement("fieldset"))}),b.find=xt,b.expr[":"]=b.expr.pseudos,b.unique=b.uniqueSort,xt.compile=ea,xt.select=ro,xt.setDocument=wr,xt.escape=b.escapeSelector,xt.getText=b.text,xt.isXML=b.isXMLDoc,xt.selectors=b.expr,xt.support=b.support,xt.uniqueSort=b.uniqueSort}();var $t=function(d,p,C){for(var E=[],A=void 0!==C;(d=d[p])&&9!==d.nodeType;)if(1===d.nodeType){if(A&&b(d).is(C))break;E.push(d)}return E},Ot=function(d,p){for(var C=[];d;d=d.nextSibling)1===d.nodeType&&d!==p&&C.push(d);return C},Ft=b.expr.match.needsContext,T=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Hr(d,p,C){return Y(p)?b.grep(d,function(E,A){return!!p.call(E,A,E)!==C}):p.nodeType?b.grep(d,function(E){return E===p!==C}):"string"!=typeof p?b.grep(d,function(E){return-1<ee.call(p,E)!==C}):b.filter(p,d,C)}b.filter=function(d,p,C){var E=p[0];return C&&(d=":not("+d+")"),1===p.length&&1===E.nodeType?b.find.matchesSelector(E,d)?[E]:[]:b.find.matches(d,b.grep(p,function(A){return 1===A.nodeType}))},b.fn.extend({find:function(d){var p,C,E=this.length,A=this;if("string"!=typeof d)return this.pushStack(b(d).filter(function(){for(p=0;p<E;p++)if(b.contains(A[p],this))return!0}));for(C=this.pushStack([]),p=0;p<E;p++)b.find(d,A[p],C);return 1<E?b.uniqueSort(C):C},filter:function(d){return this.pushStack(Hr(this,d||[],!1))},not:function(d){return this.pushStack(Hr(this,d||[],!0))},is:function(d){return!!Hr(this,"string"==typeof d&&Ft.test(d)?b(d):d||[],!1).length}});var zn,Xr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(b.fn.init=function(d,p,C){var E,A;if(!d)return this;if(C=C||zn,"string"==typeof d){if(!(E="<"===d[0]&&">"===d[d.length-1]&&3<=d.length?[null,d,null]:Xr.exec(d))||!E[1]&&p)return!p||p.jquery?(p||C).find(d):this.constructor(p).find(d);if(E[1]){if(b.merge(this,b.parseHTML(E[1],(p=p instanceof b?p[0]:p)&&p.nodeType?p.ownerDocument||p:le,!0)),T.test(E[1])&&b.isPlainObject(p))for(E in p)Y(this[E])?this[E](p[E]):this.attr(E,p[E]);return this}return(A=le.getElementById(E[2]))&&(this[0]=A,this.length=1),this}return d.nodeType?(this[0]=d,this.length=1,this):Y(d)?void 0!==C.ready?C.ready(d):d(b):b.makeArray(d,this)}).prototype=b.fn,zn=b(le);var ur=/^(?:parents|prev(?:Until|All))/,Pt={children:!0,contents:!0,next:!0,prev:!0};function Yt(d,p){for(;(d=d[p])&&1!==d.nodeType;);return d}b.fn.extend({has:function(d){var p=b(d,this),C=p.length;return this.filter(function(){for(var E=0;E<C;E++)if(b.contains(this,p[E]))return!0})},closest:function(d,p){var C,E=0,A=this.length,R=[],M="string"!=typeof d&&b(d);if(!Ft.test(d))for(;E<A;E++)for(C=this[E];C&&C!==p;C=C.parentNode)if(C.nodeType<11&&(M?-1<M.index(C):1===C.nodeType&&b.find.matchesSelector(C,d))){R.push(C);break}return this.pushStack(1<R.length?b.uniqueSort(R):R)},index:function(d){return d?"string"==typeof d?ee.call(b(d),this[0]):ee.call(this,d.jquery?d[0]:d):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(d,p){return this.pushStack(b.uniqueSort(b.merge(this.get(),b(d,p))))},addBack:function(d){return this.add(null==d?this.prevObject:this.prevObject.filter(d))}}),b.each({parent:function(d){var p=d.parentNode;return p&&11!==p.nodeType?p:null},parents:function(d){return $t(d,"parentNode")},parentsUntil:function(d,p,C){return $t(d,"parentNode",C)},next:function(d){return Yt(d,"nextSibling")},prev:function(d){return Yt(d,"previousSibling")},nextAll:function(d){return $t(d,"nextSibling")},prevAll:function(d){return $t(d,"previousSibling")},nextUntil:function(d,p,C){return $t(d,"nextSibling",C)},prevUntil:function(d,p,C){return $t(d,"previousSibling",C)},siblings:function(d){return Ot((d.parentNode||{}).firstChild,d)},children:function(d){return Ot(d.firstChild)},contents:function(d){return null!=d.contentDocument&&Pe(d.contentDocument)?d.contentDocument:(We(d,"template")&&(d=d.content||d),b.merge([],d.childNodes))}},function(d,p){b.fn[d]=function(C,E){var A=b.map(this,p,C);return"Until"!==d.slice(-5)&&(E=C),E&&"string"==typeof E&&(A=b.filter(E,A)),1<this.length&&(Pt[d]||b.uniqueSort(A),ur.test(d)&&A.reverse()),this.pushStack(A)}});var wt=/[^\x20\t\r\n\f]+/g;function Ae(d){return d}function Wr(d){throw d}function Qr(d,p,C,E){var A;try{d&&Y(A=d.promise)?A.call(d).done(p).fail(C):d&&Y(A=d.then)?A.call(d,p,C):p.apply(void 0,[d].slice(E))}catch(R){C.apply(void 0,[R])}}b.Callbacks=function(d){var C;d="string"==typeof d?(C={},b.each(d.match(wt)||[],function(ge,Be){C[Be]=!0}),C):b.extend({},d);var E,A,R,M,Q=[],G=[],ue=-1,_e=function(){for(M=M||d.once,R=E=!0;G.length;ue=-1)for(A=G.shift();++ue<Q.length;)!1===Q[ue].apply(A[0],A[1])&&d.stopOnFalse&&(ue=Q.length,A=!1);d.memory||(A=!1),E=!1,M&&(Q=A?[]:"")},Oe={add:function(){return Q&&(A&&!E&&(ue=Q.length-1,G.push(A)),function ge(Be){b.each(Be,function(I,Nt){Y(Nt)?d.unique&&Oe.has(Nt)||Q.push(Nt):Nt&&Nt.length&&"string"!==Ve(Nt)&&ge(Nt)})}(arguments),A&&!E&&_e()),this},remove:function(){return b.each(arguments,function(ge,Be){for(var I;-1<(I=b.inArray(Be,Q,I));)Q.splice(I,1),I<=ue&&ue--}),this},has:function(ge){return ge?-1<b.inArray(ge,Q):0<Q.length},empty:function(){return Q&&(Q=[]),this},disable:function(){return M=G=[],Q=A="",this},disabled:function(){return!Q},lock:function(){return M=G=[],A||E||(Q=A=""),this},locked:function(){return!!M},fireWith:function(ge,Be){return M||(Be=[ge,(Be=Be||[]).slice?Be.slice():Be],G.push(Be),E||_e()),this},fire:function(){return Oe.fireWith(this,arguments),this},fired:function(){return!!R}};return Oe},b.extend({Deferred:function(d){var p=[["notify","progress",b.Callbacks("memory"),b.Callbacks("memory"),2],["resolve","done",b.Callbacks("once memory"),b.Callbacks("once memory"),0,"resolved"],["reject","fail",b.Callbacks("once memory"),b.Callbacks("once memory"),1,"rejected"]],C="pending",E={state:function(){return C},always:function(){return A.done(arguments).fail(arguments),this},catch:function(R){return E.then(null,R)},pipe:function(){var R=arguments;return b.Deferred(function(M){b.each(p,function(Q,G){var ue=Y(R[G[4]])&&R[G[4]];A[G[1]](function(){var _e=ue&&ue.apply(this,arguments);_e&&Y(_e.promise)?_e.promise().progress(M.notify).done(M.resolve).fail(M.reject):M[G[0]+"With"](this,ue?[_e]:arguments)})}),R=null}).promise()},then:function(R,M,Q){var G=0;function ue(_e,Oe,ge,Be){return function(){var I=this,Nt=arguments,At=function(){var In,Rt;if(!(_e<G)){if((In=ge.apply(I,Nt))===Oe.promise())throw new TypeError("Thenable self-resolution");Y(Rt=In&&("object"==typeof In||"function"==typeof In)&&In.then)?Be?Rt.call(In,ue(G,Oe,Ae,Be),ue(G,Oe,Wr,Be)):(G++,Rt.call(In,ue(G,Oe,Ae,Be),ue(G,Oe,Wr,Be),ue(G,Oe,Ae,Oe.notifyWith))):(ge!==Ae&&(I=void 0,Nt=[In]),(Be||Oe.resolveWith)(I,Nt))}},Xt=Be?At:function(){try{At()}catch(In){b.Deferred.exceptionHook&&b.Deferred.exceptionHook(In,Xt.error),G<=_e+1&&(ge!==Wr&&(I=void 0,Nt=[In]),Oe.rejectWith(I,Nt))}};_e?Xt():(b.Deferred.getErrorHook?Xt.error=b.Deferred.getErrorHook():b.Deferred.getStackHook&&(Xt.error=b.Deferred.getStackHook()),B.setTimeout(Xt))}}return b.Deferred(function(_e){p[0][3].add(ue(0,_e,Y(Q)?Q:Ae,_e.notifyWith)),p[1][3].add(ue(0,_e,Y(R)?R:Ae)),p[2][3].add(ue(0,_e,Y(M)?M:Wr))}).promise()},promise:function(R){return null!=R?b.extend(R,E):E}},A={};return b.each(p,function(R,M){var Q=M[2],G=M[5];E[M[1]]=Q.add,G&&Q.add(function(){C=G},p[3-R][2].disable,p[3-R][3].disable,p[0][2].lock,p[0][3].lock),Q.add(M[3].fire),A[M[0]]=function(){return A[M[0]+"With"](this===A?void 0:this,arguments),this},A[M[0]+"With"]=Q.fireWith}),E.promise(A),d&&d.call(A,A),A},when:function(d){var p=arguments.length,C=p,E=Array(C),A=w.call(arguments),R=b.Deferred(),M=function(Q){return function(G){E[Q]=this,A[Q]=1<arguments.length?w.call(arguments):G,--p||R.resolveWith(E,A)}};if(p<=1&&(Qr(d,R.done(M(C)).resolve,R.reject,!p),"pending"===R.state()||Y(A[C]&&A[C].then)))return R.then();for(;C--;)Qr(A[C],M(C),R.reject);return R.promise()}});var gt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;b.Deferred.exceptionHook=function(d,p){B.console&&B.console.warn&&d&&gt.test(d.name)&&B.console.warn("jQuery.Deferred exception: "+d.message,d.stack,p)},b.readyException=function(d){B.setTimeout(function(){throw d})};var To=b.Deferred();function yn(){le.removeEventListener("DOMContentLoaded",yn),B.removeEventListener("load",yn),b.ready()}b.fn.ready=function(d){return To.then(d).catch(function(p){b.readyException(p)}),this},b.extend({isReady:!1,readyWait:1,ready:function(d){(!0===d?--b.readyWait:b.isReady)||(b.isReady=!0)!==d&&0<--b.readyWait||To.resolveWith(le,[b])}}),b.ready.then=To.then,"complete"===le.readyState||"loading"!==le.readyState&&!le.documentElement.doScroll?B.setTimeout(b.ready):(le.addEventListener("DOMContentLoaded",yn),B.addEventListener("load",yn));var Cn=function(d,p,C,E,A,R,M){var Q=0,G=d.length,ue=null==C;if("object"===Ve(C))for(Q in A=!0,C)Cn(d,p,Q,C[Q],!0,R,M);else if(void 0!==E&&(A=!0,Y(E)||(M=!0),ue&&(M?(p.call(d,E),p=null):(ue=p,p=function(_e,Oe,ge){return ue.call(b(_e),ge)})),p))for(;Q<G;Q++)p(d[Q],C,M?E:E.call(d[Q],Q,p(d[Q],C)));return A?d:ue?p.call(d):G?p(d[0],C):R},rn=/^-ms-/,Zo=/-([a-z])/g;function _a(d,p){return p.toUpperCase()}function pn(d){return d.replace(rn,"ms-").replace(Zo,_a)}var fr=function(d){return 1===d.nodeType||9===d.nodeType||!+d.nodeType};function Sr(){this.expando=b.expando+Sr.uid++}Sr.uid=1,Sr.prototype={cache:function(d){var p=d[this.expando];return p||(p={},fr(d)&&(d.nodeType?d[this.expando]=p:Object.defineProperty(d,this.expando,{value:p,configurable:!0}))),p},set:function(d,p,C){var E,A=this.cache(d);if("string"==typeof p)A[pn(p)]=C;else for(E in p)A[pn(E)]=p[E];return A},get:function(d,p){return void 0===p?this.cache(d):d[this.expando]&&d[this.expando][pn(p)]},access:function(d,p,C){return void 0===p||p&&"string"==typeof p&&void 0===C?this.get(d,p):(this.set(d,p,C),void 0!==C?C:p)},remove:function(d,p){var C,E=d[this.expando];if(void 0!==E){if(void 0!==p)for((C=(p=Array.isArray(p)?p.map(pn):(p=pn(p))in E?[p]:p.match(wt)||[]).length);C--;)delete E[p[C]];(void 0===p||b.isEmptyObject(E))&&(d.nodeType?d[this.expando]=void 0:delete d[this.expando])}},hasData:function(d){var p=d[this.expando];return void 0!==p&&!b.isEmptyObject(p)}};var mt=new Sr,Vn=new Sr,Ao=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Mr=/[A-Z]/g;function xn(d,p,C){var E,A;if(void 0===C&&1===d.nodeType)if(E="data-"+p.replace(Mr,"-$&").toLowerCase(),"string"==typeof(C=d.getAttribute(E))){try{C="true"===(A=C)||"false"!==A&&("null"===A?null:A===+A+""?+A:Ao.test(A)?JSON.parse(A):A)}catch(R){}Vn.set(d,p,C)}else C=void 0;return C}b.extend({hasData:function(d){return Vn.hasData(d)||mt.hasData(d)},data:function(d,p,C){return Vn.access(d,p,C)},removeData:function(d,p){Vn.remove(d,p)},_data:function(d,p,C){return mt.access(d,p,C)},_removeData:function(d,p){mt.remove(d,p)}}),b.fn.extend({data:function(d,p){var C,E,A,R=this[0],M=R&&R.attributes;if(void 0===d){if(this.length&&(A=Vn.get(R),1===R.nodeType&&!mt.get(R,"hasDataAttrs"))){for(C=M.length;C--;)M[C]&&0===(E=M[C].name).indexOf("data-")&&(E=pn(E.slice(5)),xn(R,E,A[E]));mt.set(R,"hasDataAttrs",!0)}return A}return"object"==typeof d?this.each(function(){Vn.set(this,d)}):Cn(this,function(Q){var G;if(R&&void 0===Q)return void 0!==(G=Vn.get(R,d))||void 0!==(G=xn(R,d))?G:void 0;this.each(function(){Vn.set(this,d,Q)})},null,p,1<arguments.length,null,!0)},removeData:function(d){return this.each(function(){Vn.remove(this,d)})}}),b.extend({queue:function(d,p,C){var E;if(d)return E=mt.get(d,p=(p||"fx")+"queue"),C&&(!E||Array.isArray(C)?E=mt.access(d,p,b.makeArray(C)):E.push(C)),E||[]},dequeue:function(d,p){var C=b.queue(d,p=p||"fx"),E=C.length,A=C.shift(),R=b._queueHooks(d,p);"inprogress"===A&&(A=C.shift(),E--),A&&("fx"===p&&C.unshift("inprogress"),delete R.stop,A.call(d,function(){b.dequeue(d,p)},R)),!E&&R&&R.empty.fire()},_queueHooks:function(d,p){var C=p+"queueHooks";return mt.get(d,C)||mt.access(d,C,{empty:b.Callbacks("once memory").add(function(){mt.remove(d,[p+"queue",C])})})}}),b.fn.extend({queue:function(d,p){var C=2;return"string"!=typeof d&&(p=d,d="fx",C--),arguments.length<C?b.queue(this[0],d):void 0===p?this:this.each(function(){var E=b.queue(this,d,p);b._queueHooks(this,d),"fx"===d&&"inprogress"!==E[0]&&b.dequeue(this,d)})},dequeue:function(d){return this.each(function(){b.dequeue(this,d)})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,p){var C,E=1,A=b.Deferred(),R=this,M=this.length,Q=function(){--E||A.resolveWith(R,[R])};for("string"!=typeof d&&(p=d,d=void 0),d=d||"fx";M--;)(C=mt.get(R[M],d+"queueHooks"))&&C.empty&&(E++,C.empty.add(Q));return Q(),A.promise(p)}});var mo=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,gn=new RegExp("^(?:([+-])=|)("+mo+")([a-z%]*)$","i"),kn=["Top","Right","Bottom","Left"],on=le.documentElement,No=function(d){return b.contains(d.ownerDocument,d)},qt={composed:!0};on.getRootNode&&(No=function(d){return b.contains(d.ownerDocument,d)||d.getRootNode(qt)===d.ownerDocument});var ho=function(d,p){return"none"===(d=p||d).style.display||""===d.style.display&&No(d)&&"none"===b.css(d,"display")};function Ei(d,p,C,E){var A,R,M=20,Q=E?function(){return E.cur()}:function(){return b.css(d,p,"")},G=Q(),ue=C&&C[3]||(b.cssNumber[p]?"":"px"),_e=d.nodeType&&(b.cssNumber[p]||"px"!==ue&&+G)&&gn.exec(b.css(d,p));if(_e&&_e[3]!==ue){for(ue=ue||_e[3],_e=+(G/=2)||1;M--;)b.style(d,p,_e+ue),(1-R)*(1-(R=Q()/G||.5))<=0&&(M=0),_e/=R;b.style(d,p,(_e*=2)+ue),C=C||[]}return C&&(_e=+_e||+G||0,A=C[1]?_e+(C[1]+1)*C[2]:+C[2],E&&(E.unit=ue,E.start=_e,E.end=A)),A}var wi={};function Jr(d,p){for(var C,E,A,R,M,Q,G,ue=[],_e=0,Oe=d.length;_e<Oe;_e++)(E=d[_e]).style&&(C=E.style.display,p?("none"===C&&(ue[_e]=mt.get(E,"display")||null,ue[_e]||(E.style.display="")),""===E.style.display&&ho(E)&&(ue[_e]=(G=M=R=void 0,M=(A=E).ownerDocument,(G=wi[Q=A.nodeName])||(R=M.body.appendChild(M.createElement(Q)),G=b.css(R,"display"),R.parentNode.removeChild(R),"none"===G&&(G="block"),wi[Q]=G)))):"none"!==C&&(ue[_e]="none",mt.set(E,"display",C)));for(_e=0;_e<Oe;_e++)null!=ue[_e]&&(d[_e].style.display=ue[_e]);return d}b.fn.extend({show:function(){return Jr(this,!0)},hide:function(){return Jr(this)},toggle:function(d){return"boolean"==typeof d?d?this.show():this.hide():this.each(function(){ho(this)?b(this).show():b(this).hide()})}});var _r,Ro,vo=/^(?:checkbox|radio)$/i,Ut=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,yt=/^$|^module$|\/(?:java|ecma)script/i;_r=le.createDocumentFragment().appendChild(le.createElement("div")),(Ro=le.createElement("input")).setAttribute("type","radio"),Ro.setAttribute("checked","checked"),Ro.setAttribute("name","t"),_r.appendChild(Ro),ne.checkClone=_r.cloneNode(!0).cloneNode(!0).lastChild.checked,_r.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!_r.cloneNode(!0).lastChild.defaultValue,_r.innerHTML="<option></option>",ne.option=!!_r.lastChild;var mn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Jn(d,p){var C;return C=void 0!==d.getElementsByTagName?d.getElementsByTagName(p||"*"):void 0!==d.querySelectorAll?d.querySelectorAll(p||"*"):[],void 0===p||p&&We(d,p)?b.merge([d],C):C}function zi(d,p){for(var C=0,E=d.length;C<E;C++)mt.set(d[C],"globalEval",!p||mt.get(p[C],"globalEval"))}mn.tbody=mn.tfoot=mn.colgroup=mn.caption=mn.thead,mn.th=mn.td,ne.option||(mn.optgroup=mn.option=[1,"<select multiple='multiple'>","</select>"]);var Ea=/<|&#?\w+;/;function ei(d,p,C,E,A){for(var R,M,Q,G,ue,_e,Oe=p.createDocumentFragment(),ge=[],Be=0,I=d.length;Be<I;Be++)if((R=d[Be])||0===R)if("object"===Ve(R))b.merge(ge,R.nodeType?[R]:R);else if(Ea.test(R)){for(M=M||Oe.appendChild(p.createElement("div")),Q=(Ut.exec(R)||["",""])[1].toLowerCase(),M.innerHTML=(G=mn[Q]||mn._default)[1]+b.htmlPrefilter(R)+G[2],_e=G[0];_e--;)M=M.lastChild;b.merge(ge,M.childNodes),(M=Oe.firstChild).textContent=""}else ge.push(p.createTextNode(R));for(Oe.textContent="",Be=0;R=ge[Be++];)if(E&&-1<b.inArray(R,E))A&&A.push(R);else if(ue=No(R),M=Jn(Oe.appendChild(R),"script"),ue&&zi(M),C)for(_e=0;R=M[_e++];)yt.test(R.type||"")&&C.push(R);return Oe}var xi=/^([^.]*)(?:\.(.+)|)/;function Er(){return!0}function Zr(){return!1}function Vi(d,p,C,E,A,R){var M,Q;if("object"==typeof p){for(Q in"string"!=typeof C&&(E=E||C,C=void 0),p)Vi(d,Q,C,E,p[Q],R);return d}if(null==E&&null==A?(A=C,E=C=void 0):null==A&&("string"==typeof C?(A=E,E=void 0):(A=E,E=C,C=void 0)),!1===A)A=Zr;else if(!A)return d;return 1===R&&(M=A,(A=function(G){return b().off(G),M.apply(this,arguments)}).guid=M.guid||(M.guid=b.guid++)),d.each(function(){b.event.add(this,p,A,E,C)})}function qr(d,p,C){C?(mt.set(d,p,!1),b.event.add(d,p,{namespace:!1,handler:function(E){var A,R=mt.get(this,p);if(1&E.isTrigger&&this[p]){if(R)(b.event.special[p]||{}).delegateType&&E.stopPropagation();else if(R=w.call(arguments),mt.set(this,p,R),this[p](),A=mt.get(this,p),mt.set(this,p,!1),R!==A)return E.stopImmediatePropagation(),E.preventDefault(),A}else R&&(mt.set(this,p,b.event.trigger(R[0],R.slice(1),this)),E.stopPropagation(),E.isImmediatePropagationStopped=Er)}})):void 0===mt.get(d,p)&&b.event.add(d,p,Er)}b.event={global:{},add:function(d,p,C,E,A){var R,M,Q,G,ue,_e,Oe,ge,Be,I,Nt,At=mt.get(d);if(fr(d))for(C.handler&&(C=(R=C).handler,A=R.selector),A&&b.find.matchesSelector(on,A),C.guid||(C.guid=b.guid++),(G=At.events)||(G=At.events=Object.create(null)),(M=At.handle)||(M=At.handle=function(Xt){return void 0!==b&&b.event.triggered!==Xt.type?b.event.dispatch.apply(d,arguments):void 0}),ue=(p=(p||"").match(wt)||[""]).length;ue--;)Be=Nt=(Q=xi.exec(p[ue])||[])[1],I=(Q[2]||"").split(".").sort(),Be&&(Oe=b.event.special[Be]||{},Oe=b.event.special[Be=(A?Oe.delegateType:Oe.bindType)||Be]||{},_e=b.extend({type:Be,origType:Nt,data:E,handler:C,guid:C.guid,selector:A,needsContext:A&&b.expr.match.needsContext.test(A),namespace:I.join(".")},R),(ge=G[Be])||((ge=G[Be]=[]).delegateCount=0,Oe.setup&&!1!==Oe.setup.call(d,E,I,M)||d.addEventListener&&d.addEventListener(Be,M)),Oe.add&&(Oe.add.call(d,_e),_e.handler.guid||(_e.handler.guid=C.guid)),A?ge.splice(ge.delegateCount++,0,_e):ge.push(_e),b.event.global[Be]=!0)},remove:function(d,p,C,E,A){var R,M,Q,G,ue,_e,Oe,ge,Be,I,Nt,At=mt.hasData(d)&&mt.get(d);if(At&&(G=At.events)){for(ue=(p=(p||"").match(wt)||[""]).length;ue--;)if(Be=Nt=(Q=xi.exec(p[ue])||[])[1],I=(Q[2]||"").split(".").sort(),Be){for(Oe=b.event.special[Be]||{},ge=G[Be=(E?Oe.delegateType:Oe.bindType)||Be]||[],Q=Q[2]&&new RegExp("(^|\\.)"+I.join("\\.(?:.*\\.|)")+"(\\.|$)"),M=R=ge.length;R--;)_e=ge[R],!A&&Nt!==_e.origType||C&&C.guid!==_e.guid||Q&&!Q.test(_e.namespace)||E&&E!==_e.selector&&("**"!==E||!_e.selector)||(ge.splice(R,1),_e.selector&&ge.delegateCount--,Oe.remove&&Oe.remove.call(d,_e));M&&!ge.length&&(Oe.teardown&&!1!==Oe.teardown.call(d,I,At.handle)||b.removeEvent(d,Be,At.handle),delete G[Be])}else for(Be in G)b.event.remove(d,Be+p[ue],C,E,!0);b.isEmptyObject(G)&&mt.remove(d,"handle events")}},dispatch:function(d){var p,C,E,A,R,M,Q=new Array(arguments.length),G=b.event.fix(d),ue=(mt.get(this,"events")||Object.create(null))[G.type]||[],_e=b.event.special[G.type]||{};for(Q[0]=G,p=1;p<arguments.length;p++)Q[p]=arguments[p];if(G.delegateTarget=this,!_e.preDispatch||!1!==_e.preDispatch.call(this,G)){for(M=b.event.handlers.call(this,G,ue),p=0;(A=M[p++])&&!G.isPropagationStopped();)for(G.currentTarget=A.elem,C=0;(R=A.handlers[C++])&&!G.isImmediatePropagationStopped();)G.rnamespace&&!1!==R.namespace&&!G.rnamespace.test(R.namespace)||(G.handleObj=R,G.data=R.data,void 0!==(E=((b.event.special[R.origType]||{}).handle||R.handler).apply(A.elem,Q))&&!1===(G.result=E)&&(G.preventDefault(),G.stopPropagation()));return _e.postDispatch&&_e.postDispatch.call(this,G),G.result}},handlers:function(d,p){var C,E,A,R,M,Q=[],G=p.delegateCount,ue=d.target;if(G&&ue.nodeType&&!("click"===d.type&&1<=d.button))for(;ue!==this;ue=ue.parentNode||this)if(1===ue.nodeType&&("click"!==d.type||!0!==ue.disabled)){for(R=[],M={},C=0;C<G;C++)void 0===M[A=(E=p[C]).selector+" "]&&(M[A]=E.needsContext?-1<b(A,this).index(ue):b.find(A,this,null,[ue]).length),M[A]&&R.push(E);R.length&&Q.push({elem:ue,handlers:R})}return ue=this,G<p.length&&Q.push({elem:ue,handlers:p.slice(G)}),Q},addProp:function(d,p){Object.defineProperty(b.Event.prototype,d,{enumerable:!0,configurable:!0,get:Y(p)?function(){if(this.originalEvent)return p(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[d]},set:function(C){Object.defineProperty(this,d,{enumerable:!0,configurable:!0,writable:!0,value:C})}})},fix:function(d){return d[b.expando]?d:new b.Event(d)},special:{load:{noBubble:!0},click:{setup:function(d){var p=this||d;return vo.test(p.type)&&p.click&&We(p,"input")&&qr(p,"click",!0),!1},trigger:function(d){var p=this||d;return vo.test(p.type)&&p.click&&We(p,"input")&&qr(p,"click"),!0},_default:function(d){var p=d.target;return vo.test(p.type)&&p.click&&We(p,"input")&&mt.get(p,"click")||We(p,"a")}},beforeunload:{postDispatch:function(d){void 0!==d.result&&d.originalEvent&&(d.originalEvent.returnValue=d.result)}}}},b.removeEvent=function(d,p,C){d.removeEventListener&&d.removeEventListener(p,C)},b.Event=function(d,p){if(!(this instanceof b.Event))return new b.Event(d,p);d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||void 0===d.defaultPrevented&&!1===d.returnValue?Er:Zr,this.target=d.target&&3===d.target.nodeType?d.target.parentNode:d.target,this.currentTarget=d.currentTarget,this.relatedTarget=d.relatedTarget):this.type=d,p&&b.extend(this,p),this.timeStamp=d&&d.timeStamp||Date.now(),this[b.expando]=!0},b.Event.prototype={constructor:b.Event,isDefaultPrevented:Zr,isPropagationStopped:Zr,isImmediatePropagationStopped:Zr,isSimulated:!1,preventDefault:function(){var d=this.originalEvent;this.isDefaultPrevented=Er,d&&!this.isSimulated&&d.preventDefault()},stopPropagation:function(){var d=this.originalEvent;this.isPropagationStopped=Er,d&&!this.isSimulated&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.originalEvent;this.isImmediatePropagationStopped=Er,d&&!this.isSimulated&&d.stopImmediatePropagation(),this.stopPropagation()}},b.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},b.event.addProp),b.each({focus:"focusin",blur:"focusout"},function(d,p){function C(E){if(le.documentMode){var A=mt.get(this,"handle"),R=b.event.fix(E);R.type="focusin"===E.type?"focus":"blur",R.isSimulated=!0,A(E),R.target===R.currentTarget&&A(R)}else b.event.simulate(p,E.target,b.event.fix(E))}b.event.special[d]={setup:function(){var E;if(qr(this,d,!0),!le.documentMode)return!1;(E=mt.get(this,p))||this.addEventListener(p,C),mt.set(this,p,(E||0)+1)},trigger:function(){return qr(this,d),!0},teardown:function(){var E;if(!le.documentMode)return!1;(E=mt.get(this,p)-1)?mt.set(this,p,E):(this.removeEventListener(p,C),mt.remove(this,p))},_default:function(E){return mt.get(E.target,d)},delegateType:p},b.event.special[p]={setup:function(){var E=this.ownerDocument||this.document||this,A=le.documentMode?this:E,R=mt.get(A,p);R||(le.documentMode?this.addEventListener(p,C):E.addEventListener(d,C,!0)),mt.set(A,p,(R||0)+1)},teardown:function(){var E=this.ownerDocument||this.document||this,A=le.documentMode?this:E,R=mt.get(A,p)-1;R?mt.set(A,p,R):(le.documentMode?this.removeEventListener(p,C):E.removeEventListener(d,C,!0),mt.remove(A,p))}}}),b.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(d,p){b.event.special[d]={delegateType:p,bindType:p,handle:function(C){var E,A=C.relatedTarget,R=C.handleObj;return A&&(A===this||b.contains(this,A))||(C.type=R.origType,E=R.handler.apply(this,arguments),C.type=p),E}}}),b.fn.extend({on:function(d,p,C,E){return Vi(this,d,p,C,E)},one:function(d,p,C,E){return Vi(this,d,p,C,E,1)},off:function(d,p,C){var E,A;if(d&&d.preventDefault&&d.handleObj)return E=d.handleObj,b(d.delegateTarget).off(E.namespace?E.origType+"."+E.namespace:E.origType,E.selector,E.handler),this;if("object"==typeof d){for(A in d)this.off(A,p,d[A]);return this}return!1!==p&&"function"!=typeof p||(C=p,p=void 0),!1===C&&(C=Zr),this.each(function(){b.event.remove(this,d,C,p)})}});var zr=/<script|<style|<link/i,ki=/checked\s*(?:[^=]|=\s*.checked.)/i,Po=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function bo(d,p){return We(d,"table")&&We(11!==p.nodeType?p:p.firstChild,"tr")&&b(d).children("tbody")[0]||d}function Ti(d){return d.type=(null!==d.getAttribute("type"))+"/"+d.type,d}function wa(d){return"true/"===(d.type||"").slice(0,5)?d.type=d.type.slice(5):d.removeAttribute("type"),d}function xa(d,p){var C,E,A,R,M,Q;if(1===p.nodeType){if(mt.hasData(d)&&(Q=mt.get(d).events))for(A in mt.remove(p,"handle events"),Q)for(C=0,E=Q[A].length;C<E;C++)b.event.add(p,A,Q[A][C]);Vn.hasData(d)&&(R=Vn.access(d),M=b.extend({},R),Vn.set(p,M))}}function an(d,p,C,E){p=oe(p);var A,R,M,Q,G,ue,_e=0,Oe=d.length,ge=Oe-1,Be=p[0],I=Y(Be);if(I||1<Oe&&"string"==typeof Be&&!ne.checkClone&&ki.test(Be))return d.each(function(Nt){var At=d.eq(Nt);I&&(p[0]=Be.call(this,Nt,At.html())),an(At,p,C,E)});if(Oe&&(R=(A=ei(p,d[0].ownerDocument,!1,d,E)).firstChild,1===A.childNodes.length&&(A=R),R||E)){for(Q=(M=b.map(Jn(A,"script"),Ti)).length;_e<Oe;_e++)G=A,_e!==ge&&(G=b.clone(G,!0,!0),Q&&b.merge(M,Jn(G,"script"))),C.call(d[_e],G,_e);if(Q)for(ue=M[M.length-1].ownerDocument,b.map(M,wa),_e=0;_e<Q;_e++)yt.test((G=M[_e]).type||"")&&!mt.access(G,"globalEval")&&b.contains(ue,G)&&(G.src&&"module"!==(G.type||"").toLowerCase()?b._evalUrl&&!G.noModule&&b._evalUrl(G.src,{nonce:G.nonce||G.getAttribute("nonce")},ue):Je(G.textContent.replace(Po,""),G,ue))}return d}function Sn(d,p,C){for(var E,A=p?b.filter(p,d):d,R=0;null!=(E=A[R]);R++)C||1!==E.nodeType||b.cleanData(Jn(E)),E.parentNode&&(C&&No(E)&&zi(Jn(E,"script")),E.parentNode.removeChild(E));return d}b.extend({htmlPrefilter:function(d){return d},clone:function(d,p,C){var E,A,R,M,Q,G,ue,_e=d.cloneNode(!0),Oe=No(d);if(!(ne.noCloneChecked||1!==d.nodeType&&11!==d.nodeType||b.isXMLDoc(d)))for(M=Jn(_e),E=0,A=(R=Jn(d)).length;E<A;E++)Q=R[E],"input"===(ue=(G=M[E]).nodeName.toLowerCase())&&vo.test(Q.type)?G.checked=Q.checked:"input"!==ue&&"textarea"!==ue||(G.defaultValue=Q.defaultValue);if(p)if(C)for(R=R||Jn(d),M=M||Jn(_e),E=0,A=R.length;E<A;E++)xa(R[E],M[E]);else xa(d,_e);return 0<(M=Jn(_e,"script")).length&&zi(M,!Oe&&Jn(d,"script")),_e},cleanData:function(d){for(var p,C,E,A=b.event.special,R=0;void 0!==(C=d[R]);R++)if(fr(C)){if(p=C[mt.expando]){if(p.events)for(E in p.events)A[E]?b.event.remove(C,E):b.removeEvent(C,E,p.handle);C[mt.expando]=void 0}C[Vn.expando]&&(C[Vn.expando]=void 0)}}}),b.fn.extend({detach:function(d){return Sn(this,d,!0)},remove:function(d){return Sn(this,d)},text:function(d){return Cn(this,function(p){return void 0===p?b.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=p)})},null,d,arguments.length)},append:function(){return an(this,arguments,function(d){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||bo(this,d).appendChild(d)})},prepend:function(){return an(this,arguments,function(d){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var p=bo(this,d);p.insertBefore(d,p.firstChild)}})},before:function(){return an(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this)})},after:function(){return an(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)})},empty:function(){for(var d,p=0;null!=(d=this[p]);p++)1===d.nodeType&&(b.cleanData(Jn(d,!1)),d.textContent="");return this},clone:function(d,p){return d=null!=d&&d,p=null==p?d:p,this.map(function(){return b.clone(this,d,p)})},html:function(d){return Cn(this,function(p){var C=this[0]||{},E=0,A=this.length;if(void 0===p&&1===C.nodeType)return C.innerHTML;if("string"==typeof p&&!zr.test(p)&&!mn[(Ut.exec(p)||["",""])[1].toLowerCase()]){p=b.htmlPrefilter(p);try{for(;E<A;E++)1===(C=this[E]||{}).nodeType&&(b.cleanData(Jn(C,!1)),C.innerHTML=p);C=0}catch(R){}}C&&this.empty().append(p)},null,d,arguments.length)},replaceWith:function(){var d=[];return an(this,arguments,function(p){var C=this.parentNode;b.inArray(this,d)<0&&(b.cleanData(Jn(this)),C&&C.replaceChild(p,this))},d)}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,p){b.fn[d]=function(C){for(var E,A=[],R=b(C),M=R.length-1,Q=0;Q<=M;Q++)E=Q===M?this:this.clone(!0),b(R[Q])[p](E),j.apply(A,E.get());return this.pushStack(A)}});var Ai=new RegExp("^("+mo+")(?!px)[a-z%]+$","i"),Ir=/^--/,Lr=function(d){var p=d.ownerDocument.defaultView;return p&&p.opener||(p=B),p.getComputedStyle(d)},fs=function(d,p,C){var E,A,R={};for(A in p)R[A]=d.style[A],d.style[A]=p[A];for(A in E=C.call(d),p)d.style[A]=R[A];return E},ps=new RegExp(kn.join("|"),"i");function nr(d,p,C){var E,A,R,M,Q=Ir.test(p),G=d.style;return(C=C||Lr(d))&&(M=C.getPropertyValue(p)||C[p],Q&&M&&(M=M.replace(bn,"$1")||void 0),""!==M||No(d)||(M=b.style(d,p)),!ne.pixelBoxStyles()&&Ai.test(M)&&ps.test(p)&&(E=G.width,A=G.minWidth,R=G.maxWidth,G.minWidth=G.maxWidth=G.width=M,M=C.width,G.width=E,G.minWidth=A,G.maxWidth=R)),void 0!==M?M+"":M}function ti(d,p){return{get:function(){if(!d())return(this.get=p).apply(this,arguments);delete this.get}}}!function(){function d(){if(ue){G.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ue.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",on.appendChild(G).appendChild(ue);var _e=B.getComputedStyle(ue);C="1%"!==_e.top,Q=12===p(_e.marginLeft),ue.style.right="60%",R=36===p(_e.right),E=36===p(_e.width),ue.style.position="absolute",A=12===p(ue.offsetWidth/3),on.removeChild(G),ue=null}}function p(_e){return Math.round(parseFloat(_e))}var C,E,A,R,M,Q,G=le.createElement("div"),ue=le.createElement("div");ue.style&&(ue.style.backgroundClip="content-box",ue.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===ue.style.backgroundClip,b.extend(ne,{boxSizingReliable:function(){return d(),E},pixelBoxStyles:function(){return d(),R},pixelPosition:function(){return d(),C},reliableMarginLeft:function(){return d(),Q},scrollboxSize:function(){return d(),A},reliableTrDimensions:function(){var _e,Oe,ge,Be;return null==M&&(_e=le.createElement("table"),Oe=le.createElement("tr"),ge=le.createElement("div"),_e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Oe.style.cssText="border:1px solid",Oe.style.height="1px",ge.style.height="9px",ge.style.display="block",on.appendChild(_e).appendChild(Oe).appendChild(ge),Be=B.getComputedStyle(Oe),M=parseInt(Be.height,10)+parseInt(Be.borderTopWidth,10)+parseInt(Be.borderBottomWidth,10)===Oe.offsetHeight,on.removeChild(_e)),M}}))}();var Ni=["Webkit","Moz","ms"],Oo=le.createElement("div").style,Gn={};function Ri(d){return b.cssProps[d]||Gn[d]||(d in Oo?d:Gn[d]=function(C){for(var E=C[0].toUpperCase()+C.slice(1),A=Ni.length;A--;)if((C=Ni[A]+E)in Oo)return C}(d)||d)}var el=/^(none|table(?!-c[ea]).+)/,yo={position:"absolute",visibility:"hidden",display:"block"},Gi={letterSpacing:"0",fontWeight:"400"};function Ki(d,p,C){var E=gn.exec(p);return E?Math.max(0,E[2]-(C||0))+(E[3]||"px"):p}function Pi(d,p,C,E,A,R){var M="width"===p?1:0,Q=0,G=0,ue=0;if(C===(E?"border":"content"))return 0;for(;M<4;M+=2)"margin"===C&&(ue+=b.css(d,C+kn[M],!0,A)),E?("content"===C&&(G-=b.css(d,"padding"+kn[M],!0,A)),"margin"!==C&&(G-=b.css(d,"border"+kn[M]+"Width",!0,A))):(G+=b.css(d,"padding"+kn[M],!0,A),"padding"!==C?G+=b.css(d,"border"+kn[M]+"Width",!0,A):Q+=b.css(d,"border"+kn[M]+"Width",!0,A));return!E&&0<=R&&(G+=Math.max(0,Math.ceil(d["offset"+p[0].toUpperCase()+p.slice(1)]-R-G-Q-.5))||0),G+ue}function ka(d,p,C){var E=Lr(d),A=(!ne.boxSizingReliable()||C)&&"border-box"===b.css(d,"boxSizing",!1,E),R=A,M=nr(d,p,E),Q="offset"+p[0].toUpperCase()+p.slice(1);if(Ai.test(M)){if(!C)return M;M="auto"}return(!ne.boxSizingReliable()&&A||!ne.reliableTrDimensions()&&We(d,"tr")||"auto"===M||!parseFloat(M)&&"inline"===b.css(d,"display",!1,E))&&d.getClientRects().length&&(A="border-box"===b.css(d,"boxSizing",!1,E),(R=Q in d)&&(M=d[Q])),(M=parseFloat(M)||0)+Pi(d,p,C||(A?"border":"content"),R,E,M)+"px"}function Kn(d,p,C,E,A){return new Kn.prototype.init(d,p,C,E,A)}b.extend({cssHooks:{opacity:{get:function(d,p){if(p){var C=nr(d,"opacity");return""===C?"1":C}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(d,p,C,E){if(d&&3!==d.nodeType&&8!==d.nodeType&&d.style){var A,R,M,Q=pn(p),G=Ir.test(p),ue=d.style;if(G||(p=Ri(Q)),M=b.cssHooks[p]||b.cssHooks[Q],void 0===C)return M&&"get"in M&&void 0!==(A=M.get(d,!1,E))?A:ue[p];"string"==(R=typeof C)&&(A=gn.exec(C))&&A[1]&&(C=Ei(d,p,A),R="number"),null!=C&&C==C&&("number"!==R||G||(C+=A&&A[3]||(b.cssNumber[Q]?"":"px")),ne.clearCloneStyle||""!==C||0!==p.indexOf("background")||(ue[p]="inherit"),M&&"set"in M&&void 0===(C=M.set(d,C,E))||(G?ue.setProperty(p,C):ue[p]=C))}},css:function(d,p,C,E){var A,R,M,Q=pn(p);return Ir.test(p)||(p=Ri(Q)),(M=b.cssHooks[p]||b.cssHooks[Q])&&"get"in M&&(A=M.get(d,!0,C)),void 0===A&&(A=nr(d,p,E)),"normal"===A&&p in Gi&&(A=Gi[p]),""===C||C?(R=parseFloat(A),!0===C||isFinite(R)?R||0:A):A}}),b.each(["height","width"],function(d,p){b.cssHooks[p]={get:function(C,E,A){if(E)return!el.test(b.css(C,"display"))||C.getClientRects().length&&C.getBoundingClientRect().width?ka(C,p,A):fs(C,yo,function(){return ka(C,p,A)})},set:function(C,E,A){var R,M=Lr(C),Q=!ne.scrollboxSize()&&"absolute"===M.position,G=(Q||A)&&"border-box"===b.css(C,"boxSizing",!1,M),ue=A?Pi(C,p,A,G,M):0;return G&&Q&&(ue-=Math.ceil(C["offset"+p[0].toUpperCase()+p.slice(1)]-parseFloat(M[p])-Pi(C,p,"border",!1,M)-.5)),ue&&(R=gn.exec(E))&&"px"!==(R[3]||"px")&&(C.style[p]=E,E=b.css(C,p)),Ki(0,E,ue)}}}),b.cssHooks.marginLeft=ti(ne.reliableMarginLeft,function(d,p){if(p)return(parseFloat(nr(d,"marginLeft"))||d.getBoundingClientRect().left-fs(d,{marginLeft:0},function(){return d.getBoundingClientRect().left}))+"px"}),b.each({margin:"",padding:"",border:"Width"},function(d,p){b.cssHooks[d+p]={expand:function(C){for(var E=0,A={},R="string"==typeof C?C.split(" "):[C];E<4;E++)A[d+kn[E]+p]=R[E]||R[E-2]||R[0];return A}},"margin"!==d&&(b.cssHooks[d+p].set=Ki)}),b.fn.extend({css:function(d,p){return Cn(this,function(C,E,A){var R,M,Q={},G=0;if(Array.isArray(E)){for(R=Lr(C),M=E.length;G<M;G++)Q[E[G]]=b.css(C,E[G],!1,R);return Q}return void 0!==A?b.style(C,E,A):b.css(C,E)},d,p,1<arguments.length)}}),((b.Tween=Kn).prototype={constructor:Kn,init:function(d,p,C,E,A,R){this.elem=d,this.prop=C,this.easing=A||b.easing._default,this.options=p,this.start=this.now=this.cur(),this.end=E,this.unit=R||(b.cssNumber[C]?"":"px")},cur:function(){var d=Kn.propHooks[this.prop];return d&&d.get?d.get(this):Kn.propHooks._default.get(this)},run:function(d){var p,C=Kn.propHooks[this.prop];return this.pos=p=this.options.duration?b.easing[this.easing](d,this.options.duration*d,0,1,this.options.duration):d,this.now=(this.end-this.start)*p+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),C&&C.set?C.set(this):Kn.propHooks._default.set(this),this}}).init.prototype=Kn.prototype,(Kn.propHooks={_default:{get:function(d){var p;return 1!==d.elem.nodeType||null!=d.elem[d.prop]&&null==d.elem.style[d.prop]?d.elem[d.prop]:(p=b.css(d.elem,d.prop,""))&&"auto"!==p?p:0},set:function(d){b.fx.step[d.prop]?b.fx.step[d.prop](d):1!==d.elem.nodeType||!b.cssHooks[d.prop]&&null==d.elem.style[Ri(d.prop)]?d.elem[d.prop]=d.now:b.style(d.elem,d.prop,d.now+d.unit)}}}).scrollTop=Kn.propHooks.scrollLeft={set:function(d){d.elem.nodeType&&d.elem.parentNode&&(d.elem[d.prop]=d.now)}},b.easing={linear:function(d){return d},swing:function(d){return.5-Math.cos(d*Math.PI)/2},_default:"swing"},b.fx=Kn.prototype.init,b.fx.step={};var eo,$i,Vr,Yi,Ta=/^(?:toggle|show|hide)$/,Aa=/queueHooks$/;function Oi(){$i&&(!1===le.hidden&&B.requestAnimationFrame?B.requestAnimationFrame(Oi):B.setTimeout(Oi,b.fx.interval),b.fx.tick())}function Do(){return B.setTimeout(function(){eo=void 0}),eo=Date.now()}function Mo(d,p){var C,E=0,A={height:d};for(p=p?1:0;E<4;E+=2-p)A["margin"+(C=kn[E])]=A["padding"+C]=d;return p&&(A.opacity=A.width=d),A}function Na(d,p,C){for(var E,A=(pr.tweeners[p]||[]).concat(pr.tweeners["*"]),R=0,M=A.length;R<M;R++)if(E=A[R].call(C,p,d))return E}function pr(d,p,C){var E,A,R=0,M=pr.prefilters.length,Q=b.Deferred().always(function(){delete G.elem}),G=function(){if(A)return!1;for(var Oe=eo||Do(),ge=Math.max(0,ue.startTime+ue.duration-Oe),Be=1-(ge/ue.duration||0),I=0,Nt=ue.tweens.length;I<Nt;I++)ue.tweens[I].run(Be);return Q.notifyWith(d,[ue,Be,ge]),Be<1&&Nt?ge:(Nt||Q.notifyWith(d,[ue,1,0]),Q.resolveWith(d,[ue]),!1)},ue=Q.promise({elem:d,props:b.extend({},p),opts:b.extend(!0,{specialEasing:{},easing:b.easing._default},C),originalProperties:p,originalOptions:C,startTime:eo||Do(),duration:C.duration,tweens:[],createTween:function(Oe,ge){var Be=b.Tween(d,ue.opts,Oe,ge,ue.opts.specialEasing[Oe]||ue.opts.easing);return ue.tweens.push(Be),Be},stop:function(Oe){var ge=0,Be=Oe?ue.tweens.length:0;if(A)return this;for(A=!0;ge<Be;ge++)ue.tweens[ge].run(1);return Oe?(Q.notifyWith(d,[ue,1,0]),Q.resolveWith(d,[ue,Oe])):Q.rejectWith(d,[ue,Oe]),this}}),_e=ue.props;for(function(Oe,ge){var Be,I,Nt,At,Xt;for(Be in Oe)if(Nt=ge[I=pn(Be)],At=Oe[Be],Array.isArray(At)&&(Nt=At[1],At=Oe[Be]=At[0]),Be!==I&&(Oe[I]=At,delete Oe[Be]),(Xt=b.cssHooks[I])&&"expand"in Xt)for(Be in At=Xt.expand(At),delete Oe[I],At)Be in Oe||(Oe[Be]=At[Be],ge[Be]=Nt);else ge[I]=Nt}(_e,ue.opts.specialEasing);R<M;R++)if(E=pr.prefilters[R].call(ue,d,_e,ue.opts))return Y(E.stop)&&(b._queueHooks(ue.elem,ue.opts.queue).stop=E.stop.bind(E)),E;return b.map(_e,Na,ue),Y(ue.opts.start)&&ue.opts.start.call(d,ue),ue.progress(ue.opts.progress).done(ue.opts.done,ue.opts.complete).fail(ue.opts.fail).always(ue.opts.always),b.fx.timer(b.extend(G,{elem:d,anim:ue,queue:ue.opts.queue})),ue}b.Animation=b.extend(pr,{tweeners:{"*":[function(d,p){var C=this.createTween(d,p);return Ei(C.elem,d,gn.exec(p),C),C}]},tweener:function(d,p){Y(d)?(p=d,d=["*"]):d=d.match(wt);for(var C,E=0,A=d.length;E<A;E++)(pr.tweeners[C=d[E]]=pr.tweeners[C]||[]).unshift(p)},prefilters:[function(d,p,C){var E,A,R,M,Q,G,ue,_e,Oe="width"in p||"height"in p,ge=this,Be={},I=d.style,Nt=d.nodeType&&ho(d),At=mt.get(d,"fxshow");for(E in C.queue||(null==(M=b._queueHooks(d,"fx")).unqueued&&(M.unqueued=0,Q=M.empty.fire,M.empty.fire=function(){M.unqueued||Q()}),M.unqueued++,ge.always(function(){ge.always(function(){M.unqueued--,b.queue(d,"fx").length||M.empty.fire()})})),p)if(Ta.test(A=p[E])){if(delete p[E],R=R||"toggle"===A,A===(Nt?"hide":"show")){if("show"!==A||!At||void 0===At[E])continue;Nt=!0}Be[E]=At&&At[E]||b.style(d,E)}if((G=!b.isEmptyObject(p))||!b.isEmptyObject(Be))for(E in Oe&&1===d.nodeType&&(C.overflow=[I.overflow,I.overflowX,I.overflowY],null==(ue=At&&At.display)&&(ue=mt.get(d,"display")),"none"===(_e=b.css(d,"display"))&&(ue?_e=ue:(Jr([d],!0),ue=d.style.display||ue,_e=b.css(d,"display"),Jr([d]))),("inline"===_e||"inline-block"===_e&&null!=ue)&&"none"===b.css(d,"float")&&(G||(ge.done(function(){I.display=ue}),null==ue&&(ue="none"===(_e=I.display)?"":_e)),I.display="inline-block")),C.overflow&&(I.overflow="hidden",ge.always(function(){I.overflow=C.overflow[0],I.overflowX=C.overflow[1],I.overflowY=C.overflow[2]})),G=!1,Be)G||(At?"hidden"in At&&(Nt=At.hidden):At=mt.access(d,"fxshow",{display:ue}),R&&(At.hidden=!Nt),Nt&&Jr([d],!0),ge.done(function(){for(E in Nt||Jr([d]),mt.remove(d,"fxshow"),Be)b.style(d,E,Be[E])})),G=Na(Nt?At[E]:0,E,ge),E in At||(At[E]=G.start,Nt&&(G.end=G.start,G.start=0))}],prefilter:function(d,p){p?pr.prefilters.unshift(d):pr.prefilters.push(d)}}),b.speed=function(d,p,C){var E=d&&"object"==typeof d?b.extend({},d):{complete:C||!C&&p||Y(d)&&d,duration:d,easing:C&&p||p&&!Y(p)&&p};return b.fx.off?E.duration=0:"number"!=typeof E.duration&&(E.duration=E.duration in b.fx.speeds?b.fx.speeds[E.duration]:b.fx.speeds._default),null!=E.queue&&!0!==E.queue||(E.queue="fx"),E.old=E.complete,E.complete=function(){Y(E.old)&&E.old.call(this),E.queue&&b.dequeue(this,E.queue)},E},b.fn.extend({fadeTo:function(d,p,C,E){return this.filter(ho).css("opacity",0).show().end().animate({opacity:p},d,C,E)},animate:function(d,p,C,E){var A=b.isEmptyObject(d),R=b.speed(p,C,E),M=function(){var Q=pr(this,b.extend({},d),R);(A||mt.get(this,"finish"))&&Q.stop(!0)};return M.finish=M,A||!1===R.queue?this.each(M):this.queue(R.queue,M)},stop:function(d,p,C){var E=function(A){var R=A.stop;delete A.stop,R(C)};return"string"!=typeof d&&(C=p,p=d,d=void 0),p&&this.queue(d||"fx",[]),this.each(function(){var A=!0,R=null!=d&&d+"queueHooks",M=b.timers,Q=mt.get(this);if(R)Q[R]&&Q[R].stop&&E(Q[R]);else for(R in Q)Q[R]&&Q[R].stop&&Aa.test(R)&&E(Q[R]);for(R=M.length;R--;)M[R].elem!==this||null!=d&&M[R].queue!==d||(M[R].anim.stop(C),A=!1,M.splice(R,1));!A&&C||b.dequeue(this,d)})},finish:function(d){return!1!==d&&(d=d||"fx"),this.each(function(){var p,C=mt.get(this),E=C[d+"queue"],A=C[d+"queueHooks"],R=b.timers,M=E?E.length:0;for(C.finish=!0,b.queue(this,d,[]),A&&A.stop&&A.stop.call(this,!0),p=R.length;p--;)R[p].elem===this&&R[p].queue===d&&(R[p].anim.stop(!0),R.splice(p,1));for(p=0;p<M;p++)E[p]&&E[p].finish&&E[p].finish.call(this);delete C.finish})}}),b.each(["toggle","show","hide"],function(d,p){var C=b.fn[p];b.fn[p]=function(E,A,R){return null==E||"boolean"==typeof E?C.apply(this,arguments):this.animate(Mo(p,!0),E,A,R)}}),b.each({slideDown:Mo("show"),slideUp:Mo("hide"),slideToggle:Mo("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,p){b.fn[d]=function(C,E,A){return this.animate(p,C,E,A)}}),b.timers=[],b.fx.tick=function(){var d,p=0,C=b.timers;for(eo=Date.now();p<C.length;p++)(d=C[p])()||C[p]!==d||C.splice(p--,1);C.length||b.fx.stop(),eo=void 0},b.fx.timer=function(d){b.timers.push(d),b.fx.start()},b.fx.interval=13,b.fx.start=function(){$i||($i=!0,Oi())},b.fx.stop=function(){$i=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fn.delay=function(d,p){return d=b.fx&&b.fx.speeds[d]||d,this.queue(p=p||"fx",function(C,E){var A=B.setTimeout(C,d);E.stop=function(){B.clearTimeout(A)}})},Vr=le.createElement("input"),Yi=le.createElement("select").appendChild(le.createElement("option")),Vr.type="checkbox",ne.checkOn=""!==Vr.value,ne.optSelected=Yi.selected,(Vr=le.createElement("input")).value="t",Vr.type="radio",ne.radioValue="t"===Vr.value;var ni,ri=b.expr.attrHandle;b.fn.extend({attr:function(d,p){return Cn(this,b.attr,d,p,1<arguments.length)},removeAttr:function(d){return this.each(function(){b.removeAttr(this,d)})}}),b.extend({attr:function(d,p,C){var E,A,R=d.nodeType;if(3!==R&&8!==R&&2!==R)return void 0===d.getAttribute?b.prop(d,p,C):(1===R&&b.isXMLDoc(d)||(A=b.attrHooks[p.toLowerCase()]||(b.expr.match.bool.test(p)?ni:void 0)),void 0!==C?null===C?void b.removeAttr(d,p):A&&"set"in A&&void 0!==(E=A.set(d,C,p))?E:(d.setAttribute(p,C+""),C):A&&"get"in A&&null!==(E=A.get(d,p))?E:null==(E=b.find.attr(d,p))?void 0:E)},attrHooks:{type:{set:function(d,p){if(!ne.radioValue&&"radio"===p&&We(d,"input")){var C=d.value;return d.setAttribute("type",p),C&&(d.value=C),p}}}},removeAttr:function(d,p){var C,E=0,A=p&&p.match(wt);if(A&&1===d.nodeType)for(;C=A[E++];)d.removeAttribute(C)}}),ni={set:function(d,p,C){return!1===p?b.removeAttr(d,C):d.setAttribute(C,C),C}},b.each(b.expr.match.bool.source.match(/\w+/g),function(d,p){var C=ri[p]||b.find.attr;ri[p]=function(E,A,R){var M,Q,G=A.toLowerCase();return R||(Q=ri[G],ri[G]=M,M=null!=C(E,A,R)?G:null,ri[G]=Q),M}});var gs=/^(?:input|select|textarea|button)$/i,ms=/^(?:a|area)$/i;function $n(d){return(d.match(wt)||[]).join(" ")}function Gr(d){return d.getAttribute&&d.getAttribute("class")||""}function pe(d){return Array.isArray(d)?d:"string"==typeof d&&d.match(wt)||[]}b.fn.extend({prop:function(d,p){return Cn(this,b.prop,d,p,1<arguments.length)},removeProp:function(d){return this.each(function(){delete this[b.propFix[d]||d]})}}),b.extend({prop:function(d,p,C){var E,A,R=d.nodeType;if(3!==R&&8!==R&&2!==R)return 1===R&&b.isXMLDoc(d)||(A=b.propHooks[p=b.propFix[p]||p]),void 0!==C?A&&"set"in A&&void 0!==(E=A.set(d,C,p))?E:d[p]=C:A&&"get"in A&&null!==(E=A.get(d,p))?E:d[p]},propHooks:{tabIndex:{get:function(d){var p=b.find.attr(d,"tabindex");return p?parseInt(p,10):gs.test(d.nodeName)||ms.test(d.nodeName)&&d.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ne.optSelected||(b.propHooks.selected={get:function(d){return null},set:function(d){}}),b.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){b.propFix[this.toLowerCase()]=this}),b.fn.extend({addClass:function(d){var p,C,E,A,R,M;return Y(d)?this.each(function(Q){b(this).addClass(d.call(this,Q,Gr(this)))}):(p=pe(d)).length?this.each(function(){if(E=Gr(this),C=1===this.nodeType&&" "+$n(E)+" "){for(R=0;R<p.length;R++)C.indexOf(" "+(A=p[R])+" ")<0&&(C+=A+" ");M=$n(C),E!==M&&this.setAttribute("class",M)}}):this},removeClass:function(d){var p,C,E,A,R,M;return Y(d)?this.each(function(Q){b(this).removeClass(d.call(this,Q,Gr(this)))}):arguments.length?(p=pe(d)).length?this.each(function(){if(E=Gr(this),C=1===this.nodeType&&" "+$n(E)+" "){for(R=0;R<p.length;R++)for(A=p[R];-1<C.indexOf(" "+A+" ");)C=C.replace(" "+A+" "," ");M=$n(C),E!==M&&this.setAttribute("class",M)}}):this:this.attr("class","")},toggleClass:function(d,p){var C,E,A,R,M=typeof d,Q="string"===M||Array.isArray(d);return Y(d)?this.each(function(G){b(this).toggleClass(d.call(this,G,Gr(this),p),p)}):"boolean"==typeof p&&Q?p?this.addClass(d):this.removeClass(d):(C=pe(d),this.each(function(){if(Q)for(R=b(this),A=0;A<C.length;A++)R.hasClass(E=C[A])?R.removeClass(E):R.addClass(E);else void 0!==d&&"boolean"!==M||((E=Gr(this))&&mt.set(this,"__className__",E),this.setAttribute&&this.setAttribute("class",E||!1===d?"":mt.get(this,"__className__")||""))}))},hasClass:function(d){var p,C,E=0;for(p=" "+d+" ";C=this[E++];)if(1===C.nodeType&&-1<(" "+$n(Gr(C))+" ").indexOf(p))return!0;return!1}});var re=/\r/g;b.fn.extend({val:function(d){var p,C,E,A=this[0];return arguments.length?(E=Y(d),this.each(function(R){var M;1===this.nodeType&&(null==(M=E?d.call(this,R,b(this).val()):d)?M="":"number"==typeof M?M+="":Array.isArray(M)&&(M=b.map(M,function(Q){return null==Q?"":Q+""})),(p=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])&&"set"in p&&void 0!==p.set(this,M,"value")||(this.value=M))})):A?(p=b.valHooks[A.type]||b.valHooks[A.nodeName.toLowerCase()])&&"get"in p&&void 0!==(C=p.get(A,"value"))?C:"string"==typeof(C=A.value)?C.replace(re,""):null==C?"":C:void 0}}),b.extend({valHooks:{option:{get:function(d){var p=b.find.attr(d,"value");return null!=p?p:$n(b.text(d))}},select:{get:function(d){var p,C,E,A=d.options,R=d.selectedIndex,M="select-one"===d.type,Q=M?null:[],G=M?R+1:A.length;for(E=R<0?G:M?R:0;E<G;E++)if(((C=A[E]).selected||E===R)&&!C.disabled&&(!C.parentNode.disabled||!We(C.parentNode,"optgroup"))){if(p=b(C).val(),M)return p;Q.push(p)}return Q},set:function(d,p){for(var C,E,A=d.options,R=b.makeArray(p),M=A.length;M--;)((E=A[M]).selected=-1<b.inArray(b.valHooks.option.get(E),R))&&(C=!0);return C||(d.selectedIndex=-1),R}}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]={set:function(d,p){if(Array.isArray(p))return d.checked=-1<b.inArray(b(d).val(),p)}},ne.checkOn||(b.valHooks[this].get=function(d){return null===d.getAttribute("value")?"on":d.value})});var _=B.location,O={guid:Date.now()},q=/\?/;b.parseXML=function(d){var p,C;if(!d||"string"!=typeof d)return null;try{p=(new B.DOMParser).parseFromString(d,"text/xml")}catch(E){}return C=p&&p.getElementsByTagName("parsererror")[0],p&&!C||b.error("Invalid XML: "+(C?b.map(C.childNodes,function(E){return E.textContent}).join("\n"):d)),p};var J=/^(?:focusinfocus|focusoutblur)$/,we=function(d){d.stopPropagation()};b.extend(b.event,{trigger:function(d,p,C,E){var A,R,M,Q,G,ue,_e,Oe,ge=[C||le],Be=Xe.call(d,"type")?d.type:d,I=Xe.call(d,"namespace")?d.namespace.split("."):[];if(R=Oe=M=C=C||le,3!==C.nodeType&&8!==C.nodeType&&!J.test(Be+b.event.triggered)&&(-1<Be.indexOf(".")&&(Be=(I=Be.split(".")).shift(),I.sort()),G=Be.indexOf(":")<0&&"on"+Be,(d=d[b.expando]?d:new b.Event(Be,"object"==typeof d&&d)).isTrigger=E?2:3,d.namespace=I.join("."),d.rnamespace=d.namespace?new RegExp("(^|\\.)"+I.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=C),p=null==p?[d]:b.makeArray(p,[d]),_e=b.event.special[Be]||{},E||!_e.trigger||!1!==_e.trigger.apply(C,p))){if(!E&&!_e.noBubble&&!fe(C)){for(J.test((Q=_e.delegateType||Be)+Be)||(R=R.parentNode);R;R=R.parentNode)ge.push(R),M=R;M===(C.ownerDocument||le)&&ge.push(M.defaultView||M.parentWindow||B)}for(A=0;(R=ge[A++])&&!d.isPropagationStopped();)Oe=R,d.type=1<A?Q:_e.bindType||Be,(ue=(mt.get(R,"events")||Object.create(null))[d.type]&&mt.get(R,"handle"))&&ue.apply(R,p),(ue=G&&R[G])&&ue.apply&&fr(R)&&(d.result=ue.apply(R,p),!1===d.result&&d.preventDefault());return d.type=Be,E||d.isDefaultPrevented()||_e._default&&!1!==_e._default.apply(ge.pop(),p)||!fr(C)||G&&Y(C[Be])&&!fe(C)&&((M=C[G])&&(C[G]=null),b.event.triggered=Be,d.isPropagationStopped()&&Oe.addEventListener(Be,we),C[Be](),d.isPropagationStopped()&&Oe.removeEventListener(Be,we),b.event.triggered=void 0,M&&(C[G]=M)),d.result}},simulate:function(d,p,C){var E=b.extend(new b.Event,C,{type:d,isSimulated:!0});b.event.trigger(E,null,p)}}),b.fn.extend({trigger:function(d,p){return this.each(function(){b.event.trigger(d,p,this)})},triggerHandler:function(d,p){var C=this[0];if(C)return b.event.trigger(d,p,C,!0)}});var it=/\[\]$/,St=/\r?\n/g,xe=/^(?:submit|button|image|reset|file)$/i,Ht=/^(?:input|select|textarea|keygen)/i;function Gt(d,p,C,E){var A;if(Array.isArray(p))b.each(p,function(R,M){C||it.test(d)?E(d,M):Gt(d+"["+("object"==typeof M&&null!=M?R:"")+"]",M,C,E)});else if(C||"object"!==Ve(p))E(d,p);else for(A in p)Gt(d+"["+A+"]",p[A],C,E)}b.param=function(d,p){var C,E=[],A=function(R,M){var Q=Y(M)?M():M;E[E.length]=encodeURIComponent(R)+"="+encodeURIComponent(null==Q?"":Q)};if(null==d)return"";if(Array.isArray(d)||d.jquery&&!b.isPlainObject(d))b.each(d,function(){A(this.name,this.value)});else for(C in d)Gt(C,d[C],p,A);return E.join("&")},b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var d=b.prop(this,"elements");return d?b.makeArray(d):this}).filter(function(){var d=this.type;return this.name&&!b(this).is(":disabled")&&Ht.test(this.nodeName)&&!xe.test(d)&&(this.checked||!vo.test(d))}).map(function(d,p){var C=b(this).val();return null==C?null:Array.isArray(C)?b.map(C,function(E){return{name:p.name,value:E.replace(St,"\r\n")}}):{name:p.name,value:C.replace(St,"\r\n")}}).get()}});var gr=/%20/g,oi=/#.*$/,Xi=/([?&])_=[^&]*/,hs=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ra=/^(?:GET|HEAD)$/,zt=/^\/\//,Di={},Io={},ii="*/".concat("*"),Dn=le.createElement("a");function rr(d){return function(p,C){"string"!=typeof p&&(C=p,p="*");var E,A=0,R=p.toLowerCase().match(wt)||[];if(Y(C))for(;E=R[A++];)"+"===E[0]?(E=E.slice(1)||"*",(d[E]=d[E]||[]).unshift(C)):(d[E]=d[E]||[]).push(C)}}function pc(d,p,C,E){var A={},R=d===Io;function M(Q){var G;return A[Q]=!0,b.each(d[Q]||[],function(ue,_e){var Oe=_e(p,C,E);return"string"!=typeof Oe||R||A[Oe]?R?!(G=Oe):void 0:(p.dataTypes.unshift(Oe),M(Oe),!1)}),G}return M(p.dataTypes[0])||!A["*"]&&M("*")}function tl(d,p){var C,E,A=b.ajaxSettings.flatOptions||{};for(C in p)void 0!==p[C]&&((A[C]?d:E||(E={}))[C]=p[C]);return E&&b.extend(!0,d,E),d}Dn.href=_.href,b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ii,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(d,p){return p?tl(tl(d,b.ajaxSettings),p):tl(b.ajaxSettings,d)},ajaxPrefilter:rr(Di),ajaxTransport:rr(Io),ajax:function(d,p){"object"==typeof d&&(p=d,d=void 0);var C,E,A,R,M,Q,G,ue,_e,Oe,ge=b.ajaxSetup({},p=p||{}),Be=ge.context||ge,I=ge.context&&(Be.nodeType||Be.jquery)?b(Be):b.event,Nt=b.Deferred(),At=b.Callbacks("once memory"),Xt=ge.statusCode||{},In={},Rt={},Yn="canceled",Lt={readyState:0,getResponseHeader:function(Bt){var Vt;if(G){if(!R)for(R={};Vt=hs.exec(A);)R[Vt[1].toLowerCase()+" "]=(R[Vt[1].toLowerCase()+" "]||[]).concat(Vt[2]);Vt=R[Bt.toLowerCase()+" "]}return null==Vt?null:Vt.join(", ")},getAllResponseHeaders:function(){return G?A:null},setRequestHeader:function(Bt,Vt){return null==G&&(Bt=Rt[Bt.toLowerCase()]=Rt[Bt.toLowerCase()]||Bt,In[Bt]=Vt),this},overrideMimeType:function(Bt){return null==G&&(ge.mimeType=Bt),this},statusCode:function(Bt){var Vt;if(Bt)if(G)Lt.always(Bt[Lt.status]);else for(Vt in Bt)Xt[Vt]=[Xt[Vt],Bt[Vt]];return this},abort:function(Bt){var Vt=Bt||Yn;return C&&C.abort(Vt),hr(0,Vt),this}};if(Nt.promise(Lt),ge.url=((d||ge.url||_.href)+"").replace(zt,_.protocol+"//"),ge.type=p.method||p.type||ge.method||ge.type,ge.dataTypes=(ge.dataType||"*").toLowerCase().match(wt)||[""],null==ge.crossDomain){Q=le.createElement("a");try{Q.href=ge.url,Q.href=Q.href,ge.crossDomain=Dn.protocol+"//"+Dn.host!=Q.protocol+"//"+Q.host}catch(Bt){ge.crossDomain=!0}}if(ge.data&&ge.processData&&"string"!=typeof ge.data&&(ge.data=b.param(ge.data,ge.traditional)),pc(Di,ge,p,Lt),G)return Lt;for(_e in(ue=b.event&&ge.global)&&0==b.active++&&b.event.trigger("ajaxStart"),ge.type=ge.type.toUpperCase(),ge.hasContent=!Ra.test(ge.type),E=ge.url.replace(oi,""),ge.hasContent?ge.data&&ge.processData&&0===(ge.contentType||"").indexOf("application/x-www-form-urlencoded")&&(ge.data=ge.data.replace(gr,"+")):(Oe=ge.url.slice(E.length),ge.data&&(ge.processData||"string"==typeof ge.data)&&(E+=(q.test(E)?"&":"?")+ge.data,delete ge.data),!1===ge.cache&&(E=E.replace(Xi,"$1"),Oe=(q.test(E)?"&":"?")+"_="+O.guid+++Oe),ge.url=E+Oe),ge.ifModified&&(b.lastModified[E]&&Lt.setRequestHeader("If-Modified-Since",b.lastModified[E]),b.etag[E]&&Lt.setRequestHeader("If-None-Match",b.etag[E])),(ge.data&&ge.hasContent&&!1!==ge.contentType||p.contentType)&&Lt.setRequestHeader("Content-Type",ge.contentType),Lt.setRequestHeader("Accept",ge.dataTypes[0]&&ge.accepts[ge.dataTypes[0]]?ge.accepts[ge.dataTypes[0]]+("*"!==ge.dataTypes[0]?", "+ii+"; q=0.01":""):ge.accepts["*"]),ge.headers)Lt.setRequestHeader(_e,ge.headers[_e]);if(ge.beforeSend&&(!1===ge.beforeSend.call(Be,Lt,ge)||G))return Lt.abort();if(Yn="abort",At.add(ge.complete),Lt.done(ge.success),Lt.fail(ge.error),C=pc(Io,ge,p,Lt)){if(Lt.readyState=1,ue&&I.trigger("ajaxSend",[Lt,ge]),G)return Lt;ge.async&&0<ge.timeout&&(M=B.setTimeout(function(){Lt.abort("timeout")},ge.timeout));try{G=!1,C.send(In,hr)}catch(Bt){if(G)throw Bt;hr(-1,Bt)}}else hr(-1,"No Transport");function hr(Bt,Vt,Mi,bs){var or,jo,Co,Fo,cn,Zn=Vt;G||(G=!0,M&&B.clearTimeout(M),C=void 0,A=bs||"",Lt.readyState=0<Bt?4:0,or=200<=Bt&&Bt<300||304===Bt,Mi&&(Fo=function(Nn,_n,er){for(var So,ir,xt,en,hn=Nn.contents,sn=Nn.dataTypes;"*"===sn[0];)sn.shift(),void 0===So&&(So=Nn.mimeType||_n.getResponseHeader("Content-Type"));if(So)for(ir in hn)if(hn[ir]&&hn[ir].test(So)){sn.unshift(ir);break}if(sn[0]in er)xt=sn[0];else{for(ir in er){if(!sn[0]||Nn.converters[ir+" "+sn[0]]){xt=ir;break}en||(en=ir)}xt=xt||en}if(xt)return xt!==sn[0]&&sn.unshift(xt),er[xt]}(ge,Lt,Mi)),!or&&-1<b.inArray("script",ge.dataTypes)&&b.inArray("json",ge.dataTypes)<0&&(ge.converters["text script"]=function(){}),Fo=function(Nn,_n,er,So){var ir,xt,en,hn,sn,to={},Ji=Nn.dataTypes.slice();if(Ji[1])for(en in Nn.converters)to[en.toLowerCase()]=Nn.converters[en];for(xt=Ji.shift();xt;)if(Nn.responseFields[xt]&&(er[Nn.responseFields[xt]]=_n),!sn&&So&&Nn.dataFilter&&(_n=Nn.dataFilter(_n,Nn.dataType)),sn=xt,xt=Ji.shift())if("*"===xt)xt=sn;else if("*"!==sn&&sn!==xt){if(!(en=to[sn+" "+xt]||to["* "+xt]))for(ir in to)if((hn=ir.split(" "))[1]===xt&&(en=to[sn+" "+hn[0]]||to["* "+hn[0]])){!0===en?en=to[ir]:!0!==to[ir]&&(xt=hn[0],Ji.unshift(hn[1]));break}if(!0!==en)if(en&&Nn.throws)_n=en(_n);else try{_n=en(_n)}catch(Uo){return{state:"parsererror",error:en?Uo:"No conversion from "+sn+" to "+xt}}}return{state:"success",data:_n}}(ge,Fo,Lt,or),or?(ge.ifModified&&((cn=Lt.getResponseHeader("Last-Modified"))&&(b.lastModified[E]=cn),(cn=Lt.getResponseHeader("etag"))&&(b.etag[E]=cn)),204===Bt||"HEAD"===ge.type?Zn="nocontent":304===Bt?Zn="notmodified":(Zn=Fo.state,jo=Fo.data,or=!(Co=Fo.error))):(Co=Zn,!Bt&&Zn||(Zn="error",Bt<0&&(Bt=0))),Lt.status=Bt,Lt.statusText=(Vt||Zn)+"",or?Nt.resolveWith(Be,[jo,Zn,Lt]):Nt.rejectWith(Be,[Lt,Zn,Co]),Lt.statusCode(Xt),Xt=void 0,ue&&I.trigger(or?"ajaxSuccess":"ajaxError",[Lt,ge,or?jo:Co]),At.fireWith(Be,[Lt,Zn]),ue&&(I.trigger("ajaxComplete",[Lt,ge]),--b.active||b.event.trigger("ajaxStop")))}return Lt},getJSON:function(d,p,C){return b.get(d,p,C,"json")},getScript:function(d,p){return b.get(d,void 0,p,"script")}}),b.each(["get","post"],function(d,p){b[p]=function(C,E,A,R){return Y(E)&&(R=R||A,A=E,E=void 0),b.ajax(b.extend({url:C,type:p,dataType:R,data:E,success:A},b.isPlainObject(C)&&C))}}),b.ajaxPrefilter(function(d){var p;for(p in d.headers)"content-type"===p.toLowerCase()&&(d.contentType=d.headers[p]||"")}),b._evalUrl=function(d,p,C){return b.ajax({url:d,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(E){b.globalEval(E,p,C)}})},b.fn.extend({wrapAll:function(d){var p;return this[0]&&(Y(d)&&(d=d.call(this[0])),p=b(d,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&p.insertBefore(this[0]),p.map(function(){for(var C=this;C.firstElementChild;)C=C.firstElementChild;return C}).append(this)),this},wrapInner:function(d){return Y(d)?this.each(function(p){b(this).wrapInner(d.call(this,p))}):this.each(function(){var p=b(this),C=p.contents();C.length?C.wrapAll(d):p.append(d)})},wrap:function(d){var p=Y(d);return this.each(function(C){b(this).wrapAll(p?d.call(this,C):d)})},unwrap:function(d){return this.parent(d).not("body").each(function(){b(this).replaceWith(this.childNodes)}),this}}),b.expr.pseudos.hidden=function(d){return!b.expr.pseudos.visible(d)},b.expr.pseudos.visible=function(d){return!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length)},b.ajaxSettings.xhr=function(){try{return new B.XMLHttpRequest}catch(d){}};var nl={0:200,1223:204},Qi=b.ajaxSettings.xhr();ne.cors=!!Qi&&"withCredentials"in Qi,ne.ajax=Qi=!!Qi,b.ajaxTransport(function(d){var p,C;if(ne.cors||Qi&&!d.crossDomain)return{send:function(E,A){var R,M=d.xhr();if(M.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(R in d.xhrFields)M[R]=d.xhrFields[R];for(R in d.mimeType&&M.overrideMimeType&&M.overrideMimeType(d.mimeType),d.crossDomain||E["X-Requested-With"]||(E["X-Requested-With"]="XMLHttpRequest"),E)M.setRequestHeader(R,E[R]);p=function(Q){return function(){p&&(p=C=M.onload=M.onerror=M.onabort=M.ontimeout=M.onreadystatechange=null,"abort"===Q?M.abort():"error"===Q?"number"!=typeof M.status?A(0,"error"):A(M.status,M.statusText):A(nl[M.status]||M.status,M.statusText,"text"!==(M.responseType||"text")||"string"!=typeof M.responseText?{binary:M.response}:{text:M.responseText},M.getAllResponseHeaders()))}},M.onload=p(),C=M.onerror=M.ontimeout=p("error"),void 0!==M.onabort?M.onabort=C:M.onreadystatechange=function(){4===M.readyState&&B.setTimeout(function(){p&&C()})},p=p("abort");try{M.send(d.hasContent&&d.data||null)}catch(Q){if(p)throw Q}},abort:function(){p&&p()}}}),b.ajaxPrefilter(function(d){d.crossDomain&&(d.contents.script=!1)}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(d){return b.globalEval(d),d}}}),b.ajaxPrefilter("script",function(d){void 0===d.cache&&(d.cache=!1),d.crossDomain&&(d.type="GET")}),b.ajaxTransport("script",function(d){var p,C;if(d.crossDomain||d.scriptAttrs)return{send:function(E,A){p=b("<script>").attr(d.scriptAttrs||{}).prop({charset:d.scriptCharset,src:d.url}).on("load error",C=function(R){p.remove(),C=null,R&&A("error"===R.type?404:200,R.type)}),le.head.appendChild(p[0])},abort:function(){C&&C()}}});var Tn,Lo=[],mr=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var d=Lo.pop()||b.expando+"_"+O.guid++;return this[d]=!0,d}}),b.ajaxPrefilter("json jsonp",function(d,p,C){var E,A,R,M=!1!==d.jsonp&&(mr.test(d.url)?"url":"string"==typeof d.data&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&mr.test(d.data)&&"data");if(M||"jsonp"===d.dataTypes[0])return E=d.jsonpCallback=Y(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,M?d[M]=d[M].replace(mr,"$1"+E):!1!==d.jsonp&&(d.url+=(q.test(d.url)?"&":"?")+d.jsonp+"="+E),d.converters["script json"]=function(){return R||b.error(E+" was not called"),R[0]},d.dataTypes[0]="json",A=B[E],B[E]=function(){R=arguments},C.always(function(){void 0===A?b(B).removeProp(E):B[E]=A,d[E]&&(d.jsonpCallback=p.jsonpCallback,Lo.push(E)),R&&Y(A)&&A(R[0]),R=A=void 0}),"script"}),ne.createHTMLDocument=((Tn=le.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Tn.childNodes.length),b.parseHTML=function(d,p,C){return"string"!=typeof d?[]:("boolean"==typeof p&&(C=p,p=!1),p||(ne.createHTMLDocument?((E=(p=le.implementation.createHTMLDocument("")).createElement("base")).href=le.location.href,p.head.appendChild(E)):p=le),R=!C&&[],(A=T.exec(d))?[p.createElement(A[1])]:(A=ei([d],p,R),R&&R.length&&b(R).remove(),b.merge([],A.childNodes)));var E,A,R},b.fn.load=function(d,p,C){var E,A,R,M=this,Q=d.indexOf(" ");return-1<Q&&(E=$n(d.slice(Q)),d=d.slice(0,Q)),Y(p)?(C=p,p=void 0):p&&"object"==typeof p&&(A="POST"),0<M.length&&b.ajax({url:d,type:A||"GET",dataType:"html",data:p}).done(function(G){R=arguments,M.html(E?b("<div>").append(b.parseHTML(G)).find(E):G)}).always(C&&function(G,ue){M.each(function(){C.apply(this,R||[G.responseText,ue,G])})}),this},b.expr.pseudos.animated=function(d){return b.grep(b.timers,function(p){return d===p.elem}).length},b.offset={setOffset:function(d,p,C){var E,A,R,M,Q,G,ue=b.css(d,"position"),_e=b(d),Oe={};"static"===ue&&(d.style.position="relative"),Q=_e.offset(),R=b.css(d,"top"),G=b.css(d,"left"),("absolute"===ue||"fixed"===ue)&&-1<(R+G).indexOf("auto")?(M=(E=_e.position()).top,A=E.left):(M=parseFloat(R)||0,A=parseFloat(G)||0),Y(p)&&(p=p.call(d,C,b.extend({},Q))),null!=p.top&&(Oe.top=p.top-Q.top+M),null!=p.left&&(Oe.left=p.left-Q.left+A),"using"in p?p.using.call(d,Oe):_e.css(Oe)}},b.fn.extend({offset:function(d){if(arguments.length)return void 0===d?this:this.each(function(A){b.offset.setOffset(this,d,A)});var p,C,E=this[0];return E?E.getClientRects().length?{top:(p=E.getBoundingClientRect()).top+(C=E.ownerDocument.defaultView).pageYOffset,left:p.left+C.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var d,p,C,E=this[0],A={top:0,left:0};if("fixed"===b.css(E,"position"))p=E.getBoundingClientRect();else{for(p=this.offset(),C=E.ownerDocument,d=E.offsetParent||C.documentElement;d&&(d===C.body||d===C.documentElement)&&"static"===b.css(d,"position");)d=d.parentNode;d&&d!==E&&1===d.nodeType&&((A=b(d).offset()).top+=b.css(d,"borderTopWidth",!0),A.left+=b.css(d,"borderLeftWidth",!0))}return{top:p.top-A.top-b.css(E,"marginTop",!0),left:p.left-A.left-b.css(E,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent;d&&"static"===b.css(d,"position");)d=d.offsetParent;return d||on})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(d,p){var C="pageYOffset"===p;b.fn[d]=function(E){return Cn(this,function(A,R,M){var Q;if(fe(A)?Q=A:9===A.nodeType&&(Q=A.defaultView),void 0===M)return Q?Q[p]:A[R];Q?Q.scrollTo(C?Q.pageXOffset:M,C?M:Q.pageYOffset):A[R]=M},d,E,arguments.length)}}),b.each(["top","left"],function(d,p){b.cssHooks[p]=ti(ne.pixelPosition,function(C,E){if(E)return E=nr(C,p),Ai.test(E)?b(C).position()[p]+"px":E})}),b.each({Height:"height",Width:"width"},function(d,p){b.each({padding:"inner"+d,content:p,"":"outer"+d},function(C,E){b.fn[E]=function(A,R){var M=arguments.length&&(C||"boolean"!=typeof A),Q=C||(!0===A||!0===R?"margin":"border");return Cn(this,function(G,ue,_e){var Oe;return fe(G)?0===E.indexOf("outer")?G["inner"+d]:G.document.documentElement["client"+d]:9===G.nodeType?(Oe=G.documentElement,Math.max(G.body["scroll"+d],Oe["scroll"+d],G.body["offset"+d],Oe["offset"+d],Oe["client"+d])):void 0===_e?b.css(G,ue,Q):b.style(G,ue,_e,Q)},p,M?A:void 0,M)}})}),b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(d,p){b.fn[p]=function(C){return this.on(p,C)}}),b.fn.extend({bind:function(d,p,C){return this.on(d,null,p,C)},unbind:function(d,p){return this.off(d,null,p)},delegate:function(d,p,C,E){return this.on(p,d,C,E)},undelegate:function(d,p,C){return 1===arguments.length?this.off(d,"**"):this.off(p,d||"**",C)},hover:function(d,p){return this.mouseenter(d).mouseleave(p||d)}}),b.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(d,p){b.fn[p]=function(C,E){return 0<arguments.length?this.on(p,null,C,E):this.trigger(p)}});var Bo=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;b.proxy=function(d,p){var C,E,A;if("string"==typeof p&&(C=d[p],p=d,d=C),Y(d))return E=w.call(arguments,2),(A=function(){return d.apply(p||this,E.concat(w.call(arguments)))}).guid=d.guid=d.guid||b.guid++,A},b.holdReady=function(d){d?b.readyWait++:b.ready(!0)},b.isArray=Array.isArray,b.parseJSON=JSON.parse,b.nodeName=We,b.isFunction=Y,b.isWindow=fe,b.camelCase=pn,b.type=Ve,b.now=Date.now,b.isNumeric=function(d){var p=b.type(d);return("number"===p||"string"===p)&&!isNaN(d-parseFloat(d))},b.trim=function(d){return null==d?"":(d+"").replace(Bo,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return b});var vs=B.jQuery,Mn=B.$;return b.noConflict=function(d){return B.$===b&&(B.$=Mn),d&&B.jQuery===b&&(B.jQuery=vs),b},void 0===Ee&&(B.jQuery=B.$=b),b}),function(B,Ee,ct){var Pe={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorRedirectionExceedsLimit:"Negotiate redirection limit exceeded.",errorDuringStartRequest:"Error during start request. Stopping the connection.",errorFromServer:"Error message received from the server: '{0}'.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",aspnetCoreSignalrServer:"Detected a connection attempt to an ASP.NET Core SignalR Server. This client only supports connecting to an ASP.NET SignalR Server. See https://aka.ms/signalr-core-differences for details.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection.",jsonpNotSupportedWithAccessToken:"The JSONP protocol does not support connections that require a Bearer token to connect, such as the Azure SignalR Service."};if("function"!=typeof B)throw new Error(Pe.nojQuery);var w,oe,z,me,j="complete"===Ee.document.readyState,ee=B(Ee),te="__Negotiate Aborted__",ce={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},D=function(z,me,b){return me===z.state&&(z.state=b,B(z).triggerHandler(ce.onStateChanged,[{oldState:me,newState:b}]),!0)},Y=function(z){return z._.keepAliveData.activated&&z.transport.supportsKeepAlive(z)};function Je(z,me){return me.match(/:\d+$/)?me:me+":"+function Le(z){return"http:"===z?80:"https:"===z?443:void 0}(z)}function Ve(z,me){var b=this,He=[];b.tryBuffer=function(We){return z.state===B.signalR.connectionState.connecting&&(He.push(We),!0)},b.drain=function(){if(z.state===B.signalR.connectionState.connected)for(;He.length>0;)me(He.shift())},b.clear=function(){He=[]}}w=function(z,me,b){return new w.fn.init(z,me,b)},w._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:("Microsoft Internet Explorer"===Ee.navigator.appName&&(me=/MSIE ([0-9]+\.[0-9]+)/.exec(Ee.navigator.userAgent))&&(z=Ee.parseFloat(me[1])),z),error:function(z,me,b){var He=new Error(z);return He.source=me,void 0!==b&&(He.context=b),He},transportError:function(z,me,b,He){var We=this.error(z,b,He);return We.transport=me?me.name:void 0,We},format:function(){for(var z=arguments[0],me=0;me<arguments.length-1;me++)z=z.replace("{"+me+"}",arguments[me+1]);return z},firefoxMajorVersion:function(z){var me=z.match(/Firefox\/(\d+)/);return!me||!me.length||me.length<2?0:parseInt(me[1],10)},configurePingInterval:function(z){var me=z._.config,b=function(He){B(z).triggerHandler(ce.onError,[He])};me&&!z._.pingIntervalId&&me.pingInterval&&(z._.pingIntervalId=Ee.setInterval(function(){w.transports._logic.pingServer(z).fail(b)},me.pingInterval))}},w.events=ce,w.resources=Pe,w.ajaxDefaults={processData:!0,timeout:null,async:!0,global:!1,cache:!1},w.changeState=D,w.isDisconnecting=function(z){return z.state===w.connectionState.disconnected},w.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4},w.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'><\/script>.")}},"function"==typeof ee.on?ee.on("load",function(){j=!0}):ee.load(function(){j=!0}),w.fn=w.prototype={init:function(z,me,b){var He=B(this);this.url=z,this.qs=me,this.lastError=null,this._={keepAliveData:{},connectingMessageBuffer:new Ve(this,function(We){He.triggerHandler(ce.onReceived,[We])}),lastMessageAt:(new Date).getTime(),lastActiveAt:(new Date).getTime(),beatInterval:5e3,beatHandle:null,totalTransportConnectTimeout:0,redirectQs:null},"boolean"==typeof b&&(this.logging=b)},_parseResponse:function(z){return z&&("string"==typeof z?this.json.parse(z):z)},_originalJson:Ee.JSON,json:Ee.JSON,isCrossDomain:function(z,me){var b;return z=B.trim(z),me=me||Ee.location,0===z.indexOf("http")&&((b=Ee.document.createElement("a")).href=z,b.protocol+Je(b.protocol,b.host)!==me.protocol+Je(me.protocol,me.host))},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:!1,state:w.connectionState.disconnected,clientProtocol:"2.1",supportedProtocols:["1.5","2.0","2.1"],negotiateRedirectSupportedProtocols:["2.0","2.1"],reconnectDelay:2e3,transportConnectTimeout:0,disconnectTimeout:3e4,reconnectWindow:3e4,keepAliveWarnAt:2/3,start:function(z,me){var We,b=this,He={pingInterval:3e5,waitForPageLoad:!0,transport:"auto",jsonp:!1},Mt=b._deferral||B.Deferred(),qn=Ee.document.createElement("a"),Fe=function(ye,Jt){ye.url===Jt&&ye.baseUrl||(ye.url=Jt,qn.href=ye.url,qn.protocol&&":"!==qn.protocol?(ye.protocol=qn.protocol,ye.host=qn.host):(ye.protocol=Ee.document.location.protocol,ye.host=qn.host||Ee.document.location.host),ye.baseUrl=ye.protocol+"//"+ye.host,ye.wsProtocol="https:"===ye.protocol?"wss://":"ws://",0===ye.url.indexOf("//")&&(ye.url=Ee.location.protocol+ye.url,ye.log("Protocol relative URL detected, normalizing it to '"+ye.url+"'.")),ye.isCrossDomain(ye.url)&&(ye.log("Auto detected cross domain url."),"auto"===He.transport&&(He.transport=["webSockets","serverSentEvents","longPolling"]),void 0===ye.withCredentials&&(ye.withCredentials=!0),B.support.cors||(ye.ajaxDataType="jsonp",ye.log("Using jsonp because this browser doesn't support CORS.")),ye.contentType=w._.defaultContentType))};if(b.lastError=null,b._deferral=Mt,!b.json)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");if("function"===B.type(z)?me=z:"object"===B.type(z)&&(B.extend(He,z),"function"===B.type(He.callback)&&(me=He.callback)),He.transport=function le(z,me){if(B.isArray(z)){for(var b=z.length-1;b>=0;b--){var He=z[b];("string"!==B.type(He)||!w.transports[He])&&(me.log("Invalid transport: "+He+", removing it from the transports list."),z.splice(b,1))}0===z.length&&(me.log("No transports remain within the specified transport array."),z=null)}else if(w.transports[z]||"auto"===z){if("auto"===z&&w._.ieVersion<=8)return["longPolling"]}else me.log("Invalid transport: "+z.toString()+"."),z=null;return z}(He.transport,b),!He.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");if(b._.config=He,!j&&!0===He.waitForPageLoad)return b._.deferredStartHandler=function(){b.start(z,me)},ee.bind("load",b._.deferredStartHandler),Mt.promise();if(b.state===w.connectionState.connecting)return Mt.promise();if(!1===D(b,w.connectionState.disconnected,w.connectionState.connecting))return Mt.resolve(b),Mt.promise();(function(z){var me,b;z._.configuredStopReconnectingTimeout||(b=function(He){var We=w._.format(w.resources.reconnectTimeout,He.disconnectTimeout);He.log(We),B(He).triggerHandler(ce.onError,[w._.error(We,"TimeoutException")]),He.stop(!1,!1)},z.reconnecting(function(){var He=this;He.state===w.connectionState.reconnecting&&(me=Ee.setTimeout(function(){b(He)},He.disconnectTimeout))}),z.stateChanged(function(He){He.oldState===w.connectionState.reconnecting&&Ee.clearTimeout(me)}),z._.configuredStopReconnectingTimeout=!0)})(b),"auto"===He.transport&&!0===He.jsonp&&(He.transport="longPolling"),b.withCredentials=He.withCredentials,b._originalUrl=b.url,b.ajaxDataType=He.jsonp?"jsonp":"text",Fe(b,b.url),B(b).bind(ce.onStart,function(ye,Jt){"function"===B.type(me)&&me.call(b),Mt.resolve(b)}),b._.initHandler=w.transports._logic.initHandler(b),We=function(ye,Jt){var fn=w._.error(Pe.noTransportOnInit);if((Jt=Jt||0)>=ye.length)return b.log(0===Jt?"No transports supported by the server were selected.":1===Jt?"No fallback transports were selected.":"Fallback transports exhausted."),B(b).triggerHandler(ce.onError,[fn]),Mt.reject(fn),void b.stop();if(b.state!==w.connectionState.disconnected){var $t=w.transports[ye[Jt]],Ot=function(){We(ye,Jt+1)};b.transport=$t;try{b._.initHandler.start($t,function(){var Ft=w._.firefoxMajorVersion(Ee.navigator.userAgent)>=11;b.log("The start request succeeded. Transitioning to the connected state."),Y(b)&&w.transports._logic.monitorKeepAlive(b),b._.keepAliveData.activated&&w.transports._logic.startHeartbeat(b),w._.configurePingInterval(b),D(b,w.connectionState.connecting,w.connectionState.connected)||b.log("WARNING! The connection was not in the connecting state."),b._.connectingMessageBuffer.drain(),B(b).triggerHandler(ce.onStart),ee.bind("unload",function(){b.log("Window unloading, stopping the connection."),b.stop(!0)}),Ft&&ee.bind("beforeunload",function(){Ee.setTimeout(function(){b.stop(!0)},0)})},Ot)}catch(Ft){b.log($t.name+" transport threw '"+Ft.message+"' when attempting to start."),Ot()}}};var ye,ln,$t,Jt,Ot,Ft,T,Hr,Ct=b.url+"/negotiate",bn=function(ye,Jt){var fn=w._.error(Pe.errorOnNegotiate,ye,Jt._.negotiateRequest);B(Jt).triggerHandler(ce.onError,fn),Mt.reject(fn),Jt.stop()};return B(b).triggerHandler(ce.onStarting),Ct=w.transports._logic.prepareQueryString(b,Ct),b.log("Negotiating with '"+Ct+"'."),b._.negotiateRequest=(Jt=0,Ot=[],Ft=[],Hr=function(zn){try{ye=b._parseResponse(zn)}catch(ur){return void bn(w._.error(Pe.errorParsingNegotiateResponse,ur),b)}if(ye.availableTransports)return $t=w._.error(Pe.aspnetCoreSignalrServer),B(b).triggerHandler(ce.onError,[$t]),void Mt.reject($t);if(!ye.ProtocolVersion||-1===b.supportedProtocols.indexOf(ye.ProtocolVersion))return $t=w._.error(w._.format(Pe.protocolIncompatible,b.clientProtocol,ye.ProtocolVersion)),B(b).triggerHandler(ce.onError,[$t]),void Mt.reject($t);if(-1!==b.negotiateRedirectSupportedProtocols.indexOf(ye.ProtocolVersion)){if(ye.Error)return $t=w._.error(w._.format(Pe.errorFromServer,ye.Error)),B(b).triggerHandler(ce.onError,[$t]),void Mt.reject($t);if(ye.RedirectUrl){if(100===Jt)return void bn(w._.error(Pe.errorRedirectionExceedsLimit),b);"auto"===He.transport&&(He.transport=["webSockets","serverSentEvents","longPolling"]),b.log("Received redirect to: "+ye.RedirectUrl),b.accessToken=ye.AccessToken;var Xr=ye.RedirectUrl.split("?",2);return Fe(b,Xr[0]),b._.redirectQs=2===Xr.length?Xr[1]:null,"jsonp"===b.ajaxDataType&&b.accessToken?void bn(w._.error(Pe.jsonpNotSupportedWithAccessToken),b):(Jt++,void T(b,Hr))}}ln=b._.keepAliveData,b.appRelativeUrl=ye.Url,b.id=ye.ConnectionId,b.token=ye.ConnectionToken,b.webSocketServerUrl=ye.WebSocketServerUrl,b._.pollTimeout=1e3*ye.ConnectionTimeout+1e4,b.disconnectTimeout=1e3*ye.DisconnectTimeout,b._.totalTransportConnectTimeout=b.transportConnectTimeout+1e3*ye.TransportConnectTimeout,ye.KeepAliveTimeout?(ln.activated=!0,ln.timeout=1e3*ye.KeepAliveTimeout,ln.timeoutWarning=ln.timeout*b.keepAliveWarnAt,b._.beatInterval=(ln.timeout-ln.timeoutWarning)/3):ln.activated=!1,b.reconnectWindow=b.disconnectTimeout+(ln.timeout||0),B.each(w.transports,function(ur){if(0===ur.indexOf("_")||"webSockets"===ur&&!ye.TryWebSockets)return!0;Ft.push(ur)}),B.isArray(He.transport)?B.each(He.transport,function(ur,Pt){B.inArray(Pt,Ft)>=0&&Ot.push(Pt)}):"auto"===He.transport?Ot=Ft:B.inArray(He.transport,Ft)>=0&&Ot.push(He.transport),We(Ot)},(T=function(zn,Xr){var ur=w.transports._logic.prepareQueryString(zn,zn.url+"/negotiate");zn.log("Negotiating with '"+ur+"'.");var Pt={url:ur,error:function(Yt,wt){wt!==te?bn(Yt,zn):Mt.reject(w._.error(Pe.stoppedWhileNegotiating,null,zn._.negotiateRequest))},success:Xr};return zn.accessToken&&(Pt.headers={Authorization:"Bearer "+zn.accessToken}),w.transports._logic.ajax(zn,Pt)})(b,Hr)),Mt.promise()},starting:function(z){var me=this;return B(me).bind(ce.onStarting,function(b,He){z.call(me)}),me},send:function(z){var me=this;if(me.state===w.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(me.state===w.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return me.transport.send(me,z),me},received:function(z){var me=this;return B(me).bind(ce.onReceived,function(b,He){z.call(me,He)}),me},stateChanged:function(z){var me=this;return B(me).bind(ce.onStateChanged,function(b,He){z.call(me,He)}),me},error:function(z){var me=this;return B(me).bind(ce.onError,function(b,He,We){me.lastError=He,z.call(me,He,We)}),me},disconnected:function(z){var me=this;return B(me).bind(ce.onDisconnect,function(b,He){z.call(me)}),me},connectionSlow:function(z){var me=this;return B(me).bind(ce.onConnectionSlow,function(b,He){z.call(me)}),me},reconnecting:function(z){var me=this;return B(me).bind(ce.onReconnecting,function(b,He){z.call(me)}),me},reconnected:function(z){var me=this;return B(me).bind(ce.onReconnect,function(b,He){z.call(me)}),me},stop:function(z,me){var b=this,He=b._deferral;return b._.deferredStartHandler&&ee.unbind("load",b._.deferredStartHandler),delete b._.config,delete b._.deferredStartHandler,j||b._.config&&!0!==b._.config.waitForPageLoad?b.state!==w.connectionState.disconnected?(b.log("Stopping connection."),Ee.clearTimeout(b._.beatHandle),Ee.clearInterval(b._.pingIntervalId),b.transport&&(b.transport.stop(b),!1!==me&&b.transport.abort(b,z),Y(b)&&w.transports._logic.stopMonitoringKeepAlive(b),b.transport=null),b._.negotiateRequest&&(b._.negotiateRequest.abort(te),delete b._.negotiateRequest),b._.initHandler&&b._.initHandler.stop(),delete b._deferral,delete b.messageId,delete b.groupsToken,delete b.id,delete b._.pingIntervalId,delete b._.lastMessageAt,delete b._.lastActiveAt,b._.connectingMessageBuffer.clear(),B(b).unbind(ce.onStart),delete b.accessToken,delete b.protocol,delete b.host,delete b.baseUrl,delete b.wsProtocol,delete b.contentType,b.url=b._originalUrl,b._.redirectQs=null,D(b,b.state,w.connectionState.disconnected),B(b).triggerHandler(ce.onDisconnect),b):void 0:(b.log("Stopping connection prior to negotiate."),void(He&&He.reject(w._.error(Pe.stoppedWhileLoading))))},log:function(z){!function(z,me){var b;!1!==me&&void 0!==Ee.console&&(b="["+(new Date).toTimeString()+"] SignalR: "+z,Ee.console.debug?Ee.console.debug(b):Ee.console.log&&Ee.console.log(b))}(z,this.logging)}},w.fn.init.prototype=w.fn,w.noConflict=function(){return B.connection===w&&(B.connection=oe),w},B.connection&&(oe=B.connection),B.connection=B.signalR=w}(window.jQuery,window),function(B,Ee,ct){var ee,Pe=B.signalR,w=B.signalR.events,oe=B.signalR.changeState,j="__Start Aborted__";function te(D){D._.keepAliveData.monitoring&&function ce(D){var Y,ne=D._.keepAliveData;D.state===Pe.connectionState.connected&&((Y=(new Date).getTime()-D._.lastMessageAt)>=ne.timeout?(D.log("Keep alive timed out.  Notifying transport that connection has been lost."),D.transport.lostConnection(D)):Y>=ne.timeoutWarning?ne.userNotified||(D.log("Keep alive has been missed, connection may be dead/slow."),B(D).triggerHandler(w.onConnectionSlow),ne.userNotified=!0):ne.userNotified=!1)}(D),ee.markActive(D)&&(D._.beatHandle=Ee.setTimeout(function(){te(D)},D._.beatInterval))}function Xe(D,ne){var Y=D.url+ne;return D.transport&&(Y+="?transport="+D.transport.name),ee.prepareQueryString(D,Y)}function Ne(D){this.connection=D,this.startRequested=!1,this.startCompleted=!1,this.connectionStopped=!1}Pe.transports={},Ne.prototype={start:function(D,ne,Y){var fe=this,le=fe.connection,Le=!1;fe.startRequested||fe.connectionStopped?le.log("WARNING! "+D.name+" transport cannot be started. Initialization ongoing or completed."):(le.log(D.name+" transport starting."),D.start(le,function(){Le||fe.initReceived(D,ne)},function(Je){return Le||(Le=!0,fe.transportFailed(D,Je,Y)),!fe.startCompleted||fe.connectionStopped}),fe.transportTimeoutHandle=Ee.setTimeout(function(){Le||(Le=!0,le.log(D.name+" transport timed out when trying to connect."),fe.transportFailed(D,void 0,Y))},le._.totalTransportConnectTimeout))},stop:function(){this.connectionStopped=!0,Ee.clearTimeout(this.transportTimeoutHandle),Pe.transports._logic.tryAbortStartRequest(this.connection)},initReceived:function(D,ne){var Y=this,fe=Y.connection;Y.startRequested?fe.log("WARNING! The client received multiple init messages."):Y.connectionStopped||(Y.startRequested=!0,Ee.clearTimeout(Y.transportTimeoutHandle),fe.log(D.name+" transport connected. Initiating start request."),Pe.transports._logic.ajaxStart(fe,function(){Y.startCompleted=!0,ne()}))},transportFailed:function(D,ne,Y){var Le,fe=this.connection,le=fe._deferral;this.connectionStopped||(Ee.clearTimeout(this.transportTimeoutHandle),this.startRequested?this.startCompleted||(Le=Pe._.error(Pe.resources.errorDuringStartRequest,ne),fe.log(D.name+" transport failed during the start request. Stopping the connection."),B(fe).triggerHandler(w.onError,[Le]),le&&le.reject(Le),fe.stop()):(D.stop(fe),fe.log(D.name+" transport failed to connect. Attempting to fall back."),Y()))}},ee=Pe.transports._logic={ajax:function(D,ne){return B.ajax(B.extend(!0,{},B.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:D.withCredentials},contentType:D.contentType,dataType:D.ajaxDataType},ne))},pingServer:function(D){var ne,Y,fe=B.Deferred();return D.transport?(ne=ee.addQs(ne=D.url+"/ping",D.qs),Y=ee.ajax(D,{url:ne,headers:D.accessToken?{Authorization:"Bearer "+D.accessToken}:{},success:function(le){var Le;try{Le=D._parseResponse(le)}catch(Je){return fe.reject(Pe._.transportError(Pe.resources.pingServerFailedParse,D.transport,Je,Y)),void D.stop()}"pong"===Le.Response?fe.resolve():fe.reject(Pe._.transportError(Pe._.format(Pe.resources.pingServerFailedInvalidResponse,le),D.transport,null,Y))},error:function(le){401===le.status||403===le.status?(fe.reject(Pe._.transportError(Pe._.format(Pe.resources.pingServerFailedStatusCode,le.status),D.transport,le,Y)),D.stop()):fe.reject(Pe._.transportError(Pe.resources.pingServerFailed,D.transport,le,Y))}})):fe.reject(Pe._.transportError(Pe.resources.noConnectionTransport,D.transport)),fe.promise()},prepareQueryString:function(D,ne){var Y;return Y=ee.addQs(ne,"clientProtocol="+D.clientProtocol),Y=ee.addQs(Y,"string"==typeof D._.redirectQs?D._.redirectQs:D.qs),D.token&&(Y+="&connectionToken="+Ee.encodeURIComponent(D.token)),D.data&&(Y+="&connectionData="+Ee.encodeURIComponent(D.data)),Y},addQs:function(D,ne){var fe,Y=-1!==D.indexOf("?")?"&":"?";if(!ne)return D;if("object"==typeof ne)return D+Y+B.param(ne);if("string"==typeof ne)return("?"===(fe=ne.charAt(0))||"&"===fe)&&(Y=""),D+Y+ne;throw new Error("Query string property must be either a string or object.")},getUrl:function(D,ne,Y,fe,le){var Je=("webSockets"===ne?"":D.baseUrl)+D.appRelativeUrl,Ve="transport="+ne;return!le&&D.groupsToken&&(Ve+="&groupsToken="+Ee.encodeURIComponent(D.groupsToken)),Y?(Je+=fe?"/poll":"/reconnect",!le&&D.messageId&&(Ve+="&messageId="+Ee.encodeURIComponent(D.messageId))):Je+="/connect",Je=ee.prepareQueryString(D,Je+="?"+Ve),D.transport&&D.accessToken&&("serverSentEvents"===D.transport.name||"webSockets"===D.transport.name)&&(Je+="&access_token="+Ee.encodeURIComponent(D.accessToken)),le||(Je+="&tid="+Math.floor(11*Math.random())),Je},maximizePersistentResponse:function(D){return{MessageId:D.C,Messages:D.M,Initialized:void 0!==D.S,ShouldReconnect:void 0!==D.T,LongPollDelay:D.L,GroupsToken:D.G,Error:D.E}},updateGroups:function(D,ne){ne&&(D.groupsToken=ne)},stringifySend:function(D,ne){return"string"==typeof ne||null==ne?ne:D.json.stringify(ne)},ajaxSend:function(D,ne){var le,Y=ee.stringifySend(D,ne),fe=Xe(D,"/send"),Le=function(Je,Ve){B(Ve).triggerHandler(w.onError,[Pe._.transportError(Pe.resources.sendFailed,Ve.transport,Je,le),ne])};return le=ee.ajax(D,{url:fe,type:"jsonp"===D.ajaxDataType?"GET":"POST",contentType:Pe._.defaultContentType,headers:D.accessToken?{Authorization:"Bearer "+D.accessToken}:{},data:{data:Y},success:function(Je){var Ve;if(Je){try{Ve=D._parseResponse(Je)}catch(z){return Le(z,D),void D.stop()}ee.triggerReceived(D,Ve)}},error:function(Je,Ve){"abort"===Ve||"parsererror"===Ve||Le(Je,D)}})},ajaxAbort:function(D,ne){if(void 0!==D.transport){ne=void 0===ne||ne;var Y=Xe(D,"/abort"),fe=D.accessToken?{Authorization:"Bearer "+D.accessToken}:{};Ee.fetch?Ee.fetch(Y,{method:"POST",keepalive:!0,headers:fe,credentials:!0===D.withCredentials?"include":"same-origin"}):ee.ajax(D,{url:Y,async:ne,timeout:1e3,type:"POST",headers:fe,dataType:"text"}),D.log("Fired ajax abort async = "+ne+".")}},ajaxStart:function(D,ne){var Y=function(le){var Le=D._deferral;Le&&Le.reject(le)},fe=function(le){D.log("The start request failed. Stopping the connection."),B(D).triggerHandler(w.onError,[le]),Y(le),D.stop()};D._.startRequest=ee.ajax(D,{url:Xe(D,"/start"),headers:D.accessToken?{Authorization:"Bearer "+D.accessToken}:{},success:function(le,Le,Je){var Ve;try{Ve=D._parseResponse(le)}catch(z){return void fe(Pe._.error(Pe._.format(Pe.resources.errorParsingStartResponse,le),z,Je))}"started"===Ve.Response?ne():fe(Pe._.error(Pe._.format(Pe.resources.invalidStartResponse,le),null,Je))},error:function(le,Le,Je){Le!==j?fe(Pe._.error(Pe.resources.errorDuringStartRequest,Je,le)):(D.log("The start request aborted because connection.stop() was called."),Y(Pe._.error(Pe.resources.stoppedDuringStartRequest,null,le)))}})},tryAbortStartRequest:function(D){D._.startRequest&&(D._.startRequest.abort(j),delete D._.startRequest)},tryInitialize:function(D,ne,Y){ne.Initialized&&Y?Y():ne.Initialized&&D.log("WARNING! The client received an init message after reconnecting.")},triggerReceived:function(D,ne){D._.connectingMessageBuffer.tryBuffer(ne)||B(D).triggerHandler(w.onReceived,[ne])},processMessages:function(D,ne,Y){var fe;if(ne&&void 0!==ne.I)ee.triggerReceived(D,ne);else if(ee.markLastMessage(D),ne){if((fe=ee.maximizePersistentResponse(ne)).Error)return D.log("Received an error message from the server: "+ne.E),B(D).triggerHandler(Pe.events.onError,[Pe._.error(ne.E,"ServerError")]),void D.stop(!1,!1);ee.updateGroups(D,fe.GroupsToken),fe.MessageId&&(D.messageId=fe.MessageId),fe.Messages&&(B.each(fe.Messages,function(le,Le){ee.triggerReceived(D,Le)}),ee.tryInitialize(D,fe,Y))}},monitorKeepAlive:function(D){var ne=D._.keepAliveData;ne.monitoring?D.log("Tried to monitor keep alive but it's already being monitored."):(ne.monitoring=!0,ee.markLastMessage(D),D._.keepAliveData.reconnectKeepAliveUpdate=function(){ee.markLastMessage(D)},B(D).bind(w.onReconnect,D._.keepAliveData.reconnectKeepAliveUpdate),D.log("Now monitoring keep alive with a warning timeout of "+ne.timeoutWarning+", keep alive timeout of "+ne.timeout+" and disconnecting timeout of "+D.disconnectTimeout))},stopMonitoringKeepAlive:function(D){var ne=D._.keepAliveData;ne.monitoring&&(ne.monitoring=!1,B(D).unbind(w.onReconnect,D._.keepAliveData.reconnectKeepAliveUpdate),D._.keepAliveData={},D.log("Stopping the monitoring of the keep alive."))},startHeartbeat:function(D){D._.lastActiveAt=(new Date).getTime(),te(D)},markLastMessage:function(D){D._.lastMessageAt=(new Date).getTime(),D._.lastActiveAt=D._.lastMessageAt},markActive:function(D){return!!ee.verifyLastActive(D)&&(D._.lastActiveAt=(new Date).getTime(),!0)},isConnectedOrReconnecting:function(D){return D.state===Pe.connectionState.connected||D.state===Pe.connectionState.reconnecting},ensureReconnectingState:function(D){return!0===oe(D,Pe.connectionState.connected,Pe.connectionState.reconnecting)&&B(D).triggerHandler(w.onReconnecting),D.state===Pe.connectionState.reconnecting},clearReconnectTimeout:function(D){D&&D._.reconnectTimeout&&(Ee.clearTimeout(D._.reconnectTimeout),delete D._.reconnectTimeout)},verifyLastActive:function(D){if(!D._.keepAliveData.activated||(new Date).getTime()-D._.lastActiveAt<D.reconnectWindow)return!0;var ne=Pe._.format(Pe.resources.reconnectWindowTimeout,new Date(D._.lastActiveAt),D.reconnectWindow);return D.log(ne),B(D).triggerHandler(w.onError,[Pe._.error(ne,"TimeoutException")]),D.stop(!1,!1),!1},reconnect:function(D,ne){var Y=Pe.transports[ne];if(ee.isConnectedOrReconnecting(D)&&!D._.reconnectTimeout){if(!ee.verifyLastActive(D))return;D._.reconnectTimeout=Ee.setTimeout(function(){!ee.verifyLastActive(D)||(Y.stop(D),ee.ensureReconnectingState(D)&&(D.log(ne+" reconnecting."),Y.start(D)))},D.reconnectDelay)}},handleParseFailure:function(D,ne,Y,fe,le){var Le=Pe._.transportError(Pe._.format(Pe.resources.parseFailed,ne),D.transport,Y,le);fe&&fe(Le)?D.log("Failed to parse server response while attempting to connect."):(B(D).triggerHandler(w.onError,[Le]),D.stop())},initHandler:function(D){return new Ne(D)},foreverFrame:{count:0,connections:{}}}}(window.jQuery,window),function(B,Ee,ct){var Pe=B.signalR,w=B.signalR.events,oe=B.signalR.changeState,j=Pe.transports._logic;Pe.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return!0},send:function(ee,te){var ce=j.stringifySend(ee,te);try{ee.socket.send(ce)}catch(Xe){B(ee).triggerHandler(w.onError,[Pe._.transportError(Pe.resources.webSocketsInvalidState,ee.transport,Xe,ee.socket),te])}},start:function(ee,te,ce){var Xe,Ne=!1,D=this,ne=!te,Y=B(ee);Ee.WebSocket?ee.socket||(Xe=ee.webSocketServerUrl?ee.webSocketServerUrl:ee.wsProtocol+ee.host,Xe+=j.getUrl(ee,this.name,ne),ee.log("Connecting to websocket endpoint '"+Xe+"'."),ee.socket=new Ee.WebSocket(Xe),ee.socket.onopen=function(){Ne=!0,ee.log("Websocket opened."),j.clearReconnectTimeout(ee),!0===oe(ee,Pe.connectionState.reconnecting,Pe.connectionState.connected)&&Y.triggerHandler(w.onReconnect)},ee.socket.onclose=function(fe){var le;this===ee.socket&&(Ne&&void 0!==fe.wasClean&&!1===fe.wasClean?(le=Pe._.transportError(Pe.resources.webSocketClosed,ee.transport,fe),ee.log("Unclean disconnect from websocket: "+(fe.reason||"[no reason given]."))):ee.log("Websocket closed."),(!ce||!ce(le))&&(le&&B(ee).triggerHandler(w.onError,[le]),D.reconnect(ee)))},ee.socket.onmessage=function(fe){var le;try{le=ee._parseResponse(fe.data)}catch(Le){return void j.handleParseFailure(ee,fe.data,Le,ce,fe)}le&&j.processMessages(ee,le,te)}):ce()},reconnect:function(ee){j.reconnect(ee,this.name)},lostConnection:function(ee){this.reconnect(ee)},stop:function(ee){j.clearReconnectTimeout(ee),ee.socket&&(ee.log("Closing the Websocket."),ee.socket.close(),ee.socket=null)},abort:function(ee,te){j.ajaxAbort(ee,te)}}}(window.jQuery,window),function(B,Ee,ct){var Pe=B.signalR,w=B.signalR.events,oe=B.signalR.changeState,j=Pe.transports._logic,ee=function(te){Ee.clearTimeout(te._.reconnectAttemptTimeoutHandle),delete te._.reconnectAttemptTimeoutHandle};Pe.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return!0},timeOut:3e3,start:function(te,ce,Xe){var fe,Ne=this,D=!1,ne=B(te),Y=!ce;if(te.eventSource&&(te.log("The connection already has an event source. Stopping it."),te.stop()),Ee.EventSource){fe=j.getUrl(te,this.name,Y);try{te.log("Attempting to connect to SSE endpoint '"+fe+"'."),te.eventSource=new Ee.EventSource(fe,{withCredentials:te.withCredentials})}catch(le){return te.log("EventSource failed trying to connect with error "+le.Message+"."),void(Xe?Xe():(ne.triggerHandler(w.onError,[Pe._.transportError(Pe.resources.eventSourceFailedToConnect,te.transport,le)]),Y&&Ne.reconnect(te)))}Y&&(te._.reconnectAttemptTimeoutHandle=Ee.setTimeout(function(){!1===D&&te.eventSource.readyState!==Ee.EventSource.OPEN&&Ne.reconnect(te)},Ne.timeOut)),te.eventSource.addEventListener("open",function(le){te.log("EventSource connected."),ee(te),j.clearReconnectTimeout(te),!1===D&&(D=!0,!0===oe(te,Pe.connectionState.reconnecting,Pe.connectionState.connected)&&ne.triggerHandler(w.onReconnect))},!1),te.eventSource.addEventListener("message",function(le){var Le;if("initialized"!==le.data){try{Le=te._parseResponse(le.data)}catch(Je){return void j.handleParseFailure(te,le.data,Je,Xe,le)}j.processMessages(te,Le,ce)}},!1),te.eventSource.addEventListener("error",function(le){var Le=Pe._.transportError(Pe.resources.eventSourceError,te.transport,le);this===te.eventSource&&(Xe&&Xe(Le)||(te.log("EventSource readyState: "+te.eventSource.readyState+"."),le.eventPhase===Ee.EventSource.CLOSED?(te.log("EventSource reconnecting due to the server connection ending."),Ne.reconnect(te)):(te.log("EventSource error."),ne.triggerHandler(w.onError,[Le]))))},!1)}else Xe&&(te.log("This browser doesn't support SSE."),Xe())},reconnect:function(te){j.reconnect(te,this.name)},lostConnection:function(te){this.reconnect(te)},send:function(te,ce){j.ajaxSend(te,ce)},stop:function(te){ee(te),j.clearReconnectTimeout(te),te&&te.eventSource&&(te.log("EventSource calling close()."),te.eventSource.close(),te.eventSource=null,delete te.eventSource)},abort:function(te,ce){j.ajaxAbort(te,ce)}}}(window.jQuery,window),function(B,Ee,ct){var ce,Ne,Pe=B.signalR,w=B.signalR.events,oe=B.signalR.changeState,j=Pe.transports._logic,ee=function(){var ce=Ee.document.createElement("iframe");return ce.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;"),ce},te=(ce=null,Ne=0,{prevent:function(){Pe._.ieVersion<=8&&(0===Ne&&(ce=Ee.setInterval(function(){var D=ee();Ee.document.body.appendChild(D),Ee.document.body.removeChild(D),D=null},1e3)),Ne++)},cancel:function(){1===Ne&&Ee.clearInterval(ce),Ne>0&&Ne--}});Pe.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return!0},iframeClearThreshold:50,start:function(ce,Xe,Ne){if(ce.accessToken)Ne&&(ce.log("Forever Frame does not support connections that require a Bearer token to connect, such as the Azure SignalR Service."),Ne());else{var Y,D=this,ne=j.foreverFrame.count+=1,fe=ee(),le=function(){ce.log("Forever frame iframe finished loading and is no longer receiving messages."),(!Ne||!Ne())&&D.reconnect(ce)};Ee.EventSource?Ne&&(ce.log("Forever Frame is not supported by SignalR on browsers with SSE support."),Ne()):(fe.setAttribute("data-signalr-connection-id",ce.id),te.prevent(),Y=j.getUrl(ce,this.name),Y+="&frameId="+ne,Ee.document.documentElement.appendChild(fe),ce.log("Binding to iframe's load event."),fe.addEventListener?fe.addEventListener("load",le,!1):fe.attachEvent&&fe.attachEvent("onload",le),fe.src=Y,j.foreverFrame.connections[ne]=ce,ce.frame=fe,ce.frameId=ne,Xe&&(ce.onSuccess=function(){ce.log("Iframe transport started."),Xe()}))}},reconnect:function(ce){var Xe=this;j.isConnectedOrReconnecting(ce)&&j.verifyLastActive(ce)&&Ee.setTimeout(function(){if(j.verifyLastActive(ce)&&ce.frame&&j.ensureReconnectingState(ce)){var Ne=ce.frame,D=j.getUrl(ce,Xe.name,!0)+"&frameId="+ce.frameId;ce.log("Updating iframe src to '"+D+"'."),Ne.src=D}},ce.reconnectDelay)},lostConnection:function(ce){this.reconnect(ce)},send:function(ce,Xe){j.ajaxSend(ce,Xe)},receive:function(ce,Xe){var Ne,D,ne;if(ce.json!==ce._originalJson&&(Xe=ce._originalJson.stringify(Xe)),ne=ce._parseResponse(Xe),j.processMessages(ce,ne,ce.onSuccess),ce.state===B.signalR.connectionState.connected&&(ce.frameMessageCount=(ce.frameMessageCount||0)+1,ce.frameMessageCount>Pe.transports.foreverFrame.iframeClearThreshold&&(ce.frameMessageCount=0,(Ne=ce.frame.contentWindow||ce.frame.contentDocument)&&Ne.document&&Ne.document.body)))for(D=Ne.document.body;D.firstChild;)D.removeChild(D.firstChild)},stop:function(ce){var Xe=null;if(te.cancel(),ce.frame){if(ce.frame.stop)ce.frame.stop();else try{(Xe=ce.frame.contentWindow||ce.frame.contentDocument).document&&Xe.document.execCommand&&Xe.document.execCommand("Stop")}catch(Ne){ce.log("Error occurred when stopping foreverFrame transport. Message = "+Ne.message+".")}ce.frame.parentNode===Ee.document.documentElement&&Ee.document.documentElement.removeChild(ce.frame),delete j.foreverFrame.connections[ce.frameId],ce.frame=null,ce.frameId=null,delete ce.frame,delete ce.frameId,delete ce.onSuccess,delete ce.frameMessageCount,ce.log("Stopping forever frame.")}},abort:function(ce,Xe){j.ajaxAbort(ce,Xe)},getConnection:function(ce){return j.foreverFrame.connections[ce]},started:function(ce){!0===oe(ce,Pe.connectionState.reconnecting,Pe.connectionState.connected)&&B(ce).triggerHandler(w.onReconnect)}}}(window.jQuery,window),function(B,Ee,ct){var Pe=B.signalR,w=B.signalR.events,oe=B.signalR.changeState,j=B.signalR.isDisconnecting,ee=Pe.transports._logic;Pe.transports.longPolling={name:"longPolling",supportsKeepAlive:function(){return!1},reconnectDelay:3e3,start:function(te,ce,Xe){var Ne=this,D=function(){D=B.noop,te.log("LongPolling connected."),ce?ce():te.log("WARNING! The client received an init message after reconnecting.")},ne=function(Je){return!!Xe(Je)&&(te.log("LongPolling failed to connect."),!0)},Y=te._,fe=0,le=function(Je){Ee.clearTimeout(Y.reconnectTimeoutId),Y.reconnectTimeoutId=null,!0===oe(Je,Pe.connectionState.reconnecting,Pe.connectionState.connected)&&(Je.log("Raising the reconnect event"),B(Je).triggerHandler(w.onReconnect))};te.pollXhr&&(te.log("Polling xhr requests already exists, aborting."),te.stop()),te.messageId=null,Y.reconnectTimeoutId=null,Y.pollTimeoutId=Ee.setTimeout(function(){!function Je(Ve,z){var He=!(null===Ve.messageId),Mt=ee.getUrl(Ve,Ne.name,He,!z,!0),qn={};Ve.messageId&&(qn.messageId=Ve.messageId),Ve.groupsToken&&(qn.groupsToken=Ve.groupsToken),!0!==j(Ve)&&(te.log("Opening long polling request to '"+Mt+"'."),Ve.pollXhr=ee.ajax(te,{xhrFields:{onprogress:function(){ee.markLastMessage(te)}},url:Mt,type:"POST",contentType:Pe._.defaultContentType,data:qn,timeout:te._.pollTimeout,headers:te.accessToken?{Authorization:"Bearer "+te.accessToken}:{},success:function(Fe){var Ct,ye,Jt,bn=0;te.log("Long poll complete."),fe=0;try{Ct=te._parseResponse(Fe)}catch(fn){return void ee.handleParseFailure(Ve,Fe,fn,ne,Ve.pollXhr)}null!==Y.reconnectTimeoutId&&le(Ve),Ct&&(ye=ee.maximizePersistentResponse(Ct)),ee.processMessages(Ve,Ct,D),ye&&"number"===B.type(ye.LongPollDelay)&&(bn=ye.LongPollDelay),!0!==j(Ve)&&(!(Jt=ye&&ye.ShouldReconnect)||ee.ensureReconnectingState(Ve))&&(bn>0?Y.pollTimeoutId=Ee.setTimeout(function(){Je(Ve,Jt)},bn):Je(Ve,Jt))},error:function(Fe,Ct){var bn=Pe._.transportError(Pe.resources.longPollFailed,te.transport,Fe,Ve.pollXhr);if(Ee.clearTimeout(Y.reconnectTimeoutId),Y.reconnectTimeoutId=null,"abort"!==Ct){if(!ne(bn)){if(fe++,te.state!==Pe.connectionState.reconnecting&&(te.log("An error occurred using longPolling. Status = "+Ct+".  Response = "+Fe.responseText+"."),B(Ve).triggerHandler(w.onError,[bn])),(te.state===Pe.connectionState.connected||te.state===Pe.connectionState.reconnecting)&&!ee.verifyLastActive(te)||!ee.ensureReconnectingState(Ve))return;Y.pollTimeoutId=Ee.setTimeout(function(){Je(Ve,!0)},Ne.reconnectDelay)}}else te.log("Aborted xhr request.")}}),He&&!0===z&&(Y.reconnectTimeoutId=Ee.setTimeout(function(){le(Ve)},Math.min(1e3*(Math.pow(2,fe)-1),36e5))))}(te)},250)},lostConnection:function(te){te.pollXhr&&te.pollXhr.abort("lostConnection")},send:function(te,ce){ee.ajaxSend(te,ce)},stop:function(te){Ee.clearTimeout(te._.pollTimeoutId),Ee.clearTimeout(te._.reconnectTimeoutId),delete te._.pollTimeoutId,delete te._.reconnectTimeoutId,te.pollXhr&&(te.pollXhr.abort(),te.pollXhr=null,delete te.pollXhr)},abort:function(te,ce){ee.ajaxAbort(te,ce)}}}(window.jQuery,window),function(B,Ee,ct){var Pe=0,oe=B.signalR;function j(Y){return Y+".hubProxy"}function ee(Y,fe,le){var Le,Je=Y.length,Ve=[];for(Le=0;Le<Je;Le+=1)Y.hasOwnProperty(Le)&&(Ve[Le]=fe.call(le,Y[Le],Le,Y));return Ve}function te(Y){return B.isFunction(Y)||"undefined"===B.type(Y)?null:Y}function ce(Y){for(var fe in Y)if(Y.hasOwnProperty(fe))return!0;return!1}function Xe(Y,fe){var Le,le=Y._.invocationCallbacks;for(var Je in ce(le)&&Y.log("Clearing hub invocation callbacks with error: "+fe+"."),Y._.invocationCallbackId=0,delete Y._.invocationCallbacks,Y._.invocationCallbacks={},le)(Le=le[Je]).method.call(Le.scope,{E:fe})}function Ne(Y){return B.isFunction(Y)&&Y.toString().slice(0,256).indexOf("// Call the client hub method")>=0}function D(Y,fe){return new D.fn.init(Y,fe)}function ne(Y,fe){var le={qs:null,logging:!1,useDefaultPath:!0};return B.extend(le,fe),(!Y||le.useDefaultPath)&&(Y=(Y||"")+"/signalr"),new ne.fn.init(Y,le)}(D.fn=D.prototype={init:function(Y,fe){this.state={},this.connection=Y,this.hubName=fe,this._={callbackMap:{}}},constructor:D,hasSubscriptions:function(){return ce(this._.callbackMap)},on:function(Y,fe,le){var Le=this,Je=Le._.callbackMap,Ve=!le&&Ne(fe);(le=le||fe)._signalRGuid||(le._signalRGuid=Pe++);var z=Je[Y=Y.toLowerCase()];z||(Je[Y]=z=[]);for(var me,b=0;b<z.length;b++)(z[b].guid===le._signalRGuid||Ve&&z[b].isFromOldGeneratedHubProxy)&&(me=z[b]);me||Je[Y].push(me={guid:le._signalRGuid,eventHandlers:[],isFromOldGeneratedHubProxy:Ve});var He=function(We,Mt){fe.apply(Le,Mt)};return me.eventHandlers.push(He),B(Le).bind(j(Y),He),Le},off:function(Y,fe,le){var Ve,Je=this._.callbackMap,z=!le&&Ne(fe);if(le=le||fe,Ve=Je[Y=Y.toLowerCase()])if(fe){for(var me,He=0;He<Ve.length;He++)(Ve[He].guid===le._signalRGuid||z&&Ve[He].isFromOldGeneratedHubProxy)&&(me=Ve[He]);if(me){for(var We=0;We<me.eventHandlers.length;We++)B(this).unbind(j(Y),me.eventHandlers[We]);Ve.splice(He,1),0===Ve.length&&delete Je[Y]}}else fe||(B(this).unbind(j(Y)),delete Je[Y]);return this},invoke:function(Y){var fe=this,le=fe.connection,Le=B.makeArray(arguments).slice(1),Je=ee(Le,te),Ve={H:fe.hubName,M:Y,A:Je,I:le._.invocationCallbackId},z=B.Deferred(),me=function(b){var Mt,He=fe._maximizeHubResponse(b);B.extend(fe.state,He.State),He.Progress?z.notifyWith?z.notifyWith(fe,[He.Progress.Data]):le._.progressjQueryVersionLogged||(le.log("A hub method invocation progress update was received but the version of jQuery in use ("+B.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications."),le._.progressjQueryVersionLogged=!0):He.Error?(He.StackTrace&&le.log(He.Error+"\n"+He.StackTrace+"."),(Mt=oe._.error(He.Error,He.IsHubException?"HubException":"Exception")).data=He.ErrorData,le.log(fe.hubName+"."+Y+" failed to execute. Error: "+Mt.message),z.rejectWith(fe,[Mt])):(le.log("Invoked "+fe.hubName+"."+Y),z.resolveWith(fe,[He.Result]))};return le._.invocationCallbacks[le._.invocationCallbackId.toString()]={scope:fe,method:me},le._.invocationCallbackId+=1,B.isEmptyObject(fe.state)||(Ve.S=fe.state),le.log("Invoking "+fe.hubName+"."+Y),le.send(Ve),z.promise()},_maximizeHubResponse:function(Y){return{State:Y.S,Result:Y.R,Progress:Y.P?{Id:Y.P.I,Data:Y.P.D}:null,Id:Y.I,IsHubException:Y.H,Error:Y.E,StackTrace:Y.T,ErrorData:Y.D}}}).init.prototype=D.fn,(ne.fn=ne.prototype=B.connection()).init=function(Y,fe){var le={qs:null,logging:!1,useDefaultPath:!0},Le=this;B.extend(le,fe),B.signalR.fn.init.call(Le,Y,le.qs,le.logging),Le.proxies={},Le._.invocationCallbackId=0,Le._.invocationCallbacks={},Le.received(function(Je){var Ve,z,me,b,He,We;!Je||(void 0!==Je.P?(me=Je.P.I.toString(),(b=Le._.invocationCallbacks[me])&&b.method.call(b.scope,Je)):void 0!==Je.I?(me=Je.I.toString(),(b=Le._.invocationCallbacks[me])&&(Le._.invocationCallbacks[me]=null,delete Le._.invocationCallbacks[me],b.method.call(b.scope,Je))):(Ve=this._maximizeClientHubInvocation(Je),Le.log("Triggering client hub event '"+Ve.Method+"' on hub '"+Ve.Hub+"'."),He=Ve.Hub.toLowerCase(),We=Ve.Method.toLowerCase(),B.extend((z=this.proxies[He]).state,Ve.State),B(z).triggerHandler(j(We),[Ve.Args])))}),Le.error(function(Je,Ve){var z,me;!Ve||(me=Le._.invocationCallbacks[z=Ve.I])&&(Le._.invocationCallbacks[z]=null,delete Le._.invocationCallbacks[z],me.method.call(me.scope,{E:Je}))}),Le.reconnecting(function(){Le.transport&&"webSockets"===Le.transport.name&&Xe(Le,"Connection started reconnecting before invocation result was received.")}),Le.disconnected(function(){Xe(Le,"Connection was disconnected before invocation result was received.")})},ne.fn._maximizeClientHubInvocation=function(Y){return{Hub:Y.H,Method:Y.M,Args:Y.A,State:Y.S}},ne.fn._registerSubscribedHubs=function(){var Y=this;Y._subscribedToHubs||(Y._subscribedToHubs=!0,Y.starting(function(){var fe=[];B.each(Y.proxies,function(le){this.hasSubscriptions()&&(fe.push({name:le}),Y.log("Client subscribed to hub '"+le+"'."))}),0===fe.length&&Y.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to."),Y.data=Y.json.stringify(fe)}))},ne.fn.createHubProxy=function(Y){Y=Y.toLowerCase();var fe=this.proxies[Y];return fe||(fe=D(this,Y),this.proxies[Y]=fe),this._registerSubscribedHubs(),fe},ne.fn.init.prototype=ne.fn,B.hubConnection=ne}(window.jQuery,window),window.jQuery.signalR.version="2.4.3",function(){"use strict";var B=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},Ee=function(e){return{eq:e}},ct=Ee(function(e,t){return e===t}),Pe=function(e){return Ee(function(t,n){if(t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},w=function(e){return Ee(function(t,n){var l,u,f,r=Object.keys(t),o=Object.keys(n);if(!(l=ct,u=Pe(l),f=function(u){return Array.prototype.slice.call(u).sort(void 0)},Ee(function(g,v){return u.eq(f(g),f(v))})).eq(r,o))return!1;for(var i=r.length,a=0;a<i;a++){var s=r[a];if(!e.eq(t[s],n[s]))return!1}return!0})},oe=Ee(function(e,t){if(e===t)return!0;var n=B(e);return n===B(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?e===t:"array"===n?Pe(oe).eq(e,t):"object"===n&&w(oe).eq(e,t))});const j=Object.getPrototypeOf,ee=(e,t,n)=>{var r;return!!n(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},te=e=>t=>(n=>{const r=typeof n;return null===n?"null":"object"===r&&Array.isArray(n)?"array":"object"===r&&ee(n,String,(o,i)=>i.isPrototypeOf(o))?"string":r})(t)===e,ce=e=>t=>typeof t===e,Xe=e=>t=>e===t,Ne=(e,t)=>ne(e)&&ee(e,t,(n,r)=>j(n)===r),D=te("string"),ne=te("object"),Y=e=>Ne(e,Object),fe=te("array"),le=Xe(null),Le=ce("boolean"),Je=Xe(void 0),Ve=e=>null==e,z=e=>!Ve(e),me=ce("function"),b=ce("number"),He=(e,t)=>{if(fe(e)){for(let n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},We=()=>{},Mt=(e,t)=>(...n)=>e(t.apply(null,n)),qn=(e,t)=>n=>e(t(n)),Fe=e=>()=>e,Ct=e=>e,bn=(e,t)=>e===t;function ye(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}const Jt=e=>t=>!e(t),fn=e=>()=>{throw new Error(e)},ln=e=>e(),$t=e=>{e()},Ot=Fe(!1),Ft=Fe(!0);class T{constructor(t,n){this.tag=t,this.value=n}static some(t){return new T(!0,t)}static none(){return T.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?T.some(t(this.value)):T.none()}bind(t){return this.tag?t(this.value):T.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:T.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(null!=t?t:"Called getOrDie on None")}static from(t){return z(t)?T.some(t):T.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}T.singletonNone=new T(!1);const Hr=Array.prototype.slice,zn=Array.prototype.indexOf,Xr=Array.prototype.push,ur=(e,t)=>zn.call(e,t),Pt=(e,t)=>ur(e,t)>-1,Yt=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},wt=(e,t)=>{const n=e.length,r=new Array(n);for(let o=0;o<n;o++)r[o]=t(e[o],o);return r},Ae=(e,t)=>{for(let n=0,r=e.length;n<r;n++)t(e[n],n)},Wr=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},Qr=(e,t)=>{const n=[],r=[];for(let o=0,i=e.length;o<i;o++){const a=e[o];(t(a,o)?n:r).push(a)}return{pass:n,fail:r}},gt=(e,t)=>{const n=[];for(let r=0,o=e.length;r<o;r++){const i=e[r];t(i,r)&&n.push(i)}return n},To=(e,t,n)=>(Wr(e,(r,o)=>{n=t(n,r,o)}),n),yn=(e,t,n)=>(Ae(e,(r,o)=>{n=t(n,r,o)}),n),Cn=(e,t,n)=>{for(let r=0,o=e.length;r<o;r++){const i=e[r];if(t(i,r))return T.some(i);if(n(i,r))break}return T.none()},rn=(e,t)=>Cn(e,t,Ot),Zo=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return T.some(n);return T.none()},_a=e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!fe(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Xr.apply(t,e[n])}return t},pn=(e,t)=>_a(wt(e,t)),fr=(e,t)=>{for(let n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},Sr=e=>{const t=Hr.call(e,0);return t.reverse(),t},mt=(e,t)=>gt(e,n=>!Pt(t,n)),Vn=(e,t)=>{const n={};for(let r=0,o=e.length;r<o;r++){const i=e[r];n[String(i)]=t(i,r)}return n},Ao=(e,t)=>{const n=Hr.call(e,0);return n.sort(t),n},Mr=(e,t)=>t>=0&&t<e.length?T.some(e[t]):T.none(),xn=e=>Mr(e,0),mo=e=>Mr(e,e.length-1),gn=me(Array.from)?Array.from:e=>Hr.call(e),kn=(e,t)=>{for(let n=0;n<e.length;n++){const r=t(e[n],n);if(r.isSome())return r}return T.none()},on=Object.keys,No=Object.hasOwnProperty,qt=(e,t)=>{const n=on(e);for(let r=0,o=n.length;r<o;r++){const i=n[r];t(e[i],i)}},ho=(e,t)=>Ei(e,(n,r)=>({k:r,v:t(n,r)})),Ei=(e,t)=>{const n={};return qt(e,(r,o)=>{const i=t(r,o);n[i.k]=i.v}),n},wi=e=>(t,n)=>{e[n]=t},Jr=(e,t,n,r)=>{qt(e,(o,i)=>{(t(o,i)?n:r)(o,i)})},_r=(e,t)=>{const n={};return Jr(e,t,wi(n),We),n},Ro=(e,t)=>{const n=[];return qt(e,(r,o)=>{n.push(t(r,o))}),n},vo=e=>Ro(e,Ct),Ut=(e,t)=>yt(e,t)?T.from(e[t]):T.none(),yt=(e,t)=>No.call(e,t),mn=(e,t)=>yt(e,t)&&null!=e[t],Jn=e=>{const t={};return Ae(e,n=>{t[n]={}}),on(t)},zi=e=>void 0!==e.length,Ea=Array.isArray,ei=(e,t,n)=>{if(!e)return!1;if(n=n||e,zi(e)){for(let r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return!1}else for(const r in e)if(yt(e,r)&&!1===t.call(n,e[r],r,e))return!1;return!0},xi=(e,t)=>{const n=[];return ei(e,(r,o)=>{n.push(t(r,o,e))}),n},Er=(e,t)=>{const n=[];return ei(e,(r,o)=>{t&&!t(r,o,e)||n.push(r)}),n},Zr=(e,t,n,r)=>{let o=Je(n)?e[0]:n;for(let i=0;i<e.length;i++)o=t.call(r,o,e[i],i);return o},Vi=(e,t,n)=>{for(let r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1},qr=e=>e[e.length-1],zr=e=>{let t,n=!1;return(...r)=>(n||(n=!0,t=e.apply(null,r)),t)},ki=()=>Po(0,0),Po=(e,t)=>({major:e,minor:t}),bo={nu:Po,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?ki():((r,o)=>{const i=((s,l)=>{for(let c=0;c<s.length;c++){const u=s[c];if(u.test(l))return u}})(r,o);if(!i)return{major:0,minor:0};const a=s=>Number(o.replace(i,"$"+s));return Po(a(1),a(2))})(e,n)},unknown:ki},Ti=(e,t)=>{const n=String(t).toLowerCase();return rn(e,r=>r.search(n))},wa=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,xa=(e,t)=>Sn(e,t)?e.substring(t.length):e,an=(e,t,n=0,r)=>{const o=e.indexOf(t,n);return-1!==o&&(!!Je(r)||o+t.length<=r)},Sn=(e,t)=>wa(e,t,0),Ai=(e,t)=>wa(e,t,e.length-t.length),Ir=e=>t=>t.replace(e,""),Lr=Ir(/^\s+|\s+$/g),fs=Ir(/^\s+/g),ps=Ir(/\s+$/g),nr=e=>e.length>0,ti=e=>!nr(e),Ni=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?T.none():T.some(n)},Oo=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Gn=e=>t=>an(t,e),Ri=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>an(e,"edge/")&&an(e,"chrome")&&an(e,"safari")&&an(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Oo],search:e=>an(e,"chrome")&&!an(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>an(e,"msie")||an(e,"trident")},{name:"Opera",versionRegexes:[Oo,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Gn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Gn("firefox")},{name:"Safari",versionRegexes:[Oo,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(an(e,"safari")||an(e,"mobile/"))&&an(e,"applewebkit")}],el=[{name:"Windows",search:Gn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>an(e,"iphone")||an(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Gn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Gn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Gn("linux"),versionRegexes:[]},{name:"Solaris",search:Gn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Gn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Gn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],yo={browsers:Fe(Ri),oses:Fe(el)},Ki="Chromium",ka="Firefox",eo=e=>{const t=e.current,r=o=>()=>t===o;return{current:t,version:e.version,isEdge:r("Edge"),isChromium:r(Ki),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(ka),isSafari:r("Safari")}},$i=()=>eo({current:void 0,version:bo.unknown()}),Vr=eo,Yi=(Fe("Edge"),Fe(Ki),Fe("IE"),Fe("Opera"),Fe(ka),Fe("Safari"),"Windows"),Ta="Android",Do="Solaris",Mo="FreeBSD",Na="ChromeOS",pr=e=>{const t=e.current,r=o=>()=>t===o;return{current:t,version:e.version,isWindows:r(Yi),isiOS:r("iOS"),isAndroid:r(Ta),isMacOS:r("macOS"),isLinux:r("Linux"),isSolaris:r(Do),isFreeBSD:r(Mo),isChromeOS:r(Na)}},ni=()=>pr({current:void 0,version:bo.unknown()}),ri=pr,gs=(Fe(Yi),Fe("iOS"),Fe(Ta),Fe("Linux"),Fe("macOS"),Fe(Do),Fe(Mo),Fe(Na),e=>window.matchMedia(e).matches);let ms=zr(()=>((e,t,n)=>{const r=yo.browsers(),o=yo.oses(),i=t.bind(l=>{return c=r,kn(l.brands,f=>{const g=f.brand.toLowerCase();return rn(c,v=>{var m;return g===(null===(m=v.brand)||void 0===m?void 0:m.toLowerCase())}).map(v=>({current:v.name,version:bo.nu(parseInt(f.version,10),0)}))});var c}).orThunk(()=>{return Ti(r,c=e).map(u=>{const f=bo.detect(u.versionRegexes,c);return{current:u.name,version:f}});var c}).fold($i,Vr),a=(l=o,c=e,Ti(l,c).map(u=>{const f=bo.detect(u.versionRegexes,c);return{current:u.name,version:f}})).fold(ni,ri),s=((l,c,u,f)=>{const g=l.isiOS()&&!0===/ipad/i.test(u),v=l.isiOS()&&!g,m=l.isiOS()||l.isAndroid(),y=m||f("(pointer:coarse)"),h=g||!v&&m&&f("(min-device-width:768px)"),S=v||m&&!h,x=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(u),k=!S&&!h&&!x;return{isiPad:Fe(g),isiPhone:Fe(v),isTablet:Fe(h),isPhone:Fe(S),isTouch:Fe(y),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:Fe(x),isDesktop:Fe(k)}})(a,i,e,n);var l,c;return{browser:i,os:a,deviceType:s}})(navigator.userAgent,T.from(navigator.userAgentData),gs));const $n=()=>ms(),Gr=navigator.userAgent,pe=$n(),re=pe.browser,_=pe.os,O=pe.deviceType,q=-1!==Gr.indexOf("Windows Phone"),J={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:re.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!re.isIE(),windowsPhone:q,browser:{current:re.current,version:re.version,isChromium:re.isChromium,isEdge:re.isEdge,isFirefox:re.isFirefox,isIE:re.isIE,isOpera:re.isOpera,isSafari:re.isSafari},os:{current:_.current,version:_.version,isAndroid:_.isAndroid,isChromeOS:_.isChromeOS,isFreeBSD:_.isFreeBSD,isiOS:_.isiOS,isLinux:_.isLinux,isMacOS:_.isMacOS,isSolaris:_.isSolaris,isWindows:_.isWindows},deviceType:{isDesktop:O.isDesktop,isiPad:O.isiPad,isiPhone:O.isiPhone,isPhone:O.isPhone,isTablet:O.isTablet,isTouch:O.isTouch,isWebView:O.isWebView}},we=/^\s*|\s*$/g,it=e=>Ve(e)?"":(""+e).replace(we,""),St=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),ei(e,(o,i)=>!1!==t.call(r,o,i,n)&&(St(o,t,n,r),!0)))},xe={trim:it,isArray:Ea,is:(e,t)=>t?!("array"!==t||!Ea(e))||typeof e===t:void 0!==e,toArray:e=>{if(Ea(e))return e;{const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const r=D(e)?e.split(t||","):e||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:ei,map:xi,grep:Er,inArray:(e,t)=>{if(e)for(let n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},hasOwn:yt,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(yt(r,o)){const i=r[o];void 0!==i&&(e[o]=i)}}return e},walk:St,resolve:(e,t=window)=>{const n=e.split(".");for(let r=0,o=n.length;r<o&&(t=t[n[r]]);r++);return t},explode:(e,t)=>fe(e)?e:""===e?[]:xi(e.split(t||","),it),_addCacheSuffix:e=>{const t=J.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Ht=(e,t,n=bn)=>e.exists(r=>n(r,t)),Gt=(e,t,n)=>e.isSome()&&t.isSome()?T.some(n(e.getOrDie(),t.getOrDie())):T.none(),gr=(e,t)=>e?T.some(t):T.none(),oi="undefined"!=typeof window?window:Function("return this;")(),Xi=(e,t)=>((n,r)=>{let o=null!=r?r:oi;for(let i=0;i<n.length&&null!=o;++i)o=o[n[i]];return o})(e.split("."),t),hs=Object.getPrototypeOf,zt=e=>e.dom.nodeName.toLowerCase(),Di=e=>e.dom.nodeType,Io=e=>t=>Di(t)===e,ii=e=>Dn(e)&&(e=>{const t=Xi("ownerDocument.defaultView",e);return ne(e)&&((n=t,((r,o)=>{const i=Xi("HTMLElement",o);if(null==i)throw new Error("HTMLElement not available on this browser");return i})(0,n)).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(hs(e).constructor.name));var n})(e.dom),Dn=Io(1),rr=Io(3),pc=Io(9),tl=Io(11),nl=e=>t=>Dn(t)&&zt(t)===e,Qi=(e,t,n)=>{if(!(D(n)||Le(n)||b(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Tn=(e,t,n)=>{Qi(e.dom,t,n)},Lo=(e,t)=>{const n=e.dom;qt(t,(r,o)=>{Qi(n,o,r)})},mr=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},Bo=(e,t)=>T.from(mr(e,t)),vs=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Mn=(e,t)=>{e.dom.removeAttribute(t)},d=e=>yn(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),p=(e,t)=>{const n=mr(e,t);return void 0===n||""===n?[]:n.split(" ")},C=e=>void 0!==e.dom.classList,E=e=>p(e,"class"),A=(e,t)=>((n,r,o)=>{const i=p(n,r).concat([o]);return Tn(n,r,i.join(" ")),!0})(e,"class",t),R=(e,t)=>((n,r,o)=>{const i=gt(p(n,r),a=>a!==o);return i.length>0?Tn(n,r,i.join(" ")):Mn(n,r),!1})(e,"class",t),M=(e,t)=>{C(e)?e.dom.classList.add(t):A(e,t)},Q=e=>{0===(C(e)?e.dom.classList:E(e)).length&&Mn(e,"class")},G=(e,t)=>{C(e)?e.dom.classList.remove(t):R(e,t),Q(e)},ue=(e,t)=>C(e)&&e.dom.classList.contains(t),_e=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Oe=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,e),new Error(r)}return _e(n.childNodes[0])},ge=(e,t)=>{const n=(t||document).createElement(e);return _e(n)},Be=(e,t)=>{const n=(t||document).createTextNode(e);return _e(n)},I=_e,At=(e,t)=>{const n=[],r=i=>(n.push(i),t(i));let o=t(e);do{o=o.bind(r)}while(o.isSome());return n},Xt=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},In=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Rt=(e,t)=>e.dom===t.dom,Yn=(e,t)=>{const n=e.dom,r=t.dom;return n!==r&&n.contains(r)},Lt=e=>I(e.dom.ownerDocument),hr=e=>pc(e)?e:Lt(e),Bt=e=>I(hr(e).dom.defaultView),Vt=e=>T.from(e.dom.parentNode).map(I),Mi=e=>T.from(e.dom.parentElement).map(I),bs=(e,t)=>{const n=me(t)?t:Ot;let r=e.dom;const o=[];for(;null!=r.parentNode;){const i=r.parentNode,a=I(i);if(o.push(a),!0===n(a))break;r=i}return o},or=e=>T.from(e.dom.previousSibling).map(I),jo=e=>T.from(e.dom.nextSibling).map(I),Co=e=>Sr(At(e,or)),Fo=e=>At(e,jo),cn=e=>wt(e.dom.childNodes,I),Zn=(e,t)=>T.from(e.dom.childNodes[t]).map(I),Nn=e=>Zn(e,0),_n=e=>Zn(e,e.dom.childNodes.length-1),er=e=>e.dom.childNodes.length,So=e=>tl(e)&&z(e.dom.host),ir=me(Element.prototype.attachShadow)&&me(Node.prototype.getRootNode),xt=Fe(ir),en=ir?e=>I(e.dom.getRootNode()):hr,hn=e=>So(e)?e:(t=>{const n=t.dom.head;if(null==n)throw new Error("Head is not available yet");return I(n)})(hr(e)),sn=e=>I(e.dom.host),to=e=>{if(xt()&&z(e.target)){const t=I(e.target);if(Dn(t)&&Ji(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return xn(n)}}return T.from(e.target)},Ji=e=>z(e.dom.shadowRoot),Uo=e=>{const t=rr(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return(r=>{const o=en(r);return So(o)?T.some(o):T.none()})(I(t)).fold(()=>n.body.contains(t),qn(Uo,sn))};var ai=(e,t,n,r,o)=>e(n,r)?T.some(n):me(o)&&o(n)?T.none():t(n,r,o);const no=(e,t,n)=>{let r=e.dom;const o=me(n)?n:Ot;for(;r.parentNode;){r=r.parentNode;const i=I(r);if(t(i))return T.some(i);if(o(i))break}return T.none()},wr=(e,t,n)=>ai((r,o)=>o(r),no,e,t,n),Zi=(e,t,n)=>no(e,r=>Xt(r,t),n),si=(e,t)=>((n,r)=>{const o=void 0===r?document:r.dom;return In(o)?T.none():T.from(o.querySelector(n)).map(I)})(t,e),_o=(e,t,n)=>ai((r,o)=>Xt(r,o),Zi,e,t,n),Ho=(e,t=!1)=>{return Uo(e)?e.dom.isContentEditable:(n=e,_o(n,"[contenteditable]")).fold(Fe(t),r=>"true"===rl(r));var n},rl=e=>e.dom.contentEditable,li=e=>void 0!==e.style&&me(e.style.getPropertyValue),ys=(e,t,n)=>{if(!D(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);li(e)&&e.style.setProperty(t,n)},Cs=(e,t,n)=>{ys(e.dom,t,n)},ea=(e,t)=>{const n=e.dom;qt(t,(r,o)=>{ys(n,o,r)})},ro=(e,t)=>{const n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||Uo(e)?r:F(n,t)},F=(e,t)=>li(e)?e.style.getPropertyValue(t):"",ie=(e,t)=>{const r=F(e.dom,t);return T.from(r).filter(o=>o.length>0)},ke=e=>{const t={},n=e.dom;if(li(n))for(let r=0;r<n.style.length;r++){const o=n.style.item(r);t[o]=n.style[o]}return t},Re=(e,t)=>{var n,r;r=t,li(n=e.dom)&&n.style.removeProperty(r),Ht(Bo(e,"style").map(Lr),"")&&Mn(e,"style")},De=(e,t)=>{Vt(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},ot=(e,t)=>{jo(e).fold(()=>{Vt(e).each(n=>{Ze(n,t)})},n=>{De(n,t)})},dt=(e,t)=>{Nn(e).fold(()=>{Ze(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},Ze=(e,t)=>{e.dom.appendChild(t.dom)},lt=(e,t)=>{De(e,t),Ze(t,e)},It=(e,t)=>{Ae(t,n=>{Ze(e,n)})},kt=e=>{e.dom.textContent="",Ae(cn(e),t=>{st(t)})},st=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Dt=e=>{const t=cn(e);var n,r;t.length>0&&(n=e,Ae(r=t,(o,i)=>{ot(0===i?n:r[i-1],o)})),st(e)},Tt=e=>wt(e,I),Rn=e=>e.dom.innerHTML,Ln=(e,t)=>{const n=Lt(e).dom,r=I(n.createDocumentFragment()),o=((i,a)=>{const s=(a||document).createElement("div");return s.innerHTML=i,cn(I(s))})(t,n);It(r,o),kt(e),Ze(e,r)},xr=(e,t,n,r)=>{e.dom.removeEventListener(t,n,r)},kr=(e,t)=>({left:e,top:t,translate:(n,r)=>kr(e+n,t+r)}),ar=kr,tn=(e,t)=>void 0!==e?e:void 0!==t?t:0,Wo=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?ar(n.offsetLeft,n.offsetTop):Uo(e)?(r=>{const o=r.getBoundingClientRect();return ar(o.left,o.top)})(t):ar(0,0)},Br=e=>{const t=void 0!==e?e.dom:document;return ar(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},Pa=(e,t)=>{$n().browser.isSafari()&&me(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},ol=(e,t,n,r)=>({x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}),il=e=>{const t=void 0===e?window:e,r=Br(I(t.document));return(o=>{const i=void 0===o?window:o;return $n().browser.isFirefox()?T.none():T.from(i.visualViewport)})(t).fold(()=>{const o=t.document.documentElement;return ol(r.left,r.top,o.clientWidth,o.clientHeight)},o=>ol(Math.max(o.pageLeft,r.left),Math.max(o.pageTop,r.top),o.width,o.height))},gc=(e,t)=>{let n=[];return Ae(cn(e),r=>{t(r)&&(n=n.concat([r])),n=n.concat(gc(r,t))}),n},sr=(e,t)=>((n,r)=>{const o=void 0===r?document:r.dom;return In(o)?[]:wt(o.querySelectorAll(n),I)})(t,e),pm=(e,t,n)=>Zi(e,t,n).isSome();class Pn{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,r,o){if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){let i=t[r];if(i)return i;for(let a=t.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(i=a[r],i)return i}}}findPreviousNode(t,n){if(t){const r=t.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!n)for(let i=r.lastChild;i;i=i.lastChild)if(!i.lastChild)return i;return r}const o=t.parentNode;if(o&&o!==this.rootNode)return o}}}const Oa=e=>t=>!!t&&t.nodeType===e,mc=e=>!!e&&!Object.getPrototypeOf(e),$e=Oa(1),al=e=>{const t=e.toLowerCase();return n=>z(n)&&n.nodeName.toLowerCase()===t},qo=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const r=n.nodeName.toLowerCase();return Pt(t,r)}return!1}},hc=(e,t)=>{const n=t.toLowerCase().split(" ");return r=>{if($e(r)){const o=r.ownerDocument.defaultView;if(o)for(let i=0;i<n.length;i++){const a=o.getComputedStyle(r,null);if((a?a.getPropertyValue(e):null)===n[i])return!0}}return!1}},gm=e=>t=>$e(t)&&t.hasAttribute(e),Da=e=>$e(e)&&e.hasAttribute("data-mce-bogus"),Ii=e=>$e(e)&&"TABLE"===e.tagName,mm=e=>t=>!(!$e(t)||t.contentEditable!==e&&t.getAttribute("data-mce-contenteditable")!==e),gu=qo(["textarea","input"]),Ie=Oa(3),Xw=Oa(4),Qw=Oa(7),ta=Oa(8),sl=Oa(9),mu=Oa(11),dn=al("br"),hm=al("img"),zo=mm("true"),Zt=mm("false"),vc=qo(["td","th"]),Jw=qo(["td","th","caption"]),ci=qo(["video","audio","object","embed"]),Zw=al("li"),vm=al("details"),e1=al("summary"),Bn="\xa0",hu=e=>"\ufeff"===e,vu=((e,t)=>{const n=r=>e(r)?T.from(r.dom.nodeValue):T.none();return{get:r=>{if(!e(r))throw new Error("Can only get text value of a text node");return n(r).getOr("")},getOption:n,set:(r,o)=>{if(!e(r))throw new Error("Can only set raw text value of a text node");r.dom.nodeValue=o}}})(rr),bc=e=>vu.get(e),bm=e=>vu.getOption(e),t1=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),na=e=>{let t;return n=>(t=t||Vn(e,Ft),yt(t,zt(n)))},oo=na(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),yc=e=>Dn(e)&&!oo(e),Ma=e=>Dn(e)&&"br"===zt(e),ym=na(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),bu=na(["ul","ol","dl"]),ll=na(["li","dd","dt"]),n1=na(["thead","tbody","tfoot"]),cl=na(["td","th"]),Cc=na(["pre","script","textarea","style"]),r1=na(t1),o1=e=>r1(e)||yc(e),Sc=()=>{const e=ge("br");return Tn(e,"data-mce-bogus","1"),e},ra=e=>{kt(e),Ze(e,Sc())},i1=e=>{_n(e).each(t=>{or(t).each(n=>{oo(e)&&Ma(t)&&oo(n)&&st(t)})})},lr="\ufeff",_c=hu,Li=e=>e.replace(/\uFEFF/g,""),a1=$e,_s=Ie,Es=e=>(_s(e)&&(e=e.parentNode),a1(e)&&e.hasAttribute("data-mce-caret")),oa=e=>_s(e)&&_c(e.data),io=e=>Es(e)||oa(e),Cm=e=>e.firstChild!==e.lastChild||!dn(e.firstChild),yu=e=>{const t=e.container();return!!Ie(t)&&(t.data.charAt(e.offset())===lr||e.isAtStart()&&oa(t.previousSibling))},Cu=e=>{const t=e.container();return!!Ie(t)&&(t.data.charAt(e.offset()-1)===lr||e.isAtEnd()&&oa(t.nextSibling))},Ec=e=>_s(e)&&e.data[0]===lr,wc=e=>_s(e)&&e.data[e.data.length-1]===lr,Su=e=>e&&e.hasAttribute("data-mce-caret")?((t=>{var n;const r=t.getElementsByTagName("br"),o=r[r.length-1];Da(o)&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Sm=e=>Es(e.startContainer),_m=zo,s1=Zt,l1=dn,c1=Ie,d1=qo(["script","style","textarea"]),Em=qo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),u1=qo(["table"]),f1=io,Eo=e=>!f1(e)&&(c1(e)?!d1(e.parentNode):Em(e)||l1(e)||u1(e)||_u(e)),_u=e=>{return!($e(t=e)&&"true"===t.getAttribute("unselectable"))&&s1(e);var t},wm=(e,t)=>Eo(e)&&((n,r)=>{for(let o=n.parentNode;o&&o!==r;o=o.parentNode){if(_u(o))return!1;if(_m(o))return!0}return!0})(e,t),p1=/^[ \t\r\n]*$/,Ia=e=>p1.test(e),g1=e=>{for(const t of e)if(!hu(t))return!1;return!0},xm=e=>"\n"===e||"\r"===e,km=(e,t=4,n=!0,r=!0)=>{const o=(l=t)<=0?"":new Array(l+1).join(" "),i=e.replace(/\t/g,o);var l;return yn(i,(s,l)=>{return-1!==" \f\t\v".indexOf(l)||l===Bn?s.pcIsSpace||""===s.str&&n||s.str.length===i.length-1&&r||(u=s.str.length+1)<(c=i).length&&u>=0&&xm(c[u])?{pcIsSpace:!1,str:s.str+Bn}:{pcIsSpace:!0,str:s.str+" "}:{pcIsSpace:xm(l),str:s.str+l};var c,u},{pcIsSpace:!1,str:""}).str},xc=(e,t)=>{return Eo(e)&&(r=t,!(Ie(n=e)&&Ia(n.data)&&!((o,i)=>{const a=I(i),s=I(o);return pm(s,"pre,code",ye(Rt,a))})(n,r)))||(n=>$e(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(e)||m1(e);var n,r},m1=gm("data-mce-bookmark"),h1=gm("data-mce-bogus"),v1=e=>$e(e)&&"all"===e.getAttribute("data-mce-bogus"),En=(e,t=!0)=>((n,r)=>{let o=0;if(xc(n,n))return!1;{let i=n.firstChild;if(!i)return!0;const a=new Pn(i,n);do{if(r){if(v1(i)){i=a.next(!0);continue}if(h1(i)){i=a.next();continue}}if(dn(i))o++,i=a.next();else{if(xc(i,n))return!1;i=a.next()}}while(i);return o<=1}})(e.dom,t),kc="data-mce-block",Eu=e=>{return(t=e,gt(on(t),n=>!/[A-Z]/.test(n))).join(",");var t},Tm=(e,t)=>z(t.querySelector(e))?(t.setAttribute(kc,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(kc),!1),Am=(e,t)=>{const n=Eu(e.getTransparentElements()),r=Eu(e.getBlockElements());return gt(t.querySelectorAll(n),o=>Tm(r,o))},Nm=(e,t)=>{var n;const r=t?"lastChild":"firstChild";for(let o=e[r];o;o=o[r])if(En(I(o)))return void(null===(n=o.parentNode)||void 0===n||n.removeChild(o))},wu=(e,t)=>{const n=Am(e,t);var r,o,i;((e,t,n)=>{const r=e.getBlockElements(),o=I(t),i=s=>zt(s)in r,a=s=>Rt(s,o);Ae(Tt(n),s=>{no(s,i,a).each(l=>{const c=gt(cn(s),g=>i(g)&&!e.isValidChild(zt(l),zt(g)));if(c.length>0){const u=Mi(l);Ae(c,f=>{no(f,i,a).each(g=>{((v,m)=>{const y=document.createRange(),h=v.parentNode;if(h){y.setStartBefore(v),y.setEndBefore(m);const S=y.extractContents();Nm(S,!0),y.setStartAfter(m),y.setEndAfter(v);const x=y.extractContents();Nm(x,!1),En(I(S))||h.insertBefore(S,v),En(I(m))||h.insertBefore(m,v),En(I(x))||h.insertBefore(x,v),h.removeChild(v)}})(g.dom,f.dom)})}),u.each(f=>Am(e,f.dom))}})})})(e,t,n),r=e,o=t,i=n,Ae([...i,...La(r,o)?[o]:[]],a=>Ae(sr(I(a),a.nodeName.toLowerCase()),s=>{C1(r,s.dom)&&Dt(s)}))},y1=(e,t)=>{if(Tu(e,t)){const n=Eu(e.getBlockElements());Tm(n,t)}},xu=e=>e.hasAttribute(kc),ku=(e,t)=>yt(e.getTransparentElements(),t),Tu=(e,t)=>$e(t)&&ku(e,t.nodeName),La=(e,t)=>Tu(e,t)&&xu(t),C1=(e,t)=>Tu(e,t)&&!xu(t),Au=(e,t)=>1===t.type&&ku(e,t.name)&&D(t.attr(kc)),S1=$n().browser,Rm=e=>rn(e,Dn),Pm=(e,t)=>e.children&&Pt(e.children,t),Om=(e,t={})=>{let n=0;const r={},o=I(e),i=hr(o),a=l=>new Promise((c,u)=>{let f;const g=xe._addCacheSuffix(l),v=Ut(r,g).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));r[g]=v,v.count++;const m=(k,N)=>{Ae(k,$t),v.status=N,v.passed=[],v.failed=[],f&&(f.onload=null,f.onerror=null,f=null)},y=()=>m(v.passed,2),h=()=>m(v.failed,3);if(c&&v.passed.push(c),u&&v.failed.push(u),1===v.status)return;if(2===v.status)return void y();if(3===v.status)return void h();v.status=1;const S=ge("link",i.dom);var x;Lo(S,{rel:"stylesheet",type:"text/css",id:v.id}),t.contentCssCors&&Tn(S,"crossOrigin","anonymous"),t.referrerPolicy&&Tn(S,"referrerpolicy",t.referrerPolicy),f=S.dom,f.onload=y,f.onerror=h,x=S,Ze(hn(o),x),Tn(S,"href",g)}),s=l=>{const c=xe._addCacheSuffix(l);Ut(r,c).each(u=>{0==--u.count&&(delete r[c],(f=>{const g=hn(o);si(g,"#"+f).each(st)})(u.id))})};return{load:a,loadAll:l=>Promise.allSettled(wt(l,c=>a(c).then(Fe(c)))).then(c=>{const u=Qr(c,f=>"fulfilled"===f.status);return u.fail.length>0?Promise.reject(wt(u.fail,f=>f.reason)):wt(u.pass,f=>f.value)}),unload:s,unloadAll:l=>{Ae(l,c=>{s(c)})},_setReferrerPolicy:l=>{t.referrerPolicy=l},_setContentCssCors:l=>{t.contentCssCors=l}}},Dm=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const r=en(t).dom;return T.from(e.get(r)).getOrThunk(()=>{const o=Om(r,n);return e.set(r,o),o})}}})(),Mm=(e,t)=>z(e)&&(xc(e,t)||yc(I(e))),Im=e=>"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type"),Nu=(e,t,n)=>{var r;const o=n||t;if($e(t)&&Im(t))return t;const i=t.childNodes;for(let a=i.length-1;a>=0;a--)Nu(e,i[a],o);if($e(t)){const a=t.childNodes;1===a.length&&Im(a[0])&&(null===(r=t.parentNode)||void 0===r||r.insertBefore(a[0],t))}return mu(a=t)||sl(a)||xc(t,o)||(a=>!!$e(a)&&a.childNodes.length>0)(t)||((a,s)=>Ie(a)&&a.data.length>0&&((l,c)=>{const u=new Pn(l,c).prev(!1),f=new Pn(l,c).next(!1),g=Je(u)||Mm(u,c),v=Je(f)||Mm(f,c);return g&&v})(a,s))(t,o)||e.remove(t),t;var a},_1=xe.makeMap,Tc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ac=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,E1=/[<>&\"\']/g,w1=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,x1={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Ba={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},k1={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Lm=(e,t)=>{const n={};if(e){const r=e.split(",");t=t||10;for(let o=0;o<r.length;o+=2){const i=String.fromCharCode(parseInt(r[o],t));if(!Ba[i]){const a="&"+r[o+1]+";";n[i]=a,n[a]=i}}return n}},Ru=Lm("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Bm=(e,t)=>e.replace(t?Tc:Ac,n=>Ba[n]||n),jm=(e,t)=>e.replace(t?Tc:Ac,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Ba[n]||"&#"+n.charCodeAt(0)+";"),Pu=(e,t,n)=>{const r=n||Ru;return e.replace(t?Tc:Ac,o=>Ba[o]||r[o]||o)},ia={encodeRaw:Bm,encodeAllRaw:e=>(""+e).replace(E1,t=>Ba[t]||t),encodeNumeric:jm,encodeNamed:Pu,getEncodeFunc:(e,t)=>{const n=Lm(t)||Ru,r=_1(e.replace(/\+/g,","));return r.named&&r.numeric?(o,i)=>o.replace(i?Tc:Ac,a=>void 0!==Ba[a]?Ba[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):r.named?t?(o,i)=>Pu(o,i,n):Pu:r.numeric?jm:Bm},decode:e=>e.replace(w1,(t,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):x1[n]||String.fromCharCode(n):k1[t]||Ru[t]||(r=>{const o=ge("div").dom;return o.innerHTML=r,o.textContent||o.innerText||r})(t))},Nc={},Rc={},T1={},ws=xe.makeMap,cr=xe.each,Ou=xe.extend,Fm=xe.explode,A1=xe.inArray,tr=(e,t)=>(e=xe.trim(e))?e.split(t||" "):[],Um=(e,t={})=>{const n=ws(e," ",ws(e.toUpperCase()," "));return Ou(n,t)},Hm=e=>Um("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Du=(e,t)=>{if(e){const n={};return D(e)&&(e={"*":e}),cr(e,(r,o)=>{n[o]=n[o.toUpperCase()]="map"===t?ws(r,/[, ]/):Fm(r,/[, ]/)}),n}},aa=(e={})=>{var t;const n={},r={};let o=[];const i={},a={},s=(Se,je,et)=>{const Ke=e[Se];if(Ke)return ws(Ke,/[, ]/,ws(Ke.toUpperCase(),/[, ]/));{let ft=Rc[Se];return ft||(ft=Um(je,et),Rc[Se]=ft),ft}},l=null!==(t=e.schema)&&void 0!==t?t:"html5",c=(Se=>{const je={};let et,Ke,ft,pt;const ze=(wn,nn="",Or="")=>{const Dr=tr(Or),Qo=tr(wn);let ko=Qo.length;for(;ko--;){const Qn=tr([et,nn].join(" "));je[Qo[ko]]={attributes:Vn(Qn,()=>({})),attributesOrder:Qn,children:Vn(Dr,Fe(T1))}}},Et=(wn,nn)=>{const Or=tr(wn),Dr=tr(nn);let Qo=Or.length;for(;Qo--;){const ko=je[Or[Qo]];for(let Qn=0,Ur=Dr.length;Qn<Ur;Qn++)ko.attributes[Dr[Qn]]={},ko.attributesOrder.push(Dr[Qn])}};if(Nc[Se])return Nc[Se];if(et="id accesskey class dir lang style tabindex title role",Ke="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",ft="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==Se&&(et+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",Ke+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",ft+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==Se){et+=" xml:lang";const wn="acronym applet basefont big font strike tt";ft=[ft,wn].join(" "),cr(tr(wn),Or=>{ze(Or,"",ft)});const nn="center dir isindex noframes";Ke=[Ke,nn].join(" "),pt=[Ke,ft].join(" "),cr(tr(nn),Or=>{ze(Or,"",pt)})}return pt=pt||[Ke,ft].join(" "),ze("html","manifest","head body"),ze("head","","base command link meta noscript script style title"),ze("title hr noscript br"),ze("base","href target"),ze("link","href rel media hreflang type sizes hreflang"),ze("meta","name http-equiv content charset"),ze("style","media type scoped"),ze("script","src async defer type charset"),ze("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",pt),ze("dd div","",pt),ze("address dt caption","","html4"===Se?ft:pt),ze("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",ft),ze("blockquote","cite",pt),ze("ol","reversed start type","li"),ze("ul","","li"),ze("li","value",pt),ze("dl","","dt dd"),ze("a","href target rel media hreflang type","html4"===Se?ft:pt),ze("q","cite",ft),ze("ins del","cite datetime",pt),ze("img","src sizes srcset alt usemap ismap width height"),ze("iframe","src name width height",pt),ze("embed","src type width height"),ze("object","data type typemustmatch name usemap form width height",[pt,"param"].join(" ")),ze("param","name value"),ze("map","name",[pt,"area"].join(" ")),ze("area","alt coords shape href target rel media hreflang type"),ze("table","border","caption colgroup thead tfoot tbody tr"+("html4"===Se?" col":"")),ze("colgroup","span","col"),ze("col","span"),ze("tbody thead tfoot","","tr"),ze("tr","","td th"),ze("td","colspan rowspan headers",pt),ze("th","colspan rowspan headers scope abbr",pt),ze("form","accept-charset action autocomplete enctype method name novalidate target",pt),ze("fieldset","disabled form name",[pt,"legend"].join(" ")),ze("label","form for",ft),ze("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),ze("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===Se?pt:ft),ze("select","disabled form multiple name required size","option optgroup"),ze("optgroup","disabled label","option"),ze("option","disabled label selected value"),ze("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),ze("menu","type label",[pt,"li"].join(" ")),ze("noscript","",pt),"html4"!==Se&&(ze("wbr"),ze("ruby","",[ft,"rt rp"].join(" ")),ze("figcaption","",pt),ze("mark rt rp summary bdi","",ft),ze("canvas","width height",pt),ze("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[pt,"track source"].join(" ")),ze("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[pt,"track source"].join(" ")),ze("picture","","img source"),ze("source","src srcset type media sizes"),ze("track","kind src srclang label default"),ze("datalist","",[ft,"option"].join(" ")),ze("article section nav aside main header footer","",pt),ze("hgroup","","h1 h2 h3 h4 h5 h6"),ze("figure","",[pt,"figcaption"].join(" ")),ze("time","datetime",ft),ze("dialog","open",pt),ze("command","type label icon disabled checked radiogroup command"),ze("output","for form name",ft),ze("progress","value max",ft),ze("meter","value min max low high optimum",ft),ze("details","open",[pt,"summary"].join(" ")),ze("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==Se&&(Et("script","language xml:space"),Et("style","xml:space"),Et("object","declare classid code codebase codetype archive standby align border hspace vspace"),Et("embed","align name hspace vspace"),Et("param","valuetype type"),Et("a","charset name rev shape coords"),Et("br","clear"),Et("applet","codebase archive code object alt name width height align hspace vspace"),Et("img","name longdesc align border hspace vspace"),Et("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Et("font basefont","size color face"),Et("input","usemap align"),Et("select"),Et("textarea"),Et("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Et("ul","type compact"),Et("li","type"),Et("ol dl menu dir","compact"),Et("pre","width xml:space"),Et("hr","align noshade size width"),Et("isindex","prompt"),Et("table","summary width frame rules cellspacing cellpadding align bgcolor"),Et("col","width align char charoff valign"),Et("colgroup","width align char charoff valign"),Et("thead","align char charoff valign"),Et("tr","align char charoff valign bgcolor"),Et("th","axis align char charoff valign nowrap bgcolor width height"),Et("form","accept"),Et("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Et("tfoot","align char charoff valign"),Et("tbody","align char charoff valign"),Et("area","nohref"),Et("body","background bgcolor text link vlink alink")),"html4"!==Se&&(Et("input button select textarea","autofocus"),Et("input textarea","placeholder"),Et("a","download"),Et("link script img","crossorigin"),Et("img","loading"),Et("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==Se&&Ae([je.video,je.audio],wn=>{delete wn.children.audio,delete wn.children.video}),cr(tr("a form meter progress dfn"),wn=>{je[wn]&&delete je[wn].children[wn]}),delete je.caption.children.table,delete je.script,Nc[Se]=je,je})(l);!1===e.verify_html&&(e.valid_elements="*[*]");const u=Du(e.valid_styles),f=Du(e.invalid_styles,"map"),g=Du(e.valid_classes,"map"),v=s("whitespace_elements","pre script noscript style textarea video audio iframe object code"),m=s("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),y=s("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=s("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),S="td th iframe video audio object script code",x=s("non_empty_elements",S+" pre",y),k=s("move_caret_before_on_enter_elements",S+" table",y),N=s("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),P=s("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",N),L=s("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),U=s("transparent_elements","a ins del canvas map");cr("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Se=>{a[Se]=new RegExp("</"+Se+"[^>]*>","gi")});const Z=Se=>new RegExp("^"+Se.replace(/([?+*])/g,".$1")+"$"),ve=Se=>{const je=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,et=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Ke=/[*?+]/;if(Se){const ft=tr(Se,",");let pt,ze;n["@"]&&(pt=n["@"].attributes,ze=n["@"].attributesOrder);for(let Et=0,wn=ft.length;Et<wn;Et++){let nn=je.exec(ft[Et]);if(nn){const Or=nn[1],Dr=nn[2],Qo=nn[3],ko=nn[5],Qn={},Ur=[],un={attributes:Qn,attributesOrder:Ur};if("#"===Or&&(un.paddEmpty=!0),"-"===Or&&(un.removeEmpty=!0),"!"===nn[4]&&(un.removeEmptyAttrs=!0),pt&&(qt(pt,(Si,Ca)=>{Qn[Ca]=Si}),ze&&Ur.push(...ze)),ko){const Si=tr(ko,"|");for(let Ca=0,du=Si.length;Ca<du;Ca++)if(nn=et.exec(Si[Ca]),nn){const _i={},uc=nn[1],$r=nn[2].replace(/[\\:]:/g,":"),Sa=nn[3],Yr=nn[4];if("!"===uc&&(un.attributesRequired=un.attributesRequired||[],un.attributesRequired.push($r),_i.required=!0),"-"===uc){delete Qn[$r],Ur.splice(A1(Ur,$r),1);continue}if(Sa&&("="===Sa&&(un.attributesDefault=un.attributesDefault||[],un.attributesDefault.push({name:$r,value:Yr}),_i.defaultValue=Yr),"~"===Sa&&(un.attributesForced=un.attributesForced||[],un.attributesForced.push({name:$r,value:Yr}),_i.forcedValue=Yr),"<"===Sa&&(_i.validValues=ws(Yr,"?"))),Ke.test($r)){const ds=_i;un.attributePatterns=un.attributePatterns||[],ds.pattern=Z($r),un.attributePatterns.push(ds)}else Qn[$r]||Ur.push($r),Qn[$r]=_i}}if(pt||"@"!==Dr||(pt=Qn,ze=Ur),Qo&&(un.outputName=Dr,n[Qo]=un),Ke.test(Dr)){const Si=un;Si.pattern=Z(Dr),o.push(Si)}else n[Dr]=un}}}},de=Se=>{o=[],Ae(on(n),je=>{delete n[je]}),ve(Se),cr(c,(je,et)=>{r[et]=je.children})},H=Se=>{const je=/^(~)?(.+)$/;Se&&(delete Rc.text_block_elements,delete Rc.block_elements,cr(tr(Se,","),et=>{const Ke=je.exec(et);if(Ke){const ft="~"===Ke[1],pt=ft?"span":"div",ze=Ke[2];if(r[ze]=r[pt],i[ze]=pt,x[ze.toUpperCase()]={},x[ze]={},ft||(P[ze.toUpperCase()]={},P[ze]={}),!n[ze]){let Et=n[pt];Et=Ou({},Et),delete Et.removeEmptyAttrs,delete Et.removeEmpty,n[ze]=Et}cr(r,(Et,wn)=>{Et[pt]&&(r[wn]=Et=Ou({},r[wn]),Et[ze]=Et[pt])})}}))},X=Se=>{const je=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Nc[l],Se&&cr(tr(Se,","),et=>{const Ke=je.exec(et);if(Ke){const ft=Ke[1];let pt;pt=ft?r[Ke[2]]:r[Ke[2]]={"#comment":{}},pt=r[Ke[2]],cr(tr(Ke[3],"|"),ze=>{"-"===ft?delete pt[ze]:pt[ze]={}})}})},V=Se=>{const je=n[Se];if(je)return je;let et=o.length;for(;et--;){const Ke=o[et];if(Ke.pattern.test(Se))return Ke}};e.valid_elements?de(e.valid_elements):(cr(c,(Se,je)=>{n[je]={attributes:Se.attributes,attributesOrder:Se.attributesOrder},r[je]=Se.children}),cr(tr("strong/b em/i"),Se=>{const je=tr(Se,"/");n[je[1]].outputName=je[0]}),cr(L,(Se,je)=>{n[je]&&(e.padd_empty_block_inline_children&&(n[je].paddInEmptyBlock=!0),n[je].removeEmpty=!0)}),cr(tr("ol ul blockquote a table tbody"),Se=>{n[Se]&&(n[Se].removeEmpty=!0)}),cr(tr("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Se=>{n[Se]&&(n[Se].paddEmpty=!0)}),cr(tr("span"),Se=>{n[Se].removeEmptyAttrs=!0})),H(e.custom_elements),X(e.valid_children),ve(e.extended_valid_elements),X("+ol[ul|ol],+ul[ul|ol]"),cr({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Se,je)=>{n[je]&&(n[je].parentsRequired=tr(Se))}),e.invalid_elements&&cr(Fm(e.invalid_elements),Se=>{n[Se]&&delete n[Se]}),V("span")||ve("span[!data-mce-type|*]");const ae=Fe(u),Ue=Fe(f),Me=Fe(g),nt=Fe(h),qe=Fe(P),ht=Fe(N),bt=Fe(L),Ge=Fe(Object.seal(y)),tt=Fe(m),ut=Fe(x),W=Fe(k),K=Fe(v),be=Fe(U),Te=Fe(Object.seal(a)),Ce=Fe(i);return{type:l,children:r,elements:n,getValidStyles:ae,getValidClasses:Me,getBlockElements:qe,getInvalidStyles:Ue,getVoidElements:Ge,getTextBlockElements:ht,getTextInlineElements:bt,getBoolAttrs:nt,getElementRule:V,getSelfClosingElements:tt,getNonEmptyElements:ut,getMoveCaretBeforeOnEnterElements:W,getWhitespaceElements:K,getTransparentElements:be,getSpecialElements:Te,isValidChild:(Se,je)=>{const et=r[Se.toLowerCase()];return!(!et||!et[je.toLowerCase()])},isValid:(Se,je)=>{const et=V(Se);if(et){if(!je)return!0;{if(et.attributes[je])return!0;const Ke=et.attributePatterns;if(Ke){let ft=Ke.length;for(;ft--;)if(Ke[ft].pattern.test(je))return!0}}}return!1},getCustomElements:Ce,addValidElements:ve,setValidElements:de,addCustomElements:H,addValidChildren:X}},Mu=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,i={};let a,s;t&&(a=t.getValidStyles(),s=t.getInvalidStyles());const c="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let f=0;f<c.length;f++)i[c[f]]="\ufeff"+f,i["\ufeff"+f]=c[f];const u={parse:f=>{const g={};let v=!1;const m=e.url_converter,y=e.url_converter_scope||u,h=(de,H,X)=>{const V=g[de+"-top"+H];if(!V)return;const ae=g[de+"-right"+H];if(!ae)return;const Ue=g[de+"-bottom"+H];if(!Ue)return;const Me=g[de+"-left"+H];if(!Me)return;const nt=[V,ae,Ue,Me];let qe=nt.length-1;for(;qe--&&nt[qe]===nt[qe+1];);qe>-1&&X||(g[de+H]=-1===qe?nt[0]:nt.join(" "),delete g[de+"-top"+H],delete g[de+"-right"+H],delete g[de+"-bottom"+H],delete g[de+"-left"+H])},S=de=>{const H=g[de];if(!H)return;const X=H.split(" ");let V=X.length;for(;V--;)if(X[V]!==X[0])return!1;return g[de]=X[0],!0},x=de=>(v=!0,i[de]),k=(de,H)=>(v&&(de=de.replace(/\uFEFF[0-9]/g,X=>i[X])),H||(de=de.replace(/\\([\'\";:])/g,"$1")),de),N=de=>String.fromCharCode(parseInt(de.slice(1),16)),P=de=>de.replace(/\\[0-9a-f]+/gi,N),L=(de,H,X,V,ae,Ue)=>{if(ae=ae||Ue)return"'"+(ae=k(ae)).replace(/\'/g,"\\'")+"'";if(H=k(H||X||V||""),!e.allow_script_urls){const Me=H.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Me)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Me))return""}return m&&(H=m.call(y,H,"style")),"url('"+H.replace(/\'/g,"\\'")+"')"};if(f){let de;for(f=(f=f.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,x).replace(/\"[^\"]+\"|\'[^\']+\'/g,H=>H.replace(/[;:]/g,x));de=r.exec(f);){r.lastIndex=de.index+de[0].length;let H=de[1].replace(o,"").toLowerCase(),X=de[2].replace(o,"");if(H&&X){if(H=P(H),X=P(X),-1!==H.indexOf("\ufeff")||-1!==H.indexOf('"')||!e.allow_script_urls&&("behavior"===H||/expression\s*\(|\/\*|\*\//.test(X)))continue;"font-weight"===H&&"700"===X?X="bold":"color"!==H&&"background-color"!==H||(X=X.toLowerCase()),X=X.replace(n,L),g[H]=v?k(X,!0):X}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),Z="border-style",ve="border-color",S(U="border-width")&&S(Z)&&S(ve)&&(g.border=g[U]+" "+g[Z]+" "+g[ve],delete g[U],delete g[Z],delete g[ve]),"medium none"===g.border&&delete g.border,"none"===g["border-image"]&&delete g["border-image"]}var U,Z,ve;return g},serialize:(f,g)=>{let v="";const m=(y,h)=>{const S=h[y];if(S)for(let x=0,k=S.length;x<k;x++){const N=S[x],P=f[N];P&&(v+=(v.length>0?" ":"")+N+": "+P+";")}};return g&&a?(m("*",a),m(g,a)):qt(f,(y,h)=>{y&&((S,x)=>{if(!s||!x)return!0;let k=s["*"];return!(k&&k[S]||(k=s[x],k&&k[S]))})(h,g)&&(v+=(v.length>0?" ":"")+h+": "+y+";")}),v}};return u},N1={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Wm=(e,t)=>{const n=null!=t?t:{};for(const r in e)yt(N1,r)||(n[r]=e[r]);return z(e.composedPath)&&(n.composedPath=()=>e.composedPath()),n},Iu=(e,t,n,r)=>{var o;const i=Wm(t,r);return i.type=e,Ve(i.target)&&(i.target=null!==(o=i.srcElement)&&void 0!==o?o:n),(Ve((a=t).preventDefault)||(s=a)instanceof Event||me(s.initEvent))&&(i.preventDefault=()=>{i.defaultPrevented=!0,i.isDefaultPrevented=Ft,me(t.preventDefault)&&t.preventDefault()},i.stopPropagation=()=>{i.cancelBubble=!0,i.isPropagationStopped=Ft,me(t.stopPropagation)&&t.stopPropagation()},i.stopImmediatePropagation=()=>{i.isImmediatePropagationStopped=Ft,i.stopPropagation()},(a=>a.isDefaultPrevented===Ft||a.isDefaultPrevented===Ot)(i)||(i.isDefaultPrevented=!0===i.defaultPrevented?Ft:Ot,i.isPropagationStopped=!0===i.cancelBubble?Ft:Ot,i.isImmediatePropagationStopped=Ot)),i;var a,s},R1=/^(?:mouse|contextmenu)|click/,Lu=(e,t,n,r)=>{e.addEventListener(t,n,r||!1)},Pc=(e,t,n,r)=>{e.removeEventListener(t,n,r||!1)},dl=(e,t)=>{const n=Iu(e.type,e,document,t);if(z(r=e)&&R1.test(r.type)&&Je(e.pageX)&&!Je(e.clientX)){const r=n.target.ownerDocument||document,o=r.documentElement,i=r.body,a=n;a.pageX=e.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),a.pageY=e.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)}var r;return n},P1=(e,t,n)=>{const r=e.document,o={type:"ready"};if(n.domLoaded)return void t(o);const i=()=>{Pc(e,"DOMContentLoaded",i),Pc(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?i():Lu(e,"DOMContentLoaded",i),n.domLoaded||Lu(e,"load",i)};class ja{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,r,o){const i=this;let a;const s=window,l=g=>{i.executeHandlers(dl(g||s.event),c)};if(!t||Ie(t)||ta(t))return r;let c;t[i.expando]?c=t[i.expando]:(c=i.count++,t[i.expando]=c,i.events[c]={}),o=o||t;const u=n.split(" ");let f=u.length;for(;f--;){let g=u[f],v=l,m=!1,y=!1;"DOMContentLoaded"===g&&(g="ready"),i.domLoaded&&"ready"===g&&"complete"===t.readyState?r.call(o,dl({type:g})):(i.hasFocusIn||"focusin"!==g&&"focusout"!==g||(m=!0,y="focusin"===g?"focus":"blur",v=h=>{const S=dl(h||s.event);S.type="focus"===S.type?"focusin":"focusout",i.executeHandlers(S,c)}),a=i.events[c][g],a?"ready"===g&&i.domLoaded?r(dl({type:g})):a.push({func:r,scope:o}):(i.events[c][g]=a=[{func:r,scope:o}],a.fakeName=y,a.capture=m,a.nativeHandler=v,"ready"===g?P1(t,v,i):Lu(t,y||g,v,m)))}return t=a=null,r}unbind(t,n,r){if(!t||Ie(t)||ta(t))return this;const o=t[this.expando];if(o){let i=this.events[o];if(n){const a=n.split(" ");let s=a.length;for(;s--;){const l=a[s],c=i[l];if(c){if(r){let u=c.length;for(;u--;)if(c[u].func===r){const f=c.nativeHandler,g=c.fakeName,v=c.capture,m=c.slice(0,u).concat(c.slice(u+1));m.nativeHandler=f,m.fakeName=g,m.capture=v,i[l]=m}}r&&0!==c.length||(delete i[l],Pc(t,c.fakeName||l,c.nativeHandler,c.capture))}}}else qt(i,(a,s)=>{Pc(t,a.fakeName||s,a.nativeHandler,a.capture)}),i={};for(const a in i)if(yt(i,a))return this;delete this.events[o];try{delete t[this.expando]}catch(a){t[this.expando]=null}}return this}fire(t,n,r){return this.dispatch(t,n,r)}dispatch(t,n,r){if(!t||Ie(t)||ta(t))return this;const o=dl({type:n,target:t},r);do{const i=t[this.expando];i&&this.executeHandlers(o,i),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||Ie(t)||ta(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let r=n.length;for(;r--;)(t=n[r])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const r=this.events[n],o=r&&r[t.type];if(o)for(let i=0,a=o.length;i<a;i++){const s=o[i];if(s&&!1===s.func.call(s.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}ja.Event=new ja;const Bu=xe.each,O1=xe.grep,ju="data-mce-style",D1=xe.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),ul=(e,t,n)=>{Ve(n)||""===n?Mn(e,t):Tn(e,t,n)},qm=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),xs=(e,t)=>{let n=0;if(e)for(let r=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const i=o.nodeType;(!t||!Ie(o)||i!==r&&o.data.length)&&(n++,r=i)}return n},zm=(e,t)=>{const n=mr(t,"style"),r=e.serialize(e.parse(n),zt(t));ul(t,ju,r)},Vm=(e,t,n)=>{const r=qm(t);var o,i;Ve(n)||""===n?Re(e,r):Cs(e,r,(i=r,b(o=n)?yt(D1,i)?o+"":o+"px":o))},Kt=(e,t={})=>{const n={},r=window,o={};let i=0;const a=Dm.forElement(I(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),s=[],l=t.schema?t.schema:aa({}),c=Mu({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),u=t.ownEvents?new ja:ja.Event,f=l.getBlockElements(),g=W=>W&&e&&D(W)?e.getElementById(W):W,v=W=>{const K=g(W);return z(K)?I(K):null},m=(W,K,be="")=>{let Te;const Ce=v(W);if(z(Ce)&&Dn(Ce)){const Se=ut[K];Te=Se&&Se.get?Se.get(Ce.dom,K):mr(Ce,K)}return z(Te)?Te:be},y=W=>{const K=g(W);return Ve(K)?[]:K.attributes},h=(W,K,be)=>{Z(W,Te=>{if($e(Te)){const Ce=I(Te),Se=""===be?null:be,je=mr(Ce,K),et=ut[K];et&&et.set?et.set(Ce.dom,Se,K):ul(Ce,K,Se),je!==Se&&t.onSetAttrib&&t.onSetAttrib({attrElm:Ce.dom,attrName:K,attrValue:Se})}})},S=()=>t.root_element||e.body,x=(W,K)=>((be,Te,Ce)=>{let Se=0,je=0;const et=be.ownerDocument;if(Ce=Ce||be,Te){if(Ce===be&&Te.getBoundingClientRect&&"static"===ro(I(be),"position")){const ft=Te.getBoundingClientRect();return Se=ft.left+(et.documentElement.scrollLeft||be.scrollLeft)-et.documentElement.clientLeft,je=ft.top+(et.documentElement.scrollTop||be.scrollTop)-et.documentElement.clientTop,{x:Se,y:je}}let Ke=Te;for(;Ke&&Ke!==Ce&&Ke.nodeType&&!Pm(Ke,Ce);)Se+=Ke.offsetLeft||0,je+=Ke.offsetTop||0,Ke=Ke.offsetParent;for(Ke=Te.parentNode;Ke&&Ke!==Ce&&Ke.nodeType&&!Pm(Ke,Ce);)Se-=Ke.scrollLeft||0,je-=Ke.scrollTop||0,Ke=Ke.parentNode;je+=(ft=I(Te),S1.isFirefox()&&"table"===zt(ft)?Rm(cn(ft)).filter(pt=>"caption"===zt(pt)).bind(pt=>Rm(Fo(pt)).map(ze=>ze.dom.offsetTop<=pt.dom.offsetTop?-pt.dom.offsetHeight:0)).getOr(0):0)}var ft;return{x:Se,y:je}})(e.body,g(W),K),k=(W,K,be)=>{const Te=g(W);if(!Ve(Te)&&$e(Te))return be?ro(I(Te),qm(K)):("float"===(K=K.replace(/-(\D)/g,(Ce,Se)=>Se.toUpperCase()))&&(K="cssFloat"),Te.style?Te.style[K]:void 0)},N=W=>{const K=g(W);if(!K)return{w:0,h:0};let be=k(K,"width"),Te=k(K,"height");return be&&-1!==be.indexOf("px")||(be="0"),Te&&-1!==Te.indexOf("px")||(Te="0"),{w:parseInt(be,10)||K.offsetWidth||K.clientWidth,h:parseInt(Te,10)||K.offsetHeight||K.clientHeight}},P=(W,K)=>{if(!W)return!1;const be=fe(W)?W:[W];return Yt(be,Te=>Xt(I(Te),K))},L=(W,K,be,Te)=>{const Ce=[];let Se=g(W);Te=void 0===Te;const je=be||("BODY"!==S().nodeName?S().parentNode:null);if(D(K))if("*"===K)K=$e;else{const et=K;K=Ke=>P(Ke,et)}for(;Se&&!(Se===je||Ve(Se.nodeType)||sl(Se)||mu(Se));){if(!K||K(Se)){if(!Te)return[Se];Ce.push(Se)}Se=Se.parentNode}return Te?Ce:null},U=(W,K,be)=>{let Te=K;if(W){D(K)&&(Te=Ce=>P(Ce,K));for(let Ce=W[be];Ce;Ce=Ce[be])if(me(Te)&&Te(Ce))return Ce}return null},Z=function(W,K,be){const Te=null!=be?be:this;if(fe(W)){const Ce=[];return Bu(W,(Se,je)=>{const et=g(Se);et&&Ce.push(K.call(Te,et,je))}),Ce}{const Ce=g(W);return!!Ce&&K.call(Te,Ce)}},ve=(W,K)=>{Z(W,be=>{qt(K,(Te,Ce)=>{h(be,Ce,Te)})})},de=(W,K)=>{Z(W,be=>{const Te=I(be);Ln(Te,K)})},H=(W,K,be,Te,Ce)=>Z(W,Se=>{const je=D(K)?e.createElement(K):K;return z(be)&&ve(je,be),Te&&(!D(Te)&&Te.nodeType?je.appendChild(Te):D(Te)&&de(je,Te)),Ce?je:Se.appendChild(je)}),X=(W,K,be)=>H(e.createElement(W),W,K,be,!0),V=ia.encodeAllRaw,ae=(W,K)=>Z(W,be=>{const Te=I(be);return K&&Ae(cn(Te),Ce=>{rr(Ce)&&0===Ce.dom.length?st(Ce):De(Te,Ce)}),st(Te),Te.dom}),Ue=(W,K,be)=>{Z(W,Te=>{if($e(Te)){const Ce=I(Te),Se=K.split(" ");Ae(Se,je=>{var et,Ke,pt,ze;z(be)?(be?M:G)(Ce,je):(Ke=je,C(et=Ce)?et.dom.classList.toggle(Ke):(ze=Ke,Pt(E(pt=et),ze)?R(pt,ze):A(pt,ze)),Q(et))})}})},Me=(W,K,be)=>Z(K,Te=>{var Ce;const Se=fe(K)?W.cloneNode(!0):W;return be&&Bu(O1(Te.childNodes),je=>{Se.appendChild(je)}),null===(Ce=Te.parentNode)||void 0===Ce||Ce.replaceChild(Se,Te),Te}),nt=W=>{if($e(W)){const K="a"===W.nodeName.toLowerCase()&&!m(W,"href")&&m(W,"id");if(m(W,"name")||m(W,"data-mce-bookmark")||K)return!0}return!1},qe=()=>e.createRange(),ht=(W,K,be,Te)=>{if(fe(W)){let Ce=W.length;const Se=[];for(;Ce--;)Se[Ce]=ht(W[Ce],K,be,Te);return Se}return!t.collect||W!==e&&W!==r||s.push([W,K,be,Te]),u.bind(W,K,be,Te||tt)},bt=(W,K,be)=>{if(fe(W)){let Te=W.length;const Ce=[];for(;Te--;)Ce[Te]=bt(W[Te],K,be);return Ce}if(s.length>0&&(W===e||W===r)){let Te=s.length;for(;Te--;){const[Ce,Se,je]=s[Te];W!==Ce||K&&K!==Se||be&&be!==je||u.unbind(Ce,Se,je)}}return u.unbind(W,K,be)},Ge=W=>{if(W&&$e(W)){const K=W.getAttribute("data-mce-contenteditable");return K&&"inherit"!==K?K:"inherit"!==W.contentEditable?W.contentEditable:null}return null},tt={doc:e,settings:t,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:s,styles:c,schema:l,events:u,isBlock:W=>D(W)?yt(f,W):$e(W)&&(yt(f,W.nodeName)||La(l,W)),root:null,clone:(W,K)=>W.cloneNode(K),getRoot:S,getViewPort:W=>{const K=il(W);return{x:K.x,y:K.y,w:K.width,h:K.height}},getRect:W=>{const K=g(W),be=x(K),Te=N(K);return{x:be.x,y:be.y,w:Te.w,h:Te.h}},getSize:N,getParent:(W,K,be)=>{const Te=L(W,K,be,!1);return Te&&Te.length>0?Te[0]:null},getParents:L,get:g,getNext:(W,K)=>U(W,K,"nextSibling"),getPrev:(W,K)=>U(W,K,"previousSibling"),select:(W,K)=>{var be,Te;const Ce=null!==(Te=null!==(be=g(K))&&void 0!==be?be:t.root_element)&&void 0!==Te?Te:e;return me(Ce.querySelectorAll)?gn(Ce.querySelectorAll(W)):[]},is:P,add:H,create:X,createHTML:(W,K,be="")=>{let Te="<"+W;for(const Ce in K)mn(K,Ce)&&(Te+=" "+Ce+'="'+V(K[Ce])+'"');return ti(be)&&yt(l.getVoidElements(),W)?Te+" />":Te+">"+be+"</"+W+">"},createFragment:W=>{const K=e.createElement("div"),be=e.createDocumentFragment();let Te;for(be.appendChild(K),W&&(K.innerHTML=W);Te=K.firstChild;)be.appendChild(Te);return be.removeChild(K),be},remove:ae,setStyle:(W,K,be)=>{Z(W,Te=>{const Ce=I(Te);Vm(Ce,K,be),t.update_styles&&zm(c,Ce)})},getStyle:k,setStyles:(W,K)=>{Z(W,be=>{const Te=I(be);qt(K,(Ce,Se)=>{Vm(Te,Se,Ce)}),t.update_styles&&zm(c,Te)})},removeAllAttribs:W=>Z(W,K=>{const be=K.attributes;for(let Te=be.length-1;Te>=0;Te--)K.removeAttributeNode(be.item(Te))}),setAttrib:h,setAttribs:ve,getAttrib:m,getPos:x,parseStyle:W=>c.parse(W),serializeStyle:(W,K)=>c.serialize(W,K),addStyle:W=>{if(tt!==Kt.DOM&&e===document){if(n[W])return;n[W]=!0}let K=e.getElementById("mceDefaultStyles");if(!K){K=e.createElement("style"),K.id="mceDefaultStyles",K.type="text/css";const be=e.head;be.firstChild?be.insertBefore(K,be.firstChild):be.appendChild(K)}K.styleSheet?K.styleSheet.cssText+=W:K.appendChild(e.createTextNode(W))},loadCSS:W=>{W||(W=""),Ae(W.split(","),K=>{o[K]=!0,a.load(K).catch(We)})},addClass:(W,K)=>{Ue(W,K,!0)},removeClass:(W,K)=>{Ue(W,K,!1)},hasClass:(W,K)=>{const be=v(W),Te=K.split(" ");return z(be)&&fr(Te,Ce=>ue(be,Ce))},toggleClass:Ue,show:W=>{Z(W,K=>Re(I(K),"display"))},hide:W=>{Z(W,K=>Cs(I(K),"display","none"))},isHidden:W=>{const K=v(W);return z(K)&&Ht(ie(K,"display"),"none")},uniqueId:W=>(W||"mce_")+i++,setHTML:de,getOuterHTML:W=>{const K=v(W);return z(K)?$e(K.dom)?K.dom.outerHTML:(be=>{const Te=ge("div"),Ce=I(be.dom.cloneNode(!0));return Ze(Te,Ce),Rn(Te)})(K):""},setOuterHTML:(W,K)=>{Z(W,be=>{$e(be)&&(be.outerHTML=K)})},decode:ia.decode,encode:V,insertAfter:(W,K)=>{const be=g(K);return Z(W,Te=>{const Ce=null==be?void 0:be.parentNode,Se=null==be?void 0:be.nextSibling;return Ce&&(Se?Ce.insertBefore(Te,Se):Ce.appendChild(Te)),Te})},replace:Me,rename:(W,K)=>{if(W.nodeName!==K.toUpperCase()){const be=X(K);return Bu(y(W),Te=>{h(be,Te.nodeName,m(W,Te.nodeName))}),Me(be,W,!0),be}return W},findCommonAncestor:(W,K)=>{let be=W;for(;be;){let Te=K;for(;Te&&be!==Te;)Te=Te.parentNode;if(be===Te)break;be=be.parentNode}return!be&&W.ownerDocument?W.ownerDocument.documentElement:be},run:Z,getAttribs:y,isEmpty:(W,K,be)=>{let Te=0;if(nt(W))return!1;const Ce=W.firstChild;if(Ce){const Se=new Pn(Ce,W),je=l?l.getWhitespaceElements():{},et=K||(l?l.getNonEmptyElements():null);let Ke=Ce;do{if($e(Ke)){const ft=Ke.getAttribute("data-mce-bogus");if(ft){Ke=Se.next("all"===ft);continue}const pt=Ke.nodeName.toLowerCase();if(et&&et[pt]){if("br"===pt){Te++,Ke=Se.next();continue}return!1}if(nt(Ke))return!1}if(ta(Ke)||Ie(Ke)&&!Ia(Ke.data)&&(!(null==be?void 0:be.includeZwsp)||!g1(Ke.data))||Ie(Ke)&&Ke.parentNode&&je[Ke.parentNode.nodeName]&&Ia(Ke.data))return!1;Ke=Se.next()}while(Ke)}return Te<=1},createRng:qe,nodeIndex:xs,split:(W,K,be)=>{let Te,Ce,Se=qe();if(W&&K&&W.parentNode&&K.parentNode){const je=W.parentNode;return Se.setStart(je,xs(W)),Se.setEnd(K.parentNode,xs(K)),Te=Se.extractContents(),Se=qe(),Se.setStart(K.parentNode,xs(K)+1),Se.setEnd(je,xs(W)+1),Ce=Se.extractContents(),je.insertBefore(Nu(tt,Te),W),je.insertBefore(be||K,W),je.insertBefore(Nu(tt,Ce),W),ae(W),be||K}},bind:ht,unbind:bt,fire:(W,K,be)=>u.dispatch(W,K,be),dispatch:(W,K,be)=>u.dispatch(W,K,be),getContentEditable:Ge,getContentEditableParent:W=>{const K=S();let be=null;for(let Te=W;Te&&Te!==K&&(be=Ge(Te),null===be);Te=Te.parentNode);return be},isEditable:W=>{if(z(W)){const K=$e(W)?W:W.parentElement;return z(K)&&Ho(I(K))}return!1},destroy:()=>{if(s.length>0){let W=s.length;for(;W--;){const[K,be,Te]=s[W];u.unbind(K,be,Te)}}qt(o,(W,K)=>{a.unload(K),delete o[K]})},isChildOf:(W,K)=>W===K||K.contains(W),dumpRng:W=>"startContainer: "+W.startContainer.nodeName+", startOffset: "+W.startOffset+", endContainer: "+W.endContainer.nodeName+", endOffset: "+W.endOffset},ut=((W,K,be)=>{const Te=K.keep_values,Se={style:{set:(je,et)=>{const Ke=I(je);Te&&ul(Ke,ju,et),Mn(Ke,"style"),D(et)&&ea(Ke,W.parse(et))},get:je=>{const et=I(je),Ke=mr(et,ju)||mr(et,"style");return W.serialize(W.parse(Ke),zt(et))}}};return Te&&(Se.href=Se.src={set:(je,et,Ke)=>{const ft=I(je);me(K.url_converter)&&z(et)&&(et=K.url_converter.call(K.url_converter_scope||be(),String(et),Ke,je)),ul(ft,"data-mce-"+Ke,et),ul(ft,Ke,et)},get:(je,et)=>{const Ke=I(je);return mr(Ke,"data-mce-"+et)||mr(Ke,et)}}),Se})(c,t,Fe(tt));return tt};Kt.DOM=Kt(document),Kt.nodeIndex=xs;const M1=Kt.DOM;class Bi{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,r)=>{const o=M1;let i;const a=()=>{o.remove(s),i&&(i.onerror=i.onload=i=null)},s=o.uniqueId();i=document.createElement("script"),i.id=s,i.type="text/javascript",i.src=xe._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(i,"referrerpolicy",this.settings.referrerPolicy),i.onload=()=>{a(),n()},i.onerror=()=>{a(),r("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(i)})}isDone(t){return 2===this.states[t]}markDone(t){this.states[t]=2}add(t){const n=this;return n.queue.push(t),void 0===n.states[t]&&(n.states[t]=0),new Promise((r,o)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:r,reject:o})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,r=(l,c)=>{Ut(n.scriptLoadedCallbacks,c).each(u=>{Ae(u,f=>f[l](c))}),delete n.scriptLoadedCallbacks[c]},o=l=>{const c=gt(l,u=>"rejected"===u.status);return c.length>0?Promise.reject(pn(c,({reason:u})=>fe(u)?u:[u])):Promise.resolve()},i=l=>Promise.allSettled(wt(l,c=>2===n.states[c]?(r("resolve",c),Promise.resolve()):3===n.states[c]?(r("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,r("resolve",c);const u=n.queue;return u.length>0?(n.queue=[],i(u).then(o)):Promise.resolve()},()=>(n.states[c]=3,r("reject",c),Promise.reject(c)))))),a=l=>(n.loading=!0,i(l).then(c=>{n.loading=!1;const u=n.queueLoadedCallbacks.shift();return T.from(u).each($t),o(c)})),s=Jn(t);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{a(s).then(l,c)})}):a(s)}}Bi.ScriptLoader=new Bi;const jn=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}},fl={},Fu=jn("en"),Gm=()=>Ut(fl,Fu.get()),Vo={getData:()=>ho(fl,e=>rt({},e)),setCode:e=>{e&&Fu.set(e)},getCode:()=>Fu.get(),add:(e,t)=>{let n=fl[e];n||(fl[e]=n={}),qt(t,(r,o)=>{n[o.toLowerCase()]=r})},translate:e=>{const t=Gm().getOr({}),n=s=>me(s)?Object.prototype.toString.call(s):r(s)?"":""+s,r=s=>""===s||null==s,o=s=>{const l=n(s);return Ut(t,l.toLowerCase()).map(n).getOr(l)},i=s=>s.replace(/{context:\w+}$/,"");if(r(e))return"";if(ne(a=e)&&yt(a,"raw"))return n(e.raw);var a,s;if(fe(s=e)&&s.length>1){const s=e.slice(1);return i(o(e[0]).replace(/\{([0-9]+)\}/g,(l,c)=>yt(s,c)?n(s[c]):l))}return i(o(e))},isRtl:()=>Gm().bind(e=>Ut(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>yt(fl,e)},vr=()=>{const e=[],t={},n={},r=[],o=(l,c)=>{const u=gt(r,f=>f.name===l&&f.state===c);Ae(u,f=>f.resolve())},i=l=>yt(t,l),a=(l,c)=>{const u=Vo.getCode();!u||c&&-1===(","+(c||"")+",").indexOf(","+u+",")||Bi.ScriptLoader.add(t[l]+"/langs/"+u+".js")},s=(l,c="added")=>"added"===c&&yt(n,l)||"loaded"===c&&i(l)?Promise.resolve():new Promise(u=>{r.push({name:l,state:c,resolve:u})});return{items:e,urls:t,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==vr.languageLoad&&(i(l)?a(l,c):s(l,"loaded").then(()=>a(l,c)))},add:(l,c)=>(e.push(c),n[l]={instance:c},o(l,"added"),c),remove:l=>{delete t[l],delete n[l]},createUrl:(l,c)=>D(c)?D(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(t[l])return Promise.resolve();let u=D(c)?c:c.prefix+c.resource+c.suffix;0!==u.indexOf("/")&&-1===u.indexOf("://")&&(u=vr.baseURL+"/"+u),t[l]=u.substring(0,u.lastIndexOf("/"));const f=()=>(o(l,"loaded"),Promise.resolve());return n[l]?f():Bi.ScriptLoader.add(u).then(f)},waitFor:s}};vr.languageLoad=!0,vr.baseURL="",vr.PluginManager=vr(),vr.ThemeManager=vr(),vr.ModelManager=vr();const I1=e=>{const t=jn(T.none()),n=()=>t.get().each(r=>clearInterval(r));return{clear:()=>{n(),t.set(T.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:r=>{n(),t.set(T.some(setInterval(r,e)))}}},sa=()=>{const e=(t=>{const n=jn(T.none()),r=()=>n.get().each(t);return{clear:()=>{r(),n.set(T.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:o=>{r(),n.set(T.some(o))}}})(We);return Wt(rt({},e),{on:t=>e.get().each(t)})},Oc=(e,t)=>{let n=null;return{cancel:()=>{le(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{le(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},Uu=(e,t)=>{let n=null;const r=()=>{le(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,e.apply(null,o)},t)}}},pl=Fe("mce-annotation"),Fa=Fe("data-mce-annotation"),ks=Fe("data-mce-annotation-uid"),gl=Fe("data-mce-annotation-active"),ml=Fe("data-mce-annotation-classes"),hl=Fe("data-mce-annotation-attrs"),Km=e=>t=>Rt(t,e),$m=(e,t)=>{const n=e.selection.getRng(),r=I(n.startContainer),o=I(e.getBody()),i=t.fold(()=>"."+pl(),s=>`[${Fa()}="${s}"]`),a=Zn(r,n.startOffset).getOr(r);return _o(a,i,Km(o)).bind(s=>Bo(s,`${ks()}`).bind(l=>Bo(s,`${Fa()}`).map(c=>{const u=Xm(e,l);return{uid:l,name:c,elements:u}})))},Ym=(e,t)=>vs(e,"data-mce-bogus")||pm(e,'[data-mce-bogus="all"]',Km(t)),Xm=(e,t)=>{const n=I(e.getBody()),r=sr(n,`[${ks()}="${t}"]`);return gt(r,o=>!Ym(o,n))},Qm=(e,t)=>{const n=I(e.getBody()),r=sr(n,`[${Fa()}="${t}"]`),o={};return Ae(r,i=>{if(!Ym(i,n)){const a=mr(i,ks()),s=Ut(o,a).getOr([]);o[a]=s.concat([i])}}),o};let Jm=0;const vl=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return Jm++,e+"_"+n+Jm+String(t)},Zm=(e,t)=>I(e.dom.cloneNode(t)),Ua=e=>Zm(e,!1),eh=e=>Zm(e,!0),th=(e,t)=>{const n=((o,i)=>{const a=ge(i),s=d(o);return Lo(a,s),a})(e,t);ot(e,n);const r=cn(e);return It(n,r),st(e),n},nh=(e,t,n=Ot)=>{const r=new Pn(e,t),o=i=>{let a;do{a=r[i]()}while(a&&!Ie(a)&&!n(a));return T.from(a).filter(Ie)};return{current:()=>T.from(r.current()).filter(Ie),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},Ha=(e,t)=>{const n=t||(o=>e.isBlock(o)||dn(o)||Zt(o)),r=(o,i,a,s)=>{if(Ie(o)){const l=s(o,i,o.data);if(-1!==l)return T.some({container:o,offset:l})}return a().bind(l=>r(l.container,l.offset,a,s))};return{backwards:(o,i,a,s)=>{const l=nh(o,null!=s?s:e.getRoot(),n);return r(o,i,()=>l.prev().map(c=>({container:c,offset:c.length})),a).getOrNull()},forwards:(o,i,a,s)=>{const l=nh(o,null!=s?s:e.getRoot(),n);return r(o,i,()=>l.next().map(c=>({container:c,offset:0})),a).getOrNull()}}},Ts=Math.round,Wa=e=>e?{left:Ts(e.left),top:Ts(e.top),bottom:Ts(e.bottom),right:Ts(e.right),width:Ts(e.width),height:Ts(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},rh=(e,t)=>(e=Wa(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),oh=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,bl=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&oh(t.top-e.bottom,e,t)},yl=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&oh(t.bottom-e.top,e,t),ih=(e,t,n)=>{const r=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-r)*(t-r)+(n-o)*(n-o))},Dc=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},la=(e,t)=>{if($e(e)&&e.hasChildNodes()){const n=e.childNodes;return n[(a=n.length-1,Math.min(Math.max(t,0),a))]}var a;return e},L1=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),ah=e=>D(e)&&e.charCodeAt(0)>=768&&L1.test(e),sh=$e,B1=Eo,lh=hc("display","block table"),j1=hc("float","left right"),Cl=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(sh,B1,Jt(j1)),F1=Jt(hc("white-space","pre pre-line pre-wrap")),Sl=Ie,Hu=dn,ch=Kt.nodeIndex,Mc=(e,t)=>t<0&&$e(e)&&e.hasChildNodes()?void 0:la(e,t),Wu=e=>e?e.createRange():Kt.DOM.createRng(),qu=e=>D(e)&&/[\r\n\t ]/.test(e),dh=e=>!!e.setStart&&!!e.setEnd,zu=e=>{const t=e.startContainer,n=e.startOffset;if(qu(e.toString())&&F1(t.parentNode)&&Ie(t)){const r=t.data;if(qu(r[n-1])||qu(r[n+1]))return!0}return!1},uh=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,ca=e=>{var t;let n;const r=e.getClientRects();return n=Wa(r.length>0?r[0]:e.getBoundingClientRect()),!dh(e)&&Hu(e)&&uh(n)?(o=>{const i=o.ownerDocument,a=Wu(i),s=i.createTextNode(Bn),l=o.parentNode;l.insertBefore(s,o),a.setStart(s,0),a.setEnd(s,1);const c=Wa(a.getBoundingClientRect());return l.removeChild(s),c})(e):uh(n)&&dh(e)&&null!==(t=(o=>{const a=o.endContainer,s=o.startOffset,l=o.endOffset;if(o.startContainer===a&&Ie(a)&&0===s&&1===l){const c=o.cloneRange();return c.setEndAfter(a),ca(c)}return null})(e))&&void 0!==t?t:n},qa=(e,t)=>{const n=rh(e,t);return n.width=1,n.right=n.left+1,n},he=(e,t,n)=>{const r=()=>(n||(n=(o=>{const i=[],a=u=>{var f,g;0!==u.height&&(i.length>0&&(f=u).left===(g=i[i.length-1]).left&&f.top===g.top&&f.bottom===g.bottom&&f.right===g.right||i.push(u))},s=(u,f)=>{const g=Wu(u.ownerDocument);if(f<u.data.length){if(ah(u.data[f]))return;if(ah(u.data[f-1])&&(g.setStart(u,f),g.setEnd(u,f+1),!zu(g)))return void a(qa(ca(g),!1))}f>0&&(g.setStart(u,f-1),g.setEnd(u,f),zu(g)||a(qa(ca(g),!1))),f<u.data.length&&(g.setStart(u,f),g.setEnd(u,f+1),zu(g)||a(qa(ca(g),!0)))},l=o.container(),c=o.offset();if(Sl(l))return s(l,c),i;if(sh(l))if(o.isAtEnd()){const u=Mc(l,c);Sl(u)&&s(u,u.data.length),Cl(u)&&!Hu(u)&&a(qa(ca(u),!1))}else{const u=Mc(l,c);if(Sl(u)&&s(u,0),Cl(u)&&o.isAtEnd())return a(qa(ca(u),!1)),i;const f=Mc(o.container(),o.offset()-1);Cl(f)&&!Hu(f)&&(lh(f)||lh(u)||!Cl(u))&&a(qa(ca(f),!1)),Cl(u)&&a(qa(ca(u),!0))}return i})(he(e,t))),n);return{container:Fe(e),offset:Fe(t),toRange:()=>{const o=Wu(e.ownerDocument);return o.setStart(e,t),o.setEnd(e,t),o},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(Sl(e),0===t),isAtEnd:()=>Sl(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:o=>o&&e===o.container()&&t===o.offset(),getNode:o=>Mc(e,o?t-1:t)}};he.fromRangeStart=e=>he(e.startContainer,e.startOffset),he.fromRangeEnd=e=>he(e.endContainer,e.endOffset),he.after=e=>he(e.parentNode,ch(e)+1),he.before=e=>he(e.parentNode,ch(e)),he.isAbove=(e,t)=>Gt(xn(t.getClientRects()),mo(e.getClientRects()),bl).getOr(!1),he.isBelow=(e,t)=>Gt(mo(t.getClientRects()),xn(e.getClientRects()),yl).getOr(!1),he.isAtStart=e=>!!e&&e.isAtStart(),he.isAtEnd=e=>!!e&&e.isAtEnd(),he.isTextPosition=e=>!!e&&Ie(e.container()),he.isElementPosition=e=>!he.isTextPosition(e);const Ic=(e,t)=>{Ie(t)&&0===t.data.length&&e.remove(t)},Vu=(e,t,n)=>{var r,i;mu(n)?((r,o,i)=>{const a=T.from(i.firstChild),s=T.from(i.lastChild);o.insertNode(i),a.each(l=>Ic(r,l.previousSibling)),s.each(l=>Ic(r,l.nextSibling))})(e,t,n):(r=e,t.insertNode(i=n),Ic(r,i.previousSibling),Ic(r,i.nextSibling))},Go=Ie,fh=Da,ph=Kt.nodeIndex,gh=e=>{const t=e.parentNode;return fh(t)?gh(t):t},Gu=e=>e?Zr(e.childNodes,(t,n)=>(fh(n)&&"BR"!==n.nodeName?t=t.concat(Gu(n)):t.push(n),t),[]):[],mh=e=>t=>e===t,hh=e=>(Go(e)?"text()":e.nodeName.toLowerCase())+"["+(t=>{let n,r;n=Gu(gh(t)),r=Vi(n,mh(t),t),n=n.slice(0,r+1);const o=Zr(n,(i,a,s)=>(Go(a)&&Go(n[s-1])&&i++,i),0);return n=Er(n,qo([t.nodeName])),r=Vi(n,mh(t),t),r-o})(e)+"]",vh=(e,t)=>{let n,r=[],o=t.container(),i=t.offset();if(Go(o))n=((s,l)=>{let c=s;for(;(c=c.previousSibling)&&Go(c);)l+=c.data.length;return l})(o,i);else{const s=o.childNodes;i>=s.length?(n="after",i=s.length-1):n="before",o=s[i]}r.push(hh(o));let a=((s,l,c)=>{const u=[];for(let f=l.parentNode;f&&f!==s;f=f.parentNode)u.push(f);return u})(e,o);return a=Er(a,Jt(Da)),r=r.concat(xi(a,s=>hh(s))),r.reverse().join("/")+","+n},bh=(e,t)=>{if(!t)return null;const n=t.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",i=Zr(r,(a,s)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(s);return l?("text()"===l[1]&&(l[1]="#text"),((c,u,f)=>{let g=Gu(c);return g=Er(g,(v,m)=>!Go(v)||!Go(g[m-1])),g=Er(g,qo([u])),g[f]})(a,l[1],parseInt(l[2],10))):null},e);if(!i)return null;if(!Go(i)&&i.parentNode){let a;return a="after"===o?ph(i)+1:ph(i),he(i.parentNode,a)}return((a,s)=>{let l=a,c=0;for(;Go(l);){const u=l.data.length;if(s>=c&&s<=c+u){a=l,s-=c;break}if(!Go(l.nextSibling)){a=l,s=u;break}c+=u,l=l.nextSibling}return Go(a)&&s>a.data.length&&(s=a.data.length),he(a,s)})(i,parseInt(o,10))},Lc=Zt,yh=(e,t,n,r,o)=>{const i=o?r.startContainer:r.endContainer;let a=o?r.startOffset:r.endOffset;const s=[],l=e.getRoot();if(Ie(i))s.push(n?((c,u,f)=>{let g=c(u.data.slice(0,f)).length;for(let v=u.previousSibling;v&&Ie(v);v=v.previousSibling)g+=c(v.data).length;return g})(t,i,a):a);else{let c=0;const u=i.childNodes;a>=u.length&&u.length&&(c=1,a=Math.max(0,u.length-1)),s.push(e.nodeIndex(u[a],n)+c)}for(let c=i;c&&c!==l;c=c.parentNode)s.push(e.nodeIndex(c,n));return s},Ku=(e,t,n)=>{let r=0;return xe.each(e.select(t),o=>"all"===o.getAttribute("data-mce-bogus")?void 0:o!==n&&void r++),r},Ch=(e,t)=>{let n=t?e.startContainer:e.endContainer,r=t?e.startOffset:e.endOffset;if($e(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(t?r:r-1,o.length-1)],n&&(r=t?0:n.childNodes.length,t?e.setStart(n,r):e.setEnd(n,r))}},Sh=e=>(Ch(e,!0),Ch(e,!1),e),_h=(e,t)=>{if($e(e)&&(e=la(e,t),Lc(e)))return e;if(io(e)){Ie(e)&&Es(e)&&(e=e.parentNode);let n=e.previousSibling;if(Lc(n)||(n=e.nextSibling,Lc(n)))return n}},Eh=(e,t,n)=>{const r=n.getNode(),o=n.getRng();if("IMG"===r.nodeName||Lc(r)){const a=r.nodeName;return{name:a,index:Ku(n.dom,a,r)}}const i=_h((a=o).startContainer,a.startOffset)||_h(a.endContainer,a.endOffset);var a;if(i){const a=i.tagName;return{name:a,index:Ku(n.dom,a,i)}}return((a,s,l,c)=>{const u=s.dom,f=yh(u,a,l,c,!0),g=s.isForward(),v=Sm(c)?{isFakeCaret:!0}:{};return s.isCollapsed()?rt({start:f,forward:g},v):rt({start:f,end:yh(u,a,l,c,!1),forward:g},v)})(e,n,t,o)},wh=(e,t,n)=>{const r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},xh=(e,t)=>{const n=e.dom;let r=e.getRng();const o=n.uniqueId(),i=e.isCollapsed(),a=e.getNode(),s=a.nodeName,l=e.isForward();if("IMG"===s)return{name:s,index:Ku(n,s,a)};const c=Sh(r.cloneRange());if(!i){c.collapse(!1);const f=wh(n,o+"_end",t);Vu(n,c,f)}r=Sh(r),r.collapse(!0);const u=wh(n,o+"_start",t);return Vu(n,r,u),e.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},$u=ye(Eh,Ct,!0),kh=e=>{const t=i=>i(e),n=Fe(e),r=()=>o,o={tag:!0,inner:e,fold:(i,a)=>a(e),isValue:Ft,isError:Ot,map:i=>Tr.value(i(e)),mapError:r,bind:t,exists:t,forall:t,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:i=>{i(e)},toOptional:()=>T.some(e)};return o},Th=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(r,o)=>r(e),isValue:Ot,isError:Ft,map:t,mapError:r=>Tr.error(r(e)),bind:t,exists:Ot,forall:Ft,getOr:Ct,or:Ct,getOrThunk:ln,orThunk:ln,getOrDie:fn(String(e)),each:We,toOptional:T.none};return n},Tr={value:kh,error:Th,fromOption:(e,t)=>e.fold(()=>Th(t),kh)},di=e=>{if(!fe(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return Ae(e,(r,o)=>{const i=on(r);if(1!==i.length)throw new Error("one and only one name per case");const a=i[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!fe(s))throw new Error("case arguments must be an array");t.push(a),n[a]=(...l)=>{const c=l.length;if(c!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+c);return{fold:(...u)=>{if(u.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+u.length);return u[o].apply(null,l)},match:u=>{const f=on(u);if(t.length!==f.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+f.join(","));if(!fr(t,g=>Pt(f,g)))throw new Error("Not all branches were specified when using match. Specified: "+f.join(", ")+"\nRequired: "+t.join(", "));return u[a].apply(null,l)},log:u=>{console.log(u,{constructors:t,constructor:a,params:l})}}}}),n};di([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const U1=e=>"inline-command"===e.type||"inline-format"===e.type,H1=e=>"block-command"===e.type||"block-format"===e.type,W1=e=>{const t=r=>Tr.error({message:r,pattern:e}),n=(r,o,i)=>{if(void 0!==e.format){let a;if(fe(e.format)){if(!fr(e.format,D))return t(r+" pattern has non-string items in the `format` array");a=e.format}else{if(!D(e.format))return t(r+" pattern has non-string `format` parameter");a=[e.format]}return Tr.value(o(a))}return void 0!==e.cmd?D(e.cmd)?Tr.value(i(e.cmd,e.value)):t(r+" pattern has non-string `cmd` parameter"):t(r+" pattern is missing both `format` and `cmd` parameters")};if(!ne(e))return t("Raw pattern is not an object");if(!D(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!D(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");let r=e.start,o=e.end;return 0===o.length&&(o=r,r=""),n("Inline",i=>({type:"inline-format",start:r,end:o,format:i}),(i,a)=>({type:"inline-command",start:r,end:o,cmd:i,value:a}))}return void 0!==e.replacement?D(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):Tr.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,o)=>({type:"block-command",start:e.start,cmd:r,value:o}))},Ah=e=>gt(e,H1),Nh=e=>gt(e,U1),Rh=e=>{const t=(n=>{const r=[],o=[];return Ae(n,i=>{i.fold(a=>{r.push(a)},a=>{o.push(a)})}),{errors:r,values:o}})(wt(e,W1));return Ae(t.errors,n=>console.error(n.message,n.pattern)),t.values},Yu=$n().deviceType,q1=Yu.isTouch(),z1=Kt.DOM,Ph=e=>Ne(e,RegExp),Ye=e=>t=>t.options.get(e),Xu=e=>D(e)||ne(e),Oh=(e,t="")=>n=>{const r=D(n);if(r){if(-1!==n.indexOf("=")){const o=(i=>{const a=i.indexOf("=")>0?i.split(/[;,](?![^=;,]*(?:[;,]|$))/):i.split(",");return yn(a,(s,l)=>{const c=l.split("="),u=c[0],f=c.length>1?c[1]:u;return s[Lr(u)]=Lr(f),s},{})})(n);return{value:Ut(o,e.id).getOr(t),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},V1=Ye("iframe_attrs"),G1=Ye("doctype"),Dh=Ye("document_base_url"),K1=Ye("body_id"),$1=Ye("body_class"),Mh=Ye("content_security_policy"),Y1=Ye("br_in_pre"),Ar=Ye("forced_root_block"),_l=Ye("forced_root_block_attrs"),X1=Ye("newline_behavior"),Q1=Ye("br_newline_selector"),J1=Ye("no_newline_selector"),Z1=Ye("keep_styles"),ex=Ye("end_container_on_empty_block"),Ih=Ye("automatic_uploads"),Lh=Ye("images_reuse_filename"),tx=Ye("images_replace_blob_uris"),Bh=Ye("icons"),nx=Ye("icons_url"),rx=Ye("images_upload_url"),ox=Ye("images_upload_base_path"),ix=Ye("images_upload_credentials"),ax=Ye("images_upload_handler"),sx=Ye("content_css_cors"),Qu=Ye("referrer_policy"),jh=Ye("language"),lx=Ye("language_url"),Fh=Ye("indent_use_margin"),cx=Ye("indentation"),dx=Ye("content_css"),ux=Ye("content_style"),Uh=Ye("font_css"),fx=Ye("directionality"),px=Ye("inline_boundaries_selector"),Hh=Ye("object_resizing"),gx=Ye("resize_img_proportional"),mx=Ye("placeholder"),Wh=Ye("event_root"),hx=Ye("service_message"),As=Ye("theme"),vx=Ye("theme_url"),Ju=Ye("model"),bx=Ye("model_url"),El=Ye("inline_boundaries"),yx=Ye("formats"),Cx=Ye("preview_styles"),Sx=Ye("format_empty_lines"),_x=Ye("format_noneditable_selector"),Ex=Ye("custom_ui_selector"),Zu=Ye("inline"),wx=Ye("hidden_input"),xx=Ye("submit_patch"),kx=Ye("add_form_submit_trigger"),Tx=Ye("add_unload_trigger"),Ax=Ye("custom_undo_redo_levels"),Nx=Ye("disable_nodechange"),qh=Ye("readonly"),Rx=Ye("editable_root"),zh=Ye("content_css_cors"),Bc=Ye("plugins"),Px=Ye("external_plugins"),Ox=Ye("block_unsupported_drop"),Dx=Ye("visual"),Mx=Ye("visual_table_class"),Vh=Ye("visual_anchor_class"),Ix=Ye("iframe_aria_text"),Lx=Ye("setup"),Bx=Ye("init_instance_callback"),jx=Ye("urlconverter_callback"),Fx=Ye("auto_focus"),Ux=Ye("browser_spellcheck"),Hx=Ye("protect"),Wx=Ye("paste_block_drop"),jc=Ye("paste_data_images"),qx=Ye("paste_preprocess"),zx=Ye("paste_postprocess"),Vx=Ye("newdocument_content"),Gx=Ye("paste_webkit_styles"),Kx=Ye("paste_remove_styles_if_webkit"),$x=Ye("paste_merge_formats"),Yx=Ye("smart_paste"),Xx=Ye("paste_as_text"),Qx=Ye("paste_tab_spaces"),Jx=Ye("allow_html_data_urls"),Zx=Ye("text_patterns"),ek=Ye("text_patterns_lookup"),Gh=Ye("noneditable_class"),tk=Ye("editable_class"),nk=Ye("noneditable_regexp"),rk=Ye("preserve_cdata"),ok=Ye("highlight_on_focus"),ef=Ye("xss_sanitization"),ik=Ye("init_content_sync"),Kh=e=>xe.explode(e.options.get("images_file_types")),ak=Ye("table_tab_navigation"),sk=Ye("details_initial_state"),lk=Ye("details_serialized_state"),ck=$e,$h=Ie,Yh=e=>{const t=e.parentNode;t&&t.removeChild(e)},Xh=e=>{const t=Li(e);return{count:e.length-t.length,text:t}},Qh=e=>{let t;for(;-1!==(t=e.data.lastIndexOf(lr));)e.deleteData(t,1)},Jh=(e,t)=>(za(e),t),za=e=>{ck(e)&&io(e)&&(Cm(e)?e.removeAttribute("data-mce-caret"):Yh(e)),$h(e)&&(Qh(e),0===e.data.length&&Yh(e))},uk=Zt,fk=ci,pk=vc,Zh=(e,t,n)=>{const r=rh(t.getBoundingClientRect(),n);let o,i;if("BODY"===e.tagName){const s=e.ownerDocument.documentElement;o=e.scrollLeft||s.scrollLeft,i=e.scrollTop||s.scrollTop}else{const s=e.getBoundingClientRect();o=e.scrollLeft-s.left,i=e.scrollTop-s.top}r.left+=o,r.right+=o,r.top+=i,r.bottom+=i,r.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),r.left+=a,r.right+=a),r},ev=()=>J.browser.isFirefox(),wl=e=>uk(e)||fk(e),xl=e=>(wl(e)||Ii(e)&&ev())&&Mi(I(e)).exists(Ho),mk=zo,tf=Zt,hk=ci,tv=hc("display","block table table-cell table-caption list-item"),nv=io,rv=Es,vk=$e,bk=Ie,yk=Eo,Ns=e=>e>0,Va=e=>e<0,Fc=(e,t)=>{let n;for(;n=e(t);)if(!rv(n))return n;return null},kl=(e,t,n,r,o)=>{const i=new Pn(e,r),a=tf(e)||rv(e);let s;if(Va(t)){if(a&&(s=Fc(i.prev.bind(i),!0),n(s)))return s;for(;s=Fc(i.prev.bind(i),o);)if(n(s))return s}if(Ns(t)){if(a&&(s=Fc(i.next.bind(i),!0),n(s)))return s;for(;s=Fc(i.next.bind(i),o);)if(n(s))return s}return null},da=(e,t)=>{for(;e&&e!==t;){if(tv(e))return e;e=e.parentNode}return null},ui=(e,t,n)=>da(e.container(),n)===da(t.container(),n),nf=(e,t)=>{if(!t)return T.none();const n=t.container(),r=t.offset();return vk(n)?T.from(n.childNodes[r+e]):T.none()},ov=(e,t)=>{var n;const r=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},Ck=(e,t,n)=>da(t,e)===da(n,e),iv=(e,t,n)=>{const r=e?"previousSibling":"nextSibling";let o=n;for(;o&&o!==t;){let i=o[r];if(i&&nv(i)&&(i=i[r]),tf(i)||hk(i)){if(Ck(t,i,o))return i;break}if(yk(i))break;o=o.parentNode}return null},Tl=ye(ov,!0),Al=ye(ov,!1),rf=(e,t,n)=>{let r;const o=ye(iv,!0,t),i=ye(iv,!1,t),a=n.startContainer,s=n.startOffset;if(Es(a)){const l=bk(a)?a.parentNode:a,c=l.getAttribute("data-mce-caret");if("before"===c&&(r=l.nextSibling,xl(r)))return Tl(r);if("after"===c&&(r=l.previousSibling,xl(r)))return Al(r)}if(!n.collapsed)return n;if(Ie(a)){if(nv(a)){if(1===e){if(r=i(a),r)return Tl(r);if(r=o(a),r)return Al(r)}if(-1===e){if(r=o(a),r)return Al(r);if(r=i(a),r)return Tl(r)}return n}if(wc(a)&&s>=a.data.length-1)return 1===e&&(r=i(a),r)?Tl(r):n;if(Ec(a)&&s<=1)return-1===e&&(r=o(a),r)?Al(r):n;if(s===a.data.length)return r=i(a),r?Tl(r):n;if(0===s)return r=o(a),r?Al(r):n}return n},av=(e,t)=>nf(e?0:-1,t).filter(tf),Nl=(e,t,n)=>{const r=rf(e,t,n);return-1===e?he.fromRangeStart(r):he.fromRangeEnd(r)},Uc=e=>T.from(e.getNode()).map(I),of=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Hc=(e,t)=>{const n=ui(e,t);return!(n||!dn(e.getNode()))||n};var Fn,e;(e=Fn||(Fn={}))[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards";const Sk=Zt,fi=Ie,sv=$e,af=dn,Rs=Eo,lv=e=>{return Em(e)||!!_u(t=e)&&!yn(gn(t.getElementsByTagName("*")),(n,r)=>n||_m(r),!1);var t},Wc=wm,cv=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,dv=(e,t)=>{if(Ns(e)){if(Rs(t.previousSibling)&&!fi(t.previousSibling))return he.before(t);if(fi(t))return he(t,0)}if(Va(e)){if(Rs(t.nextSibling)&&!fi(t.nextSibling))return he.after(t);if(fi(t))return he(t,t.data.length)}return Va(e)?af(t)?he.before(t):he.after(t):he.before(t)},sf=(e,t,n)=>{let r,o,i,a;if(!sv(n)||!t)return null;if(t.isEqual(he.after(n))&&n.lastChild){if(a=he.after(n.lastChild),Va(e)&&Rs(n.lastChild)&&sv(n.lastChild))return af(n.lastChild)?he.before(n.lastChild):a}else a=t;const s=a.container();let l=a.offset();if(fi(s)){if(Va(e)&&l>0)return he(s,--l);if(Ns(e)&&l<s.length)return he(s,++l);r=s}else{if(Va(e)&&l>0&&(o=cv(s,l-1),Rs(o)))return!lv(o)&&(i=kl(o,e,Wc,o),i)?fi(i)?he(i,i.data.length):he.after(i):fi(o)?he(o,o.data.length):he.before(o);if(Ns(e)&&l<s.childNodes.length&&(o=cv(s,l),Rs(o)))return af(o)?((u,f)=>{const g=f.nextSibling;return g&&Rs(g)?fi(g)?he(g,0):he.before(g):sf(Fn.Forwards,he.after(f),u)})(n,o):!lv(o)&&(i=kl(o,e,Wc,o),i)?fi(i)?he(i,0):he.before(i):fi(o)?he(o,0):he.after(o);r=o||a.getNode()}if(r&&(Ns(e)&&a.isAtEnd()||Va(e)&&a.isAtStart())&&(r=kl(r,e,Ft,n,!0),Wc(r,n)))return dv(e,r);o=r&&kl(r,e,Wc,n);const c=qr(gt(((u,f)=>{const g=[];let v=u;for(;v&&v!==f;)g.push(v),v=v.parentNode;return g})(s,n),Sk));return!c||o&&c.contains(o)?o?dv(e,o):null:(a=Ns(e)?he.after(c):he.before(c),a)},pi=e=>({next:t=>sf(Fn.Forwards,t,e),prev:t=>sf(Fn.Backwards,t,e)}),uv=e=>he.isTextPosition(e)?0===e.offset():Eo(e.getNode()),fv=e=>{if(he.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return Eo(e.getNode(!0))},pv=(e,t)=>!he.isTextPosition(e)&&!he.isTextPosition(t)&&e.getNode()===t.getNode(!0),ao=(e,t,n)=>{const r=pi(t);return T.from(e?r.next(n):r.prev(n))},Rl=(e,t,n)=>ao(e,t,n).bind(r=>{return ui(n,r,t)&&(i=n,a=r,e?!pv(i,a)&&(he.isTextPosition(s=i)||!dn(s.getNode()))&&fv(i)&&uv(a):!pv(a,i)&&uv(i)&&fv(a))?ao(e,t,r):T.some(r);var i,a,s}),gv=(e,t,n,r)=>Rl(e,t,n).bind(o=>r(o)?gv(e,t,o,r):T.some(o)),Ps=(e,t)=>{const n=e?t.firstChild:t.lastChild;return Ie(n)?T.some(he(n,e?0:n.data.length)):n?Eo(n)?T.some(e?he.before(n):dn(r=n)?he.before(r):he.after(r)):((o,i,a)=>{const s=o?he.before(a):he.after(a);return ao(o,i,s)})(e,t,n):T.none();var r},br=ye(ao,!0),Nr=ye(ao,!1),yr=ye(Ps,!0),wo=ye(Ps,!1),lf="_mce_caret",xo=e=>$e(e)&&e.id===lf,Ga=(e,t)=>{let n=t;for(;n&&n!==e;){if(xo(n))return n;n=n.parentNode}return null},mv=e=>yt(e,"name"),hv=e=>xe.isArray(e.start),qc=e=>!(!mv(e)&&Le(e.forward))||e.forward,vv=(e,t)=>($e(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),_k=(e,t)=>wo(e).fold(Ot,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),bv=(e,t,n)=>!(t.hasChildNodes()||!Ga(e,t)||(((r,o)=>{var i;const a=(null!==(i=r.ownerDocument)&&void 0!==i?i:document).createTextNode(lr);r.appendChild(a),o.setStart(a,0),o.setEnd(a,0)})(t,n),0)),yv=(e,t,n,r)=>{const o=n[t?"start":"end"],i=e.getRoot();if(o){let a=i,s=o[0];for(let l=o.length-1;a&&l>=1;l--){const c=a.childNodes;if(bv(i,a,r))return!0;if(o[l]>c.length-1)return!!bv(i,a,r)||_k(a,r);a=c[o[l]]}Ie(a)&&(s=Math.min(o[0],a.data.length)),$e(a)&&(s=Math.min(o[0],a.childNodes.length)),t?r.setStart(a,s):r.setEnd(a,s)}return!0},cf=e=>Ie(e)&&e.data.length>0,Cv=(e,t,n)=>{const r=e.get(n.id+"_"+t),o=null==r?void 0:r.parentNode,i=n.keep;if(r&&o){let a,s;if("start"===t?i?r.hasChildNodes()?(a=r.firstChild,s=1):cf(r.nextSibling)?(a=r.nextSibling,s=0):cf(r.previousSibling)?(a=r.previousSibling,s=r.previousSibling.data.length):(a=o,s=e.nodeIndex(r)+1):(a=o,s=e.nodeIndex(r)):i?r.hasChildNodes()?(a=r.firstChild,s=1):cf(r.previousSibling)?(a=r.previousSibling,s=r.previousSibling.data.length):(a=o,s=e.nodeIndex(r)):(a=o,s=e.nodeIndex(r)),!i){const l=r.previousSibling,c=r.nextSibling;let u;for(xe.each(xe.grep(r.childNodes),f=>{Ie(f)&&(f.data=f.data.replace(/\uFEFF/g,""))});u=e.get(n.id+"_"+t);)e.remove(u,!0);if(Ie(c)&&Ie(l)&&!J.browser.isOpera()){const f=l.data.length;l.appendData(c.data),e.remove(c),a=l,s=f}}return T.some(he(a,s))}return T.none()},Ek=(e,t,n)=>((r,o,i=!1)=>{return 2===o?Eh(Li,i,r):3===o?(a=>{const s=a.getRng();return{start:vh(a.dom.getRoot(),he.fromRangeStart(s)),end:vh(a.dom.getRoot(),he.fromRangeEnd(s)),forward:a.isForward()}})(r):o?{rng:(a=r).getRng(),forward:a.isForward()}:xh(r,!1);var a})(e,t,n),wk=(e,t)=>{((n,r)=>{const o=n.dom;if(r){if(hv(r))return((i,a)=>{const s=i.createRng();return yv(i,!0,a,s)&&yv(i,!1,a,s)?T.some({range:s,forward:qc(a)}):T.none()})(o,r);if(D(r.start))return((i,a)=>{const s=T.from(bh(i.getRoot(),a.start)),l=T.from(bh(i.getRoot(),a.end));return Gt(s,l,(c,u)=>{const f=i.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:qc(a)}})})(o,r);if(yt(r,"id"))return((i,a)=>{const s=Cv(i,"start",a),l=Cv(i,"end",a);return Gt(s,l.or(s),(c,u)=>{const f=i.createRng();return f.setStart(vv(i,c.container()),c.offset()),f.setEnd(vv(i,u.container()),u.offset()),{range:f,forward:qc(a)}})})(o,r);if(mv(r))return((i,a)=>T.from(i.select(a.name)[a.index]).map(s=>{const l=i.createRng();return l.selectNode(s),{range:l,forward:!0}}))(o,r);if((i=>yt(i,"rng"))(r))return T.some({range:r.rng,forward:qc(r)})}return T.none()})(e,t).each(({range:n,forward:r})=>{e.setRng(n,r)})},so=e=>$e(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),zc=e=>"\xa0"===e,Os=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),df=e=>!Os(e)&&!zc(e)&&!hu(e),uf=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},xk=e=>{return{value:(n=uf(e.red)+uf(e.green)+uf(e.blue),xa(n,"#").toUpperCase())};var n},kk=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Tk=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,_v=(e,t,n,r)=>({red:e,green:t,blue:n,alpha:r}),Ev=(e,t,n,r)=>{const o=parseInt(e,10),i=parseInt(t,10),a=parseInt(n,10),s=parseFloat(r);return _v(o,i,a,s)},Vc=e=>(t=>{if("transparent"===t)return T.some(_v(0,0,0,0));const n=kk.exec(t);if(null!==n)return T.some(Ev(n[1],n[2],n[3],"1"));const r=Tk.exec(t);return null!==r?T.some(Ev(r[1],r[2],r[3],r[4])):T.none()})(e).map(xk).map(t=>"#"+t.value).getOr(e),ff=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},wv=(e,t)=>{const n=sr(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:gt(pn(e,i=>{const a=Dc(i);return a?[I(a)]:[]}),cl)},Ds=e=>wv(ff(e.selection.getSel()),I(e.getBody())),Pl=(e,t)=>Zi(e,"table",t),xv=e=>Nn(e).fold(Fe([e]),t=>[e].concat(xv(t))),pf=e=>_n(e).fold(Fe([e]),t=>"br"===zt(t)?or(t).map(n=>[e].concat(pf(n))).getOr([]):[e].concat(pf(t))),gf=(e,t)=>Gt((n=>{const r=n.startContainer,o=n.startOffset;return Ie(r)?0===o?T.some(I(r)):T.none():T.from(r.childNodes[o]).map(I)})(t),(n=>{const r=n.endContainer,o=n.endOffset;return Ie(r)?o===r.data.length?T.some(I(r)):T.none():T.from(r.childNodes[o-1]).map(I)})(t),(n,r)=>{const o=rn(xv(e),ye(Rt,n)),i=rn(pf(e),ye(Rt,r));return o.isSome()&&i.isSome()}).getOr(!1),mf=(e,t,n,r)=>{const o=n,i=new Pn(n,o),a=_r(e.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!Pt(["td","th","table"],c.toLowerCase()));let s=n;do{if(Ie(s)&&0!==xe.trim(s.data).length)return void(r?t.setStart(s,0):t.setEnd(s,s.data.length));if(a[s.nodeName])return void(r?t.setStartBefore(s):"BR"===s.nodeName?t.setEndBefore(s):t.setEndAfter(s))}while(s=r?i.next():i.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Gc=e=>{const t=e.selection.getSel();return z(t)&&t.rangeCount>0},hf=(e,t)=>{const n=Ds(e);n.length>0?Ae(n,r=>{const o=r.dom,i=e.dom.createRng();i.setStartBefore(o),i.setEndAfter(o),t(i,!0)}):t(e.selection.getRng(),!1)},kv=(e,t,n)=>{const r=xh(e,t);n(r),e.moveToBookmark(r)},Ol=e=>b(null==e?void 0:e.nodeType),vf=e=>$e(e)&&!so(e)&&!xo(e)&&!Da(e),Ka=e=>!0===e.isContentEditable,Tv=(e,t,n)=>{const{selection:r,dom:o}=e,i=r.getNode(),a=Zt(i);kv(r,!0,()=>{t()}),a&&Zt(i)&&o.isChildOf(i,e.getBody())?e.selection.select(i):n(r.getStart())&&Ak(o,r)},Ak=(e,t)=>{var n,r;const o=t.getRng(),{startContainer:i,startOffset:a}=o;if(!((s,l)=>{if(vf(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=s.getAttrib(l,"data-mce-selected"),u=parseInt(c,10);return!isNaN(u)&&u>0}return!1})(e,t.getNode())&&$e(i)){const s=i.childNodes,l=e.getRoot();let c;if(a<s.length){const u=s[a];c=new Pn(u,null!==(n=e.getParent(u,e.isBlock))&&void 0!==n?n:l)}else{const u=s[s.length-1];c=new Pn(u,null!==(r=e.getParent(u,e.isBlock))&&void 0!==r?r:l),c.next(!0)}for(let u=c.current();u;u=c.next()){if("false"===e.getContentEditable(u))return;if(Ie(u)&&!yf(u))return o.setStart(u,0),void t.setRng(o)}}},Av=(e,t,n)=>{if(e){const r=t?"nextSibling":"previousSibling";for(e=n?e:e[r];e;e=e[r])if($e(e)||!yf(e))return e}},bf=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||La(e,t),Ms=(e,t,n)=>e.schema.isValidChild(t,n),yf=(e,t=!1)=>{if(z(e)&&Ie(e)){const n=t?e.data.replace(/ /g,"\xa0"):e.data;return Ia(n)}return!1},Nv=(e,t)=>{const n=e.dom;return vf(t)&&"false"===n.getContentEditable(t)&&((r,o)=>{const i="[data-mce-cef-wrappable]",a=_x(r),s=ti(a)?i:`${i},${a}`;return Xt(I(o),s)})(e,t)&&0===n.select('[contenteditable="true"]',t).length},ua=(e,t)=>me(e)?e(t):(z(t)&&(e=e.replace(/%(\w+)/g,(n,r)=>t[r]||n)),e),Cf=(e,t)=>(e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()),Sf=(e,t)=>{if(Ve(e))return null;{let n=String(e);return"color"!==t&&"backgroundColor"!==t||(n=Vc(n)),"fontWeight"===t&&700===e&&(n="bold"),"fontFamily"===t&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Kc=(e,t,n)=>{const r=e.getStyle(t,n);return Sf(r,n)},Rv=(e,t)=>{let n;return e.getParent(t,r=>!!$e(r)&&(n=e.getStyle(r,"text-decoration"),!!n&&"none"!==n)),n},$c=(e,t,n)=>e.getParents(t,n,e.getRoot()),_f=(e,t,n)=>{const r=e.formatter.get(t);return z(r)&&Yt(r,n)},gi=e=>mn(e,"block"),lo=e=>mn(e,"selector"),On=e=>mn(e,"inline"),Ef=e=>lo(e)&&!1!==e.expand&&!On(e),Is=so,Pv=$c,Ov=yf,Nk=bf,Dv=(e,t)=>{let n=t;for(;n;){if($e(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Mv=(e,t,n,r)=>{const o=t.data;if(e){for(let i=n;i>0;i--)if(r(o.charAt(i-1)))return i}else for(let i=n;i<o.length;i++)if(r(o.charAt(i)))return i;return-1},Rk=(e,t,n)=>Mv(e,t,n,r=>zc(r)||Os(r)),Pk=(e,t,n)=>Mv(e,t,n,df),Iv=(e,t,n,r,o,i)=>{let a;const s=e.getParent(n,e.isBlock)||t,l=(c,u,f)=>{const g=Ha(e);return T.from((o?g.backwards:g.forwards)(c,u,(m,y)=>Is(m.parentNode)?-1:(a=m,f(o,m,y)),s))};return l(n,r,Rk).bind(c=>i?l(c.container,c.offset+(o?-1:0),Pk):T.some(c)).orThunk(()=>a?T.some({container:a,offset:o?0:a.length}):T.none())},Lv=(e,t,n,r,o)=>{const i=r[o];Ie(r)&&ti(r.data)&&i&&(r=i);const a=Pv(e,r);for(let s=0;s<a.length;s++)for(let l=0;l<t.length;l++){const c=t[l];if((!z(c.collapsed)||c.collapsed===n.collapsed)&&lo(c)&&e.is(a[s],c.selector))return a[s]}return r},Bv=(e,t,n,r)=>{var o;let i=n;const a=e.getRoot(),s=t[0];if(gi(s)&&(i=s.wrapper?null:e.getParent(n,s.block,a)),!i){const l=null!==(o=e.getParent(n,"LI,TD,TH"))&&void 0!==o?o:a;i=e.getParent(Ie(n)?n.parentNode:n,c=>c!==a&&Nk(e.schema,c),l)}if(i&&gi(s)&&s.wrapper&&(i=Pv(e,i,"ul,ol").reverse()[0]||i),!i)for(i=n;i&&i[r]&&!e.isBlock(i[r])&&(i=i[r],!Cf(i,"br")););return i||n},jv=(e,t,n,r)=>{const o=n.parentNode;return!z(n[r])&&(!(o!==t&&!Ve(o)&&!e.isBlock(o))||jv(e,t,o,r))},Yc=(e,t,n,r,o)=>{let i=n;const a=o?"previousSibling":"nextSibling",s=e.getRoot();if(Ie(n)&&!Ov(n)&&(o?r>0:r<n.data.length))return n;for(;i;){if(!t[0].block_expand&&e.isBlock(i))return i;for(let c=i[a];c;c=c[a]){const u=Ie(c)&&!jv(e,s,c,a);if(!Is(c)&&(!dn(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!Ov(c,u))return i}if(i===s||i.parentNode===s){n=i;break}i=i.parentNode}var l;return n},Fv=e=>Is(e.parentNode)||Is(e),$a=(e,t,n,r=!1)=>{let{startContainer:o,startOffset:i,endContainer:a,endOffset:s}=t;const l=n[0];return $e(o)&&o.hasChildNodes()&&(o=la(o,i),Ie(o)&&(i=0)),$e(a)&&a.hasChildNodes()&&(a=la(a,t.collapsed?s:s-1),Ie(a)&&(s=a.data.length)),o=Dv(e,o),a=Dv(e,a),Fv(o)&&(o=Is(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,Ie(o)&&(i=t.collapsed?o.length:0)),Fv(a)&&(a=Is(a)?a:a.parentNode,a=t.collapsed?a.nextSibling||a:a.previousSibling||a,Ie(a)&&(s=t.collapsed?0:a.length)),t.collapsed&&(Iv(e,e.getRoot(),o,i,!0,r).each(({container:c,offset:u})=>{o=c,i=u}),Iv(e,e.getRoot(),a,s,!1,r).each(({container:c,offset:u})=>{a=c,s=u})),(On(l)||l.block_expand)&&(On(l)&&Ie(o)&&0!==i||(o=Yc(e,n,o,i,!0)),On(l)&&Ie(a)&&s!==a.data.length||(a=Yc(e,n,a,s,!1))),Ef(l)&&(o=Lv(e,n,t,o,"previousSibling"),a=Lv(e,n,t,a,"nextSibling")),(gi(l)||lo(l))&&(o=Bv(e,n,o,"previousSibling"),a=Bv(e,n,a,"nextSibling"),gi(l)&&(e.isBlock(o)||(o=Yc(e,n,o,i,!0)),e.isBlock(a)||(a=Yc(e,n,a,s,!1)))),$e(o)&&o.parentNode&&(i=e.nodeIndex(o),o=o.parentNode),$e(a)&&a.parentNode&&(s=e.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:i,endContainer:a,endOffset:s}},Dl=(e,t,n)=>{var r;const o=t.startOffset,i=la(t.startContainer,o),a=t.endOffset,s=la(t.endContainer,a-1),l=h=>{const S=h[0];Ie(S)&&S===i&&o>=S.data.length&&h.splice(0,1);const x=h[h.length-1];return 0===a&&h.length>0&&x===s&&Ie(x)&&h.splice(h.length-1,1),h},c=(h,S,x)=>{const k=[];for(;h&&h!==x;h=h[S])k.push(h);return k},u=(h,S)=>e.getParent(h,x=>x.parentNode===S,S),f=(h,S,x)=>{const k=x?"nextSibling":"previousSibling";for(let N=h,P=N.parentNode;N&&N!==S;N=P){P=N.parentNode;const L=c(N===h?N:N[k],k);L.length&&(x||L.reverse(),n(l(L)))}};if(i===s)return n(l([i]));const g=null!==(r=e.findCommonAncestor(i,s))&&void 0!==r?r:e.getRoot();if(e.isChildOf(i,s))return f(i,g,!0);if(e.isChildOf(s,i))return f(s,g);const v=u(i,g)||i,m=u(s,g)||s;f(i,v,!0);const y=c(v===i?v:v.nextSibling,"nextSibling",m===s?m.nextSibling:m);y.length&&n(l(y)),f(s,m)},Ok=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Uv=(e,t,n,r,o,i)=>{const u=n,{uid:a=t}=u,s=$w(u,["uid"]);M(e,pl()),Tn(e,`${ks()}`,a),Tn(e,`${Fa()}`,r);const{attributes:l={},classes:c=[]}=o(a,s);if(Lo(e,l),f=e,Ae(c,v=>{M(f,v)}),i){c.length>0&&Tn(e,`${ml()}`,c.join(","));const f=on(l);f.length>0&&Tn(e,`${hl()}`,f.join(","))}var f},Hv=(e,t,n,r,o)=>{const i=ge("span",e);return Uv(i,t,n,r,o,!1),i},Wv=e=>{const t=(()=>{const i={};return{register:(a,s)=>{i[a]={name:a,settings:s}},lookup:a=>Ut(i,a).map(s=>s.settings),getNames:()=>on(i)}})();((i,a)=>{const s=Fa(),l=u=>T.from(u.attr(s)).bind(a.lookup),c=u=>{var f,g;u.attr(ks(),null),u.attr(Fa(),null),u.attr(gl(),null);const v=T.from(u.attr(hl())).map(S=>S.split(",")).getOr([]),m=T.from(u.attr(ml())).map(S=>S.split(",")).getOr([]);Ae(v,S=>u.attr(S,null));const y=null!==(g=null===(f=u.attr("class"))||void 0===f?void 0:f.split(" "))&&void 0!==g?g:[],h=mt(y,[pl()].concat(m));u.attr("class",h.length>0?h.join(" "):null),u.attr(ml(),null),u.attr(hl(),null)};i.serializer.addTempAttr(gl()),i.serializer.addAttributeFilter(s,u=>{for(const f of u)l(f).each(g=>{!1===g.persistent&&("span"===f.name?f.unwrap():c(f))})})})(e,t);const n=((i,a)=>{const s=jn({}),l=()=>({listeners:[],previous:sa()}),c=(v,m)=>{u(v,y=>(m(y),y))},u=(v,m)=>{const y=s.get(),h=m(Ut(y,v).getOrThunk(l));y[v]=h,s.set(y)},f=(v,m)=>{Ae(Xm(i,v),y=>{m?Tn(y,gl(),"true"):Mn(y,gl())})},g=Uu(()=>{const v=Ao(a.getNames());Ae(v,m=>{u(m,y=>{const h=y.previous.get();return $m(i,T.some(m)).fold(()=>{h.each(S=>{var x;c(x=m,k=>{Ae(k.listeners,N=>N(!1,x))}),y.previous.clear(),f(S,!1)})},({uid:S,name:x,elements:k})=>{var N,P,L;Ht(h,S)||(h.each(N=>f(N,!1)),P=S,L=k,c(N=x,U=>{Ae(U.listeners,Z=>Z(!0,N,{uid:P,nodes:wt(L,ve=>ve.dom)}))}),y.previous.set(S),f(S,!0))}),{previous:y.previous,listeners:y.listeners}})})},30);return i.on("remove",()=>{g.cancel()}),i.on("NodeChange",()=>{g.throttle()}),{addListener:(v,m)=>{u(v,y=>({previous:y.previous,listeners:y.listeners.concat([m])}))}}})(e,t),r=nl("span"),o=i=>{Ae(i,a=>{r(a)?Dt(a):(s=>{G(s,pl()),Mn(s,`${ks()}`),Mn(s,`${Fa()}`),Mn(s,`${gl()}`);const l=Bo(s,`${hl()}`).map(f=>f.split(",")).getOr([]),c=Bo(s,`${ml()}`).map(f=>f.split(",")).getOr([]);var u;Ae(l,f=>Mn(s,f)),u=s,Ae(c,f=>{G(u,f)}),Mn(s,`${ml()}`),Mn(s,`${hl()}`)})(a)})};return{register:(i,a)=>{t.register(i,a)},annotate:(i,a)=>{t.lookup(i).each(s=>{var l,c,u,f;c=i,u=s,f=a,(l=e).undoManager.transact(()=>{const g=l.selection,v=g.getRng(),m=Ds(l).length>0,y=vl("mce-annotation");if(v.collapsed&&!m&&((h,S)=>{const x=$a(h.dom,S,[{inline:"span"}]);S.setStart(x.startContainer,x.startOffset),S.setEnd(x.endContainer,x.endOffset),h.selection.setRng(S)})(l,v),g.getRng().collapsed&&!m){const h=Hv(l.getDoc(),y,f,c,u.decorate);Ln(h,Bn),g.getRng().insertNode(h.dom),g.select(h.dom)}else kv(g,!1,()=>{hf(l,h=>{((e,t,n,r,o,i)=>{const a=[],s=Hv(e.getDoc(),n,i,r,o),l=sa(),c=()=>{l.clear()},u=g=>{Ae(g,f)},f=g=>{switch(v=e,m=g,y="span",h=zt(g),Vt(m).fold(()=>"skipping",S=>{return"br"===h||rr(x=m)&&bc(x)===lr?"valid":(x=>Dn(x)&&ue(x,pl()))(m)?"existing":xo(m.dom)?"caret":Yt(Ok,x=>Xt(m,x))?"valid-block":Ms(v,y,h)&&Ms(v,zt(S),y)?"valid":"invalid-child";var x})){case"invalid-child":{c();const v=cn(g);u(v),c();break}case"valid-block":c(),Uv(g,n,i,r,o,!0);break;case"valid":{const v=l.get().getOrThunk(()=>{const m=Ua(s);return a.push(m),l.set(m),m});lt(g,v);break}}var v,m,y,h};Dl(e.dom,t,g=>{c(),(v=>{const m=wt(v,I);u(m)})(g)})})(l,h,y,c,u.decorate,f)})})})})},annotationChanged:(i,a)=>{n.addListener(i,a)},remove:i=>{$m(e,T.some(i)).each(({elements:a})=>{const s=e.selection.getBookmark();o(a),e.selection.moveToBookmark(s)})},removeAll:i=>{const a=e.selection.getBookmark();qt(Qm(e,i),(s,l)=>{o(s)}),e.selection.moveToBookmark(a)},getAll:i=>{const a=Qm(e,i);return ho(a,s=>wt(s,l=>l.dom))}}},Ml=e=>({getBookmark:ye(Ek,e),moveToBookmark:ye(wk,e)});Ml.isBookmarkNode=so;const qv=(e,t,n)=>!n.collapsed&&Yt(n.getClientRects(),r=>{return a=t,(i=e)>=(o=r).left&&i<=o.right&&a>=o.top&&a<=o.bottom;var o,i,a}),zv=(e,t,n)=>{e.dispatch(t,n)},Vv=(e,t,n,r)=>{e.dispatch("FormatApply",{format:t,node:n,vars:r})},Gv=(e,t,n,r)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:r})},Kv=(e,t)=>e.dispatch("SetContent",t),$v=(e,t)=>e.dispatch("GetContent",t),Yv=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),Qe={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Qe.metaKeyPressed(e),metaKeyPressed:e=>J.os.isMacOS()||J.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Ya="data-mce-selected",Xv=Math.abs,Xc=Math.round,wf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Qv=(e,t)=>{const n=t.dom,r=t.getDoc(),o=document,i=t.getBody();let a,s,l,c,u,f,g,v,m,y,h,S,x,k,N;const P=Ge=>z(Ge)&&(hm(Ge)||n.is(Ge,"figure.image")),L=Ge=>ci(Ge)||n.hasClass(Ge,"mce-preview-object"),U=Ge=>{const tt=Ge.target;((ut,W)=>{if("longpress"===(K=ut).type||0===K.type.indexOf("touch")){const K=ut.touches[0];return P(ut.target)&&!qv(K.clientX,K.clientY,W)}var K;return P(ut.target)&&!qv(ut.clientX,ut.clientY,W)})(Ge,t.selection.getRng())&&!Ge.isDefaultPrevented()&&t.selection.select(tt)},Z=Ge=>n.hasClass(Ge,"mce-preview-object")&&z(Ge.firstElementChild)?[Ge,Ge.firstElementChild]:n.is(Ge,"figure.image")?[Ge.querySelector("img")]:[Ge],ve=Ge=>{const tt=Hh(t);return!!tt&&"false"!==Ge.getAttribute("data-mce-resize")&&Ge!==t.getBody()&&(n.hasClass(Ge,"mce-preview-object")&&z(Ge.firstElementChild)?Xt(I(Ge.firstElementChild),tt):Xt(I(Ge),tt))},de=(Ge,tt,ut)=>{if(z(ut)){const W=Z(Ge);Ae(W,K=>{K.style[tt]||!t.schema.isValid(K.nodeName.toLowerCase(),tt)?n.setStyle(K,tt,ut):n.setAttrib(K,tt,""+ut)})}},H=(Ge,tt,ut)=>{de(Ge,"width",tt),de(Ge,"height",ut)},X=Ge=>{let tt,ut,W,K,be;tt=Ge.screenX-f,ut=Ge.screenY-g,S=tt*c[2]+v,x=ut*c[3]+m,S=S<5?5:S,x=x<5?5:x,W=(P(a)||L(a))&&!1!==gx(t)?!Qe.modifierPressed(Ge):Qe.modifierPressed(Ge),W&&(Xv(tt)>Xv(ut)?(x=Xc(S*y),S=Xc(x/y)):(S=Xc(x/y),x=Xc(S*y))),H(s,S,x),K=c.startPos.x+tt,be=c.startPos.y+ut,K=K>0?K:0,be=be>0?be:0,n.setStyles(l,{left:K,top:be,display:"block"}),l.innerHTML=S+" &times; "+x,c[2]<0&&s.clientWidth<=S&&n.setStyle(s,"left",void 0+(v-S)),c[3]<0&&s.clientHeight<=x&&n.setStyle(s,"top",void 0+(m-x)),tt=i.scrollWidth-k,ut=i.scrollHeight-N,tt+ut!==0&&n.setStyles(l,{left:K-tt,top:be-ut}),h||(t.dispatch("ObjectResizeStart",{target:a,width:v,height:m,origin:"corner-"+c.name}),h=!0)},V=()=>{const Ge=h;h=!1,Ge&&(de(a,"width",S),de(a,"height",x)),n.unbind(r,"mousemove",X),n.unbind(r,"mouseup",V),o!==r&&(n.unbind(o,"mousemove",X),n.unbind(o,"mouseup",V)),n.remove(s),n.remove(l),n.remove(u),ae(a),Ge&&(t.dispatch("ObjectResized",{target:a,width:S,height:x,origin:"corner-"+c.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),t.nodeChanged()},ae=Ge=>{ht();const tt=n.getPos(Ge,i),ut=tt.x,W=tt.y,K=Ge.getBoundingClientRect(),be=K.width||K.right-K.left,Te=K.height||K.bottom-K.top;a!==Ge&&(Me(),a=Ge,S=x=0);const Ce=t.dispatch("ObjectSelected",{target:Ge});ve(Ge)&&!Ce.isDefaultPrevented()?qt(wf,(Se,je)=>{let et=n.get("mceResizeHandle"+je);et&&n.remove(et),et=n.add(i,"div",{id:"mceResizeHandle"+je,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+je+"-resize; margin:0; padding:0"}),n.bind(et,"mousedown",Ke=>{Ke.stopImmediatePropagation(),Ke.preventDefault(),(ft=>{const pt=Z(a)[0];var ze;f=ft.screenX,g=ft.screenY,v=pt.clientWidth,m=pt.clientHeight,y=m/v,c=Se,c.name=je,c.startPos={x:be*Se[0]+ut,y:Te*Se[1]+W},k=i.scrollWidth,N=i.scrollHeight,u=n.add(i,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(u,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),s=L(ze=a)?n.create("img",{src:J.transparentSrc}):ze.cloneNode(!0),n.addClass(s,"mce-clonedresizable"),n.setAttrib(s,"data-mce-bogus","all"),s.contentEditable="false",n.setStyles(s,{left:ut,top:W,margin:0}),H(s,be,Te),s.removeAttribute(Ya),i.appendChild(s),n.bind(r,"mousemove",X),n.bind(r,"mouseup",V),o!==r&&(n.bind(o,"mousemove",X),n.bind(o,"mouseup",V)),l=n.add(i,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},v+" &times; "+m)})(Ke)}),Se.elm=et,n.setStyles(et,{left:be*Se[0]+ut-et.offsetWidth/2,top:Te*Se[1]+W-et.offsetHeight/2})}):Me(!1)},Ue=Oc(ae,0),Me=(Ge=!0)=>{Ue.cancel(),ht(),a&&Ge&&a.removeAttribute(Ya),qt(wf,(tt,ut)=>{const W=n.get("mceResizeHandle"+ut);W&&(n.unbind(W),n.remove(W))})},nt=(Ge,tt)=>n.isChildOf(Ge,tt),qe=Ge=>{if(h||t.removed||t.composing)return;const tt="mousedown"===Ge.type?Ge.target:e.getNode(),ut=_o(I(tt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(K=>K.dom).filter(K=>n.isEditable(K.parentElement)).getOrUndefined(),W=z(ut)?n.getAttrib(ut,Ya,"1"):"1";if(Ae(n.select(`img[${Ya}],hr[${Ya}]`),K=>{K.removeAttribute(Ya)}),z(ut)&&nt(ut,i)&&t.hasFocus()){bt();const K=e.getStart(!0);if(nt(K,ut)&&nt(e.getEnd(!0),ut))return n.setAttrib(ut,Ya,W),void Ue.throttle(ut)}Me()},ht=()=>{qt(wf,Ge=>{Ge.elm&&(n.unbind(Ge.elm),delete Ge.elm)})},bt=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(Ge){}};return t.on("init",()=>{bt(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",qe),t.on("keyup compositionend",Ge=>{a&&"TABLE"===a.nodeName&&qe(Ge)}),t.on("hide blur",Me),t.on("contextmenu longpress",U,!0)}),t.on("remove",ht),{isResizable:ve,showResizeRect:ae,hideResizeRect:Me,updateResizeRect:qe,destroy:()=>{Ue.cancel(),a=s=u=null}}},Jv=(e,t,n)=>{const r=e.document.createRange();var o,i;return o=r,t.fold(i=>{o.setStartBefore(i.dom)},(i,a)=>{o.setStart(i.dom,a)},i=>{o.setStartAfter(i.dom)}),i=r,n.fold(s=>{i.setEndBefore(s.dom)},(s,l)=>{i.setEnd(s.dom,l)},s=>{i.setEndAfter(s.dom)}),r},xf=(e,t,n,r,o)=>{const i=e.document.createRange();return i.setStart(t.dom,n),i.setEnd(r.dom,o),i},Il=di([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Zv=(e,t,n)=>t(I(n.startContainer),n.startOffset,I(n.endContainer),n.endOffset),eb=(e,t,n,r)=>({start:e,soffset:t,finish:n,foffset:r}),Mk=document.caretPositionFromPoint?(e,t,n)=>{var r,o;return T.from(null===(o=(r=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,t,n)).bind(i=>{if(null===i.offsetNode)return T.none();const a=e.dom.createRange();return a.setStart(i.offsetNode,i.offset),a.collapse(),T.some(a)})}:document.caretRangeFromPoint?(e,t,n)=>{var r,o;return T.from(null===(o=(r=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,t,n))}:T.none,kf=di([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ji={before:kf.before,on:kf.on,after:kf.after,cata:(e,t,n,r)=>e.fold(t,n,r),getStart:e=>e.fold(Ct,Ct,Ct)},Qc=di([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ls={domRange:Qc.domRange,relative:Qc.relative,exact:Qc.exact,exactFromRange:e=>Qc.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=e.match({domRange:r=>I(r.startContainer),relative:(r,o)=>ji.getStart(r),exact:(r,o,i,a)=>r});return Bt(t)},range:eb},Jc=(e,t)=>{const n=zt(e);return"input"===n?ji.after(e):Pt(["br","img"],n)?0===t?ji.before(e):ji.after(e):ji.on(e,t)},Ik=(e,t)=>{const n=e.fold(ji.before,Jc,ji.after),r=t.fold(ji.before,Jc,ji.after);return Ls.relative(n,r)},tb=(e,t,n,r)=>{const o=Jc(e,t),i=Jc(n,r);return Ls.relative(o,i)},Tf=(e,t)=>{const n=(t||document).createDocumentFragment();return Ae(e,r=>{n.appendChild(r.dom)}),I(n)},nb=(e,t,n)=>{return(r=Bt(I(n)).dom,o=e,i=t,((a,s,l)=>{const c=I(a.document);return Mk(c,s,l).map(u=>eb(I(u.startContainer),u.startOffset,I(u.endContainer),u.endOffset))})(r,o,i)).map(r=>{const o=n.createRange();return o.setStart(r.start.dom,r.soffset),o.setEnd(r.finish.dom,r.foffset),o}).getOrUndefined();var r,o,i},Af=(e,t)=>z(e)&&z(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,rb=(e,t,n)=>null!==((r,o,i)=>{let a=r;for(;a&&a!==o;){if(i(a))return a;a=a.parentNode}return null})(e,t,n),Bk=(e,t,n)=>rb(e,t,r=>r.nodeName===n),jk=(e,t)=>io(e)&&!rb(e,t,xo),ob=(e,t,n)=>{const r=t.parentNode;if(r){const o=new Pn(t,e.getParent(r,e.isBlock)||e.getRoot());let i;for(;i=o[n?"prev":"next"]();)if(dn(i))return!0}return!1},Nf=(e,t,n,r,o)=>{const i=e.getRoot(),a=e.schema.getNonEmptyElements(),s=o.parentNode;let l,c;if(!s)return T.none();const u=e.getParent(s,e.isBlock)||i;if(r&&dn(o)&&t&&e.isEmpty(u))return T.some(he(s,e.nodeIndex(o)));const f=new Pn(o,u);for(;c=f[r?"prev":"next"]();){if("false"===e.getContentEditableParent(c)||jk(c,i))return T.none();if(Ie(c)&&c.data.length>0)return Bk(c,i,"A")?T.none():T.some(he(c,r?c.data.length:0));if(e.isBlock(c)||a[c.nodeName.toLowerCase()])return T.none();l=c}return ta(l)?T.none():n&&l?T.some(he(l,0)):T.none()},ib=(e,t,n,r)=>{const o=e.getRoot();let i,a=!1,s=n?r.startContainer:r.endContainer,l=n?r.startOffset:r.endOffset;const c=$e(s)&&l===s.childNodes.length,u=e.schema.getNonEmptyElements();let f=n;if(io(s))return T.none();if($e(s)&&l>s.childNodes.length-1&&(f=!1),sl(s)&&(s=o,l=0),s===o){if(f&&(i=s.childNodes[l>0?l-1:0],i)&&(io(i)||u[i.nodeName]||Ii(i)))return T.none();if(s.hasChildNodes()){if(l=Math.min(!f&&l>0?l-1:l,s.childNodes.length-1),s=s.childNodes[l],l=Ie(s)&&c?s.data.length:0,!t&&s===o.lastChild&&Ii(s)||((g,v)=>{let m=v;for(;m&&m!==g;){if(Zt(m))return!0;m=m.parentNode}return!1})(o,s)||io(s))return T.none();if(s.hasChildNodes()&&!Ii(s)){i=s;const g=new Pn(s,o);do{if(Zt(i)||io(i)){a=!1;break}if(Ie(i)&&i.data.length>0){l=f?0:i.data.length,s=i,a=!0;break}if(u[i.nodeName.toLowerCase()]&&!Jw(i)){l=e.nodeIndex(i),s=i.parentNode,f||l++,a=!0;break}}while(i=f?g.next():g.prev())}}}return t&&(Ie(s)&&0===l&&Nf(e,c,t,!0,s).each(g=>{s=g.container(),l=g.offset(),a=!0}),$e(s)&&(i=s.childNodes[l],i||(i=s.childNodes[l-1]),!i||!dn(i)||"A"===(null===(m=i.previousSibling)||void 0===m?void 0:m.nodeName)||ob(e,i,!1)||ob(e,i,!0)||Nf(e,c,t,!0,i).each(g=>{s=g.container(),l=g.offset(),a=!0}))),f&&!t&&Ie(s)&&l===s.data.length&&Nf(e,c,t,!1,s).each(g=>{s=g.container(),l=g.offset(),a=!0}),a&&s?T.some(he(s,l)):T.none();var m},Zc=(e,t)=>{const n=t.collapsed,r=t.cloneRange(),o=he.fromRangeStart(t);return ib(e,n,!0,r).each(i=>{n&&he.isAbove(o,i)||r.setStart(i.container(),i.offset())}),n||ib(e,n,!1,r).each(i=>{r.setEnd(i.container(),i.offset())}),n&&r.collapse(!0),Af(t,r)?T.none():T.some(r)},ed=(e,t)=>e.splitText(t),td=e=>{let t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset;if(t===r&&Ie(t)){if(n>0&&n<t.data.length)if(r=ed(t,n),t=r.previousSibling,o>n){o-=n;const i=ed(r,o).previousSibling;t=r=i,o=i.data.length,n=0}else o=0}else if(Ie(t)&&n>0&&n<t.data.length&&(t=ed(t,n),n=0),Ie(r)&&o>0&&o<r.data.length){const i=ed(r,o).previousSibling;r=i,o=i.data.length}return{startContainer:t,startOffset:n,endContainer:r,endOffset:o}},Xa=e=>({walk:(t,n)=>Dl(e,t,n),split:td,expand:(t,n={type:"word"})=>{if("word"===n.type){const r=$a(e,t,[{inline:"span"}]),o=e.createRng();return o.setStart(r.startContainer,r.startOffset),o.setEnd(r.endContainer,r.endOffset),o}return t},normalize:t=>Zc(e,t).fold(Ot,n=>(t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0))});Xa.compareRanges=Af,Xa.getCaretRangeFromPoint=nb,Xa.getSelectedNode=Dc,Xa.getNode=la;const Fk=((e,t)=>{const n=o=>{const i=(a=>{const s=a.dom;return Uo(a)?s.getBoundingClientRect().height:s.offsetHeight})(o);if(i<=0||null===i){const a=ro(o,e);return parseFloat(a)||0}return i},r=(o,i)=>yn(i,(a,s)=>{const l=ro(o,s),c=void 0===l?0:parseInt(l,10);return isNaN(c)?a:a+c},0);return{set:(o,i)=>{if(!b(i)&&!i.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+i);const a=o.dom;li(a)&&(a.style[e]=i+"px")},get:n,getOuter:n,aggregate:r,max:(o,i,a)=>{const s=r(o,a);return i>s?i-s:0}}})("height"),ab=()=>I(document),sb=(e,t)=>e.view(t).fold(Fe([]),n=>{const r=e.owner(n),o=sb(e,r);return[n].concat(o)});var Uk=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?T.none():T.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(I)},owner:e=>hr(e)});const Rf=e=>"textarea"===zt(e),lb=(e,t)=>{const n=(o=>{const i=o.dom.ownerDocument,a=i.body,s=i.defaultView,l=i.documentElement;if(a===o.dom)return ar(a.offsetLeft,a.offsetTop);const c=tn(null==s?void 0:s.pageYOffset,l.scrollTop),u=tn(null==s?void 0:s.pageXOffset,l.scrollLeft),f=tn(l.clientTop,a.clientTop),g=tn(l.clientLeft,a.clientLeft);return Wo(o).translate(u-g,c-f)})(e),r=Fk.get(e);return{element:e,bottom:n.top+r,height:r,pos:n,cleanup:t}},cb=(e,t,n,r)=>{Wk(e,(o,i)=>Hk(e,t,n,r),n)},db=(e,t,n,r,o)=>{const i={elm:r.element.dom,alignToTop:o};e.dispatch("ScrollIntoView",i).isDefaultPrevented()||(n(t,Br(t).top,r,o),e.dispatch("AfterScrollIntoView",i))},Hk=(e,t,n,r)=>{I(e.getBody());const i=I(e.getDoc()),a=((s,l)=>{const c=((f,g)=>{const v=cn(f);if(0===v.length||Rf(f))return{element:f,offset:g};if(g<v.length&&!Rf(v[g]))return{element:v[g],offset:0};{const m=v[v.length-1];return Rf(m)?{element:f,offset:g}:"img"===zt(m)?{element:m,offset:1}:rr(m)?{element:m,offset:bc(m).length}:{element:m,offset:cn(m).length}}})(s,l),u=Oe('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return De(c.element,u),lb(u,()=>st(u))})(I(n.startContainer),n.startOffset);db(e,i,t,a,r),a.cleanup()},ub=(e,t,n,r)=>{const o=I(e.getDoc());db(e,o,n,lb(I(t),We),r)},Wk=(e,t,n)=>{const r=n.startContainer,o=n.startOffset,i=n.endContainer,a=n.endOffset;t(I(r),I(i));const s=e.dom.createRng();s.setStart(r,o),s.setEnd(i,a),e.selection.setRng(n)},Pf=(e,t)=>e.element.dom.scrollIntoView({block:t?"start":"end"}),fb=(e,t,n,r)=>{const o=t+e,i=n.pos.top,a=n.bottom,s=a-i>=t;i<e?Pf(n,!1!==r):i>o?Pf(n,s?!1!==r:!0===r):a>o&&!s&&Pf(n,!0===r)},pb=(e,t,n,r)=>{const o=Bt(e).dom.innerHeight;fb(t,o,n,r)},gb=(e,t,n,r)=>{const o=Bt(e).dom.innerHeight;fb(t,o,n,r);const i=(s=>{const l=ab(),c=Br(l),u=((v,m)=>{const y=m.owner(v);return sb(m,y)})(s,Uk),f=Wo(s),g=To(u,(v,m)=>{const y=Wo(m);return{left:v.left+y.left,top:v.top+y.top}},{left:0,top:0});return ar(g.left+f.left+c.left,g.top+f.top+c.top)})(n.element),a=il(window);i.top<a.y?Pa(n.element,!1!==r):i.top>a.bottom&&Pa(n.element,!0===r)},qk=(e,t,n)=>cb(e,pb,t,n),zk=(e,t,n)=>ub(e,t,pb,n),Vk=(e,t,n)=>cb(e,gb,t,n),Gk=(e,t,n)=>ub(e,t,gb,n),Ll=(e,t,n)=>{(e.inline?qk:Vk)(e,t,n)},mb=e=>e.dom.focus(),hb=e=>{const t=en(e).dom;return e.dom===t.activeElement},Of=(e=ab())=>T.from(e.dom.activeElement).map(I),vb=(e,t)=>{const n=rr(t)?bc(t).length:cn(t).length+1;return e>n?n:e<0?0:e},Kk=e=>Ls.range(e.start,vb(e.soffset,e.start),e.finish,vb(e.foffset,e.finish)),bb=(e,t)=>!mc(t.dom)&&(Yn(e,t)||Rt(e,t)),yb=e=>t=>bb(e,t.start)&&bb(e,t.finish),$k=e=>Ls.range(I(e.startContainer),e.startOffset,I(e.endContainer),e.endOffset),Yk=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),T.some(t)}catch(n){return T.none()}},Df=e=>{const t=e.inline||J.browser.isFirefox()?(n=I(e.getBody()),(r=>{const o=r.getSelection();return(o&&0!==o.rangeCount?T.from(o.getRangeAt(0)):T.none()).map($k)})(Bt(n).dom).filter(yb(n))):T.none();var n;e.bookmark=t.isSome()?t:e.bookmark},Mf=e=>(e.bookmark?e.bookmark:T.none()).bind(t=>{return n=I(e.getBody()),T.from(t).filter(yb(n)).map(Kk);var n}).bind(Yk),Cb={isEditorUIElement:e=>{const t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},co={setEditorTimeout:(e,t,n)=>{return b(o=n)||(o=0),setTimeout(()=>{e.removed||t()},o);var o},setEditorInterval:(e,t,n)=>{const r=(b(i=n)||(i=0),setInterval(()=>{e.removed?clearInterval(r):t()},i));var i;return r}};let Bs;const If=Kt.DOM,Lf=e=>{const t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},nd=(e,t)=>{const n=Ex(e);return null!==If.getParent(t,o=>{return $e(i=o)&&Cb.isEditorUIElement(i)||!!n&&e.dom.is(o,n);var i})},Bf=e=>{try{const t=en(I(e.getElement()));return Of(t).fold(()=>document.body,n=>n.dom)}catch(t){return document.body}},Xk=(e,t)=>{const n=t.editor;(o=>{const i=Oc(()=>{Df(o)},0);o.on("init",()=>{var a,c;o.inline&&((a,s)=>{const l=()=>{s.throttle()};Kt.DOM.bind(document,"mouseup",l),a.on("remove",()=>{Kt.DOM.unbind(document,"mouseup",l)})})(o,i),c=i,(a=o).on("mouseup touchend",u=>{c.throttle()}),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>"nodechange"===c.type&&c.selectionChange)(l)||Df(a)})}),o.on("remove",()=>{i.cancel()})})(n);const r=(o,i)=>{ok(o)&&!0!==o.inline&&i(I(o.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const o=e.focusedEditor;Lf(Bf(n))&&r(n,M),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{co.setEditorTimeout(n,()=>{const o=e.focusedEditor;Lf(Bf(n))&&o===n||r(n,G),nd(n,Bf(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Bs||(Bs=o=>{const i=e.activeEditor;i&&to(o).each(a=>{a.ownerDocument===document&&(a===document.body||nd(i,a)||e.focusedEditor!==i||(i.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))})},If.bind(document,"focusin",Bs))},Qk=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Bs&&(If.unbind(document,"focusin",Bs),Bs=null)},Sb=(e,t)=>{var n,r,o;(n=I(e.getBody()),r=t,(o=r,o.collapsed?T.from(la(o.startContainer,o.startOffset)).map(I):T.none()).bind(o=>n1(o)?T.some(o):Yn(n,o)?T.none():T.some(n))).bind(n=>yr(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},jf=e=>{if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},Qa=e=>{return e.inline?(t=>{const n=t.getBody();return n&&(r=I(n),hb(r)||(o=r,Of(en(o)).filter(i=>o.dom.contains(i.dom))).isSome());var r,o})(e):z((t=e).iframeElement)&&hb(I(t.iframeElement));var t},Ff=e=>e.editorManager.setActive(e),_b=(e,t,n,r,o)=>{const a=n?t.startOffset:t.endOffset;return T.from(n?t.startContainer:t.endContainer).map(I).map(s=>r&&t.collapsed?s:Zn(s,o(s,a)).getOr(s)).bind(s=>Dn(s)?T.some(s):Vt(s).filter(Dn)).map(s=>s.dom).getOr(e)},Eb=(e,t,n=!1)=>_b(e,t,!0,n,(r,o)=>Math.min(er(r),o)),wb=(e,t,n=!1)=>_b(e,t,!1,n,(r,o)=>o>0?o-1:o),xb=(e,t)=>{const n=e;for(;e&&Ie(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Uf=(e,t)=>wt(t,n=>{const r=e.dispatch("GetSelectionRange",{range:n});return r.range!==n?r.range:n}),Jk=["img","br"],kb=e=>{return bm(e).filter(n=>0!==n.trim().length||n.indexOf(Bn)>-1).isSome()||Pt(Jk,zt(e))||ii(n=e)&&"false"===mr(n,"contenteditable");var n},Tb="[data-mce-autocompleter]",Ab=e=>si(e,Tb),eT={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},rd=(e,t,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[r])return e[r];if(e!==t){let i=e[o];if(i)return i;for(let a=e.parent;a&&a!==t;a=a.parent)if(i=a[o],i)return i}},tT=e=>{var t;const n=null!==(t=e.value)&&void 0!==t?t:"";if(!Ia(n))return!1;const r=e.parent;return!r||"span"===r.name&&!r.attr("style")||!/^[ ]+$/.test(n)},Nb=e=>{const t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Rr{static create(t,n){const r=new Rr(t,eT[t]||1);return n&&qt(n,(o,i)=>{r.attr(i,o)}),r}constructor(t,n){this.name=t,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const r=this;if(!D(t))return z(t)&&qt(t,(i,a)=>{r.attr(a,i)}),r;const o=r.attributes;if(o){if(void 0!==n){if(null===n){if(t in o.map){delete o.map[t];let i=o.length;for(;i--;)if(o[i].name===t)return o.splice(i,1),r}return r}if(t in o.map){let i=o.length;for(;i--;)if(o[i].name===t){o[i].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,r}return o.map[t]}}clone(){const t=this,n=new Rr(t.name,t.type),r=t.attributes;if(r){const o=[];o.map={};for(let i=0,a=r.length;i<a;i++){const s=r[i];"id"!==s.name&&(o[o.length]={name:s.name,value:s.value},o.map[s.name]=s.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const r=n.next;t.insert(n,t,!0),n=r}t.remove()}remove(){const t=this,n=t.parent,r=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=r,r&&(r.prev=null)):o&&(o.next=r),n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):r&&(r.prev=o),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const r=n.lastChild;return r?(r.next=t,t.prev=r,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,r){t.parent&&t.remove();const o=n.parent||this;return r?(n===o.firstChild?o.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,r=[];for(let o=n.firstChild;o;o=rd(o,n))o.name===t&&r.push(o);return r}children(){const t=[];for(let n=this.firstChild;n;n=n.next)t.push(n);return t}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=rd(o,t))n.push(o);let r=n.length;for(;r--;){const o=n[r];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},r){var o;const i=this;let a=i.firstChild;if(Nb(i))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(t[a.name]||Nb(a))return!1}if(8===a.type||3===a.type&&!tT(a)||3===a.type&&a.parent&&n[a.parent.name]&&Ia(null!==(o=a.value)&&void 0!==o?o:"")||r&&r(a))return!1}while(a=rd(a,i));return!0}walk(t){return rd(this,null,t)}}const Rb=(e,t,n=0)=>{const r=e.toLowerCase();if(-1!==r.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(r.substr(n))){const o=r.indexOf("[endif]",n);return r.indexOf(">",o)}if(t){const o=r.indexOf(">",n);return-1!==o?o:r.length}{const o=/--!?>/g;o.lastIndex=n;const i=o.exec(e);return i?i.index+i[0].length:r.length}},nT=(e,t,n)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,i=e.getVoidElements();let a=1,s=n;for(;0!==a;)for(r.lastIndex=s;;){const l=r.exec(t);if(null===l)return s;if("!"===l[1]){s=Sn(l[2],"--")?Rb(t,!1,l.index+3):Rb(t,!0,l.index+1);break}{o.lastIndex=r.lastIndex;const c=o.exec(t);if(le(c)||c.index!==r.lastIndex)continue;"/"===l[1]?a-=1:yt(i,l[2])||(a+=1),s=r.lastIndex+c[0].length;break}}return s},Pb=(e,t)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let o=((s,l)=>{const c=new RegExp(["\\s?("+s.join("|")+')="[^"]+"'].join("|"),"gi");return l.replace(c,"")})(e.getTempAttrs(),t);const i=r.getVoidElements();let a;for(;a=n.exec(o);){const s=n.lastIndex,l=a[0].length;let c;c=i[a[1]]?s:nT(r,o,s),o=o.substring(0,s-l)+o.substring(c),n.lastIndex=s-l}return Li(o)},rT=Pb,Ob=e=>{const t=sr(e,"[data-mce-bogus]");Ae(t,n=>{"all"===mr(n,"data-mce-bogus")?st(n):Ma(n)?(De(n,Be("\ufeff")),st(n)):Dt(n)})},Db=e=>{const t=sr(e,"input");Ae(t,n=>{Mn(n,"name")})},Mb=xe.makeMap,Ib=e=>{const t=[],n=(e=e||{}).indent,r=Mb(e.indent_before||""),o=Mb(e.indent_after||""),i=ia.getEncodeFunc(e.entity_encoding||"raw",e.entities),a="xhtml"!==e.element_format;return{start:(s,l,c)=>{if(n&&r[s]&&t.length>0){const u=t[t.length-1];u.length>0&&"\n"!==u&&t.push("\n")}if(t.push("<",s),l)for(let u=0,f=l.length;u<f;u++){const g=l[u];t.push(" ",g.name,'="',i(g.value,!0),'"')}if(t[t.length]=!c||a?">":" />",c&&n&&o[s]&&t.length>0){const u=t[t.length-1];u.length>0&&"\n"!==u&&t.push("\n")}},end:s=>{let l;t.push("</",s,">"),n&&o[s]&&t.length>0&&(l=t[t.length-1],l.length>0&&"\n"!==l&&t.push("\n"))},text:(s,l)=>{s.length>0&&(t[t.length]=l?s:i(s))},cdata:s=>{t.push("<![CDATA[",s,"]]>")},comment:s=>{t.push("\x3c!--",s,"--\x3e")},pi:(s,l)=>{l?t.push("<?",s," ",i(l),"?>"):t.push("<?",s,"?>"),n&&t.push("\n")},doctype:s=>{t.push("<!DOCTYPE",s,">",n?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},fa=(e={},t=aa())=>{const n=Ib(e);return e.validate=!("validate"in e)||e.validate,{serialize:r=>{const o=e.validate,i={3:s=>{var l;n.text(null!==(l=s.value)&&void 0!==l?l:"",s.raw)},8:s=>{var l;n.comment(null!==(l=s.value)&&void 0!==l?l:"")},7:s=>{n.pi(s.name,s.value)},10:s=>{var l;n.doctype(null!==(l=s.value)&&void 0!==l?l:"")},4:s=>{var l;n.cdata(null!==(l=s.value)&&void 0!==l?l:"")},11:s=>{let l=s;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=s=>{var l;const c=i[s.type];if(c)c(s);else{const u=s.name,f=u in t.getVoidElements();let g=s.attributes;if(o&&g&&g.length>1){const v=[];v.map={};const m=t.getElementRule(s.name);if(m){for(let y=0,h=m.attributesOrder.length;y<h;y++){const S=m.attributesOrder[y];if(S in g.map){const x=g.map[S];v.map[S]=x,v.push({name:S,value:x})}}for(let y=0,h=g.length;y<h;y++){const S=g[y].name;if(!(S in v.map)){const x=g.map[S];v.map[S]=x,v.push({name:S,value:x})}}g=v}}if(n.start(u,g,f),!f){let v=s.firstChild;if(v){"pre"!==u&&"textarea"!==u||3!==v.type||"\n"!==(null===(l=v.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(v)}while(v=v.next)}n.end(u)}}};return 1!==r.type||e.inner?3===r.type?i[3](r):i[11](r):a(r),n.getContent()}}},Lb=new Set;Ae(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{Lb.add(e)});const Bb=["font","text-decoration","text-emphasis"],Hf=(e,t)=>on(e.parseStyle(e.getAttrib(t,"style"))),iT=(e,t,n)=>{const r=Hf(e,t),o=Hf(e,n),i=a=>{var s,l;const c=null!==(s=e.getStyle(t,a))&&void 0!==s?s:"",u=null!==(l=e.getStyle(n,a))&&void 0!==l?l:"";return nr(c)&&nr(u)&&c!==u};return Yt(r,a=>{const s=l=>Yt(l,c=>c===a);if(!s(o)&&s(Bb)){const l=gt(o,c=>Yt(Bb,u=>Sn(c,u)));return Yt(l,i)}return i(a)})},jb=(e,t,n)=>T.from(n.container()).filter(Ie).exists(r=>{const o=e?0:-1;return t(r.data.charAt(n.offset()+o))}),Wf=ye(jb,!0,Os),qf=ye(jb,!1,Os),aT=e=>{const t=e.container();return Ie(t)&&(0===t.data.length||_c(t.data)&&Ml.isBookmarkNode(t.parentNode))},pa=(e,t)=>n=>nf(e?0:-1,n).filter(t).isSome(),Fb=e=>hm(e)&&"block"===ro(I(e),"display"),Ub=e=>{return Zt(e)&&!($e(t=e)&&"all"===t.getAttribute("data-mce-bogus"));var t},sT=pa(!0,Fb),lT=pa(!1,Fb),Bl=pa(!0,ci),jl=pa(!1,ci),Hb=pa(!0,Ii),Wb=pa(!1,Ii),ga=pa(!0,Ub),ma=pa(!1,Ub),qb=(e,t)=>{return o=Ot,Yn(r=t,n=e)?bs(n,i=>o(i)||Rt(i,r)).slice(0,-1):[];var n,r,o},Fi=(e,t)=>[e].concat(qb(e,t)),zf=(e,t,n)=>gv(e,t,n,aT),zb=(e,t)=>rn(Fi(I(t.container()),e),oo),Vb=(e,t,n)=>zf(e,t.dom,n).forall(r=>zb(t,n).fold(()=>!ui(r,n,t.dom),o=>!ui(r,n,t.dom)&&Yn(o,I(r.container())))),Gb=(e,t,n)=>zb(t,n).fold(()=>zf(e,t.dom,n).forall(r=>!ui(r,n,t.dom)),r=>zf(e,r.dom,n).isNone()),Vf=ye(Gb,!1),Kb=ye(Gb,!0),cT=ye(Vb,!1),dT=ye(Vb,!0),uT=e=>Uc(e).exists(Ma),od=(e,t,n)=>{const r=gt(Fi(I(n.container()),t),oo),o=xn(r).getOr(t);return ao(e,o.dom,n).filter(uT)},Gf=(e,t)=>Uc(t).exists(Ma)||od(!0,e,t).isSome(),Kf=(e,t)=>{return(n=t,T.from(n.getNode(!0)).map(I)).exists(Ma)||od(!1,e,t).isSome();var n},fT=ye(od,!1),pT=ye(od,!0),$b=e=>he.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Yb=(e,t)=>{const n=gt(Fi(I(t.container()),e),oo);return xn(n).getOr(e)},Xb=(e,t)=>$b(t)?qf(t):qf(t)||Nr(Yb(e,t).dom,t).exists(qf),Qb=(e,t)=>$b(t)?Wf(t):Wf(t)||br(Yb(e,t).dom,t).exists(Wf),$f=e=>Uc(e).bind(t=>wr(t,Dn)).exists(t=>{return n=ro(t,"white-space"),Pt(["pre","pre-wrap"],n);var n}),Jb=(e,t)=>n=>{return r=new Pn(n,e)[t](),z(r)&&Zt(r)&&tv(r);var r},Zb=(e,t)=>{return!$f(t)&&(Nr((n=e).dom,r=t).isNone()||br(n.dom,r).isNone()||Vf(n,r)||Kb(n,r)||Kf(n,r)||Gf(n,r)||Xb(e,t)||Qb(e,t));var n,r},Fl=(e,t)=>!$f(t)&&(Vf(e,t)||cT(e,t)||Kf(e,t)||Xb(e,t)||((n,r)=>{const o=Nr(n.dom,r).getOr(r),i=Jb(n.dom,"prev");return r.isAtStart()&&(i(r.container())||i(o.container()))})(e,t)),Ul=(e,t)=>!$f(t)&&(Kb(e,t)||dT(e,t)||Gf(e,t)||Qb(e,t)||((n,r)=>{const o=br(n.dom,r).getOr(r),i=Jb(n.dom,"next");return r.isAtEnd()&&(i(r.container())||i(o.container()))})(e,t)),Yf=(e,t)=>Fl(e,t)||Ul(e,(n=>{const r=n.container(),o=n.offset();return Ie(r)&&o<r.data.length?he(r,o+1):n})(t)),ey=(e,t)=>zc(e.charAt(t)),ty=(e,t)=>Os(e.charAt(t)),ny=(e,t,n)=>{const r=t.data,o=he(t,0);return n||!ey(r,0)||Yf(e,o)?!!(n&&ty(r,0)&&Fl(e,o))&&(t.data=Bn+r.slice(1),!0):(t.data=" "+r.slice(1),!0)},ry=(e,t,n)=>{const r=t.data,o=he(t,r.length-1);return n||!ey(r,r.length-1)||Yf(e,o)?!!(n&&ty(r,r.length-1)&&Ul(e,o))&&(t.data=r.slice(0,-1)+Bn,!0):(t.data=r.slice(0,-1)+" ",!0)},oy=(e,t,n)=>{if(0===n)return;const r=I(e),o=no(r,oo).getOr(r),i=e.data.slice(t,t+n),a=t+n>=e.data.length&&Ul(o,he(e,e.data.length)),s=0===t&&Fl(o,he(e,0));e.replaceData(t,n,km(i,4,s,a))},id=(e,t)=>{const n=e.data.slice(t),r=n.length-fs(n).length;oy(e,t,r)},Xf=(e,t)=>{const n=e.data.slice(0,t),r=n.length-ps(n).length;oy(e,t-r,r)},Qf=(e,t,n,r=!0)=>{const o=ps(e.data).length,i=r?e:t,a=r?t:e;return r?i.appendData(a.data):i.insertData(0,a.data),st(I(a)),n&&id(i,o),i},mT=(e,t)=>((n,r)=>{const o=n.container(),i=n.offset();return!he.isTextPosition(n)&&o===r.parentNode&&i>he.before(r).offset()})(t,e)?he(t.container(),t.offset()-1):t,iy=e=>{return Eo(e.previousSibling)?T.some(Ie(t=e.previousSibling)?he(t,t.data.length):he.after(t)):e.previousSibling?wo(e.previousSibling):T.none();var t},ay=e=>{return Eo(e.nextSibling)?T.some(Ie(t=e.nextSibling)?he(t,0):he.before(t)):e.nextSibling?yr(e.nextSibling):T.none();var t},sy=(e,t,n)=>{n.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),t)})},vT=(e,t)=>t&&yt(e.schema.getBlockElements(),zt(t)),bT=e=>{if(En(e)){const t=Oe('<br data-mce-bogus="1">');return kt(e),Ze(e,t),T.some(he.before(t.dom))}return T.none()},Ja=(e,t,n,r=!0)=>{const o=((e,t,n)=>{return(r=e,o=t,i=n,r?(a=o,ay(s=i).orThunk(()=>iy(s)).orThunk(()=>{return br(l=a,he.after(c=s)).orThunk(()=>Nr(l,he.before(c)));var l,c})):((a,s)=>iy(s).orThunk(()=>ay(s)).orThunk(()=>{return l=a,T.from((c=s).previousSibling?c.previousSibling:c.parentNode).bind(u=>Nr(l,he.before(u))).orThunk(()=>br(l,he.after(c)));var l,c}))(o,i)).map(ye(mT,n));var r,o,i,a,s})(t,e.getBody(),n.dom),i=no(n,ye(vT,e),(a=e.getBody(),l=>l.dom===a));var a;const s=((l,c,u)=>{const f=or(l).filter(rr),g=jo(l).filter(rr);return st(l),(v=f,m=g,y=c,h=(S,x,k)=>{const N=S.dom,P=x.dom,L=N.data.length;return Qf(N,P,u),k.container()===P?he(N,L):k},v.isSome()&&m.isSome()&&y.isSome()?T.some(h(v.getOrDie(),m.getOrDie(),y.getOrDie())):T.none()).orThunk(()=>(u&&(f.each(S=>Xf(S.dom,S.dom.length)),g.each(S=>id(S.dom,0))),c));var v,m,y,h})(n,o,(c=n,yt(e.schema.getTextInlineElements(),zt(c))));var c;e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):i.bind(bT).fold(()=>{r&&sy(e,t,s)},l=>{r&&sy(e,t,T.some(l))})},yT=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Za=(e,t)=>Xt(I(t),px(e))&&!La(e.schema,t)&&e.dom.isEditable(t),ly=e=>{var t,n;return"rtl"===Kt.DOM.getStyle(e,"direction",!0)||(n=null!==(t=e.textContent)&&void 0!==t?t:"",yT.test(n))},ha=(e,t,n)=>{const r=(o=e,i=t,gt(Kt.DOM.getParents(n.container(),"*",i),o));var o,i;return T.from(r[r.length-1])},uo=(e,t)=>{const n=t.container(),r=t.offset();return e?oa(n)?Ie(n.nextSibling)?he(n.nextSibling,0):he.after(n):yu(t)?he(n,r+1):t:oa(n)?Ie(n.previousSibling)?he(n.previousSibling,n.previousSibling.data.length):he.before(n):Cu(t)?he(n,r-1):t},cy=ye(uo,!0),dy=ye(uo,!1),uy=(e,t)=>{const n=r=>r.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},Jf=e=>uy(e,"Delete"),CT=e=>ym(e)||ll(e),ad=(e,t)=>{return Yn(e,t)?wr(t,CT,(n=e,r=>Ht(Vt(r),n,Rt))):T.none();var n},Zf=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},fy=(e,t,n)=>Gt(yr(n),wo(n),(r,o)=>{const i=uo(!0,r),a=uo(!1,o),s=uo(!1,t);return e?br(n,s).exists(l=>l.isEqual(a)&&t.isEqual(i)):Nr(n,s).exists(l=>l.isEqual(i)&&t.isEqual(a))}).getOr(!0),py=e=>{var t;return(8===Di(t=e)||"#comment"===zt(t)?or(e):_n(e)).bind(py).orThunk(()=>T.some(e))},gy=(e,t,n,r=!0)=>{var o;t.deleteContents();const i=py(n).getOr(n),a=I(null!==(o=e.dom.getParent(i.dom,e.dom.isBlock))&&void 0!==o?o:n.dom);if(a.dom===e.getBody()?Zf(e,r):En(a)&&(ra(a),r&&e.selection.setCursorLocation(a.dom,0)),!Rt(n,a)){const l=Ht(Vt(a),n)?[]:Vt(s=a).map(cn).map(c=>gt(c,u=>!Rt(s,u))).getOr([]);Ae(l.concat(cn(n)),c=>{Rt(c,a)||Yn(c,a)||!En(c)||st(c)})}var s},ep=e=>sr(e,"td,th"),tp=(e,t)=>({start:e,end:t}),Hl=di([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),sd=(e,t)=>_o(I(e),"td,th",t),my=e=>!Rt(e.start,e.end),hy=(e,t)=>Pl(e.start,t).bind(n=>Pl(e.end,t).bind(r=>gr(Rt(n,r),n))),np=e=>t=>hy(t,e).map(n=>({rng:t,table:n,cells:ep(n)})),vy=(e,t,n,r)=>{if(n.collapsed||!e.forall(my))return T.none();if(t.isSameTable){const o=e.bind(np(r));return T.some({start:o,end:o})}{const o=sd(n.startContainer,r),i=sd(n.endContainer,r),a=o.bind((l=r,c=>Pl(c,l).bind(u=>mo(ep(u)).map(f=>tp(c,f))))).bind(np(r)),s=i.bind((l=>c=>Pl(c,l).bind(u=>xn(ep(u)).map(f=>tp(f,c))))(r)).bind(np(r));return T.some({start:a,end:s})}var l},by=(e,t)=>Zo(e,n=>Rt(n,t)),rp=e=>Gt(by(e.cells,e.rng.start),by(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),yy=(e,t)=>{const{startTable:n,endTable:r}=t,o=e.cloneRange();return n.each(i=>o.setStartAfter(i.dom)),r.each(i=>o.setEndBefore(i.dom)),o},Cy=e=>Ae(e,t=>{Mn(t,"contenteditable"),ra(t)}),op=(e,t,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),ip(e,o,t,!1).each(i=>i())},Sy=e=>{const t=Ds(e),n=I(e.selection.getNode());vc(n.dom)&&En(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&Yt(t,r=>Rt(r,n))&&Tn(n,"data-mce-selected","1")},_y=(e,t,n)=>T.some(()=>{const r=e.selection.getRng(),o=n.bind(({rng:i,isStartInTable:a})=>{const s=T.from((c=e).dom.getParent(a?i.endContainer:i.startContainer,c.dom.isBlock)).map(I);var c;i.deleteContents(),((c,u,f)=>{f.each(g=>{u?st(g):(ra(g),c.selection.setCursorLocation(g.dom,0))})})(e,a,s.filter(En));const l=a?t[0]:t[t.length-1];return op(e,l,r,a),En(l)?T.none():T.some(a?t.slice(1):t.slice(0,-1))}).getOr(t);Cy(o),Sy(e)}),_T=(e,t,n,r)=>T.some(()=>{const o=e.selection.getRng(),i=t[0],a=n[n.length-1];op(e,i,o,!0),op(e,a,o,!1);const s=En(i)?t:t.slice(1),l=En(a)?n:n.slice(0,-1);Cy(s.concat(l)),r.deleteContents(),Sy(e)}),ip=(e,t,n,r=!0)=>T.some(()=>{gy(e,t,n,r)}),ET=(e,t)=>T.some(()=>Ja(e,!1,t)),Ey=(e,t)=>rn(Fi(t,e),cl),ap=(e,t)=>rn(Fi(t,e),nl("caption")),ld=(e,t)=>T.some(()=>{ra(t),e.selection.setCursorLocation(t.dom,0)}),wy=(e,t)=>e?Hb(t):Wb(t),sp=(e,t)=>{const n=I(e.selection.getStart(!0)),r=Ds(e);return e.selection.isCollapsed()&&0===r.length?((e,t,n)=>{const r=I(e.getBody());return ap(r,n).fold(()=>((o,i,a,s)=>{const l=he.fromRangeStart(o.selection.getRng());return Ey(a,s).bind(c=>{return En(c)?ld(o,c):(f=a,v=c,m=l,Rl(i,o.getBody(),m).bind(y=>Ey(f,I(y.getNode())).bind(h=>Rt(h,v)?T.none():T.some(We))));var f,v,m})})(e,t,r,n).orThunk(()=>gr(((o,i)=>{const a=he.fromRangeStart(o.selection.getRng());return wy(i,a)||ao(i,o.getBody(),a).exists(s=>wy(i,s))})(e,t),We)),o=>((i,a,s,l)=>{const c=he.fromRangeStart(i.selection.getRng());return En(l)?ld(i,l):(f=s,v=l,m=c,Rl(g=a,(u=i).getBody(),m).fold(()=>T.some(We),y=>{return S=g,x=m,k=y,yr((h=v).dom).bind(N=>wo(h.dom).map(P=>S?x.isEqual(N)&&k.isEqual(P):x.isEqual(P)&&k.isEqual(N))).getOr(!0)?((h,S)=>ld(h,S))(u,v):((h,S,x)=>ap(h,I(x.getNode())).fold(()=>T.some(We),k=>gr(!Rt(k,S),We)))(f,v,y);var h,S,x,k}));var u,f,g,v,m})(e,t,r,o))})(e,t,n):((o,i,a)=>{const s=I(o.getBody()),l=o.selection.getRng();return 0!==a.length?_y(o,a,T.none()):(c=o,f=l,ap(u=s,i).fold(()=>{return v=c,((e,t)=>{const n=(i=e,a=>Rt(i,a)),r=((i,a)=>{const s=sd(i.startContainer,a),l=sd(i.endContainer,a);return Gt(s,l,tp)})(t,n),o=((i,a)=>{const s=v=>Pl(I(v),a),l=s(i.startContainer),c=s(i.endContainer),u=l.isSome(),f=c.isSome(),g=Gt(l,c,Rt).getOr(!1);return{startTable:l,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:g,isMultiTable:!g&&u&&f}})(t,n);var i;return((i,a,s)=>i.exists(l=>{return u=s,!my(c=l)&&hy(c,u).exists(f=>{const g=f.dom.rows;return 1===g.length&&1===g[0].cells.length})&&gf(l.start,a);var c,u}))(r,t,n)?r.map(i=>Hl.singleCellTable(t,i.start)):o.isMultiTable?((i,a,s,l)=>vy(i,a,s,l).bind(({start:c,end:u})=>{const f=c.bind(rp).getOr([]),g=u.bind(rp).getOr([]);if(f.length>0&&g.length>0){const v=yy(s,a);return T.some(Hl.multiTable(f,g,v))}return T.none()}))(r,o,t,n):((i,a,s,l)=>vy(i,a,s,l).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=a,f=rp(c).getOr([]);if(u&&c.cells.length===f.length)return T.some(Hl.fullTable(c.table));if(f.length>0){if(u)return T.some(Hl.partialTable(f,T.none()));{const g=yy(s,a);return T.some(Hl.partialTable(f,T.some(Wt(rt({},a),{rng:g}))))}}return T.none()}))(r,o,t,n)})(u,f).bind(h=>h.fold(ye(ip,v),ye(ET,v),ye(_y,v),ye(_T,v)));var v},v=>ld(c,v)));var c,u,f})(e,n,r)},es=(e,t)=>{let n=t;for(;n&&n!==e;){if(zo(n)||Zt(n))return n;n=n.parentNode}return null},xT=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],kT=xe.each,lp=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),r=o=>Yt(xT,i=>Sn(o,i))||n.has(o);return{compare:(o,i)=>{if(o.nodeName!==i.nodeName||o.nodeType!==i.nodeType)return!1;const a=l=>{const c={};return kT(t.getAttribs(l),u=>{const f=u.nodeName.toLowerCase();"style"===f||r(f)||(c[f]=t.getAttrib(l,f))}),c},s=(l,c)=>{for(const u in l)if(yt(l,u)){const f=c[u];if(Je(f)||l[u]!==f)return!1;delete c[u]}for(const u in c)if(yt(c,u))return!1;return!0};return!($e(o)&&$e(i)&&(!s(a(o),a(i))||!s(t.parseStyle(t.getAttrib(o,"style")),t.parseStyle(t.getAttrib(i,"style"))))||so(o)||so(i))},isAttributeInternal:r}},xy=(e,t,n,r)=>{const o=n.name;for(let i=0,a=e.length;i<a;i++){const s=e[i];if(s.name===o){const l=r.nodes[o];l?l.nodes.push(n):r.nodes[o]={filter:s,nodes:[n]}}}if(n.attributes)for(let i=0,a=t.length;i<a;i++){const s=t[i],l=s.name;if(l in n.attributes.map){const c=r.attributes[l];c?c.nodes.push(n):r.attributes[l]={filter:s,nodes:[n]}}}},ky=(e,t)=>{const n=(r,o)=>{qt(r,i=>{const a=gn(i.nodes);Ae(i.filter.callbacks,s=>{for(let l=a.length-1;l>=0;l--){const c=a[l];(o?void 0!==c.attr(i.filter.name):c.name===i.filter.name)&&!Ve(c.parent)||a.splice(l,1)}a.length>0&&s(a,i.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},Ty=(e,t,n,r={})=>{const o=((i,a,s)=>{const l={nodes:{},attributes:{}};return s.firstChild&&((c,u)=>{let f=c;for(;f=f.walk();)xy(i,a,f,l)})(s),l})(e,t,n);ky(o,r)},cp=(e,t,n,r)=>{if((e.pad_empty_with_br||t.insert)&&n(r)){const o=new Rr("br",1);t.insert&&o.attr("data-mce-bogus","1"),r.empty().append(o)}else r.empty().append(new Rr("#text",3)).value=Bn},Ay=(e,t)=>{const n=null==e?void 0:e.firstChild;return z(n)&&n===e.lastChild&&n.name===t},Wl=(e,t,n,r)=>r.isEmpty(t,n,o=>((i,a)=>{const s=i.getElementRule(a.name);return!0===(null==s?void 0:s.paddEmpty)})(e,o)),TT=e=>{let t;for(let n=e;n;n=n.parent){const r=n.attr("contenteditable");if("false"===r)break;"true"===r&&(t=n)}return T.from(t)},dp=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const o of r)n&&!t.isValidChild(n.name,o.name)&&dp(o,t,n);e.unwrap()}},up=(e,t,n,r=We)=>{const o=t.getTextBlockElements(),i=t.getNonEmptyElements(),a=t.getWhitespaceElements(),s=xe.makeMap("tr,td,th,tbody,thead,tfoot,table"),l=new Set,c=u=>u!==n&&!s[u.name];for(let u=0;u<e.length;u++){const f=e[u];let g,v,m;if(!f.parent||l.has(f))continue;if(o[f.name]&&"li"===f.parent.name){let h=f.next;for(;h&&o[h.name];)h.name="li",l.add(h),f.parent.insert(h,f.parent),h=h.next;f.unwrap();continue}const y=[f];for(g=f.parent;g&&!t.isValidChild(g.name,f.name)&&c(g);g=g.parent)y.push(g);if(g&&y.length>1)if(t.isValidChild(g.name,f.name)){y.reverse(),v=y[0].clone(),r(v);let h=v;for(let S=0;S<y.length-1;S++){t.isValidChild(h.name,y[S].name)&&S>0?(m=y[S].clone(),r(m),h.append(m)):m=h;for(let x=y[S].firstChild;x&&x!==y[S+1];){const k=x.next;m.append(x),x=k}h=m}Wl(t,i,a,v)?g.insert(f,y[0],!0):(g.insert(v,y[0],!0),g.insert(f,v)),g=y[0],(Wl(t,i,a,g)||Ay(g,"br"))&&g.empty().remove()}else dp(f,t);else if(f.parent){if("li"===f.name){let h=f.prev;if(h&&("ul"===h.name||"ol"===h.name)){h.append(f);continue}if(h=f.next,h&&("ul"===h.name||"ol"===h.name)&&h.firstChild){h.insert(f,h.firstChild,!0);continue}const S=new Rr("ul",1);r(S),f.wrap(S);continue}if(t.isValidChild(f.parent.name,"div")&&t.isValidChild("div",f.name)){const h=new Rr("div",1);r(h),f.wrap(h)}else dp(f,t)}}},Ny=(e,t,n=t.parent)=>!(!n||!e.children[t.name]||e.isValidChild(n.name,t.name))||!(!n||"a"!==t.name||!((r,o)=>{let i=r;for(;i;){if("a"===i.name)return!0;i=i.parent}return!1})(n)),fp=e=>e.collapsed?e:(t=>{const n=he.fromRangeStart(t),r=he.fromRangeEnd(t),o=t.commonAncestorContainer;return ao(!1,o,r).map(i=>!ui(n,r,o)&&ui(n,i,o)?((a,s,l,c)=>{const u=document.createRange();return u.setStart(a,s),u.setEnd(l,c),u})(n.container(),n.offset(),i.container(),i.offset()):t).getOr(t)})(e),pp=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},Ry=(e,t)=>{const n=he.after(e),r=pi(t).prev(n);return r?r.toRange():null},PT=["pre"],gp=vc,OT=(e,t,n)=>{var r,o;const i=e.selection,a=e.dom,s=e.parser,l=n.merge,c=fa({validate:!0},e.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,u);let f=i.getRng();const g=f.startContainer,v=e.getBody();var k,N;g===v&&i.isCollapsed()&&a.isBlock(v.firstChild)&&(k=e,z(N=v.firstChild)&&!k.schema.getVoidElements()[N.nodeName])&&a.isEmpty(v.firstChild)&&(f=a.createRng(),f.setStart(v.firstChild,0),f.setEnd(v.firstChild,0),i.setRng(f)),i.isCollapsed()||(k=>{const N=k.dom,P=fp(k.selection.getRng());k.selection.setRng(P);const L=N.getParent(P.startContainer,gp);var U,Z,ve;U=N,Z=P,z(ve=L)&&ve===U.getParent(Z.endContainer,gp)&&gf(I(ve),Z)?ip(k,P,I(L)):P.startContainer===P.endContainer&&P.endOffset-P.startOffset==1&&Ie(P.startContainer.childNodes[P.startOffset])?P.deleteContents():k.getDoc().execCommand("Delete",!1)})(e);const m=i.getNode(),y={context:m.nodeName.toLowerCase(),data:n.data,insert:!0},h=s.parse(t,y);if(!0===n.paste&&((e,t)=>{let n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((o,i)=>{const a=o.getNonEmptyElements();return z(i)&&(i.isEmpty(a)||(l=i,o.getBlockElements()[l.name]&&z((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===Bn)(l.firstChild)));var l,c})(e,r)&&(r=null==r?void 0:r.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)})(e.schema,h)&&((k,N)=>!!pp(k,N))(a,m))return f=((e,t,n,r)=>{const o=((f,g,v)=>{const m=g.serialize(v);return(y=>{var h,S;const x=y.firstChild,k=y.lastChild;return x&&"META"===x.nodeName&&(null===(h=x.parentNode)||void 0===h||h.removeChild(x)),k&&"mce_marker"===k.id&&(null===(S=k.parentNode)||void 0===S||S.removeChild(k)),y})(f.createFragment(m))})(t,e,r),i=pp(t,n.startContainer),a=(e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||z(null==(t=n)?void 0:t.firstChild)&&t.firstChild===t.lastChild&&((r=t.firstChild).data===Bn||dn(r)))?e.slice(0,-1):e;var r,t,n})(gt(null!==(l=null==(s=o.firstChild)?void 0:s.childNodes)&&void 0!==l?l:[],f=>"LI"===f.nodeName));var s,l;const c=t.getRoot(),u=f=>{const g=he.fromRangeStart(n),v=pi(t.getRoot()),m=1===f?v.prev(g):v.next(g),y=null==m?void 0:m.getNode();return!y||pp(t,y)!==i};return i?u(1)?((f,g,v)=>{const m=f.parentNode;return m&&xe.each(g,y=>{m.insertBefore(y,f)}),((y,h)=>{const S=he.before(y),x=pi(h).next(S);return x?x.toRange():null})(f,v)})(i,a,c):u(2)?(f=i,v=c,t.insertAfter((g=a).reverse(),f),Ry(g[0],v)):((f,g,v,m)=>{const y=((S,x)=>{const k=x.cloneRange(),N=x.cloneRange();return k.setStartBefore(S),N.setEndAfter(S),[k.cloneContents(),N.cloneContents()]})(f,m),h=f.parentNode;return h&&(h.insertBefore(y[0],f),xe.each(g,S=>{h.insertBefore(S,f)}),h.insertBefore(y[1],f),h.removeChild(f)),Ry(g[g.length-1],v)})(i,a,c,n):null;var f,g,v})(c,a,i.getRng(),h),f&&i.setRng(f),t;!0===n.paste&&((k,N,P,L)=>{var U;const Z=N.firstChild,ve=N.lastChild,de=Z===("bookmark"===ve.attr("data-mce-type")?ve.prev:ve),H=Pt(PT,Z.name);if(de&&H){const X="false"!==Z.attr("contenteditable"),V=(null===(U=k.getParent(P,k.isBlock))||void 0===U?void 0:U.nodeName.toLowerCase())===Z.name,ae=T.from(es(L,P)).forall(zo);return X&&V&&ae}return!1})(a,h,m,e.getBody())&&(null===(r=h.firstChild)||void 0===r||r.unwrap()),(k=>{let N=k;for(;N=N.walk();)1===N.type&&N.attr("data-mce-fragment","1")})(h);let S=h.lastChild;if(S&&"mce_marker"===S.attr("id")){const k=S;for(S=S.prev;S;S=S.walk(!0))if(3===S.type||!a.isBlock(S.name)){S.parent&&e.schema.isValidChild(S.parent.name,"span")&&S.parent.insert(k,S,"br"===S.name);break}}if(e._selectionOverrides.showBlockCaretContainer(m),y.invalid){e.selection.setContent(u);let k,N=i.getNode();const P=e.getBody();for(sl(N)?N=k=P:k=N;k&&k!==P;)N=k,k=k.parentNode;t=N===P?P.innerHTML:a.getOuterHTML(N);const L=s.parse(t),U=(X=>{for(let V=X;V;V=V.walk())if("mce_marker"===V.attr("id"))return T.some(V);return T.none()})(L),Z=U.bind(TT).getOr(L);U.each(X=>X.replace(h));const ve=h.children(),de=null!==(o=h.parent)&&void 0!==o?o:L;h.unwrap();const H=gt(ve,X=>Ny(e.schema,X,de));up(H,e.schema,Z),Ty(s.getNodeFilters(),s.getAttributeFilters(),L),t=c.serialize(L),N===P?a.setHTML(P,t):a.setOuterHTML(N,t)}else t=c.serialize(h),((k,N,P)=>{var L;if("all"===P.getAttribute("data-mce-bogus"))null===(L=P.parentNode)||void 0===L||L.insertBefore(k.dom.createFragment(N),P);else{const U=P.firstChild,Z=P.lastChild;!U||U===Z&&"BR"===U.nodeName?k.dom.setHTML(P,N):k.selection.setContent(N,{no_events:!0})}})(e,t,m);var x;return((k,N)=>{const P=k.schema.getTextInlineElements(),L=k.dom;if(N){const U=k.getBody(),Z=lp(k);xe.each(L.select("*[data-mce-fragment]"),ve=>{if(z(P[ve.nodeName.toLowerCase()])&&fr(Hf(L,ve),X=>!Lb.has(X)))for(let de=ve.parentElement;z(de)&&de!==U&&!iT(L,ve,de);de=de.parentElement)if(Z.compare(de,ve)){L.remove(ve,!0);break}})}})(e,l),((k,N)=>{var P,L,U;let Z;const ve=k.dom,de=k.selection;if(!N)return;de.scrollIntoView(N);const H=es(k.getBody(),N);if(H&&"false"===ve.getContentEditable(H))return ve.remove(N),void de.select(H);let X=ve.createRng();const V=N.previousSibling;if(Ie(V)){X.setStart(V,null!==(L=null===(P=V.nodeValue)||void 0===P?void 0:P.length)&&void 0!==L?L:0);const Ue=N.nextSibling;Ie(Ue)&&(V.appendData(Ue.data),null===(U=Ue.parentNode)||void 0===U||U.removeChild(Ue))}else X.setStartBefore(N),X.setEndBefore(N);const ae=ve.getParent(N,ve.isBlock);ve.remove(N),ae&&ve.isEmpty(ae)&&(kt(I(ae)),X.setStart(ae,0),X.setEnd(ae,0),gp(ae)||ae.getAttribute("data-mce-fragment")||!(Z=(Ue=>{let Me=he.fromRangeStart(Ue);return Me=pi(k.getBody()).next(Me),null==Me?void 0:Me.toRange()})(X))?ve.add(ae,ve.create("br",{"data-mce-bogus":"1"})):(X=Z,ve.remove(ae))),de.setRng(X)})(e,a.get("mce_marker")),x=e.getBody(),xe.each(x.getElementsByTagName("*"),k=>{k.removeAttribute("data-mce-fragment")}),((k,N)=>{T.from(k.getParent(N,"td,th")).map(I).each(i1)})(a,i.getStart()),(k=>{Ae(gn(k.getBody().querySelectorAll("details")),N=>{const P=gt(gn(N.children),L=>"SUMMARY"===L.nodeName);P.length>1&&Ae(P.slice(1),L=>{const U=I(L);G(U,"mce-accordion-summary"),th(U,"p")})})})(e),((k,N,P)=>{const L=bs(I(P),U=>Rt(U,I(N)));Mr(L,L.length-2).filter(Dn).fold(()=>wu(k,N),U=>wu(k,U.dom))})(e.schema,e.getBody(),i.getStart()),t},cd=e=>e instanceof Rr,mp=(e,t,n)=>{var r;e.dom.setHTML(e.getBody(),t),!0!==n&&Qa(r=e)&&yr(r.getBody()).each(o=>{const i=o.getNode(),a=Ii(i)?yr(i).getOr(o):o;r.selection.setRng(a.toRange())})},Py=e=>me(e)?e:Ot,hp=(e,t,n)=>{const r=t(e),o=Py(n);return r.orThunk(()=>o(e)?T.none():((i,a,s)=>{let l=i.dom;const c=Py(s);for(;l.parentNode;){l=l.parentNode;const u=I(l),f=a(u);if(f.isSome())return f;if(c(u))break}return T.none()})(e,t,o))},vp=Cf,Oy=(e,t,n)=>{const r=e.formatter.get(n);if(r)for(let o=0;o<r.length;o++){const i=r[o];if(lo(i)&&!1===i.inherit&&e.dom.is(t,i.selector))return!0}return!1},bp=(e,t,n,r,o)=>{const i=e.dom.getRoot();if(t===i)return!1;const a=e.dom.getParent(t,s=>!!Oy(e,s,n)||s.parentNode===i||!!mi(e,s,n,r,!0));return!!mi(e,a,n,r,o)},dd=(e,t,n)=>!(!On(n)||!vp(t,n.inline))||!(!gi(n)||!vp(t,n.block))||!!lo(n)&&$e(t)&&e.is(t,n.selector),Dy=(e,t,n,r,o,i)=>{const a=n[r],s="attributes"===r;if(me(n.onmatch))return n.onmatch(t,n,r);if(a)if(zi(a)){for(let l=0;l<a.length;l++)if(s?e.getAttrib(t,a[l]):Kc(e,t,a[l]))return!0}else for(const l in a)if(yt(a,l)){const c=s?e.getAttrib(t,l):Kc(e,t,l),u=ua(a[l],i),f=Ve(c)||ti(c);if(f&&Ve(u))continue;if(o&&f&&!n.exact||(!o||n.exact)&&!vp(c,Sf(u,l)))return!1}return!0},mi=(e,t,n,r,o)=>{const i=e.formatter.get(n),a=e.dom;if(i&&$e(t))for(let s=0;s<i.length;s++){const l=i[s];if(dd(e.dom,t,l)&&Dy(a,t,l,"attributes",o,r)&&Dy(a,t,l,"styles",o,r)){const c=l.classes;if(c)for(let u=0;u<c.length;u++)if(!e.dom.hasClass(t,ua(c[u],r)))return;return l}}},yp=(e,t,n,r,o)=>{if(r)return bp(e,r,t,n,o);if(r=e.selection.getNode(),bp(e,r,t,n,o))return!0;const i=e.selection.getStart();return!(i===r||!bp(e,i,t,n,o))},My=e=>(t=>{const n=[];let r=t;for(;r;){if(Ie(r)&&"\ufeff"!==r.data||r.childNodes.length>1)return[];$e(r)&&n.push(r),r=r.firstChild}return n})(e).length>0,Iy=e=>{if(e){const t=new Pn(e,e);for(let n=t.current();n;n=t.next())if(Ie(n))return n}return null},Cp=e=>{const t=ge("span");return Lo(t,{id:lf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Ze(t,Be("\ufeff")),t},Sp=(e,t,n=!0)=>{const r=e.dom,o=e.selection;if(My(t))Ja(e,!1,I(t),n);else{const i=o.getRng(),a=r.getParent(t,r.isBlock),s=i.startContainer,l=i.startOffset,c=i.endContainer,u=i.endOffset,f=(g=>{const v=Iy(g);return v&&"\ufeff"===v.data.charAt(0)&&v.deleteData(0,1),v})(t);r.remove(t,!0),s===f&&l>0&&i.setStart(f,l-1),c===f&&u>0&&i.setEnd(f,u-1),a&&r.isEmpty(a)&&ra(I(a)),o.setRng(i)}},_p=(e,t,n=!0)=>{const r=e.dom,o=e.selection;if(t)Sp(e,t,n);else if(!(t=Ga(e.getBody(),o.getStart())))for(;t=r.get(lf);)Sp(e,t,n)},Ly=(e,t)=>(e.appendChild(t),t),By=(e,t)=>{var n;const r=To(e,(i,a)=>Ly(i,a.cloneNode(!1)),t),o=null!==(n=r.ownerDocument)&&void 0!==n?n:document;return Ly(r,o.createTextNode("\ufeff"))},jy=e=>{const t=Cp(!1),n=By(e,t.dom);return{caretContainer:t,caretPosition:he(n,0)}},Fy=(e,t)=>{const{caretContainer:n,caretPosition:r}=jy(t);return De(I(e),n),st(I(e)),r},Uy=(e,t)=>{const n=e.schema.getTextInlineElements();return yt(n,zt(t))&&!xo(t.dom)&&!Da(t.dom)},Hy=e=>xo(e.dom)&&My(e.dom),ql={},Wy=qo(["pre"]);((e,t)=>{ql[e]||(ql[e]=[]),ql[e].push(n=>{if(!n.selection.getRng().collapsed){const r=n.selection.getSelectedBlocks(),o=gt(gt(r,Wy),(i=r,a=>{const s=a.previousSibling;return Wy(s)&&Pt(i,s)}));Ae(o,i=>{((a,s)=>{const l=I(s),c=hr(l).dom;st(l),It(I(a),[ge("br",c),ge("br",c),...cn(l)])})(i.previousSibling,i)})}var i})})("pre");const qy=["fontWeight","fontStyle","color","fontSize","fontFamily"],zy=(e,t)=>{const n=e.get(t);return fe(n)?rn(n,r=>{return On(r)&&"span"===r.inline&&ne((o=r).styles)&&Yt(on(o.styles),i=>Pt(qy,i));var o}):T.none()},Vy=(e,t)=>Nr(t,he.fromRangeStart(e)).isNone(),Gy=(e,t)=>!1===br(t,he.fromRangeEnd(e)).exists(n=>!dn(n.getNode())||br(t,n).isSome()),Ky=e=>t=>Zw(t)&&e.isEditable(t),$y=e=>gt(e.getSelectedBlocks(),Ky(e.dom)),Ep=xe.each,wp=e=>$e(e)&&!so(e)&&!xo(e)&&!Da(e),Yy=(e,t)=>{for(let n=e;n;n=n[t]){if(Ie(n)&&nr(n.data))return e;if($e(n)&&!so(n))return n}return e},Xy=(e,t,n)=>{const r=lp(e),o=$e(t)&&Ka(t),i=$e(n)&&Ka(n);if(o&&i){const a=Yy(t,"previousSibling"),s=Yy(n,"nextSibling");if(r.compare(a,s)){for(let l=a.nextSibling;l&&l!==s;){const c=l;l=l.nextSibling,a.appendChild(c)}return e.dom.remove(s),xe.each(xe.grep(s.childNodes),l=>{a.appendChild(l)}),a}}return n},Qy=(e,t,n,r)=>{var o;if(r&&!1!==t.merge_siblings){const i=null!==(o=Xy(e,Av(r),r))&&void 0!==o?o:r;Xy(e,i,Av(i,!0))}},xp=(e,t,n)=>{Ep(e.childNodes,r=>{wp(r)&&(t(r)&&n(r),r.hasChildNodes()&&xp(r,t,n))})},Jy=(e,t)=>n=>!(!n||!Kc(e,n,t)),Zy=(e,t,n)=>r=>{var o,i;e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),o=e,"SPAN"===(i=r).nodeName&&0===o.getAttribs(i).length&&o.remove(i,!0)},ts=di([{keep:[]},{rename:["name"]},{removed:[]}]),IT=/^(src|href|style)$/,kp=xe.each,ud=Cf,e0=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),t0=(e,t,n)=>{let r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if($e(r)){const i=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>i?i:o]}return Ie(r)&&n&&o>=r.data.length&&(r=new Pn(r,e.getBody()).next()||r),Ie(r)&&!n&&0===o&&(r=new Pn(r,e.getBody()).prev()||r),r},n0=(e,t)=>{const n=t?"firstChild":"lastChild",r=e[n];return/^(TR|TH|TD)$/.test(e.nodeName)&&r?"TR"===e.nodeName&&r[n]||r:e},Tp=(e,t,n,r)=>{var o;const i=e.create(n,r);return null===(o=t.parentNode)||void 0===o||o.insertBefore(i,t),i.appendChild(t),i},r0=(e,t,n,r,o)=>{const i=I(t),a=I(e.create(r,o)),s=n?Fo(i):Co(i);return It(a,s),n?(De(i,a),dt(a,i)):(ot(i,a),Ze(a,i)),a.dom},o0=(e,t,n)=>{const r=t.parentNode;let o;const i=e.dom,a=Ar(e);var s;gi(n)&&r===i.getRoot()&&(n.list_block&&ud(t,n.list_block)||Ae(gn(t.childNodes),s=>{Ms(e,a,s.nodeName.toLowerCase())?o?o.appendChild(s):(o=Tp(i,s,a),i.setAttribs(o,_l(e))):o=null})),lo(s=n)&&On(s)&&Ht(Ut(s,"mixed"),!0)&&!ud(n.inline,t)||i.remove(t,!0)},i0=(e,t,n)=>b(e)?{name:t,value:null}:{name:e,value:ua(t,n)},a0=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},s0=(e,t,n,r,o)=>{let i=!1;kp(n.styles,(a,s)=>{const{name:l,value:c}=i0(s,a,r),u=Sf(c,l);(n.remove_similar||le(c)||!$e(o)||ud(Kc(e,o,l),u))&&e.setStyle(t,l,""),i=!0}),i&&a0(e,t)},l0=(e,t,n,r,o)=>{const i=e.dom,a=lp(e),s=e.schema;if(On(t)&&ku(s,t.inline)&&La(s,r)&&r.parentElement===e.getBody())return o0(e,r,t),ts.removed();if(!t.ceFalseOverride&&r&&"false"===i.getContentEditableParent(r)||r&&!dd(i,r,t)&&(!t.links||"A"!==r.nodeName))return ts.keep();const l=r,c=t.preserve_attributes;if(On(t)&&"all"===t.remove&&fe(c)){const u=gt(i.getAttribs(l),f=>Pt(c,f.name.toLowerCase()));if(i.removeAllAttribs(l),Ae(u,f=>i.setAttrib(l,f.name,f.value)),u.length>0)return ts.rename("span")}if("all"!==t.remove){s0(i,l,t,n,o),kp(t.attributes,(f,g)=>{const{name:v,value:m}=i0(g,f,n);if(t.remove_similar||le(m)||!$e(o)||ud(i.getAttrib(o,v),m)){if("class"===v){const y=i.getAttrib(l,v);if(y){let h="";if(Ae(y.split(/\s+/),S=>{/mce\-\w+/.test(S)&&(h+=(h?" ":"")+S)}),h)return void i.setAttrib(l,v,h)}}if(IT.test(v)&&l.removeAttribute("data-mce-"+v),"style"===v&&qo(["li"])(l)&&"none"===i.getStyle(l,"list-style-type"))return l.removeAttribute(v),void i.setStyle(l,"list-style-type","none");"class"===v&&l.removeAttribute("className"),l.removeAttribute(v)}}),kp(t.classes,f=>{f=ua(f,n),$e(o)&&!i.hasClass(o,f)||i.removeClass(l,f)});const u=i.getAttribs(l);for(let f=0;f<u.length;f++)if(!a.isAttributeInternal(u[f].nodeName))return ts.keep()}return"none"!==t.remove?(o0(e,l,t),ts.removed()):ts.keep()},LT=(e,t,n,r)=>l0(e,t,n,r,r).fold(Fe(r),o=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,o)),Fe(null)),c0=(e,t,n,r,o)=>{(r||e.selection.isEditable())&&((i,a,s,l,c)=>{const u=i.formatter.get(a),f=u[0],g=i.dom,v=i.selection,m=k=>{const N=((P,L,U,Z,ve)=>{let de;return L.parentNode&&Ae($c(P.dom,L.parentNode).reverse(),H=>{if(!de&&$e(H)&&"_start"!==H.id&&"_end"!==H.id){const X=mi(P,H,U,Z,ve);X&&!1!==X.split&&(de=H)}}),de})(i,k,a,s,c);return((P,L,U,Z,ve,de,H,X)=>{var V,ae;let Ue,Me;const nt=P.dom;if(U){const qe=U.parentNode;for(let ht=Z.parentNode;ht&&ht!==qe;ht=ht.parentNode){let bt=nt.clone(ht,!1);for(let Ge=0;Ge<L.length&&(bt=LT(P,L[Ge],X,bt),null!==bt);Ge++);bt&&(Ue&&bt.appendChild(Ue),Me||(Me=bt),Ue=bt)}H.mixed&&nt.isBlock(U)||(Z=null!==(V=nt.split(U,Z))&&void 0!==V?V:Z),Ue&&Me&&(null===(ae=ve.parentNode)||void 0===ae||ae.insertBefore(Ue,ve),Me.appendChild(ve),On(H)&&Qy(P,H,0,Ue))}return Z})(i,u,N,k,k,0,f,s)},y=k=>Yt(u,N=>zl(i,N,s,k,k)),h=k=>{const N=gn(k.childNodes),P=y(k)||Yt(u,U=>dd(g,k,U)),L=k.parentNode;if(!P&&z(L)&&Ef(f)&&y(L),f.deep&&N.length)for(let U=0;U<N.length;U++)h(N[U]);Ae(["underline","line-through","overline"],U=>{$e(k)&&i.dom.getStyle(k,"text-decoration")===U&&k.parentNode&&Rv(g,k.parentNode)===U&&zl(i,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:U}},void 0,k)})},S=k=>{const N=g.get(k?"_start":"_end");if(N){let P=N[k?"firstChild":"lastChild"];return so(L=P)&&$e(L)&&("_start"===L.id||"_end"===L.id)&&(P=P[k?"firstChild":"lastChild"]),Ie(P)&&0===P.data.length&&(P=k?N.previousSibling||N.nextSibling:N.nextSibling||N.previousSibling),g.remove(N,!0),P}var L;return null},x=k=>{let N,P,L=$a(g,k,u,k.collapsed);if(f.split){if(L=td(L),N=t0(i,L,!0),P=t0(i,L),N!==P){if(N=n0(N,!0),P=n0(P,!1),e0(g,N,P)){const Z=T.from(N.firstChild).getOr(N);return m(r0(g,Z,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void S(!0)}if(e0(g,P,N)){const Z=T.from(P.lastChild).getOr(P);return m(r0(g,Z,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void S(!1)}N=Tp(g,N,"span",{id:"_start","data-mce-type":"bookmark"}),P=Tp(g,P,"span",{id:"_end","data-mce-type":"bookmark"});const U=g.createRng();U.setStartAfter(N),U.setEndBefore(P),Dl(g,U,Z=>{Ae(Z,ve=>{so(ve)||so(ve.parentNode)||m(ve)})}),m(N),m(P),N=S(!0),P=S()}else N=P=m(N);L.startContainer=N.parentNode?N.parentNode:N,L.startOffset=g.nodeIndex(N),L.endContainer=P.parentNode?P.parentNode:P,L.endOffset=g.nodeIndex(P)+1}Dl(g,L,U=>{Ae(U,h)})};if(l){if(Ol(l)){const k=g.createRng();k.setStartBefore(l),k.setEndAfter(l),x(k)}else x(l);Gv(i,a,l,s)}else v.isCollapsed()&&On(f)&&!Ds(i).length?((e,t,n,r)=>{const o=e.dom,i=e.selection;let a=!1;const s=e.formatter.get(t);if(!s)return;const l=i.getRng(),c=l.startContainer,u=l.startOffset;let f=c;Ie(c)&&(u!==c.data.length&&(a=!0),f=f.parentNode);const g=[];let v;for(;f;){if(mi(e,f,t,n,r)){v=f;break}f.nextSibling&&(a=!0),g.push(f),f=f.parentNode}if(v)if(a){const m=i.getBookmark();l.collapse(!0);let y=$a(o,l,s,!0);y=td(y),e.formatter.remove(t,n,y,r),i.moveToBookmark(m)}else{const m=Ga(e.getBody(),v),y=Cp(!1).dom;((x,k,N)=>{var P,L;const U=x.dom,Z=U.getParent(N,ye(bf,x.schema));Z&&U.isEmpty(Z)?null===(P=N.parentNode)||void 0===P||P.replaceChild(k,N):((ve=>{const de=sr(ve,"br"),H=gt((X=>{const V=[];let ae=X.dom;for(;ae;)V.push(I(ae)),ae=ae.lastChild;return V})(ve).slice(-1),Ma);de.length===H.length&&Ae(H,st)})(I(N)),U.isEmpty(N)?null===(L=N.parentNode)||void 0===L||L.replaceChild(k,N):U.insertAfter(k,N))})(e,y,null!=m?m:v);const h=((x,k,N,P,L,U)=>{const Z=x.formatter,ve=x.dom,de=gt(on(Z.get()),X=>X!==P&&!an(X,"removeformat")),H=(X=x,V=N,yn(de,(Ue,Me)=>{const nt=_f(X,Me,bt=>{const Ge=tt=>me(tt)||tt.length>1&&"%"===tt.charAt(0);return Yt(["styles","attributes"],tt=>Ut(bt,tt).exists(ut=>{const W=fe(ut)?ut:vo(ut);return Yt(W,Ge)}))});return X.formatter.matchNode(V,Me,{},nt)?Ue.concat([Me]):Ue},[]));var X,V;if(gt(H,X=>!((V,ae,Ue)=>{const Me=["inline","block","selector","attributes","styles","classes"],nt=qe=>_r(qe,(ht,bt)=>Yt(Me,Ge=>Ge===bt));return _f(V,ae,qe=>{const ht=nt(qe);return _f(V,Ue,bt=>{const Ge=nt(bt);return((tt,ut,W=oe)=>w(W).eq(tt,ut))(ht,Ge)})})})(x,X,P)).length>0){const X=N.cloneNode(!1);return ve.add(k,X),Z.remove(P,L,X,U),ve.remove(X),T.some(X)}return T.none()})(e,y,v,t,n,r),S=By(g.concat(h.toArray()),y);m&&Sp(e,m,!1),i.setCursorLocation(S,1),o.isEmpty(v)&&o.remove(v)}})(i,a,s,c):(Tv(i,()=>hf(i,x),k=>On(f)&&yp(i,a,s,k)),i.nodeChanged()),k=i,P=s,"removeformat"===(N=a)?Ae($y(k.selection),L=>{Ae(qy,U=>k.dom.setStyle(L,U,"")),a0(k.dom,L)}):zy(k.formatter,N).each(L=>{Ae($y(k.selection),U=>s0(k.dom,U,L,P,null))}),Gv(i,a,l,s);var k,N,P})(e,t,n,r,o)},zl=(e,t,n,r,o)=>l0(e,t,n,r,o).fold(Ot,i=>(e.dom.rename(r,i),!0),Ft),d0=xe.each,fd=xe.each,u0=(e,t,n,r)=>{if(fd(n.styles,(o,i)=>{e.setStyle(t,i,ua(o,r))}),n.styles){const o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},BT=(e,t,n,r)=>{const o=e.formatter.get(t),i=o[0],a=!r&&e.selection.isCollapsed(),s=e.dom,l=e.selection,c=(m,y=i)=>{me(y.onformat)&&y.onformat(m,y,n,r),u0(s,m,y,n),fd(y.attributes,(h,S)=>{s.setAttrib(m,S,ua(h,n))}),fd(y.classes,h=>{const S=ua(h,n);s.hasClass(m,S)||s.addClass(m,S)})},u=(m,y)=>{let h=!1;return fd(m,S=>!(!lo(S)||("false"!==s.getContentEditable(y)||S.ceFalseOverride)&&(!z(S.collapsed)||S.collapsed===a)&&s.is(y,S.selector)&&!xo(y)&&(c(y,S),h=!0,1))),h},g=(m,y,h)=>{const S=[];let x=!0;const k=i.inline||i.block,N=(m=>{if(D(m)){const y=s.create(m);return c(y),y}return null})(k);Dl(m,y,P=>{let L;const U=Z=>{let ve=!1,de=x,H=!1;const X=Z.parentNode,V=X.nodeName.toLowerCase(),ae=m.getContentEditable(Z);z(ae)&&(de=x,x="true"===ae,ve=!0,H=Nv(e,Z));const Ue=x&&!ve;if(dn(Z)&&!((Me,nt,qe,ht)=>{if(Sx(Me)&&On(nt)&&qe.parentNode){const bt=Hm(Me.schema),Ge=((e,t)=>((n,r)=>{const o=n.dom;return o.parentNode?(i=I(o.parentNode),rn(i.dom.childNodes,s=>(i=>!Rt(n,i)&&r(i))(I(s))).map(I)):T.none();var i})(e,t).isSome())(I(qe),tt=>xo(tt.dom));return mn(bt,ht)&&En(I(qe.parentNode),!1)&&!Ge}return!1})(e,i,Z,V))return L=null,void(gi(i)&&m.remove(Z));if(Me=Z,gi(nt=i)&&!0===nt.wrapper&&mi(e,Me,t,n))L=null;else{if(((Me,nt,qe)=>{const ht=gi(bt=i)&&!0!==bt.wrapper&&bf(e.schema,Me)&&Ms(e,nt,k);var bt;return qe&&ht})(Z,V,Ue)){const Me=m.rename(Z,k);return c(Me),S.push(Me),void(L=null)}if(lo(i)){let Me=u(o,Z);if(!Me&&z(X)&&Ef(i)&&(Me=u(o,X)),!On(i)||Me)return void(L=null)}z(N)&&((Me,nt,qe,ht)=>{const bt=Me.nodeName.toLowerCase(),Ge=Ms(e,k,bt)&&Ms(e,nt,k),tt=!h&&Ie(Me)&&_c(Me.data),ut=xo(Me),W=!On(i)||!m.isBlock(Me);return(qe||ht)&&Ge&&!tt&&!ut&&W})(Z,V,Ue,H)?(L||(L=m.clone(N,!1),X.insertBefore(L,Z),S.push(L)),H&&ve&&(x=de),L.appendChild(Z)):(L=null,Ae(gn(Z.childNodes),U),ve&&(x=de),L=null)}var Me,nt};Ae(P,U)}),!0===i.links&&Ae(S,P=>{const L=U=>{"A"===U.nodeName&&c(U,i),Ae(gn(U.childNodes),L)};L(P)}),Ae(S,P=>{const L=(U=>{let Z=0;return Ae(U.childNodes,ve=>{var de;z(de=ve)&&Ie(de)&&0===de.length||so(ve)||Z++}),Z})(P);var U;!(S.length>1)&&m.isBlock(P)||0!==L?(On(i)||gi(i)&&i.wrapper)&&(i.exact||1!==L||(P=rn((U=P).childNodes,vf).filter(ve=>"false"!==m.getContentEditable(ve)&&dd(m,ve,i)).map(ve=>{const de=m.clone(ve,!1);return c(de),m.replace(de,U,!0),m.remove(ve,!0),de}).getOr(U)),((U,Z,ve,de)=>{d0(Z,H=>{var X,V,ae;On(H)&&d0(U.dom.select(H.inline,de),X=>{wp(X)&&zl(U,H,ve,X,H.exact?X:null)}),X=U.dom,ae=de,(V=H).clear_child_styles&&Ep(X.select(V.links?"*:not(a)":"*",ae),Me=>{wp(Me)&&Ka(Me)&&Ep(V.styles,(nt,qe)=>{X.setStyle(Me,qe,"")})})})})(e,o,n,P),((U,Z,ve,de,H)=>{const X=H.parentNode;mi(U,X,ve,de)&&zl(U,Z,de,H)||Z.merge_with_parents&&X&&U.dom.getParent(X,V=>!!mi(U,V,ve,de)&&(zl(U,Z,de,H),!0))})(e,i,t,n,P),((U,Z,ve,de)=>{if(Z.styles&&Z.styles.backgroundColor){const H=Jy(U,"fontSize");xp(de,X=>H(X)&&Ka(X),Zy(U,"backgroundColor",ua(Z.styles.backgroundColor,ve)))}})(m,i,n,P),((U,Z,ve,de)=>{const H=X=>{if($e(X)&&$e(X.parentNode)&&Ka(X)){const V=Rv(U,X.parentNode);U.getStyle(X,"color")&&V?U.setStyle(X,"text-decoration",V):U.getStyle(X,"text-decoration")===V&&U.setStyle(X,"text-decoration",null)}};Z.styles&&(Z.styles.color||Z.styles.textDecoration)&&(xe.walk(de,H,"childNodes"),H(de))})(m,i,0,P),((U,Z,ve,de)=>{if(On(Z)&&("sub"===Z.inline||"sup"===Z.inline)){const H=Jy(U,"fontSize");xp(de,V=>H(V)&&Ka(V),Zy(U,"fontSize",""));const X=gt(U.select("sup"===Z.inline?"sub":"sup",de),Ka);U.remove(X,!0)}})(m,i,0,P),Qy(e,i,0,P)):m.remove(P,!0)})},v=Ol(r)?r:l.getNode();if("false"===s.getContentEditable(v)&&!Nv(e,v))return u(o,r=v),void Vv(e,t,r,n);if(i){if(r)if(Ol(r)){if(!u(o,r)){const m=s.createRng();m.setStartBefore(r),m.setEndAfter(r),g(s,$a(s,m,o),!0)}}else g(s,r,!0);else a&&On(i)&&!Ds(e).length?((m,y,h)=>{let S;const x=m.selection,k=m.formatter.get(y);if(!k)return;const N=x.getRng();let P=N.startOffset;const L=N.startContainer.nodeValue;S=Ga(m.getBody(),x.getStart());const U=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(L&&P>0&&P<L.length&&U.test(L.charAt(P))&&U.test(L.charAt(P-1))){const de=x.getBookmark();N.collapse(!0);let H=$a(m.dom,N,k);H=td(H),m.formatter.apply(y,h,H),x.moveToBookmark(de)}else{let de=S?Iy(S):null;S&&"\ufeff"===(null==de?void 0:de.data)||(Z=m.getDoc(),ve=Cp(!0).dom,S=Z.importNode(ve,!0),de=S.firstChild,N.insertNode(S),P=1),m.formatter.apply(y,h,S),x.setCursorLocation(de,P)}var Z,ve})(e,t,n):(l.setRng(fp(l.getRng())),Tv(e,()=>{hf(e,(m,y)=>{const h=y?m:$a(s,m,o);g(s,h,!1)})},Ft),e.nodeChanged()),zy(e.formatter,t).each(m=>{var y;Ae(gt((h=>{const S=h.getSelectedBlocks(),x=h.getRng();if(h.isCollapsed())return[];if(1===S.length)return Vy(x,S[0])&&Gy(x,S[0])?S:[];{const k=xn(S).filter(L=>Vy(x,L)).toArray(),N=mo(S).filter(L=>Gy(x,L)).toArray(),P=S.slice(1,-1);return k.concat(P).concat(N)}})(y=e.selection),Ky(y.dom)),y=>u0(s,y,m,n))});y=e,yt(ql,m=t)&&Ae(ql[m],h=>{h(y)})}var m,y;Vv(e,t,r,n)},f0=(e,t,n,r)=>{(r||e.selection.isEditable())&&BT(e,t,n,r)},p0=e=>yt(e,"vars"),g0=e=>e.selection.getStart(),m0=(e,t,n,r,o)=>Cn(t,i=>{const a=e.formatter.matchNode(i,n,null!=o?o:{},r);return!Je(a)},i=>!!Oy(e,i,n)||!r&&z(e.formatter.matchNode(i,n,o,!0))),h0=(e,t)=>{const n=null!=t?t:g0(e);return gt($c(e.dom,n),r=>$e(r)&&!Da(r))},v0=(e,t,n)=>{const r=h0(e,t);qt(n,(o,i)=>{const a=s=>{const l=m0(e,r,i,s.similar,p0(s)?s.vars:void 0),c=l.isSome();if(s.state.get()!==c){s.state.set(c);const u=l.getOr(t);p0(s)?s.callback(c,{node:u,format:i,parents:r}):Ae(s.callbacks,f=>f(c,{node:u,format:i,parents:r}))}};Ae([o.withSimilar,o.withoutSimilar],a),Ae(o.withVars,a)})},b0=xe.explode,y0=()=>{const e={};return{addFilter:(t,n)=>{Ae(b0(t),r=>{yt(e,r)||(e[r]={name:r,callbacks:[]}),e[r].callbacks.push(n)})},getFilters:()=>vo(e),removeFilter:(t,n)=>{Ae(b0(t),r=>{if(yt(e,r))if(z(n)){const o=e[r],i=gt(o.callbacks,a=>a!==n);i.length>0?o.callbacks=i:delete e[r]}else delete e[r]})}}},C0=(e,t,n)=>{t.addNodeFilter("br",(r,o,i)=>{const a=xe.extend({},n.getBlockElements()),s=n.getNonEmptyElements(),l=n.getWhitespaceElements();a.body=1;const c=u=>u.name in a||Au(n,u);for(let u=0,f=r.length;u<f;u++){let g=r[u],v=g.parent;if(v&&c(v)&&g===v.lastChild){let m=g.prev;for(;m;){const y=m.name;if("span"!==y||"bookmark"!==m.attr("data-mce-type")){"br"===y&&(g=null);break}m=m.prev}if(g&&(g.remove(),Wl(n,s,l,v))){const y=n.getElementRule(v.name);y&&(y.removeEmpty?v.remove():y.paddEmpty&&cp(e,i,c,v))}}else{let m=g;for(;v&&v.firstChild===m&&v.lastChild===m&&(m=v,!a[v.name]);)v=v.parent;if(m===v){const y=new Rr("#text",3);y.value=Bn,g.replace(y)}}}})},Ap=e=>{const[t,...n]=e.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const i=";base64"===o[2],a=i?(s=>{const l=/([a-z0-9+\/=\s]+)/i.exec(s);return l?l[1]:""})(r):decodeURIComponent(r);return T.some({type:o[1],data:a,base64Encoded:i})}return T.none()},S0=(e,t,n=!0)=>{let r=t;if(n)try{r=atob(t)}catch(i){return T.none()}const o=new Uint8Array(r.length);for(let i=0;i<o.length;i++)o[i]=r.charCodeAt(i);return T.some(new Blob([o],{type:e}))},_0=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{t(r.result)},r.onerror=()=>{var o;n(null===(o=r.error)||void 0===o?void 0:o.message)},r.readAsDataURL(e)});let FT=0;const E0=(e,t,n)=>Ap(e).bind(({data:r,type:o,base64Encoded:i})=>{if(t&&!i)return T.none();{const a=i?r:btoa(r);return n(a,o)}}),w0=(e,t,n)=>{const r=e.create("blobid"+FT++,t,n);return e.add(r),r},x0=(e,t,n=!1)=>E0(t,n,(r,o)=>T.from(e.getByData(r,o)).orThunk(()=>S0(o,r).map(i=>w0(e,i,r))));function ns(e){return(ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Np(e,t){return(Np=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n})(e,t)}function Rp(e,t,n){return(Rp=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}()?Reflect.construct:function(r,o,i){var a=[null];a.push.apply(a,o);var s=new(Function.bind.apply(r,a));return i&&Np(s,i.prototype),s}).apply(null,arguments)}function Ko(e){return function(t){if(Array.isArray(t))return Pp(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,n){if(t){if("string"==typeof t)return Pp(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pp(t,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var HT=Object.hasOwnProperty,k0=Object.setPrototypeOf,WT=Object.isFrozen,qT=Object.getPrototypeOf,zT=Object.getOwnPropertyDescriptor,jr=Object.freeze,hi=Object.seal,VT=Object.create,T0="undefined"!=typeof Reflect&&Reflect,pd=T0.apply,Op=T0.construct;pd||(pd=function(e,t,n){return e.apply(t,n)}),jr||(jr=function(e){return e}),hi||(hi=function(e){return e}),Op||(Op=function(e,t){return Rp(e,Ko(t))});var A0,GT=$o(Array.prototype.forEach),KT=$o(Array.prototype.pop),Vl=$o(Array.prototype.push),gd=$o(String.prototype.toLowerCase),$T=$o(String.prototype.match),va=$o(String.prototype.replace),YT=$o(String.prototype.indexOf),XT=$o(String.prototype.trim),Fr=$o(RegExp.prototype.test),Dp=(A0=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Op(A0,t)});function $o(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return pd(e,t,r)}}function jt(e,t){k0&&k0(e,null);for(var n=t.length;n--;){var r=t[n];if("string"==typeof r){var o=gd(r);o!==r&&(WT(t)||(t[n]=o),r=o)}e[r]=!0}return e}function rs(e){var t,n=VT(null);for(t in e)pd(HT,e,[t])&&(n[t]=e[t]);return n}function md(e,t){for(;null!==e;){var n=zT(e,t);if(n){if(n.get)return $o(n.get);if("function"==typeof n.value)return $o(n.value)}e=qT(e)}return function(r){return console.warn("fallback value for",r),null}}var N0=jr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Mp=jr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ip=jr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),QT=jr(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Lp=jr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),JT=jr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),R0=jr(["#text"]),P0=jr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Bp=jr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),O0=jr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hd=jr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ZT=hi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),eA=hi(/<%[\w\W]*|[\w\W]*%>/gm),tA=hi(/^data-[\-\w.\u00B7-\uFFFF]/),nA=hi(/^aria-[\-\w]+$/),rA=hi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),oA=hi(/^(?:\w+script|data):/i),iA=hi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),aA=hi(/^html$/i),sA=function(){return"undefined"==typeof window?null:window},lA=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sA(),n=function(se){return e(se)};if(n.version="2.3.8",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var r=t.document,o=t.document,i=t.DocumentFragment,a=t.HTMLTemplateElement,s=t.Node,l=t.Element,c=t.NodeFilter,u=t.NamedNodeMap,f=void 0===u?t.NamedNodeMap||t.MozNamedAttrMap:u,g=t.HTMLFormElement,v=t.DOMParser,m=t.trustedTypes,y=l.prototype,h=md(y,"cloneNode"),S=md(y,"nextSibling"),x=md(y,"childNodes"),k=md(y,"parentNode");if("function"==typeof a){var N=o.createElement("template");N.content&&N.content.ownerDocument&&(o=N.content.ownerDocument)}var P=function(se,vt){if("object"!==ns(se)||"function"!=typeof se.createPolicy)return null;var at=null,Qt="data-tt-policy-suffix";vt.currentScript&&vt.currentScript.hasAttribute(Qt)&&(at=vt.currentScript.getAttribute(Qt));var An="dompurify"+(at?"#"+at:"");try{return se.createPolicy(An,{createHTML:function(dr){return dr}})}catch(dr){return console.warn("TrustedTypes policy "+An+" could not be created."),null}}(m,r),L=P?P.createHTML(""):"",U=o,Z=U.implementation,ve=U.createNodeIterator,de=U.createDocumentFragment,H=U.getElementsByTagName,X=r.importNode,V={};try{V=rs(o).documentMode?o.documentMode:{}}catch(se){}var ae={};n.isSupported="function"==typeof k&&Z&&void 0!==Z.createHTMLDocument&&9!==V;var Ue,Me,nt=ZT,qe=eA,ht=tA,bt=nA,Ge=oA,tt=iA,ut=rA,W=null,K=jt({},[].concat(Ko(N0),Ko(Mp),Ko(Ip),Ko(Lp),Ko(R0))),be=null,Te=jt({},[].concat(Ko(P0),Ko(Bp),Ko(O0),Ko(hd))),Ce=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Se=null,je=null,et=!0,Ke=!0,ft=!1,pt=!1,ze=!1,Et=!1,wn=!1,nn=!1,Or=!1,Dr=!1,Qo=!0,ko=!0,Qn=!1,Ur={},un=null,Si=jt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ca=null,du=jt({},["audio","video","img","source","image","track"]),_i=null,uc=jt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),$r="http://www.w3.org/1998/Math/MathML",Sa="http://www.w3.org/2000/svg",Yr="http://www.w3.org/1999/xhtml",ds=Yr,Iw=!1,$P=["application/xhtml+xml","text/html"],Zs=null,YP=o.createElement("form"),Lw=function(se){return se instanceof RegExp||se instanceof Function},um=function(se){Zs&&Zs===se||(se&&"object"===ns(se)||(se={}),se=rs(se),W="ALLOWED_TAGS"in se?jt({},se.ALLOWED_TAGS):K,be="ALLOWED_ATTR"in se?jt({},se.ALLOWED_ATTR):Te,_i="ADD_URI_SAFE_ATTR"in se?jt(rs(uc),se.ADD_URI_SAFE_ATTR):uc,Ca="ADD_DATA_URI_TAGS"in se?jt(rs(du),se.ADD_DATA_URI_TAGS):du,un="FORBID_CONTENTS"in se?jt({},se.FORBID_CONTENTS):Si,Se="FORBID_TAGS"in se?jt({},se.FORBID_TAGS):{},je="FORBID_ATTR"in se?jt({},se.FORBID_ATTR):{},Ur="USE_PROFILES"in se&&se.USE_PROFILES,et=!1!==se.ALLOW_ARIA_ATTR,Ke=!1!==se.ALLOW_DATA_ATTR,ft=se.ALLOW_UNKNOWN_PROTOCOLS||!1,pt=se.SAFE_FOR_TEMPLATES||!1,ze=se.WHOLE_DOCUMENT||!1,nn=se.RETURN_DOM||!1,Or=se.RETURN_DOM_FRAGMENT||!1,Dr=se.RETURN_TRUSTED_TYPE||!1,wn=se.FORCE_BODY||!1,Qo=!1!==se.SANITIZE_DOM,ko=!1!==se.KEEP_CONTENT,Qn=se.IN_PLACE||!1,ut=se.ALLOWED_URI_REGEXP||ut,ds=se.NAMESPACE||Yr,se.CUSTOM_ELEMENT_HANDLING&&Lw(se.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ce.tagNameCheck=se.CUSTOM_ELEMENT_HANDLING.tagNameCheck),se.CUSTOM_ELEMENT_HANDLING&&Lw(se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ce.attributeNameCheck=se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),se.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Ce.allowCustomizedBuiltInElements=se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ue=Ue=-1===$P.indexOf(se.PARSER_MEDIA_TYPE)?"text/html":se.PARSER_MEDIA_TYPE,Me="application/xhtml+xml"===Ue?function(vt){return vt}:gd,pt&&(Ke=!1),Or&&(nn=!0),Ur&&(W=jt({},Ko(R0)),be=[],!0===Ur.html&&(jt(W,N0),jt(be,P0)),!0===Ur.svg&&(jt(W,Mp),jt(be,Bp),jt(be,hd)),!0===Ur.svgFilters&&(jt(W,Ip),jt(be,Bp),jt(be,hd)),!0===Ur.mathMl&&(jt(W,Lp),jt(be,O0),jt(be,hd))),se.ADD_TAGS&&(W===K&&(W=rs(W)),jt(W,se.ADD_TAGS)),se.ADD_ATTR&&(be===Te&&(be=rs(be)),jt(be,se.ADD_ATTR)),se.ADD_URI_SAFE_ATTR&&jt(_i,se.ADD_URI_SAFE_ATTR),se.FORBID_CONTENTS&&(un===Si&&(un=rs(un)),jt(un,se.FORBID_CONTENTS)),ko&&(W["#text"]=!0),ze&&jt(W,["html","head","body"]),W.table&&(jt(W,["tbody"]),delete Se.tbody),jr&&jr(se),Zs=se)},Bw=jt({},["mi","mo","mn","ms","mtext"]),jw=jt({},["foreignobject","desc","title","annotation-xml"]),XP=jt({},["title","style","font","a","script"]),uu=jt({},Mp);jt(uu,Ip),jt(uu,QT);var fm=jt({},Lp);jt(fm,JT);var Wi=function(se){Vl(n.removed,{element:se});try{se.parentNode.removeChild(se)}catch(vt){try{se.outerHTML=L}catch(at){se.remove()}}},fu=function(se,vt){try{Vl(n.removed,{attribute:vt.getAttributeNode(se),from:vt})}catch(at){Vl(n.removed,{attribute:null,from:vt})}if(vt.removeAttribute(se),"is"===se&&!be[se])if(nn||Or)try{Wi(vt)}catch(at){}else try{vt.setAttribute(se,"")}catch(at){}},Fw=function(se){var vt,at;if(wn)se="<remove></remove>"+se;else{var Qt=$T(se,/^[\r\n\t ]+/);at=Qt&&Qt[0]}"application/xhtml+xml"===Ue&&(se='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+se+"</body></html>");var An=P?P.createHTML(se):se;if(ds===Yr)try{vt=(new v).parseFromString(An,Ue)}catch(Un){}if(!vt||!vt.documentElement){vt=Z.createDocument(ds,"template",null);try{vt.documentElement.innerHTML=Iw?"":An}catch(Un){}}var dr=vt.body||vt.documentElement;return se&&at&&dr.insertBefore(o.createTextNode(at),dr.childNodes[0]||null),ds===Yr?H.call(vt,ze?"html":"body")[0]:ze?vt.documentElement:dr},Uw=function(se){return ve.call(se.ownerDocument||se,se,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},fc=function(se){return"object"===ns(s)?se instanceof s:se&&"object"===ns(se)&&"number"==typeof se.nodeType&&"string"==typeof se.nodeName},qi=function(se,vt,at){ae[se]&&GT(ae[se],function(Qt){Qt.call(n,vt,at,Zs)})},Hw=function(se){var vt,at;if(qi("beforeSanitizeElements",se,null),(at=se)instanceof g&&("string"!=typeof at.nodeName||"string"!=typeof at.textContent||"function"!=typeof at.removeChild||!(at.attributes instanceof f)||"function"!=typeof at.removeAttribute||"function"!=typeof at.setAttribute||"string"!=typeof at.namespaceURI||"function"!=typeof at.insertBefore)||Fr(/[\u0080-\uFFFF]/,se.nodeName))return Wi(se),!0;var Qt=Me(se.nodeName);if(qi("uponSanitizeElement",se,{tagName:Qt,allowedTags:W}),se.hasChildNodes()&&!fc(se.firstElementChild)&&(!fc(se.content)||!fc(se.content.firstElementChild))&&Fr(/<[/\w]/g,se.innerHTML)&&Fr(/<[/\w]/g,se.textContent)||"select"===Qt&&Fr(/<template/i,se.innerHTML))return Wi(se),!0;if(!W[Qt]||Se[Qt]){if(!Se[Qt]&&qw(Qt)&&(Ce.tagNameCheck instanceof RegExp&&Fr(Ce.tagNameCheck,Qt)||Ce.tagNameCheck instanceof Function&&Ce.tagNameCheck(Qt)))return!1;if(ko&&!un[Qt]){var An=k(se)||se.parentNode,dr=x(se)||se.childNodes;if(dr&&An)for(var Un=dr.length-1;Un>=0;--Un)An.insertBefore(h(dr[Un],!0),S(se))}return Wi(se),!0}return se instanceof l&&!function(Jo){var Hn=k(Jo);Hn&&Hn.tagName||(Hn={namespaceURI:Yr,tagName:"template"});var Wn=gd(Jo.tagName),us=gd(Hn.tagName);return Jo.namespaceURI===Sa?Hn.namespaceURI===Yr?"svg"===Wn:Hn.namespaceURI===$r?"svg"===Wn&&("annotation-xml"===us||Bw[us]):Boolean(uu[Wn]):Jo.namespaceURI===$r?Hn.namespaceURI===Yr?"math"===Wn:Hn.namespaceURI===Sa?"math"===Wn&&jw[us]:Boolean(fm[Wn]):Jo.namespaceURI===Yr&&!(Hn.namespaceURI===Sa&&!jw[us])&&!(Hn.namespaceURI===$r&&!Bw[us])&&!fm[Wn]&&(XP[Wn]||!uu[Wn])}(se)?(Wi(se),!0):"noscript"!==Qt&&"noembed"!==Qt||!Fr(/<\/no(script|embed)/i,se.innerHTML)?(pt&&3===se.nodeType&&(vt=va(vt=se.textContent,nt," "),vt=va(vt,qe," "),se.textContent!==vt&&(Vl(n.removed,{element:se.cloneNode()}),se.textContent=vt)),qi("afterSanitizeElements",se,null),!1):(Wi(se),!0)},Ww=function(se,vt,at){if(Qo&&("id"===vt||"name"===vt)&&(at in o||at in YP))return!1;if((!Ke||je[vt]||!Fr(ht,vt))&&(!et||!Fr(bt,vt)))if(!be[vt]||je[vt]){if(!(qw(se)&&(Ce.tagNameCheck instanceof RegExp&&Fr(Ce.tagNameCheck,se)||Ce.tagNameCheck instanceof Function&&Ce.tagNameCheck(se))&&(Ce.attributeNameCheck instanceof RegExp&&Fr(Ce.attributeNameCheck,vt)||Ce.attributeNameCheck instanceof Function&&Ce.attributeNameCheck(vt))||"is"===vt&&Ce.allowCustomizedBuiltInElements&&(Ce.tagNameCheck instanceof RegExp&&Fr(Ce.tagNameCheck,at)||Ce.tagNameCheck instanceof Function&&Ce.tagNameCheck(at))))return!1}else if(!_i[vt]&&!Fr(ut,va(at,tt,""))&&("src"!==vt&&"xlink:href"!==vt&&"href"!==vt||"script"===se||0!==YT(at,"data:")||!Ca[se])&&(!ft||Fr(Ge,va(at,tt,"")))&&at)return!1;return!0},qw=function(se){return se.indexOf("-")>0},zw=function(se){var vt,at,Qt,An;qi("beforeSanitizeAttributes",se,null);var dr=se.attributes;if(dr){var Un={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:be};for(An=dr.length;An--;){var Jo=vt=dr[An],Hn=Jo.name,Wn=Jo.namespaceURI;at="value"===Hn?vt.value:XT(vt.value),Qt=Me(Hn);var us=at;if(Un.attrName=Qt,Un.attrValue=at,Un.keepAttr=!0,Un.forceKeepAttr=void 0,qi("uponSanitizeAttribute",se,Un),at=Un.attrValue,!Un.forceKeepAttr)if(Un.keepAttr)if(Fr(/\/>/i,at))fu(Hn,se);else{pt&&(at=va(at,nt," "),at=va(at,qe," "));var JP=Me(se.nodeName);if(Ww(JP,Qt,at)){if(at!==us)try{Wn?se.setAttributeNS(Wn,Hn,at):se.setAttribute(Hn,at)}catch(nO){fu(Hn,se)}}else fu(Hn,se)}else fu(Hn,se)}qi("afterSanitizeAttributes",se,null)}},QP=function se(vt){var at,Qt=Uw(vt);for(qi("beforeSanitizeShadowDOM",vt,null);at=Qt.nextNode();)qi("uponSanitizeShadowNode",at,null),Hw(at)||(at.content instanceof i&&se(at.content),zw(at));qi("afterSanitizeShadowDOM",vt,null)};return n.sanitize=function(se,vt){var at,Qt,An,dr,Un;if((Iw=!se)&&(se="\x3c!--\x3e"),"string"!=typeof se&&!fc(se)){if("function"!=typeof se.toString)throw Dp("toString is not a function");if("string"!=typeof(se=se.toString()))throw Dp("dirty is not a string, aborting")}if(!n.isSupported){if("object"===ns(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof se)return t.toStaticHTML(se);if(fc(se))return t.toStaticHTML(se.outerHTML)}return se}if(Et||um(vt),n.removed=[],"string"==typeof se&&(Qn=!1),Qn){if(se.nodeName){var Jo=Me(se.nodeName);if(!W[Jo]||Se[Jo])throw Dp("root node is forbidden and cannot be sanitized in-place")}}else if(se instanceof s)1===(Qt=(at=Fw("\x3c!----\x3e")).ownerDocument.importNode(se,!0)).nodeType&&"BODY"===Qt.nodeName||"HTML"===Qt.nodeName?at=Qt:at.appendChild(Qt);else{if(!nn&&!pt&&!ze&&-1===se.indexOf("<"))return P&&Dr?P.createHTML(se):se;if(!(at=Fw(se)))return nn?null:Dr?L:""}at&&wn&&Wi(at.firstChild);for(var Hn=Uw(Qn?se:at);An=Hn.nextNode();)3===An.nodeType&&An===dr||Hw(An)||(An.content instanceof i&&QP(An.content),zw(An),dr=An);if(dr=null,Qn)return se;if(nn){if(Or)for(Un=de.call(at.ownerDocument);at.firstChild;)Un.appendChild(at.firstChild);else Un=at;return be.shadowroot&&(Un=X.call(r,Un,!0)),Un}var Wn=ze?at.outerHTML:at.innerHTML;return ze&&W["!doctype"]&&at.ownerDocument&&at.ownerDocument.doctype&&at.ownerDocument.doctype.name&&Fr(aA,at.ownerDocument.doctype.name)&&(Wn="<!DOCTYPE "+at.ownerDocument.doctype.name+">\n"+Wn),pt&&(Wn=va(Wn,nt," "),Wn=va(Wn,qe," ")),P&&Dr?P.createHTML(Wn):Wn},n.setConfig=function(se){um(se),Et=!0},n.clearConfig=function(){Zs=null,Et=!1},n.isValidAttribute=function(se,vt,at){Zs||um({});var Qt=Me(se),An=Me(vt);return Ww(Qt,An,at)},n.addHook=function(se,vt){"function"==typeof vt&&(ae[se]=ae[se]||[],Vl(ae[se],vt))},n.removeHook=function(se){if(ae[se])return KT(ae[se])},n.removeHooks=function(se){ae[se]&&(ae[se]=[])},n.removeAllHooks=function(){ae={}},n}();const D0=xe.each,cA=xe.trim,dA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],uA={ftp:21,http:80,https:443,mailto:25},fA=["img","video"],M0=(e,t,n)=>{const r=(o=>{try{return decodeURIComponent(o)}catch(i){return unescape(o)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!e.allow_html_data_urls&&(/^data:image\//i.test(r)?(i=n,(z(o=e.allow_svg_data_urls)?!o:!z(i)||!Pt(fA,i))&&/^data:image\/svg\+xml/i.test(r)):/^data:/i.test(r)));var o,i};class Yo{static parseDataUri(t){let n;const r=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(r[0]);return o&&(n=o[1]),{type:n,data:r[1]}}static isDomSafe(t,n,r={}){if(r.allow_script_urls)return!0;{const o=ia.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!M0(r,o,n)}}static getDocumentBaseUrl(t){var n;let r;return r=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?null!==(n=t.href)&&void 0!==n?n:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(t,n={}){this.path="",this.directory="",t=cA(t),this.settings=n;const r=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(o.source=t);const i=0===t.indexOf("//");if(0!==t.indexOf("/")||i||(t=(r&&r.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const s=r?r.path:new Yo(document.location.href).directory;if(""===(null==r?void 0:r.protocol))t="//mce_host"+o.toAbsPath(s,t);else{const l=/([^#?]*)([#?]?.*)/.exec(t);l&&(t=(r&&r.protocol||"http")+"://mce_host"+o.toAbsPath(s,l[1])+l[2])}}t=t.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);a&&D0(dA,(s,l)=>{let c=a[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),o[s]=c}),r&&(o.protocol||(o.protocol=r.protocol),o.userInfo||(o.userInfo=r.userInfo),o.port||"mce_host"!==o.host||(o.port=r.port),o.host&&"mce_host"!==o.host||(o.host=r.host),o.source=""),i&&(o.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if("./"===t)return t;const n=new Yo(t,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const r=this.getURI(),o=n.getURI();if(r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o)return r;let i=this.toRelPath(this.path,n.path);return n.query&&(i+="?"+n.query),n.anchor&&(i+="#"+n.anchor),i}toAbsolute(t,n){const r=new Yo(t,{base_uri:this});return r.getURI(n&&this.isSameOrigin(r))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?uA[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let r,o,i=0,a="";const s=t.substring(0,t.lastIndexOf("/")).split("/"),l=n.split("/");if(s.length>=l.length)for(r=0,o=s.length;r<o;r++)if(r>=l.length||s[r]!==l[r]){i=r+1;break}if(s.length<l.length)for(r=0,o=l.length;r<o;r++)if(r>=s.length||s[r]!==l[r]){i=r+1;break}if(1===i)return n;for(r=0,o=s.length-(i-1);r<o;r++)a+="../";for(r=i-1,o=l.length;r<o;r++)a+=r!==i-1?"/"+l[r]:l[r];return a}toAbsPath(t,n){let r=0;const o=/\/$/.test(n)?"/":"",i=t.split("/"),a=n.split("/"),s=[];D0(i,f=>{f&&s.push(f)});const l=[];for(let f=a.length-1;f>=0;f--)0!==a[f].length&&"."!==a[f]&&(".."!==a[f]?r>0?r--:l.push(a[f]):r++);const c=s.length-r;let u;return u=c<=0?Sr(l).join("/"):s.slice(0,c).join("/")+"/"+Sr(l).join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u}getURI(t=!1){let n;return this.source&&!t||(n="",t||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const pA=xe.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),jp="data-mce-type";let I0=0;const L0=(e,t,n,r)=>{var o,i,a,s;const l=t.validate,c=n.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(o=e.nodeValue)&&void 0!==o?o:"")&&(e.nodeValue=" "+e.nodeValue);const u=null!==(i=null==r?void 0:r.tagName)&&void 0!==i?i:e.nodeName.toLowerCase();if(1!==e.nodeType||"body"===u)return;const f=I(e),g=vs(f,jp),v=mr(f,"data-mce-bogus");if(!g&&D(v))return void("all"===v?st(f):Dt(f));const m=n.getElementRule(u);if(!l||m){if(z(r)&&(r.allowedTags[u]=!0),l&&m&&!g){if(Ae(null!==(a=m.attributesForced)&&void 0!==a?a:[],y=>{Tn(f,y.name,"{$uid}"===y.value?"mce_"+I0++:y.value)}),Ae(null!==(s=m.attributesDefault)&&void 0!==s?s:[],y=>{vs(f,y.name)||Tn(f,y.name,"{$uid}"===y.value?"mce_"+I0++:y.value)}),m.attributesRequired&&!Yt(m.attributesRequired,y=>vs(f,y))||m.removeEmptyAttrs&&(y=>{const h=y.dom.attributes;return null==h||0===h.length})(f))return void Dt(f);m.outputName&&m.outputName!==u&&th(f,m.outputName)}}else yt(c,u)?st(f):Dt(f)},B0=(e,t,n,r,o)=>!(r in pA&&M0(e,o,n))&&(!e.validate||t.isValid(n,r)||Sn(r,"data-")||Sn(r,"aria-")),j0=(e,t)=>e.hasAttribute(jp)&&("id"===t||"class"===t||"style"===t),F0=(e,t)=>e in t.getBoolAttrs(),gA=(e,t,n)=>{const{attributes:r}=e;for(let o=r.length-1;o>=0;o--){const i=r[o],a=i.name,s=i.value;B0(t,n,e.tagName.toLowerCase(),a,s)||j0(e,a)?F0(a,n)&&e.setAttribute(a,a):e.removeAttribute(a)}},U0=xe.makeMap,H0=xe.extend,W0=(e,t,n)=>{const r=e.name,o=r in n&&"title"!==r&&"textarea"!==r,i=t.childNodes;for(let a=0,s=i.length;a<s;a++){const l=i[a],c=new Rr(l.nodeName.toLowerCase(),l.nodeType);if($e(l)){const u=l.attributes;for(let f=0,g=u.length;f<g;f++){const v=u[f];c.attr(v.name,v.value)}}else Ie(l)?(c.value=l.data,o&&(c.raw=!0)):(ta(l)||Xw(l)||Qw(l))&&(c.value=l.data);W0(c,l,n),e.append(c)}},Fs=(e={},t=aa())=>{const n=y0(),r=y0(),o=rt({validate:!0,root_name:"body",sanitize:!0},e),i=new DOMParser,a=((y,h)=>{if(y.sanitize){const S=((e,t)=>{const n=lA();return n.addHook("uponSanitizeElement",(r,o)=>{L0(r,e,t,o)}),n.addHook("uponSanitizeAttribute",(r,o)=>{const i=r.tagName.toLowerCase(),{attrName:a,attrValue:s}=o;o.keepAttr=B0(e,t,i,a,s),o.keepAttr?(o.allowedAttributes[a]=!0,F0(a,t)&&(o.attrValue=a),e.allow_svg_data_urls&&Sn(s,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):j0(r,a)&&(o.forceKeepAttr=!0)}),n})(y,h);return(x,k)=>{S.sanitize(x,((N,P)=>{const L={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return L.PARSER_MEDIA_TYPE=P,N.allow_script_urls?L.ALLOWED_URI_REGEXP=/.*/:N.allow_html_data_urls&&(L.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),L})(y,k)),S.removed=[]}}return(S,x)=>{const k=document.createNodeIterator(S,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let N;for(;N=k.nextNode();)L0(N,y,h),$e(N)&&gA(N,y,h)}})(o,t),l=n.getFilters,f=r.getFilters,v=(y,h)=>{const S=D(h.attr(jp)),x=1===h.type&&!yt(y,h.name)&&!Au(t,h);return 3===h.type||x&&!S},m={schema:t,addAttributeFilter:r.addFilter,getAttributeFilters:f,removeAttributeFilter:r.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(y,h={})=>{var S;const x=o.validate,k=null!==(S=h.context)&&void 0!==S?S:o.root_name,N=((V,ae,Ue="html")=>{const Me="xhtml"===Ue?"application/xhtml+xml":"text/html",nt=yt(t.getSpecialElements(),ae.toLowerCase()),qe=nt?`<${ae}>${V}</${ae}>`:V,bt=i.parseFromString("xhtml"===Ue?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${qe}</body></html>`:`<body>${qe}</body>`,Me).body;return a(bt,Me),nt?bt.firstChild:bt})(y,k,h.format);wu(t,N);const P=new Rr(k,11);W0(P,N,t.getSpecialElements()),N.innerHTML="";const[L,U]=((V,ae,Ue,Me)=>{const nt=Ue.validate,qe=ae.getNonEmptyElements(),ht=ae.getWhitespaceElements(),bt=H0(U0("script,style,head,html,body,title,meta,param"),ae.getBlockElements()),Ge=Hm(ae),tt=/[ \t\r\n]+/g,ut=/^[ \t\r\n]+/,W=/[ \t\r\n]+$/,K=Ce=>{let Se=Ce.parent;for(;z(Se);){if(Se.name in ht)return!0;Se=Se.parent}return!1},be=Ce=>Ce.name in bt||Au(ae,Ce),Te=(Ce,Se)=>!z(Se?Ce.prev:Ce.next)&&!Ve(Ce.parent)&&be(Ce.parent)&&(Ce.parent!==V||!0===Me.isRootContent);return[Ce=>{var Se,et,Ke;if(3===Ce.type&&!K(Ce)){let je=null!==(Se=Ce.value)&&void 0!==Se?Se:"";je=je.replace(tt," "),Ke=be,(z(et=Ce.prev)&&(Ke(et)||"br"===et.name)||Te(Ce,!0))&&(je=je.replace(ut,"")),0===je.length?Ce.remove():Ce.value=je}},Ce=>{var Se,Ke,ft;if(1===Ce.type){const je=ae.getElementRule(Ce.name);if(nt&&je){const et=Wl(ae,qe,ht,Ce);je.paddInEmptyBlock&&et&&(Ke=>{let ft=Ke;for(;z(ft);){if(ft.name in Ge)return Wl(ae,qe,ht,ft);ft=ft.parent}return!1})(Ce)?cp(Ue,Me,be,Ce):je.removeEmpty&&et?be(Ce)?Ce.remove():Ce.unwrap():je.paddEmpty&&(et||Ay(Ke=Ce,"#text")&&(null===(ft=null==Ke?void 0:Ke.firstChild)||void 0===ft?void 0:ft.value)===Bn)&&cp(Ue,Me,be,Ce)}}else if(3===Ce.type&&!K(Ce)){let je=null!==(Se=Ce.value)&&void 0!==Se?Se:"";(Ce.next&&be(Ce.next)||Te(Ce,!1))&&(je=je.replace(W,"")),0===je.length?Ce.remove():Ce.value=je}}]})(P,t,o,h),Z=[],de={nodes:{},attributes:{}},H=V=>xy(l(),f(),V,de);if(((V,ae,Ue)=>{const Me=[];for(let nt=V,qe=nt;nt;qe=nt,nt=nt.walk()){const ht=nt;Ae(ae,bt=>bt(ht)),Ve(ht.parent)&&ht!==V?nt=qe:Me.push(ht)}for(let nt=Me.length-1;nt>=0;nt--){const qe=Me[nt];Ae(Ue,ht=>ht(qe))}})(P,[L,H],[U,x?V=>{return Ue=Z,void(Ny(t,ae=V)&&Ue.push(ae));var ae,Ue}:We]),Z.reverse(),x&&Z.length>0)if(h.context){const{pass:V,fail:ae}=Qr(Z,Ue=>Ue.parent===P);up(ae,t,P,H),h.invalid=V.length>0}else up(Z,t,P,H);const X=((V,ae)=>{var Ue;const Me=null!==(Ue=ae.forced_root_block)&&void 0!==Ue?Ue:V.forced_root_block;return!1===Me?"":!0===Me?"p":Me})(o,h);return X&&("body"===P.name||h.isRootContent)&&((V,ae)=>{const Ue=H0(U0("script,style,head,html,body,title,meta,param"),t.getBlockElements()),Me=/^[ \t\r\n]+/,nt=/[ \t\r\n]+$/;let qe=V.firstChild,ht=null;const bt=Ge=>{var tt,ut;Ge&&(qe=Ge.firstChild,qe&&3===qe.type&&(qe.value=null===(tt=qe.value)||void 0===tt?void 0:tt.replace(Me,"")),qe=Ge.lastChild,qe&&3===qe.type&&(qe.value=null===(ut=qe.value)||void 0===ut?void 0:ut.replace(nt,"")))};if(t.isValidChild(V.name,ae.toLowerCase())){for(;qe;){const Ge=qe.next;v(Ue,qe)?(ht||(ht=new Rr(ae,1),ht.attr(o.forced_root_block_attrs),V.insert(ht,qe)),ht.append(qe)):(bt(ht),ht=null),qe=Ge}bt(ht)}})(P,X),h.invalid||ky(de,h),P}};return((e,t)=>{const n=e.schema;t.remove_trailing_brs&&C0(t,e,n),e.addAttributeFilter("href",o=>{let i=o.length;const a=s=>{const l=s?xe.trim(s):"";return/\b(noopener)\b/g.test(l)?l:l.split(" ").filter(u=>u.length>0).concat(["noopener"]).sort().join(" ")};if(!t.allow_unsafe_link_target)for(;i--;){const s=o[i];"a"===s.name&&"_blank"===s.attr("target")&&s.attr("rel",a(s.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",o=>{let i,a,s,l,c=o.length;for(;c--;)if(l=o[c],"a"===l.name&&l.firstChild&&!l.attr("href"))for(s=l.parent,i=l.lastChild;i&&s;)a=i.prev,s.insert(i,l),i=a}),t.fix_list_elements&&e.addNodeFilter("ul,ol",o=>{let i,a,s=o.length;for(;s--;)if(i=o[s],a=i.parent,a&&("ul"===a.name||"ol"===a.name))if(i.prev&&"li"===i.prev.name)i.prev.append(i);else{const l=new Rr("li",1);l.attr("style","list-style-type: none"),i.wrap(l)}});const r=n.getValidClasses();t.validate&&r&&e.addAttributeFilter("class",o=>{var i;let a=o.length;for(;a--;){const s=o[a],l=null!==(i=s.attr("class"))&&void 0!==i?i:"",c=xe.explode(l," ");let u="";for(let f=0;f<c.length;f++){const g=c[f];let v=!1,m=r["*"];m&&m[g]&&(v=!0),m=r[s.name],!v&&m&&m[g]&&(v=!0),v&&(u&&(u+=" "),u+=g)}u.length||(u=null),s.attr("class",u)}}),((o,i)=>{const{blob_cache:a}=i;if(a){const s=l=>{const c=l.attr("src");var u;(u=l).attr("src")===J.transparentSrc||z(u.attr("data-mce-placeholder"))||(u=>z(u.attr("data-mce-bogus")))(l)||Ve(c)||x0(a,c,!0).each(u=>{l.attr("src",u.blobUri())})};o.addAttributeFilter("src",l=>Ae(l,s))}})(e,t)})(m,o),(h=o).inline_styles&&((e,t,n)=>{var r;const o=Mu();var i,a,s;t.convert_fonts_to_spans&&(i=e,a=o,s=xe.explode(null!==(r=t.font_size_legacy_values)&&void 0!==r?r:""),i.addNodeFilter("font",l=>{Ae(l,c=>{const u=a.parse(c.attr("style")),f=c.attr("color"),g=c.attr("face"),v=c.attr("size");var m;f&&(u.color=f),g&&(u["font-family"]=g),v&&Ni(v).each(m=>{u["font-size"]=s[m-1]}),c.name="span",c.attr("style",a.serialize(u)),m=c,Ae(["color","face","size"],h=>{m.attr(h,null)})})})),((i,a,s)=>{i.addNodeFilter("strike",l=>{const c="html4"!==a.type;Ae(l,u=>{if(c)u.name="s";else{const f=s.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",s.serialize(f))}})})})(e,n,o)})(m,h,t),m;var h},q0=(e,t,n)=>{const r=cd(i=e)?fa({validate:!1}).serialize(i):i,o=t(r);var i;if(o.isDefaultPrevented())return o;if(cd(e)){if(o.content!==r){const i=Fs({validate:!1,forced_root_block:!1,sanitize:n}).parse(o.content,{context:e.name});return Wt(rt({},o),{content:i})}return Wt(rt({},o),{content:e})}return o},z0=(e,t)=>{if(t.no_events)return Tr.value(t);{const n=e.dispatch("BeforeGetContent",t);return n.isDefaultPrevented()?Tr.error($v(e,rt({content:""},n)).content):Tr.value(n)}},V0=(e,t,n)=>n.no_events?t:q0(t,o=>$v(e,Wt(rt({},n),{content:o})),ef(e)).content,Fp=(e,t)=>{if(t.no_events)return Tr.value(t);{const n=q0(t.content,r=>{return o=e,i=Wt(rt({},t),{content:r}),o.dispatch("BeforeSetContent",i);var o,i},ef(e));return n.isDefaultPrevented()?(Kv(e,n),Tr.error(void 0)):Tr.value(n)}},Up=(e,t,n)=>{n.no_events||Kv(e,Wt(rt({},n),{content:t}))},Hp=(e,t,n)=>({element:e,width:t,rows:n}),G0=(e,t)=>({element:e,cells:t}),hA=(e,t)=>({x:e,y:t}),K0=(e,t)=>Bo(e,t).bind(Ni).getOr(1),vA=(e,t,n)=>{const r=e.rows;return!!(r[n]?r[n].cells:[])[t]},$0=e=>yn(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),Y0=(e,t)=>{const n=e.rows;for(let r=0;r<n.length;r++){const o=n[r].cells;for(let i=0;i<o.length;i++)if(Rt(o[i],t))return T.some(hA(i,r))}return T.none()},X0=(e,t,n,r,o)=>{const i=[],a=e.rows;for(let s=n;s<=o;s++){const l=a[s].cells,c=t<r?l.slice(t,r+1):l.slice(r,t+1);i.push(G0(a[s].element,c))}return i},bA=e=>((t,n)=>{const r=Ua(t.element),o=ge("tbody");return It(o,n),Ze(r,o),r})(e,wt(e.rows,n=>{const r=wt(n.cells,i=>{const a=eh(i);return Mn(a,"colspan"),Mn(a,"rowspan"),a}),o=Ua(n.element);return It(o,r),o})),Q0=()=>Tf([]),vd=(e,t)=>t>=0&&t<e.length&&Os(e.charAt(t)),J0=e=>Li(e.innerText),Z0=e=>$e(e)?e.outerHTML:Ie(e)?ia.encodeRaw(e.data,!1):ta(e)?"\x3c!--"+e.data+"--\x3e":"",EA=zr(()=>document.implementation.createHTMLDocument("undo")),bd=e=>{const t=(n=e.getBody(),gt(wt(gn(n.childNodes),Z0),i=>i.length>0));var n;const r=pn(t,i=>{const a=Pb(e.serializer,i);return a.length>0?[a]:[]}),o=r.join("");return-1!==o.indexOf("</iframe>")?{type:"fragmented",fragments:r,content:"",bookmark:null,beforeBookmark:null}:(i=>({type:"complete",fragments:null,content:i,bookmark:null,beforeBookmark:null}))(o)},Wp=(e,t,n)=>{const r=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?((e,t)=>{((n,r)=>{let o=0;Ae(n,i=>{var a,s;0===i[0]?o++:1===i[0]?(((a,s,l)=>{const c=(u=>{let f;const g=document.createElement("div"),v=document.createDocumentFragment();for(u&&(g.innerHTML=u);f=g.firstChild;)v.appendChild(f);return v})(s);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(c,a.childNodes[l]):a.appendChild(c)})(r,i[1],o),o++):2===i[0]&&(s=o,(a=r).hasChildNodes()&&s<a.childNodes.length&&a.removeChild(a.childNodes[s]))})})(((n,r)=>{const o=n.length+r.length+2,i=new Array(o),a=new Array(o),s=(f,g,v,m,y)=>{const h=c(f,g,v,m);if(null===h||h.start===g&&h.diag===g-m||h.end===f&&h.diag===f-v){let S=f,x=v;for(;S<g||x<m;)S<g&&x<m&&n[S]===r[x]?(y.push([0,n[S]]),++S,++x):g-f>m-v?(y.push([2,n[S]]),++S):(y.push([1,r[x]]),++x)}else{s(f,h.start,v,h.start-h.diag,y);for(let S=h.start;S<h.end;++S)y.push([0,n[S]]);s(h.end,g,h.end-h.diag,m,y)}},l=(f,g,v,m)=>{let y=f;for(;y-g<m&&y<v&&n[y]===r[y-g];)++y;return{start:f,end:y,diag:g}},c=(f,g,v,m)=>{const y=g-f,h=m-v;if(0===y||0===h)return null;const S=y-h,x=h+y,k=(x%2==0?x:x+1)/2;let N,P,L,U,Z;for(i[1+k]=f,a[1+k]=g+1,N=0;N<=k;++N){for(P=-N;P<=N;P+=2){for(L=P+k,i[L]=P===-N||P!==N&&i[L-1]<i[L+1]?i[L+1]:i[L-1]+1,U=i[L],Z=U-f+v-P;U<g&&Z<m&&n[U]===r[Z];)i[L]=++U,++Z;if(S%2!=0&&S-N<=P&&P<=S+N&&a[L-S]<=i[L])return l(a[L-S],P+f-v,g,m)}for(P=S-N;P<=S+N;P+=2){for(L=P+k-S,a[L]=P===S-N||P!==S+N&&a[L+1]<=a[L-1]?a[L+1]-1:a[L-1],U=a[L]-1,Z=U-f+v-P;U>=f&&Z>=v&&n[U]===r[Z];)a[L]=U--,Z--;if(S%2==0&&-N<=P&&P<=N&&a[L]<=i[L+S])return l(a[L],P+f-v,g,m)}}return null},u=[];return s(0,n.length,0,r.length,u),u})(wt(gn(t.childNodes),Z0),e),t)})(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!z(r)||!hv(r)||!r.isFakeCaret}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},qp=e=>"fragmented"===e.type?e.fragments.join(""):e.content,eC=e=>{const t=ge("body",EA());return Ln(t,qp(e)),Ae(sr(t,"*[data-mce-bogus]"),Dt),Rn(t)},zp=(e,t)=>{return!(!e||!t)&&(r=t,!(qp(e)!==qp(r))||((n,r)=>eC(n)===eC(r))(e,t));var r},Vp=e=>0===e.get(),yd=(e,t,n)=>{Vp(n)&&(e.typing=t)},tC=(e,t)=>{e.typing&&(yd(e,!1,t),e.add())},nC=e=>({init:{bindEvents:We},undoManager:{beforeChange:(t,n)=>{return r=e,i=n,void(Vp(t)&&i.set($u(r.selection)));var r,i},add:(t,n,r,o,i,a)=>((s,l,c,u,f,g,v)=>{const m=bd(s),y=xe.extend(g||{},m);if(!Vp(u)||s.removed)return null;const h=l.data[c.get()];if(s.dispatch("BeforeAddUndo",{level:y,lastLevel:h,originalEvent:v}).isDefaultPrevented()||h&&zp(h,y))return null;l.data[c.get()]&&f.get().each(k=>{l.data[c.get()].beforeBookmark=k});const S=Ax(s);if(S&&l.data.length>S){for(let k=0;k<l.data.length-1;k++)l.data[k]=l.data[k+1];l.data.length--,c.set(l.data.length)}y.bookmark=$u(s.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(y),c.set(l.data.length-1);const x={level:y,lastLevel:h,originalEvent:v};return c.get()>0?(s.setDirty(!0),s.dispatch("AddUndo",x),s.dispatch("change",x)):s.dispatch("AddUndo",x),y})(e,t,n,r,o,i,a),undo:(t,n,r)=>((o,i,a,s)=>{let l;return i.typing&&(i.add(),i.typing=!1,yd(i,!1,a)),s.get()>0&&(s.set(s.get()-1),l=i.data[s.get()],Wp(o,l,!0),o.setDirty(!0),o.dispatch("Undo",{level:l})),l})(e,t,n,r),redo:(t,n)=>((r,o,i)=>{let a;return o.get()<i.length-1&&(o.set(o.get()+1),a=i[o.get()],Wp(r,a,!1),r.setDirty(!0),r.dispatch("Redo",{level:a})),a})(e,t,n),clear:(t,n)=>{return r=e,i=n,(o=t).data=[],i.set(0),o.typing=!1,void r.dispatch("ClearUndos");var r,o,i},reset:t=>{return(n=t).clear(),void n.add();var n},hasUndo:(t,n)=>{return r=e,o=t,n.get()>0||o.typing&&o.data[0]&&!zp(bd(r),o.data[0]);var r,o},hasRedo:(t,n)=>{return r=t,n.get()<r.data.length-1&&!r.typing;var r},transact:(t,n,r)=>{return a=r,tC(o=t,n),o.beforeChange(),o.ignore(a),o.add();var o,a},ignore:(t,n)=>((r,o)=>{try{r.set(r.get()+1),o()}finally{r.set(r.get()-1)}})(t,n),extra:(t,n,r,o)=>((i,a,s,l,c)=>{if(a.transact(l)){const u=a.data[s.get()].bookmark,f=a.data[s.get()-1];Wp(i,f,!0),a.transact(c)&&(a.data[s.get()-1].beforeBookmark=u)}})(e,t,n,r,o)},formatter:{match:(t,n,r,o)=>yp(e,t,n,r,o),matchAll:(t,n)=>((r,o,i)=>{const a=[],s={},l=r.selection.getStart();return r.dom.getParent(l,c=>{for(let u=0;u<o.length;u++){const f=o[u];!s[f]&&mi(r,c,f,i)&&(s[f]=!0,a.push(f))}},r.dom.getRoot()),a})(e,t,n),matchNode:(t,n,r,o)=>mi(e,t,n,r,o),canApply:t=>((n,r)=>{const o=n.formatter.get(r),i=n.dom;if(o&&n.selection.isEditable()){const a=n.selection.getStart(),s=$c(i,a);for(let l=o.length-1;l>=0;l--){const c=o[l];if(!lo(c))return!0;for(let u=s.length-1;u>=0;u--)if(i.is(s[u],c.selector))return!0}}return!1})(e,t),closest:t=>((n,r)=>{const o=i=>Rt(i,I(n.getBody()));return T.from(n.selection.getStart(!0)).bind(i=>hp(I(i),a=>kn(r,s=>{return mi(n,a.dom,c=s)?T.some(c):T.none();var c}),o)).getOrNull()})(e,t),apply:(t,n,r)=>f0(e,t,n,r),remove:(t,n,r,o)=>c0(e,t,n,r,o),toggle:(t,n,r)=>((o,i,a,s)=>{const l=o.formatter.get(i);l&&(!yp(o,i,a,s)||"toggle"in l[0]&&!l[0].toggle?f0(o,i,a,s):c0(o,i,a,s))})(e,t,n,r),formatChanged:(t,n,r,o,i)=>{return((g,v,m,y,h,S)=>{const x=v.get();Ae(m.split(","),k=>{const N=Ut(x,k).getOrThunk(()=>{const L={withSimilar:{state:jn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:jn(!1),similar:!1,callbacks:[]},withVars:[]};return x[k]=L,L}),P=()=>{const L=h0(g);return m0(g,L,k,h,S).isSome()};if(Je(S)){const L=h?N.withSimilar:N.withoutSimilar;L.callbacks.push(y),1===L.callbacks.length&&L.state.set(P())}else N.withVars.push({state:jn(P()),similar:h,vars:S,callback:y})}),v.set(x)})(e,s=t,l=n,c=r,o,i),{unbind:()=>((g,v,m)=>{const y=g.get();Ae(v.split(","),h=>Ut(y,h).each(S=>{y[h]={withSimilar:Wt(rt({},S.withSimilar),{callbacks:gt(S.withSimilar.callbacks,x=>x!==m)}),withoutSimilar:Wt(rt({},S.withoutSimilar),{callbacks:gt(S.withoutSimilar.callbacks,x=>x!==m)}),withVars:gt(S.withVars,x=>x.callback!==m)}})),g.set(y)})(s,l,c)};var s,l,c}},editor:{getContent:t=>{return r=t,T.from((n=e).getBody()).fold(Fe("tree"===r.format?new Rr("body",11):""),o=>((e,t,n)=>{let r;return r="raw"===t.format?xe.trim(rT(e.serializer,n.innerHTML)):"text"===t.format?((o,i)=>{const a=o.getDoc(),s=en(I(o.getBody())),l=ge("div",a);Tn(l,"data-mce-bogus","all"),ea(l,{position:"fixed",left:"-9999999px",top:"0"}),Ln(l,i.innerHTML),Ob(l),Db(l);const c=So(f=s)?f:I(hr(f).dom.body);var f;Ze(c,l);const u=Li(l.dom.innerText);return st(l),u})(e,n):"tree"===t.format?e.serializer.serialize(n,t):((o,i)=>{const a=Ar(o),s=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return i.replace(s,"")})(e,e.serializer.serialize(n,t)),"text"!==t.format&&!Cc(I(n))&&D(r)?xe.trim(r):r})(n,r,o));var n,r},setContent:(t,n)=>{return o=t,i=n,T.from((r=e).getBody()).map(a=>cd(o)?((s,l,c,u)=>{Ty(s.parser.getNodeFilters(),s.parser.getAttributeFilters(),c);const f=fa({validate:!1},s.schema).serialize(c),g=Cc(I(l))?f:xe.trim(f);return mp(s,g,u.no_selection),{content:c,html:g}})(r,a,o,i):((s,l,c,u)=>{if(0===c.length||/^\s+$/.test(c)){const f='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+f+"</li>");const g=Ar(s);return s.schema.isValidChild(l.nodeName.toLowerCase(),g.toLowerCase())?(c=f,c=s.dom.createHTML(g,_l(s),c)):c||(c=f),mp(s,c,u.no_selection),{content:c,html:c}}{"raw"!==u.format&&(c=fa({validate:!1},s.schema).serialize(s.parser.parse(c,{isRootContent:!0,insert:!0})));const f=Cc(I(l))?c:xe.trim(c);return mp(s,f,u.no_selection),{content:f,html:f}}})(r,a,o,i)).getOr({content:o,html:cd(i.content)?"":i.content});var r,o,i},insertContent:(t,n)=>OT(e,t,n),addVisual:t=>((n,r)=>{const o=n.dom,i=z(r)?r:n.getBody();Ae(o.select("table,a",i),a=>{switch(a.nodeName){case"TABLE":const s=Mx(n),l=o.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?o.removeClass(a,s):o.addClass(a,s);break;case"A":if(!o.getAttrib(a,"href")){const c=o.getAttrib(a,"name")||a.id,u=Vh(n);c&&n.hasVisual?o.addClass(a,u):o.removeClass(a,u)}}}),n.dispatch("VisualAid",{element:r,hasVisual:n.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((r,o,i={})=>{const a=(l=o,Wt(rt({},i),{format:l,get:!0,selection:!0,getInner:!0}));var l;return z0(r,a).fold(Ct,s=>{const l=((c,u)=>{if("text"===u.format)return T.from((f=c).selection.getRng()).map(g=>{var v;const m=T.from(f.dom.getParent(g.commonAncestorContainer,f.dom.isBlock)),y=f.getBody(),h=m.map(L=>L.nodeName).getOr("div").toLowerCase(),S=I(g.cloneContents());Ob(S),Db(S);const x=f.dom.add(y,h,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},S.dom),k=J0(x),N=Li(null!==(v=x.textContent)&&void 0!==v?v:"");if(f.dom.remove(x),vd(N,0)||vd(N,N.length-1)){const P=m.getOr(y),L=J0(P),U=L.indexOf(k);return-1===U?k:(vd(L,U-1)?" ":"")+k+(vd(L,U+k.length)?" ":"")}return k}).getOr("");var f;{const f=((g,v)=>{const m=g.selection.getRng(),y=g.dom.create("body"),h=g.selection.getSel(),S=Uf(g,ff(h)),x=v.contextual?((e,t)=>{const n=wv(t,e);return n.length>0?((e,t)=>{return(n=e,r=t[0],Zi(r,"table",ye(Rt,n))).bind(n=>{const r=t[0],o=t[t.length-1],i=(a=>{const s=Hp(Ua(a),0,[]);return Ae(sr(a,"tr"),(l,c)=>{Ae(sr(l,"td,th"),(u,f)=>{((g,v,m,y,h)=>{const S=K0(h,"rowspan"),x=K0(h,"colspan"),k=g.rows;for(let N=m;N<m+S;N++){k[N]||(k[N]=G0(eh(y),[]));for(let P=v;P<v+x;P++)k[N].cells[P]=N===m&&P===v?h:Ua(h)}})(s,((g,v,m)=>{for(;vA(g,v,m);)v++;return v})(s,f,c),c,l,u)})}),Hp(s.element,$0(s.rows),s.rows)})(n);return(a=i,s=r,l=o,Y0(a,s).bind(c=>Y0(a,l).map(u=>((f,g,v)=>{const m=g.x,y=g.y,h=v.x,S=v.y,x=y<S?X0(f,m,y,h,S):X0(f,m,S,h,y);return Hp(f.element,$0(x),x)})(a,c,u)))).map(a=>Tf([bA(a)]));var a,s,l}).getOrThunk(Q0);var n,r})(e,n):(r=e,(o=t).length>0&&o[0].collapsed?Q0():(i=r,((s,l)=>{const c=yn(l,(u,f)=>(Ze(f,u),f),s);return l.length>0?Tf([c]):c})(I((a=o[0]).cloneContents()),((e,t)=>{const n=I(t.commonAncestorContainer),r=Fi(n,e),o=gt(r,o1),i=(l=t,rn(s=r,c=>"li"===zt(c)&&gf(c,l)).fold(Fe([]),c=>{return(u=s,rn(u,f=>"ul"===zt(f)||"ol"===zt(f))).map(u=>{const f=ge(zt(u)),g=_r(ke(u),(v,m)=>Sn(m,"list-style"));return ea(f,g),[ge("li"),f]}).getOr([]);var u})),a=o.concat(i.length?i:(s=>ll(s)?Vt(s).filter(bu).fold(Fe([]),l=>[s,l]):bu(s)?[s]:[])(n));var s,l;return wt(a,Ua)})(i,a))));var r,o,i,a})(I(g.getBody()),S).dom:m.cloneContents();return x&&y.appendChild(x),g.selection.serializer.serialize(y,v)})(c,u);return"tree"===u.format?f:c.selection.isCollapsed()?"":f}})(r,s);return V0(r,l,s)})})(e,t,n)},autocompleter:{addDecoration:t=>((e,t)=>{if(Ab(I(e.getBody())).isNone()){const r=Oe('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Ze(r,I(t.extractContents())),t.insertNode(r.dom),Vt(r).each(o=>o.dom.normalize()),(n=r,((o,i)=>{const a=s=>{const l=cn(s);for(let c=l.length-1;c>=0;c--){const u=l[c];if(i(u))return T.some(u);const f=a(u);if(f.isSome())return f}return T.none()};return a(o)})(n,kb)).map(o=>{var i;e.selection.setCursorLocation(o.dom,"img"===zt(i=o)?1:bm(i).fold(()=>cn(i).length,a=>a.length))})}var n})(e,t),removeDecoration:()=>{return t=e,n=I(e.getBody()),Ab(n).each(r=>{const o=t.selection.getBookmark();Dt(r),t.selection.moveToBookmark(o)});var t,n}},raw:{getModel:()=>T.none()}}),vi=e=>yt(e.plugins,"rtc"),Gp=e=>e.rtcInstance?e.rtcInstance:nC(e),vn=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},rC=e=>vn(e).init.bindEvents(),oC=e=>0===e.dom.length?(st(e),T.none()):T.some(e),iC=(e,t,n,r)=>{e.bind(o=>((r?Xf:id)(o.dom,r?o.dom.length:0),t.filter(rr).map(i=>((a,s,l,c)=>{const u=a.dom,f=s.dom,g=c?u.length:f.length;c?(Qf(u,f,!1,!c),l.setStart(f,g)):(Qf(f,u,!1,!c),l.setEnd(f,g))})(o,i,n,r)))).orThunk(()=>{return(i=t,a=r,i.filter(s=>Ml.isBookmarkNode(s.dom)).bind(a?jo:or)).or(t).filter(rr).map(i=>((a,s)=>{Vt(a).each(l=>{const c=a.dom;s&&Fl(l,he(c,0))?id(c,0):!s&&Ul(l,he(c,c.length))&&Xf(c,c.length)})})(i,r));var i,a})},aC=(e,t,n)=>{if(yt(e,t)){const r=gt(e[t],o=>o!==n);0===r.length?delete e[t]:e[t]=r}},sC=e=>!(!e||!e.ownerDocument)&&Yn(I(e.ownerDocument),I(e)),lC=(e,t,n,r)=>{let o,i;const{selectorChangedWithUnbind:a}=((h,S)=>{let x,k;const N=(L,U)=>rn(U,Z=>h.is(Z,L)),P=L=>h.getParents(L,void 0,h.getRoot());return{selectorChangedWithUnbind:(L,U)=>(x||(x={},k={},S.on("NodeChange",Z=>{const ve=Z.element,de=P(ve),H={};qt(x,(X,V)=>{N(V,de).each(ae=>{k[V]||(Ae(X,Ue=>{Ue(!0,{node:ae,selector:V,parents:de})}),k[V]=X),H[V]=X})}),qt(k,(X,V)=>{H[V]||(delete k[V],Ae(X,ae=>{ae(!1,{node:ve,selector:V,parents:de})}))})})),x[L]||(x[L]=[]),x[L].push(U),N(L,P(S.selection.getStart())).each(()=>{k[L]=x[L]}),{unbind:()=>{aC(x,L,U),aC(k,L,U)}})}})(e,r),s=(h,S)=>((x,k,N={})=>{const P=(U=k,Wt(rt({format:"html"},N),{set:!0,selection:!0,content:U}));var U;Fp(x,P).each(L=>{const U=((ve,de)=>{if("raw"!==de.format){const H=ve.selection.getRng(),X=ve.dom.getParent(H.commonAncestorContainer,ve.dom.isBlock),V=X?{context:X.nodeName.toLowerCase()}:{},ae=ve.parser.parse(de.content,rt(rt({forced_root_block:!1},V),de));return fa({validate:!1},ve.schema).serialize(ae)}return de.content})(x,L),Z=x.selection.getRng();((ve,de)=>{const H=T.from(de.firstChild).map(I),X=T.from(de.lastChild).map(I);ve.deleteContents(),ve.insertNode(de);const V=H.bind(or).filter(rr).bind(oC),ae=X.bind(jo).filter(rr).bind(oC);iC(V,H,ve,!0),iC(ae,X,ve,!1),ve.collapse(!1)})(Z,Z.createContextualFragment(U)),x.selection.setRng(Z),Ll(x,Z),Up(x,U,L)})})(r,h,S),l=h=>{const S=u();S.collapse(!!h),f(S)},c=()=>t.getSelection?t.getSelection():t.document.selection,u=()=>{let h;const S=(k,N,P)=>{try{return N.compareBoundaryPoints(k,P)}catch(L){return-1}},x=t.document;if(z(r.bookmark)&&!Qa(r)){const k=Mf(r);if(k.isSome())return k.map(N=>Uf(r,[N])[0]).getOr(x.createRange())}try{const k=c();k&&!mc(k.anchorNode)&&(h=k.rangeCount>0?k.getRangeAt(0):x.createRange(),h=Uf(r,[h])[0])}catch(k){}if(h||(h=x.createRange()),sl(h.startContainer)&&h.collapsed){const k=e.getRoot();h.setStart(k,0),h.setEnd(k,0)}return o&&i&&(0===S(h.START_TO_START,h,o)&&0===S(h.END_TO_END,h,o)?h=i:(o=null,i=null)),h},f=(h,S)=>{if(!((k=h)&&sC(k.startContainer)&&sC(k.endContainer)))return;var k;const x=c();if(h=r.dispatch("SetSelectionRange",{range:h,forward:S}).range,x){i=h;try{x.removeAllRanges(),x.addRange(h)}catch(k){}!1===S&&x.extend&&(x.collapse(h.endContainer,h.endOffset),x.extend(h.startContainer,h.startOffset)),o=x.rangeCount>0?x.getRangeAt(0):null}if(!h.collapsed&&h.startContainer===h.endContainer&&(null==x?void 0:x.setBaseAndExtent)&&h.endOffset-h.startOffset<2&&h.startContainer.hasChildNodes()){const k=h.startContainer.childNodes[h.startOffset];k&&"IMG"===k.nodeName&&(x.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),x.anchorNode===h.startContainer&&x.focusNode===h.endContainer||x.setBaseAndExtent(k,0,k,1))}r.dispatch("AfterSetSelectionRange",{range:h,forward:S})},g=()=>{const h=c(),S=null==h?void 0:h.anchorNode,x=null==h?void 0:h.focusNode;if(!h||!S||!x||mc(S)||mc(x))return!0;const k=e.createRng(),N=e.createRng();try{k.setStart(S,h.anchorOffset),k.collapse(!0),N.setStart(x,h.focusOffset),N.collapse(!0)}catch(P){return!0}return k.compareBoundaryPoints(k.START_TO_START,N)<=0},v={dom:e,win:t,serializer:n,editor:r,expand:(h={type:"word"})=>f(Xa(e).expand(u(),h)),collapse:l,setCursorLocation:(h,S)=>{const x=e.createRng();z(h)&&z(S)?(x.setStart(h,S),x.setEnd(h,S),f(x),l(!1)):(mf(e,x,r.getBody(),!0),f(x))},getContent:h=>((S,x={})=>{return N=x.format?x.format:"html",P=x,vn(S).selection.getContent(N,P);var N,P})(r,h),setContent:s,getBookmark:(h,S)=>m.getBookmark(h,S),moveToBookmark:h=>m.moveToBookmark(h),select:(h,S)=>{return(x=e,k=h,N=S,T.from(k).bind(P=>T.from(P.parentNode).map(L=>{const U=x.nodeIndex(P),Z=x.createRng();return Z.setStart(L,U),Z.setEnd(L,U+1),N&&(mf(x,Z,P,!0),mf(x,Z,P,!1)),Z}))).each(f),h;var x,k,N},isCollapsed:()=>{const h=u(),S=c();return!(!h||h.item)&&(h.compareEndPoints?0===h.compareEndPoints("StartToEnd",h):!S||h.collapsed)},isEditable:()=>{const h=u(),S=r.getBody().querySelectorAll('[data-mce-selected="1"]');return S.length>0?fr(S,x=>e.isEditable(x.parentElement)):h.startContainer===h.endContainer?e.isEditable(h.startContainer):e.isEditable(h.startContainer)&&e.isEditable(h.endContainer)},isForward:g,setNode:h=>(s(e.getOuterHTML(h)),h),getNode:()=>((h,S)=>{if(!S)return h;let x=S.startContainer,k=S.endContainer;const N=S.startOffset,P=S.endOffset;let L=S.commonAncestorContainer;S.collapsed||(x===k&&P-N<2&&x.hasChildNodes()&&(L=x.childNodes[N]),Ie(x)&&Ie(k)&&(x=x.length===N?xb(x.nextSibling,!0):x.parentNode,k=0===P?xb(k.previousSibling,!1):k.parentNode,x&&x===k&&(L=x)));const U=Ie(L)?L.parentNode:L;return $e(U)?U:h})(r.getBody(),u()),getSel:c,setRng:f,getRng:u,getStart:h=>Eb(r.getBody(),u(),h),getEnd:h=>wb(r.getBody(),u(),h),getSelectedBlocks:(h,S)=>((x,k,N,P)=>{const L=[],U=x.getRoot(),Z=x.getParent(N||Eb(U,k,k.collapsed),x.isBlock),ve=x.getParent(P||wb(U,k,k.collapsed),x.isBlock);if(Z&&Z!==U&&L.push(Z),Z&&ve&&Z!==ve){let de;const H=new Pn(Z,U);for(;(de=H.next())&&de!==ve;)x.isBlock(de)&&L.push(de)}return ve&&Z!==ve&&ve!==U&&L.push(ve),L})(e,u(),h,S),normalize:()=>{const h=u(),S=c();if(!(ff(S).length>1)&&Gc(r)){const x=Zc(e,h);return x.each(k=>{f(k,g())}),x.getOr(h)}return h},selectorChanged:(h,S)=>(a(h,S),v),selectorChangedWithUnbind:a,getScrollContainer:()=>{let h,S=e.getRoot();for(;S&&"BODY"!==S.nodeName;){if(S.scrollHeight>S.clientHeight){h=S;break}S=S.parentNode}return h},scrollIntoView:(h,S)=>{var x;z(h)?((x=r).inline?zk:Gk)(x,h,S):Ll(r,u(),S)},placeCaretAt:(h,S)=>f(nb(h,S,r.getDoc())),getBoundingClientRect:()=>{const h=u();return h.collapsed?he.fromRangeStart(h).getClientRects()[0]:h.getBoundingClientRect()},destroy:()=>{t=o=i=null,y.destroy()}},m=Ml(v),y=Qv(v,r);return v.bookmarkManager=m,v.controlSelection=y,v},wA=(e,t,n)=>{-1===xe.inArray(t,n)&&(e.addAttributeFilter(n,(r,o)=>{let i=r.length;for(;i--;)r[i].attr(o,null)}),t.push(n))},cC=(e,t)=>{const n=((e,t)=>{const n=["data-mce-selected"],r=rt({entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1},e),o=t&&t.dom?t.dom:Kt.DOM,i=t&&t.schema?t.schema:aa(r),a=Fs(r,i);return l=r,c=o,(s=a).addAttributeFilter("data-mce-tabindex",(u,f)=>{let g=u.length;for(;g--;){const v=u[g];v.attr("tabindex",v.attr("data-mce-tabindex")),v.attr(f,null)}}),s.addAttributeFilter("src,href,style",(u,f)=>{const g="data-mce-"+f,v=l.url_converter,m=l.url_converter_scope;let y=u.length;for(;y--;){const h=u[y];let S=h.attr(g);void 0!==S?(h.attr(f,S.length>0?S:null),h.attr(g,null)):(S=h.attr(f),"style"===f?S=c.serializeStyle(c.parseStyle(S),h.name):v&&(S=v.call(m,S,f,h.name)),h.attr(f,S.length>0?S:null))}}),s.addAttributeFilter("class",u=>{let f=u.length;for(;f--;){const g=u[f];let v=g.attr("class");v&&(v=v.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),g.attr("class",v.length>0?v:null))}}),s.addAttributeFilter("data-mce-type",(u,f,g)=>{let v=u.length;for(;v--;){const m=u[v];"bookmark"===m.attr("data-mce-type")&&!g.cleanup&&(T.from(m.firstChild).exists(h=>{var S;return!_c(null!==(S=h.value)&&void 0!==S?S:"")})?m.unwrap():m.remove())}}),s.addNodeFilter("noscript",u=>{var f;let g=u.length;for(;g--;){const v=u[g].firstChild;v&&(v.value=ia.decode(null!==(f=v.value)&&void 0!==f?f:""))}}),s.addNodeFilter("script,style",(u,f)=>{var g;const v=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let m=u.length;for(;m--;){const y=u[m],h=y.firstChild,S=null!==(g=null==h?void 0:h.value)&&void 0!==g?g:"";if("script"===f){const x=y.attr("type");x&&y.attr("type","mce-no/type"===x?null:x.replace(/^mce\-/,"")),"xhtml"===l.element_format&&h&&S.length>0&&(h.value="// <![CDATA[\n"+v(S)+"\n// ]]>")}else"xhtml"===l.element_format&&h&&S.length>0&&(h.value="\x3c!--\n"+v(S)+"\n--\x3e")}}),s.addNodeFilter("#comment",u=>{let f=u.length;for(;f--;){const g=u[f],v=g.value;l.preserve_cdata&&0===(null==v?void 0:v.indexOf("[CDATA["))?(g.name="#cdata",g.type=4,g.value=c.decode(v.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==v?void 0:v.indexOf("mce:protected "))&&(g.name="#text",g.type=3,g.raw=!0,g.value=unescape(v).substr(14))}}),s.addNodeFilter("xml:namespace,input",(u,f)=>{let g=u.length;for(;g--;){const v=u[g];7===v.type?v.remove():1===v.type&&("input"!==f||v.attr("type")||v.attr("type","text"))}}),s.addAttributeFilter("data-mce-type",u=>{Ae(u,f=>{"format-caret"===f.attr("data-mce-type")&&(f.isEmpty(s.schema.getNonEmptyElements())?f.remove():f.unwrap())})}),s.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(u,f)=>{let g=u.length;for(;g--;)u[g].attr(f,null)}),l.remove_trailing_brs&&C0(l,s,s.schema),{schema:i,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(s,l={})=>{const c=rt({format:"html"},l),u=(m=s,S=y=c,z(h=v=t)&&h.hasEventListeners("PreProcess")&&!S.no_events?((h,S,x)=>{let k;const N=h.dom;let P=S.cloneNode(!0);const L=document.implementation;if(L.createHTMLDocument){const U=L.createHTMLDocument("");xe.each("BODY"===P.nodeName?P.childNodes:[P],Z=>{U.body.appendChild(U.importNode(Z,!0))}),P="BODY"!==P.nodeName?U.body.firstChild:U.body,k=N.doc,N.doc=U}return U=h,Z=Wt(rt({},x),{node:P}),U.dispatch("PreProcess",Z),k&&(N.doc=k),P;var U,Z})(v,m,y):m),f=((v,m,y)=>{const h=Li(y.getInner?m.innerHTML:v.getOuterHTML(m));return y.selection||Cc(I(m))?h:xe.trim(h)})(o,u,c),g=((v,m,y)=>{const h=y.selection?rt({forced_root_block:!1},y):y,S=v.parse(m,h);return(x=>{const k=P=>"br"===(null==P?void 0:P.name),N=x.lastChild;if(k(N)){const P=N.prev;k(P)&&(N.remove(),P.remove())}})(S),S})(a,f,c);var v,m,y,h,S;return"tree"===c.format?g:((v,m,y,h,S)=>{var P;return((k,N,P)=>{return!N.no_events&&k?(U=k,Z=Wt(rt({},N),{content:P}),U.dispatch("PostProcess",Z)).content:P;var U,Z})(v,S,(P=h,fa(m,y).serialize(P)))})(t,r,i,g,c)},addRules:i.addValidElements,setRules:i.setValidElements,addTempAttr:ye(wA,a,n),getTempAttrs:Fe(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter};var s,l,c})(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Kp=(e,t,n={})=>{const r=(i=t,Wt(rt({format:"html"},n),{set:!0,content:i}));var i;return Fp(e,r).map(o=>{const i=(s=o.content,l=o,Gp(e).editor.setContent(s,l));var s,l;return Up(e,i.html,o),i.content}).getOr(t)},kA="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),TA="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),AA="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),dC=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],uC=(e,t)=>{const n=gt(t,r=>yt(e,r));return Ao(n)},fC=(e,t)=>{const n=xe.makeMap(e.plugins," "),r=gt(t,o=>yt(n,o));return Ao(r)},DA=e=>rn(dC,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),Cd=Kt.DOM,Sd=e=>T.from(e).each(t=>t.destroy()),_d=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>yt(e,t)}})(),Us=vr.ModelManager,pC=(e,t)=>t.dom[e],gC=(e,t)=>parseInt(ro(t,e),10),MA=ye(pC,"clientWidth"),IA=ye(pC,"clientHeight"),LA=ye(gC,"margin-top"),BA=ye(gC,"margin-left"),mC=e=>{const t=[],n=()=>{const l=e.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},r=()=>T.from(t[0]),o=()=>{Ae(t,l=>{l.reposition()})},i=l=>{Zo(t,c=>c===l).each(c=>{t.splice(c,1)})},a=(l,c=!0)=>{return e.removed||!(f=(u=e).inline?u.getBody():u.getContentAreaContainer(),T.from(f).map(I)).map(Uo).getOr(!1)?{}:(c&&e.dispatch("BeforeOpenNotification",{notification:l}),rn(t,u=>{return!((f=n().getArgs(u)).type!==(g=l).type||f.text!==g.text||f.progressBar||f.timeout||g.progressBar||g.timeout);var f,g}).getOrThunk(()=>{e.editorManager.setActive(e);const u=n().open(l,()=>{i(u),o(),r().fold(()=>e.focus(),f=>mb(I(f.getEl())))});return(f=>{t.push(f)})(u),o(),e.dispatch("OpenNotification",{notification:rt({},u)}),u}));var u,f},s=Fe(t);return(l=e).on("SkinLoaded",()=>{const c=hx(l);c&&a({text:c,type:"warning",timeout:0},!1),o()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(o)}),l.on("remove",()=>{Ae(t.slice(),c=>{n().close(c)})}),{open:a,close:()=>{r().each(l=>{n().close(l),i(l),o()})},getNotifications:s};var l},Hs=vr.PluginManager,os=vr.ThemeManager,hC=e=>{let t=[];const n=()=>{const a=e.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const s=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:s,openUrl:s,alert:s,confirm:s,close:s}})()},r=(a,s)=>(...l)=>s?s.apply(a,l):void 0,o=a=>{e.dispatch("CloseWindow",{dialog:a}),t=gt(t,s=>s!==a),0===t.length&&e.focus()},i=a=>{e.editorManager.setActive(e),Df(e),e.ui.show();const s=a();return t.push(l=s),e.dispatch("OpenWindow",{dialog:l}),s;var l};return e.on("remove",()=>{Ae(t,a=>{n().close(a)})}),{open:(a,s)=>i(()=>n().open(a,s,o)),openUrl:a=>i(()=>n().openUrl(a,o)),alert:(a,s,l)=>{const c=n();c.alert(a,r(l||c,s))},confirm:(a,s,l)=>{const c=n();c.confirm(a,r(l||c,s))},close:()=>{T.from(t[t.length-1]).each(a=>{n().close(a),o(a)})}}},vC=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Ed=(e,t)=>{e._skinLoaded?vC(e,t):e.on("SkinLoaded",()=>{vC(e,t)})},Gl=(e,t,n)=>{zv(e,t,{message:n}),console.error(n)},Kl=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,wd=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},bC=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",r=`content${e.editorManager.suffix}.css`;return wt(t,o=>/^[a-z0-9\-]+$/i.test(o)&&!e.inline?`${n}/${o}/${r}`:e.documentBaseURI.toAbsolute(o))},yC=()=>{let e={};const t=(r,o)=>({status:r,resultUri:o}),n=r=>r in e;return{hasBlobUri:n,getResultUri:r=>{const o=e[r];return o?o.resultUri:null},isPending:r=>!!n(r)&&1===e[r].status,isUploaded:r=>!!n(r)&&2===e[r].status,markPending:r=>{e[r]=t(1,null)},markUploaded:(r,o)=>{e[r]=t(2,o)},removeFailed:r=>{delete e[r]},destroy:()=>{e={}}}};let FA=0;const CC=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),SC=(e,t)=>((e,t)=>{const n={},r=(l,c)=>new Promise((u,f)=>{const g=new XMLHttpRequest;g.open("POST",t.url),g.withCredentials=t.credentials,g.upload.onprogress=m=>{c(m.loaded/m.total*100)},g.onerror=()=>{f("Image upload failed due to a XHR Transport error. Code: "+g.status)},g.onload=()=>{if(g.status<200||g.status>=300)return void f("HTTP Error: "+g.status);const m=JSON.parse(g.responseText);var y,h;m&&D(m.location)?u((h=m.location,(y=t.basePath)?y.replace(/\/$/,"")+"/"+h.replace(/^\//,""):h)):f("Invalid JSON: "+g.responseText)};const v=new FormData;v.append("file",l.blob(),l.filename()),g.send(v)}),o=me(t.handler)?t.handler:r,i=(l,c)=>({url:c,blobInfo:l,status:!0}),a=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),s=(l,c)=>{xe.each(n[l],u=>{u(c)}),delete n[l]};return{upload:(l,c)=>{return t.url||o!==r?(f=c,u=xe.grep(u=l,g=>!e.isUploaded(g.blobUri())),Promise.all(xe.map(u,g=>{return e.isPending(g.blobUri())?(v=>{const m=v.blobUri();return new Promise(y=>{n[m]=n[m]||[],n[m].push(y)})})(g):(m=o,y=f,e.markPending((v=g).blobUri()),new Promise(h=>{let S,x;try{const k=()=>{S&&(S.close(),x=We)},N=L=>{k(),e.markUploaded(v.blobUri(),L),s(v.blobUri(),i(v,L)),h(i(v,L))},P=L=>{k(),e.removeFailed(v.blobUri()),s(v.blobUri(),a(v,L)),h(a(v,L))};x=L=>{L<0||L>100||T.from(S).orThunk(()=>T.from(y).map(ln)).each(U=>{S=U,U.progressBar.value(L)})},m(v,x).then(N,L=>{P(D(L)?{message:L}:L)})}catch(k){h(a(v,k))}}));var v,m,y}))):new Promise(u=>{u([])});var u,f}}})(t,{url:rx(e),basePath:ox(e),credentials:ix(e),handler:ax(e)}),_C={remove_similar:!0,inherit:!1},Ws=rt({selector:"td,th"},_C),WA={tablecellbackgroundcolor:rt({styles:{backgroundColor:"%value"}},Ws),tablecellverticalalign:rt({styles:{"vertical-align":"%value"}},Ws),tablecellbordercolor:rt({styles:{borderColor:"%value"}},Ws),tablecellclass:rt({classes:["%value"]},Ws),tableclass:rt({selector:"table",classes:["%value"]},_C),tablecellborderstyle:rt({styles:{borderStyle:"%value"}},Ws),tablecellborderwidth:rt({styles:{borderWidth:"%value"}},Ws)},qA=Fe(WA),xd=xe.each,fo=Kt.DOM,$p=e=>z(e)&&ne(e),EC=(e,t)=>{const n=t&&t.schema||aa({}),r=a=>{const s=D(a)?{name:a,classes:[],attrs:{}}:a,l=fo.create(s.name);return c=l,(u=s).classes.length>0&&fo.addClass(c,u.classes.join(" ")),fo.setAttribs(c,u.attrs),l;var c,u},o=(a,s,l)=>{let c;const u=s[0],f=$p(u)?u.name:void 0,g=((y,h)=>{const S=n.getElementRule(y.nodeName.toLowerCase()),x=null==S?void 0:S.parentsRequired;return!(!x||!x.length)&&(h&&Pt(x,h)?h:x[0])})(a,f);if(g)f===g?(c=u,s=s.slice(1)):c=g;else if(u)c=u,s=s.slice(1);else if(!l)return a;const v=c?r(c):fo.create("div");v.appendChild(a),l&&xe.each(l,y=>{const h=r(y);v.insertBefore(h,a)});const m=$p(c)?c.siblings:void 0;return o(v,s,m)},i=fo.create("div");if(e.length>0){const a=e[0],s=r(a),l=$p(a)?a.siblings:void 0;i.appendChild(o(s,e.slice(1),l))}return i},zA=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=xe.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,o,i,a,s)=>{switch(o){case"#":n.attrs.id=i;break;case".":n.classes.push(i);break;case":":-1!==xe.inArray("checked disabled enabled read-only required".split(" "),i)&&(n.attrs[i]=i)}if("["===a){const l=s.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=t||"div",n},VA=(e,t)=>{let n="",r=Cx(e);if(""===r)return"";const o=v=>D(v)?v.replace(/%(\w+)/g,""):"",i=(v,m)=>fo.getStyle(null!=m?m:e.getBody(),v,!0);if(D(t)){const v=e.formatter.get(t);if(!v)return"";t=v[0]}if("preview"in t){const v=t.preview;if(!1===v)return"";r=v||r}let a,s=t.block||t.inline||"span";const l=D(c=t.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),xe.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),v=>{const m=xe.map(v.split(/(?:~\+|~|\+)/),zA),y=m.pop();return m.length&&(y.siblings=m),y}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=s),s=t.selector,a=EC(l,e)):a=EC([s],e);const u=fo.select(s,a)[0]||a.firstChild;xd(t.styles,(v,m)=>{const y=o(v);y&&fo.setStyle(u,m,y)}),xd(t.attributes,(v,m)=>{const y=o(v);y&&fo.setAttrib(u,m,y)}),xd(t.classes,v=>{const m=o(v);fo.hasClass(u,m)||fo.addClass(u,m)}),e.dispatch("PreviewFormats"),fo.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a);const f=i("fontSize"),g=/px$/.test(f)?parseInt(f,10):0;return xd(r.split(" "),v=>{let m=i(v,u);if(!("background-color"===v&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(m)&&(m=i(v),"#ffffff"===Vc(m).toLowerCase())||"color"===v&&"#000000"===Vc(m).toLowerCase())){if("font-size"===v&&/em|%$/.test(m)){if(0===g)return;m=parseFloat(m)/(/%$/.test(m)?100:1)*g+"px"}"border"===v&&m&&(n+="padding:0 2px;"),n+=v+":"+m+";"}}),e.dispatch("AfterPreviewFormats"),fo.remove(a),n},wC=e=>{const t=(r=>{const o={},i=(a,s)=>{a&&(D(a)?(fe(s)||(s=[s]),Ae(s,l=>{Je(l.deep)&&(l.deep=!lo(l)),Je(l.split)&&(l.split=!lo(l)||On(l)),Je(l.remove)&&lo(l)&&!On(l)&&(l.remove="none"),lo(l)&&On(l)&&(l.mixed=!0,l.block_expand=!0),D(l.classes)&&(l.classes=l.classes.split(/\s+/))}),o[a]=s):qt(a,(l,c)=>{i(c,l)}))};return i((a=>{const s=a.dom,l=a.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:u=>{s.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:u=>{s.setStyle(u,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const u={inline:"span",styles:{textDecoration:"line-through"},exact:!0},f={inline:"strike",remove:"all",preserve_attributes:["class","style"]},g={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[g,u,f]:[u,g,f]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(u,f,g)=>$e(u)&&u.hasAttribute("href"),onformat:(u,f,g)=>{xe.each(g,(v,m)=>{s.setAttrib(u,m,v)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":u=>{var f;return null!==(f=null==u?void 0:u.customValue)&&void 0!==f?f:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return xe.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),u=>{c[u]={block:u,remove:"all"}}),c})(r)),i(qA()),i(yx(r)),{get:a=>z(a)?o[a]:o,has:a=>yt(o,a),register:i,unregister:a=>(a&&o[a]&&delete o[a],o)}})(e),n=jn({});return(r=>{r.addShortcut("meta+b","","Bold"),r.addShortcut("meta+i","","Italic"),r.addShortcut("meta+u","","Underline");for(let o=1;o<=6;o++)r.addShortcut("access+"+o,"",["FormatBlock",!1,"h"+o]);r.addShortcut("access+7","",["FormatBlock",!1,"p"]),r.addShortcut("access+8","",["FormatBlock",!1,"div"]),r.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(r=e).on("mouseup keydown",o=>{var i;((a,s,l)=>{const c=a.selection,u=a.getBody();_p(a,null,l),8!==s&&46!==s||!c.isCollapsed()||"\ufeff"!==c.getStart().innerHTML||_p(a,Ga(u,c.getStart())),37!==s&&39!==s||_p(a,Ga(u,c.getStart()))})(r,o.keyCode,(i=r.selection.getRng().endContainer,Ie(i)&&Ai(i.data,Bn)))}),vi(e)||((r,o)=>{r.set({}),o.on("NodeChange",i=>{v0(o,i.element,r.get())}),o.on("FormatApply FormatRemove",i=>{const a=T.from(i.node).map(s=>Ol(s)?s:s.startContainer).bind(s=>$e(s)?T.some(s):T.from(s.parentElement)).getOrThunk(()=>g0(o));v0(o,a,r.get())})})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(r,o,i)=>{var s,l,c;s=r,l=o,c=i,vn(e).formatter.apply(s,l,c)},remove:(r,o,i,a)=>{var l,c,u,f;l=r,c=o,u=i,f=a,vn(e).formatter.remove(l,c,u,f)},toggle:(r,o,i)=>{var s,l,c;s=r,l=o,c=i,vn(e).formatter.toggle(s,l,c)},match:(r,o,i,a)=>{return l=r,c=o,u=i,f=a,vn(e).formatter.match(l,c,u,f);var l,c,u,f},closest:r=>{return i=r,vn(e).formatter.closest(i);var i},matchAll:(r,o)=>{return a=r,s=o,vn(e).formatter.matchAll(a,s);var a,s},matchNode:(r,o,i,a)=>{return l=r,c=o,u=i,f=a,vn(e).formatter.matchNode(l,c,u,f);var l,c,u,f},canApply:r=>{return i=r,vn(e).formatter.canApply(i);var i},formatChanged:(r,o,i,a)=>{return l=n,c=r,u=o,f=i,g=a,vn(e).formatter.formatChanged(l,c,u,f,g);var l,c,u,f,g},getCssText:ye(VA,e)};var r},xC=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},kC=e=>{const t=sa(),n=jn(0),r=jn(0),o={data:[],typing:!1,beforeChange:()=>{var a,s;a=n,s=t,vn(e).undoManager.beforeChange(a,s)},add:(i,a)=>{return l=o,c=r,u=n,f=t,g=i,v=a,vn(e).undoManager.add(l,c,u,f,g,v);var l,c,u,f,g,v},dispatchChange:()=>{e.setDirty(!0);const i=bd(e);i.bookmark=$u(e.selection),e.dispatch("change",{level:i,lastLevel:Mr(o.data,r.get()).getOrUndefined()})},undo:()=>{return a=o,s=n,l=r,vn(e).undoManager.undo(a,s,l);var a,s,l},redo:()=>{return a=r,s=o.data,vn(e).undoManager.redo(a,s);var a,s},clear:()=>{var a,s;a=o,s=r,vn(e).undoManager.clear(a,s)},reset:()=>{var a;a=o,vn(e).undoManager.reset(a)},hasUndo:()=>{return a=o,s=r,vn(e).undoManager.hasUndo(a,s);var a,s},hasRedo:()=>{return a=o,s=r,vn(e).undoManager.hasRedo(a,s);var a,s},transact:i=>{return s=o,l=n,c=i,vn(e).undoManager.transact(s,l,c);var s,l,c},ignore:i=>{var s,l;s=n,l=i,vn(e).undoManager.ignore(s,l)},extra:(i,a)=>{var l,c,u,f;l=o,c=r,u=i,f=a,vn(e).undoManager.extra(l,c,u,f)}};return vi(e)||((i,a,s)=>{const l=jn(!1),c=u=>{yd(a,!1,s),a.add({},u)};i.on("init",()=>{a.add()}),i.on("BeforeExecCommand",u=>{xC(u.command)||(tC(a,s),a.beforeChange())}),i.on("ExecCommand",u=>{xC(u.command)||c(u)}),i.on("ObjectResizeStart cut",()=>{a.beforeChange()}),i.on("SaveContent ObjectResized blur",c),i.on("dragend",c),i.on("keyup",u=>{const f=u.keyCode;if(u.isDefaultPrevented())return;const g=J.os.isMacOS()&&"Meta"===u.key;(f>=33&&f<=36||f>=37&&f<=40||45===f||u.ctrlKey||g)&&(c(),i.nodeChanged()),46!==f&&8!==f||i.nodeChanged(),l.get()&&a.typing&&!zp(bd(i),a.data[0])&&(i.isDirty()||i.setDirty(!0),i.dispatch("TypingUndo"),l.set(!1),i.nodeChanged())}),i.on("keydown",u=>{const f=u.keyCode;if(!u.isDefaultPrevented()){if(!(f>=33&&f<=36||f>=37&&f<=40||45===f))return!(f<16||f>20)||224===f||91===f||a.typing||u.ctrlKey&&!u.altKey||u.metaKey?void((J.os.isMacOS()?u.metaKey:u.ctrlKey&&!u.altKey)&&a.beforeChange()):(a.beforeChange(),yd(a,!0,s),a.add({},u),void l.set(!0));a.typing&&c(u)}}),i.on("mousedown",u=>{a.typing&&c(u)}),i.on("input",u=>{var f,g;u.inputType&&("insertReplacementText"===u.inputType||"insertText"===(f=u).inputType&&null===f.data||"insertFromPaste"===(g=u).inputType||"insertFromDrop"===g.inputType)&&c(u)}),i.on("AddUndo Undo Redo ClearUndos",u=>{u.isDefaultPrevented()||i.nodeChanged()})})(e,o,n),(i=e).addShortcut("meta+z","","Undo"),i.addShortcut("meta+y,meta+shift+z","","Redo"),o;var i},GA=[9,27,Qe.HOME,Qe.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Qe.DOWN,Qe.UP,Qe.LEFT,Qe.RIGHT].concat(J.browser.isFirefox()?[224]:[]),TC="data-mce-placeholder",AC=e=>"keydown"===e.type||"keyup"===e.type,NC=e=>{const t=e.keyCode;return t===Qe.BACKSPACE||t===Qe.DELETE},KA=(e,t)=>({from:e,to:t}),Yp=(e,t)=>{const n=I(e),r=I(t.container());return ad(n,r).map(o=>({block:o,position:t}))},RC=(e,t)=>wr(t,n=>cl(n)||zo(n.dom),n=>Rt(n,e)).filter(Dn).getOr(e),PC=e=>{const t=(n=>{const r=cn(n);return Zo(r,oo).fold(Fe(r),o=>r.slice(0,o))})(e);return Ae(t,st),t},OC=(e,t)=>{const n=Fi(t,e);return rn(n.reverse(),r=>En(r)).each(st)},$A=(e,t,n,r)=>{if(En(n))return ra(n),yr(n.dom);0===gt(Co(r),i=>!En(i)).length&&En(t)&&De(r,ge("br"));const o=Nr(n.dom,he.before(r.dom));return Ae(PC(t),i=>{De(r,i)}),OC(e,t),o},YA=(e,t,n)=>{if(En(n)){if(En(t)){const i=To((a=>{const s=(l,c)=>Nn(l).fold(()=>c,u=>yc(u)?s(u,c.concat(Ua(u))):c);return s(a,[])})(n),(a,s)=>(lt(a,s),s),Sc());kt(t),Ze(t,i)}return st(n),yr(t.dom)}const r=wo(n.dom);return Ae(PC(t),o=>{Ze(n,o)}),OC(e,t),r},DC=(e,t)=>{Ps(e,t.dom).bind(n=>T.from(n.getNode())).map(I).filter(Ma).each(st)},MC=(e,t,n)=>{return DC(!0,t),DC(!1,n),(r=t,o=n,Yn(o,r)?((i,a)=>{const s=Fi(a,i);return T.from(s[s.length-1])})(o,r):T.none()).fold(ye(YA,e,t,n),ye($A,e,t,n));var r,o},IC=(e,t,n,r)=>t?MC(e,r,n):MC(e,n,r),Xp=(e,t)=>{const n=I(e.getBody());return(o=n.dom,i=t,a=e.selection.getRng(),a.collapsed?((s,l,c)=>{const u=Yp(s,he.fromRangeStart(c)),f=u.bind(g=>ao(l,s,g.position).bind(v=>Yp(s,v).map(m=>{return y=s,h=l,dn((S=m).position.getNode())&&!En(S.block)?Ps(!1,S.block.dom).bind(x=>x.isEqual(S.position)?ao(h,y,x).bind(k=>Yp(y,k)):T.some(S)).getOr(S):S;var y,h,S})));return Gt(u,f,KA).filter(g=>{return!Rt((v=g).from.block,v.to.block)&&((v,m)=>{const y=I(v);return Rt(RC(y,m.from.block),RC(y,m.to.block))})(s,g)&&(v=>!1===Zt(v.from.block.dom)&&!1===Zt(v.to.block.dom))(g)&&(v=>{const m=y=>ym(y)||xu(y.dom);return m(v.from.block)&&m(v.to.block)})(g);var v})})(o,i,a):T.none()).map(o=>()=>{IC(n,t,o.from.block,o.to.block).each(i=>{e.selection.setRng(i.toRange())})});var o,i,a},LC=(e,t)=>{const n=I(t),r=ye(Rt,e);return no(n,cl,r).isSome()},Qp=(e,t)=>e.selection.isCollapsed()?T.none():(e=>{const t=I(e.getBody());return((n,r)=>{const o=Nr(n.dom,he.fromRangeStart(r)).isNone(),i=br(n.dom,he.fromRangeEnd(r)).isNone();return!(LC(a=n,(s=r).startContainer)||LC(a,s.endContainer))&&o&&i;var a,s})(t,e.selection.getRng())?(n=e,T.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,r)=>{const o=r.getRng();return Gt(ad(n,I(o.startContainer)),ad(n,I(o.endContainer)),(i,a)=>Rt(i,a)?T.none():T.some(()=>{o.deleteContents(),IC(n,!0,i,a).each(s=>{r.setRng(s.toRange())})})).getOr(T.none())})(t,e.selection);var n})(e),Ui=(e,t,n,r,o)=>T.from(t._selectionOverrides.showCaret(e,n,r,o)),$l=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?T.none():T.some((n=>{const r=n.ownerDocument.createRange();return r.selectNode(n),r})(t)),Jp=(e,t,n)=>t.collapsed?((r,o,i)=>{const a=rf(1,r.getBody(),o),s=he.fromRangeStart(a),l=s.getNode();if(wl(l))return Ui(1,r,l,!s.isAtEnd(),!1);const c=s.getNode(!0);if(wl(c))return Ui(1,r,c,!1,!1);const u=es(r.dom.getRoot(),s.getNode());return wl(u)?Ui(1,r,u,!1,i):T.none()})(e,t,n).getOr(t):t,QA=e=>ga(e)||Bl(e),JA=e=>ma(e)||jl(e),BC=(e,t,n,r,o,i)=>{var a,s;Ui(r,e,i.getNode(!o),o,!0).each(a=>{if(t.collapsed){const s=t.cloneRange();o?s.setEnd(a.startContainer,a.startOffset):s.setStart(a.endContainer,a.endOffset),s.deleteContents()}else t.deleteContents();e.selection.setRng(a)}),a=e.dom,Ie(s=n)&&0===s.data.length&&a.remove(s)},Zp=(e,t)=>((n,r)=>{const o=n.selection.getRng();if(!Ie(o.commonAncestorContainer))return T.none();const i=r?Fn.Forwards:Fn.Backwards,a=pi(n.getBody()),s=ye(of,r?a.next:a.prev),l=r?QA:JA,c=Nl(i,n.getBody(),o),u=s(c),f=u&&uo(r,u);if(!f||!Hc(c,f))return T.none();if(l(f))return T.some(()=>BC(n,o,c.getNode(),i,r,f));const g=s(f);return g&&l(g)&&Hc(f,g)?T.some(()=>BC(n,o,c.getNode(),i,r,g)):T.none()})(e,t),eg=(e,t)=>{const n=e.getBody();return t?yr(n).filter(ga):wo(n).filter(ma)},tg=e=>{const t=e.selection.getRng();return!t.collapsed&&(eg(e,!0).exists(n=>n.isEqual(he.fromRangeStart(t)))||eg(e,!1).exists(n=>n.isEqual(he.fromRangeEnd(t))))},po=di([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),jC=(e,t,n)=>ao(t,e,n).bind(r=>{return o=r.getNode(),z(o)&&(cl(I(o))||ll(I(o)))||((i,a,s,l)=>{const c=u=>yc(I(u))&&!ui(s,l,i);return av(!a,s).fold(()=>av(a,l).fold(Ot,c),c)})(e,t,n,r)?T.none():t&&Zt(r.getNode())||!t&&Zt(r.getNode(!0))?((i,a,s,l)=>{const c=l.getNode(!a);return ad(I(i),I(s.getNode())).map(u=>En(u)?po.remove(u.dom):po.moveToElement(c)).orThunk(()=>T.some(po.moveToElement(c)))})(e,t,n,r):t&&ma(n)||!t&&ga(n)?T.some(po.moveToPosition(r)):T.none();var o}),FC=(e,t)=>T.from(es(e.getBody(),t)),UC=e=>{const t=e.dom,n=e.selection,r=es(e.getBody(),n.getNode());if(zo(r)&&t.isBlock(r)&&t.isEmpty(r)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,""),r.appendChild(o),n.setRng(he.before(o).toRange())}return!0},ng=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=e.selection.getNode();return FC(e,n).filter(Zt).fold(()=>((r,o,i)=>{const a=rf(o?1:-1,r,i),s=he.fromRangeStart(a),l=I(r);return!o&&ma(s)?T.some(po.remove(s.getNode(!0))):o&&ga(s)?T.some(po.remove(s.getNode())):!o&&ga(s)&&Kf(l,s)?fT(l,s).map(c=>po.remove(c.getNode())):o&&ma(s)&&Gf(l,s)?pT(l,s).map(c=>po.remove(c.getNode())):(c=r,((g,v)=>{const m=v.getNode(!g),y=g?"after":"before";return $e(m)&&m.getAttribute("data-mce-caret")===y})(u=o,f=s)?(g=u,v=f.getNode(!u),Ve(v)?T.none():g&&Zt(v.nextSibling)?T.some(po.moveToElement(v.nextSibling)):!g&&Zt(v.previousSibling)?T.some(po.moveToElement(v.previousSibling)):T.none()).orThunk(()=>jC(c,u,f)):jC(c,u,f).bind(g=>((v,m,y)=>y.fold(h=>T.some(po.remove(h)),h=>T.some(po.moveToElement(h)),h=>ui(m,h,v)?T.none():T.some(po.moveToPosition(h))))(c,f,g)));var c,u,f,g,v})(e.getBody(),t,e.selection.getRng()).map(r=>()=>{return r.fold((o=e,i=t,a=>(o._selectionOverrides.hideFakeCaret(),Ja(o,i,I(a)),!0)),((o,i)=>a=>{const s=i?he.before(a):he.after(a);return o.selection.setRng(s.toRange()),!0})(e,t),(o=>i=>(o.selection.setRng(i.toRange()),!0))(e));var o,i}),()=>T.some(We))})(e,t):((n,r)=>{const o=n.selection.getNode();return Zt(o)&&!vc(o)?FC(n,o.parentNode).filter(Zt).fold(()=>T.some(()=>{var i;i=I(n.getBody()),Ae(sr(i,".mce-offscreen-selection"),st),Ja(n,r,I(n.selection.getNode())),Zf(n)}),()=>T.some(We)):tg(n)?T.some(()=>{gy(n,n.selection.getRng(),I(n.getBody()))}):T.none()})(e,t),rg=(e,t)=>e.selection.isCollapsed()?((n,r)=>{const o=he.fromRangeStart(n.selection.getRng());return ao(r,n.getBody(),o).filter(i=>r?sT(i):lT(i)).bind(i=>nf(r?0:-1,i)).map(i=>()=>n.selection.select(i))})(e,t):T.none(),qs=Ie,HC=e=>qs(e)&&e.data[0]===lr,WC=e=>qs(e)&&e.data[e.data.length-1]===lr,qC=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(lr)},kd=(e,t)=>e?(n=>{var r;if(qs(n.previousSibling))return WC(n.previousSibling)||n.previousSibling.appendData(lr),n.previousSibling;if(qs(n))return HC(n)||n.insertData(0,lr),n;{const o=qC(n);return null===(r=n.parentNode)||void 0===r||r.insertBefore(o,n),o}})(t):(n=>{var r,o;if(qs(n.nextSibling))return HC(n.nextSibling)||n.nextSibling.insertData(0,lr),n.nextSibling;if(qs(n))return WC(n)||n.appendData(lr),n;{const i=qC(n);return n.nextSibling?null===(r=n.parentNode)||void 0===r||r.insertBefore(i,n.nextSibling):null===(o=n.parentNode)||void 0===o||o.appendChild(i),i}})(t),eN=ye(kd,!0),tN=ye(kd,!1),zC=(e,t)=>Ie(e.container())?kd(t,e.container()):kd(t,e.getNode()),VC=(e,t)=>{const n=t.get();return n&&e.container()===n&&oa(n)},og=(e,t)=>t.fold(n=>{za(e.get());const r=eN(n);return e.set(r),T.some(he(r,r.length-1))},n=>yr(n).map(r=>{if(VC(r,e)){const o=e.get();return he(o,1)}{za(e.get());const o=zC(r,!0);return e.set(o),he(o,1)}}),n=>wo(n).map(r=>{if(VC(r,e)){const o=e.get();return he(o,o.length-1)}{za(e.get());const o=zC(r,!1);return e.set(o),he(o,o.length-1)}}),n=>{za(e.get());const r=tN(n);return e.set(r),T.some(he(r,1))}),GC=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n].apply(null,t);if(r.isSome())return r}return T.none()},Cr=di([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),KC=(e,t)=>da(t,e)||e,nN=(e,t,n)=>{const r=cy(n),o=KC(t,r.container());return ha(e,o,r).fold(()=>br(o,r).bind(ye(ha,e,o)).map(i=>Cr.before(i)),T.none)},rN=(e,t)=>null===Ga(e,t),$C=(e,t,n)=>ha(e,t,n).filter(ye(rN,t)),oN=(e,t,n)=>{const r=dy(n);return $C(e,t,r).bind(o=>Nr(o,r).isNone()?T.some(Cr.start(o)):T.none())},iN=(e,t,n)=>{const r=cy(n);return $C(e,t,r).bind(o=>br(o,r).isNone()?T.some(Cr.end(o)):T.none())},aN=(e,t,n)=>{const r=dy(n),o=KC(t,r.container());return ha(e,o,r).fold(()=>Nr(o,r).bind(ye(ha,e,o)).map(i=>Cr.after(i)),T.none)},YC=e=>!ly(ig(e)),bi=(e,t,n)=>GC([nN,oN,iN,aN],[e,t,n]).filter(YC),ig=e=>e.fold(Ct,Ct,Ct,Ct),XC=e=>e.fold(Fe("before"),Fe("start"),Fe("end"),Fe("after")),Td=e=>e.fold(Cr.before,Cr.before,Cr.after,Cr.after),ag=e=>e.fold(Cr.start,Cr.start,Cr.end,Cr.end),sN=(e,t,n,r,o,i)=>Gt(ha(t,n,r),ha(t,n,o),(a,s)=>a!==s&&((l,c,u)=>{const f=da(c,l),g=da(u,l);return z(f)&&f===g})(n,a,s)?Cr.after(e?a:s):i).getOr(i),lN=(e,t)=>e.fold(Ft,n=>{return o=t,!(XC(r=n)===XC(o)&&ig(r)===ig(o));var r,o}),cN=(e,t)=>e?t.fold(Mt(T.some,Cr.start),T.none,Mt(T.some,Cr.after),T.none):t.fold(T.none,Mt(T.some,Cr.before),T.none,Mt(T.some,Cr.end)),QC=(e,t,n)=>{const r=e?1:-1;return t.setRng(he(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var yi;!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(yi||(yi={}));const Ad=(e,t)=>e===Fn.Backwards?Sr(t):t,dN=(e,t,n)=>e===Fn.Forwards?t.next(n):t.prev(n),uN=(e,t,n,r)=>dn(r.getNode(t===Fn.Forwards))?yi.Br:!1===ui(n,r)?yi.Block:yi.Wrap,JC=(e,t,n,r)=>{const o=pi(n);let i=r;const a=[];for(;i;){const s=dN(t,o,i);if(!s)break;if(dn(s.getNode(!1)))return t===Fn.Forwards?{positions:Ad(t,a).concat([s]),breakType:yi.Br,breakAt:T.some(s)}:{positions:Ad(t,a),breakType:yi.Br,breakAt:T.some(s)};if(s.isVisible()){if(e(i,s)){const l=uN(0,t,i,s);return{positions:Ad(t,a),breakType:l,breakAt:T.some(s)}}a.push(s),i=s}else i=s}return{positions:Ad(t,a),breakType:yi.Eol,breakAt:T.none()}},ZC=(e,t,n,r)=>t(n,r).breakAt.map(o=>{const i=t(n,o).positions;return e===Fn.Backwards?i.concat(o):[o].concat(i)}).getOr([]),sg=(e,t)=>yn(e,(n,r)=>n.fold(()=>T.some(r),o=>Gt(xn(o.getClientRects()),xn(r.getClientRects()),(i,a)=>{const s=Math.abs(t-i.left);return Math.abs(t-a.left)<=s?r:o}).or(n)),T.none()),Nd=(e,t)=>xn(t.getClientRects()).bind(n=>sg(e,n.left)),Yl=ye(JC,he.isAbove,-1),Xl=ye(JC,he.isBelow,1),eS=ye(ZC,-1,Yl),tS=ye(ZC,1,Xl),fN=(e,t)=>Nd(eS(e,t),t),pN=(e,t)=>Nd(tS(e,t),t),gN=Zt,nS=(e,t)=>Math.abs(e.left-t),rS=(e,t)=>Math.abs(e.right-t),oS=(e,t)=>Zr(e,(n,r)=>{const o=Math.min(nS(n,t),rS(n,t)),i=Math.min(nS(r,t),rS(r,t));return i===o&&mn(r,"node")&&gN(r.node)||i<o?r:n}),mN=e=>{const t=n=>wt(n,r=>{const o=Wa(r);return o.node=e,o});if($e(e))return t(e.getClientRects());if(Ie(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},iS=e=>pn(e,mN);var Ql;!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(Ql||(Ql={}));const aS=(e,t,n,r,o,i)=>{let a=0;const s=[],l=f=>{let g=iS([f]);-1===e&&(g=g.reverse());for(let v=0;v<g.length;v++){const m=g[v];if(!n(m,c)){if(s.length>0&&t(m,qr(s))&&a++,m.line=a,o(m))return!0;s.push(m)}}return!1},c=qr(i.getClientRects());if(!c)return s;const u=i.getNode();return u&&(l(u),((f,g,v,m)=>{let y=m;for(;y=kl(y,f,wm,g);)if(v(y))return})(e,r,l,u)),s},hN=ye(aS,Ql.Up,bl,yl),vN=ye(aS,Ql.Down,yl,bl),sS=e=>qr(e.getClientRects()),lS=e=>t=>t.line>e,lg=e=>t=>t.line===e,Hi=(e,t)=>{e.selection.setRng(t),Ll(e,e.selection.getRng())},cg=(e,t,n)=>T.some(Jp(e,t,n)),cS=(e,t,n,r,o,i)=>{const a=t===Fn.Forwards,s=pi(e.getBody()),l=ye(of,a?s.next:s.prev),c=a?r:o;if(!n.collapsed){const m=Dc(n);if(i(m))return Ui(t,e,m,t===Fn.Backwards,!1);if(tg(e)){const y=n.cloneRange();return y.collapse(t===Fn.Backwards),T.from(y)}}const u=Nl(t,e.getBody(),n);if(c(u))return $l(e,u.getNode(!a));let f=l(u);const g=Sm(n);if(!f)return g?T.some(n):T.none();if(f=uo(a,f),c(f))return Ui(t,e,f.getNode(!a),a,!1);const v=l(f);return v&&c(v)&&Hc(f,v)?Ui(t,e,v.getNode(!a),a,!1):g?cg(e,f.toRange(),!1):T.none()},dS=(e,t,n,r,o,i)=>{const a=Nl(t,e.getBody(),n),s=qr(a.getClientRects()),l=t===Ql.Down,c=e.getBody();if(!s)return T.none();if(tg(e)){const y=l?he.fromRangeEnd(n):he.fromRangeStart(n);return(l?pN:fN)(c,y).orThunk(()=>T.from(y)).map(h=>h.toRange())}const u=(l?vN:hN)(c,lS(1),a),f=gt(u,lg(1)),g=s.left,v=oS(f,g);if(v&&i(v.node)){const y=Math.abs(g-v.left),h=Math.abs(g-v.right);return Ui(t,e,v.node,y<h,!1)}let m;if(m=r(a)?a.getNode():o(a)?a.getNode(!0):Dc(n),m){const y=((S,x,k,N)=>{const P=pi(x);let L,U,Z,ve;const de=[];let H=0;1===S?(L=P.next,U=yl,Z=bl,ve=he.after(N)):(L=P.prev,U=bl,Z=yl,ve=he.before(N));const X=sS(ve);do{if(!ve.isVisible())continue;const V=sS(ve);if(Z(V,X))continue;de.length>0&&U(V,qr(de))&&H++;const ae=Wa(V);if(ae.position=ve,ae.line=H,k(ae))return de;de.push(ae)}while(ve=L(ve));return de})(t,c,lS(1),m);let h=oS(gt(y,lg(1)),g);if(h||(h=qr(gt(y,lg(0))),h))return cg(e,h.position.toRange(),!1)}return 0===f.length?dg(e,l).filter(l?o:r).map(y=>Jp(e,y.toRange(),!1)):T.none()},dg=(e,t)=>{const n=e.selection.getRng(),r=t?he.fromRangeEnd(n):he.fromRangeStart(n),o=(i=r.container(),a=e.getBody(),no(I(i),s=>mk(s.dom),s=>s.dom===a).map(s=>s.dom).getOr(a));var i,a;if(t){const s=Xl(o,r);return mo(s.positions)}{const s=Yl(o,r);return xn(s.positions)}},uS=(e,t,n)=>dg(e,t).filter(n).exists(r=>(e.selection.setRng(r.toRange()),!0)),Rd=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},fS=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},pS=(e,t,n)=>og(t,n).map(r=>(Rd(e,r),n)),gS=(e,t,n)=>!!El(e)&&((e,t,n)=>{const r=e.getBody(),o=((i,a,s)=>{const l=he.fromRangeStart(i);if(i.collapsed)return l;{const c=he.fromRangeEnd(i);return s?Nr(a,c).getOr(c):br(a,l).getOr(l)}})(e.selection.getRng(),r,n);return((i,a,s,l)=>{const c=uo(i,l),u=bi(a,s,c);return bi(a,s,c).bind(ye(cN,i)).orThunk(()=>((f,g,v,m,y)=>{const h=uo(f,y);return ao(f,v,h).map(ye(uo,f)).fold(()=>m.map(Td),S=>bi(g,v,S).map(ye(sN,f,g,v,h,S)).filter(ye(lN,m))).filter(YC)})(i,a,s,u,l))})(n,ye(Za,e),r,o).bind(i=>pS(e,t,i))})(e,t,n).isSome(),mS=(e,t,n)=>!!El(t)&&((r,o)=>{const i=o.selection.getRng(),a=r?he.fromRangeEnd(i):he.fromRangeStart(i);return!!me(o.selection.getSel().modify)&&(r&&yu(a)?QC(!0,o.selection,a):!(r||!Cu(a))&&QC(!1,o.selection,a))})(e,t),CN=ye(mS,!0),SN=ye(mS,!1),Pd=(e,t,n)=>{if(El(e)){const r=dg(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?he.fromRangeEnd(o):he.fromRangeStart(o)});return bi(ye(Za,e),e.getBody(),r).exists(o=>{const i=Td(o);return og(n,i).exists(a=>(Rd(e,a),!0))})}return!1},hS=(e,t)=>n=>og(t,n).map(r=>()=>Rd(e,r)),vS=(e,t,n,r)=>{const o=e.getBody(),i=ye(Za,e);e.undoManager.ignore(()=>{e.selection.setRng(((a,s)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(s.container(),s.offset()),l})(n,r)),Jf(e),bi(i,o,he.fromRangeStart(e.selection.getRng())).map(ag).bind(hS(e,t)).each($t)}),e.nodeChanged()},ug=(e,t,n)=>{if(e.selection.isCollapsed()&&El(e)){const r=he.fromRangeStart(e.selection.getRng());return((o,i,a,s)=>{const l=(f=o.getBody(),g=s.container(),da(g,f)||f),c=ye(Za,o),u=bi(c,l,s);var f,g;return u.bind(f=>a?f.fold(Fe(T.some(ag(f))),T.none,Fe(T.some(Td(f))),T.none):f.fold(T.none,Fe(T.some(Td(f))),T.none,Fe(T.some(ag(f))))).map(hS(o,i)).getOrThunk(()=>{const f=Rl(a,l,s),g=f.bind(v=>bi(c,l,v));return Gt(u,g,()=>ha(c,l,s).bind(v=>{return Gt(yr(m=v),wo(m),(y,h)=>{const S=uo(!0,y),x=uo(!1,h);return br(m,S).forall(k=>k.isEqual(x))}).getOr(!0)?T.some(()=>{Ja(o,a,I(v))}):T.none();var m})).getOrThunk(()=>g.bind(()=>f.map(v=>()=>{a?vS(o,i,s,v):vS(o,i,v,s)})))})})(e,t,n,r)}return T.none()},bS=(e,t)=>{const n=I(e.getBody()),r=I(e.selection.getStart()),o=Fi(r,n);return Zo(o,t).fold(Fe(o),i=>o.slice(0,i))},_N=e=>1===er(e),yS=(e,t)=>{const n=ye(Uy,e);return pn(t,r=>n(r)?[r.dom]:[])},CS=e=>{const t=bS(e,oo);return yS(e,t)},SS=(e,t)=>{const n=e.selection.getStart(),r=((o,i)=>{const a=i.parentElement;return dn(i)&&!le(a)&&o.dom.isEmpty(a)})(e,n)||Hy(I(n))?Fy(n,t):((o,i)=>{const{caretContainer:a,caretPosition:s}=jy(i);return o.insertNode(a.dom),s})(e.selection.getRng(),t);e.selection.setRng(r.toRange())},_S=e=>Ie(e.startContainer),fg=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=gt(bS(e,o=>oo(o)||er(o)>1),_N);return mo(n).bind(r=>{const o=he.fromRangeStart(e.selection.getRng());return fy(t,o,r.dom)&&!Hy(r)?T.some(()=>((i,a,s,l)=>{const c=yS(a,l);if(0===c.length)Ja(a,i,s);else{const u=Fy(s.dom,c);a.selection.setRng(u.toRange())}})(t,e,r,n)):T.none()})})(e,t):(n=>{if((e=>{const t=e.selection.getRng();return 0===(n=t).startOffset&&_S(n)&&((n,r)=>{const o=r.startContainer.parentElement;return!le(o)&&Uy(n,I(o))})(e,t)&&(n=>{return(o=>{const i=o.startContainer.parentNode,a=o.endContainer.parentNode;return!le(i)&&!le(a)&&i.isEqualNode(a)})(r=n)&&(o=>{const i=o.endContainer;return o.endOffset===(Ie(i)?i.length:i.childNodes.length)})(r)||(r=>!r.endContainer.isEqualNode(r.commonAncestorContainer))(n);var r})(t);var n})(n)){const r=CS(n);return T.some(()=>{Jf(n),((o,i)=>{const a=mt(i,CS(o));a.length>0&&SS(o,a)})(n,r)})}return T.none()})(e),Jl=e=>((t=>{const n=t.selection.getRng();return n.collapsed&&(_S(n)||t.dom.isEmpty(n.startContainer))&&!(e=>no(e,o=>xo(o.dom),oo).isSome())(I(t.selection.getStart()))})(e)&&SS(e,[]),!0),pg=(e,t,n)=>z(n)?T.some(()=>{e._selectionOverrides.hideFakeCaret(),Ja(e,t,I(n))}):T.none(),gg=(e,t)=>e.selection.isCollapsed()?((n,r)=>{const o=r?Bl:jl,a=Nl(r?Fn.Forwards:Fn.Backwards,n.getBody(),n.selection.getRng());return o(a)?pg(n,r,a.getNode(!r)):T.from(uo(r,a)).filter(s=>o(s)&&Hc(a,s)).bind(s=>pg(n,r,s.getNode(!r)))})(e,t):((n,r)=>{const o=n.selection.getNode();return ci(o)?pg(n,r,o):T.none()})(e,t),mg=e=>Ni(null!=e?e:"").getOr(0),ES=(e,t)=>(e||"table"===zt(t)?"margin":"padding")+("rtl"===ro(t,"direction")?"-right":"-left"),wS=e=>{const t=kS(e);return!e.mode.isReadOnly()&&(t.length>1||(n=e,fr(t,o=>{const i=ES(Fh(n),o),a=ie(o,i).map(mg).getOr(0);return"false"!==n.dom.getContentEditable(o.dom)&&a>0})));var n},xS=e=>bu(e)||ll(e),kS=e=>gt(Tt(e.selection.getSelectedBlocks()),t=>!xS(t)&&!Vt(t).exists(xS)&&wr(t,n=>zo(n.dom)||Zt(n.dom)).exists(n=>zo(n.dom))),TS=(e,t)=>{var n,r;const{dom:o}=e,i=cx(e),a=null!==(r=null===(n=/[a-z%]+$/i.exec(i))||void 0===n?void 0:n[0])&&void 0!==r?r:"px",s=mg(i),l=Fh(e);Ae(kS(e),c=>{((u,f,g,v,m,y)=>{const h=ES(g,I(y)),S=mg(u.getStyle(y,h));if("outdent"===f){const x=Math.max(0,S-v);u.setStyle(y,h,x?x+m:"")}else u.setStyle(y,h,S+v+m)})(o,t,l,s,a,c.dom)})},AS=e=>TS(e,"outdent"),NS=e=>{if(e.selection.isCollapsed()&&wS(e)){const t=e.dom,n=e.selection.getRng(),r=he.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(null!==o&&Vf(I(o),r))return T.some(()=>AS(e))}return T.none()},RS=(e,t,n)=>kn([NS,ng,Zp,(r,o)=>ug(r,t,o),Xp,sp,rg,gg,Qp,fg],r=>r(e,n)).filter(r=>e.selection.isEditable()),PS=e=>void 0===e.touches||1!==e.touches.length?T.none():T.some(e.touches[0]),hg=(e,t)=>yt(e,t.nodeName),TN=(e,t)=>!!Ie(t)||!!$e(t)&&!hg(e.getBlockElements(),t)&&!so(t)&&!La(e,t),AN=(e,t)=>!(!Ie(t)||0!==t.data.length&&(!/^\s+$/.test(t.data)||t.nextSibling&&!hg(e,t.nextSibling))),OS=e=>e.dom.create(Ar(e),_l(e)),NN=e=>{const t=e.dom,n=e.selection,r=e.schema,o=r.getBlockElements(),i=n.getStart(),a=e.getBody();let s,l,c=!1;const u=Ar(e);if(!i||!$e(i))return;const f=a.nodeName.toLowerCase();if(!r.isValidChild(f,u.toLowerCase())||(k=o,N=a,Yt(qb(I(i),I(N)),L=>hg(k,L.dom))))return;var k,N;const g=n.getRng(),{startContainer:v,startOffset:m,endContainer:y,endOffset:h}=g,S=Qa(e);let x=a.firstChild;for(;x;)if($e(x)&&y1(r,x),TN(r,x)){if(AN(o,x)){l=x,x=x.nextSibling,t.remove(l);continue}s||(s=OS(e),a.insertBefore(s,x),c=!0),l=x,x=x.nextSibling,s.appendChild(l)}else s=null,x=x.nextSibling;c&&S&&(g.setStart(v,m),g.setEnd(y,h),n.setRng(g),e.nodeChanged())},DS=(e,t,n)=>{const r=I(OS(e)),o=Sc();Ze(r,o),n(t,r);const i=document.createRange();return i.setStartBefore(o.dom),i.setEndBefore(o.dom),i},MS=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),RN=(e,t,n)=>function(r){const o=arguments,i=o[o.length-2],a=i>0?t.charAt(i-1):"";if('"'===a)return r;if(">"===a){const s=t.lastIndexOf("<",i);if(-1!==s&&-1!==t.substring(s,i).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},IS=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Su(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},PN=(e,t)=>{const n=si(I(e.getBody()),"*[data-mce-caret]").map(o=>o.dom).getOrNull();if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void IS(e,n)):void(Cm(n)&&(IS(e,n),e.undoManager.add()))},LS=Zt,BS=(e,t,n)=>{const r=pi(e.getBody()),o=ye(of,1===t?r.next:r.prev);if(n.collapsed){const i=e.dom.getParent(n.startContainer,"PRE");if(!i)return;if(!o(he.fromRangeStart(n))){const a=I((s=>{const l=s.dom.create(Ar(s));return l.innerHTML='<br data-mce-bogus="1">',l})(e));1===t?ot(I(i),a):De(I(i),a),e.selection.select(a.dom,!0),e.selection.collapse()}}},jS=(e,t)=>((n,r)=>{const o=r?Fn.Forwards:Fn.Backwards,i=n.selection.getRng();return(a=o,s=n,l=i,cS(s,a,l,ga,ma,LS)).orThunk(()=>(BS(n,o,i),T.none()));var a,s,l})(e,((n,r)=>{const o=r?n.getEnd(!0):n.getStart(!0);return ly(o)?!r:r})(e.selection,t)).exists(n=>(Hi(e,n),!0)),FS=(e,t)=>((n,r)=>{const o=r?1:-1,i=n.selection.getRng();return(a=o,s=n,l=i,dS(s,a,l,c=>ga(c)||Hb(c),c=>ma(c)||Wb(c),LS)).orThunk(()=>(BS(n,o,i),T.none()));var a,s,l})(e,t).exists(n=>(Hi(e,n),!0)),US=(e,t)=>uS(e,t,t?ma:ga),Od=(e,t)=>eg(e,!t).map(n=>{const r=n.toRange(),o=e.selection.getRng();return t?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(n=>(Hi(e,n),!0)),ON=e=>Pt(["figcaption"],zt(e)),HS=(e,t)=>!!e.selection.isCollapsed()&&((e,t)=>{const n=I(e.getBody()),r=he.fromRangeStart(e.selection.getRng());return((o,i)=>{const a=ye(Rt,i);return wr(I(o.container()),oo,a).filter(ON)})(r,n).exists(()=>{if(o=n,a=r,t?Xl(o.dom,a).breakAt.isNone():Yl(o.dom,a).breakAt.isNone()){const o=DS(e,n,t?Ze:dt);return e.selection.setRng(o),!0}var o,a;return!1})})(e,t),WS={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},qS=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,_t=(e,...t)=>()=>e.apply(null,t),Zl=(e,t)=>{return rn((r=t,pn(wt(e,i=>rt(rt({},WS),i)),o=>qS(o,r)?[o]:[])),n=>n.action());var r},zS=(e,t)=>{return kn((r=t,pn(wt(e,i=>rt(rt({},WS),i)),o=>qS(o,r)?[o]:[])),n=>n.action());var r},VS=(e,t)=>{const n=t?Fn.Forwards:Fn.Backwards,r=e.selection.getRng();return cS(e,n,r,Bl,jl,ci).exists(o=>(Hi(e,o),!0))},GS=(e,t)=>{const n=t?1:-1,r=e.selection.getRng();return dS(e,n,r,Bl,jl,ci).exists(o=>(Hi(e,o),!0))},KS=(e,t)=>uS(e,t,t?jl:Bl),$S=di([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),ec=Wt(rt({},$S),{none:e=>$S.none(e)}),YS=(e,t,n)=>pn(cn(e),r=>Xt(r,t)?n(r)?[r]:[]:YS(r,t,n)),XS=(e,t)=>_o(e,"table",t),vg=(e,t,n,r,o=Ft)=>{const i=1===r;if(!i&&n<=0)return ec.first(e[0]);if(i&&n>=e.length-1)return ec.last(e[e.length-1]);{const a=n+r,s=e[a];return o(s)?ec.middle(t,s):vg(e,t,a,r,o)}},QS=(e,t)=>XS(e,t).bind(n=>{const r=YS(n,"th,td",Ft);return Zo(r,o=>Rt(e,o)).map(o=>({index:o,all:r}))}),JS=(e,t,n,r,o)=>{const i=sr(I(n),"td,th,caption").map(s=>s.dom);var s;return((s,l,c)=>yn(s,(u,f)=>u.fold(()=>T.some(f),g=>{const v=Math.sqrt(Math.abs(g.x-l)+Math.abs(g.y-c)),m=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c));return T.some(m<v?f:g)}),T.none()))(gt((s=e,pn(i,c=>{const u={left:(f=Wa(c.getBoundingClientRect())).left- -1,top:f.top- -1,right:f.right+-2,bottom:f.bottom+-2,width:f.width+-1,height:f.height+-1};var f;return[{x:u.left,y:s(u),cell:c},{x:u.right,y:s(u),cell:c}]})),s=>t(s,o)),r,o).map(s=>s.cell)},MN=ye(JS,e=>e.bottom,(e,t)=>e.y<t),IN=ye(JS,e=>e.top,(e,t)=>e.y>t),ZS=(e,t,n)=>{const r=e(t,n);return(o=r).breakType===yi.Wrap&&0===o.positions.length||!dn(n.getNode())&&(o=>o.breakType===yi.Br&&1===o.positions.length)(r)?!((o,i,a)=>a.breakAt.exists(s=>o(i,s).breakAt.isSome()))(e,t,r):r.breakAt.isNone();var o},LN=ye(ZS,Yl),BN=ye(ZS,Xl),jN=(e,t,n,r)=>{const o=e.selection.getRng(),i=t?1:-1;return!(!ev()||!((a,s,l)=>{const c=he.fromRangeStart(s);return Ps(!a,l).exists(u=>u.isEqual(c))})(t,o,n)||(Ui(i,e,n,!t,!1).each(a=>{Hi(e,a)}),0))},e_=(e,t,n)=>{const r=((i,a)=>{const s=a.getNode(i);return Ii(s)?T.some(s):T.none()})(!!t,n),o=!1===t;r.fold(()=>Hi(e,n.toRange()),i=>Ps(o,e.getBody()).filter(a=>a.isEqual(n)).fold(()=>Hi(e,n.toRange()),a=>{return s=t,c=i,void(l=e).undoManager.transact(()=>{const u=s?ot:De,f=DS(l,I(c),u);Hi(l,f)});var s,l,c}))},FN=(e,t,n,r)=>{const o=e.selection.getRng(),i=he.fromRangeStart(o),a=e.getBody();if(!t&&LN(r,i)){const s=(l=a,(f=c=n,g=u=i,xn(g.getClientRects()).bind(v=>MN(f,v.left,v.top)).bind(v=>{return Nd(wo(m=v).map(y=>Yl(m,y).positions.concat(y)).getOr([]),g);var m})).orThunk(()=>xn(u.getClientRects()).bind(f=>sg(eS(l,he.before(c)),f.left))).getOr(he.before(c)));return e_(e,t,s),!0}var l,c,u,f,g;if(t&&BN(r,i)){const s=((l,c,u)=>((f,g)=>mo(g.getClientRects()).bind(v=>IN(f,v.left,v.top)).bind(v=>{return Nd(yr(m=v).map(y=>[y].concat(Xl(m,y).positions)).getOr([]),g);var m}))(c,u).orThunk(()=>xn(u.getClientRects()).bind(f=>sg(tS(l,he.after(c)),f.left))).getOr(he.after(c)))(a,n,i);return e_(e,t,s),!0}return!1},t_=(e,t,n)=>T.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>T.from(e.dom.getParent(r,"table")).map(o=>n(e,t,o,r))).getOr(!1),n_=(e,t)=>t_(e,t,jN),r_=(e,t)=>t_(e,t,FN),o_=(e,t,n)=>n.fold(T.none,T.none,(r,o)=>{return(i=o,((a,s)=>{const l=c=>{for(let u=0;u<c.childNodes.length;u++){const f=I(c.childNodes[u]);if(s(f))return T.some(f);const g=l(c.childNodes[u]);if(g.isSome())return g}return T.none()};return l(a.dom)})(i,kb)).map(a=>{return(e=>{const t=Ls.getWin(e).dom,n=(o,i,a,s)=>xf(t,o,i,a,s),r=e.match({domRange:i=>{const a=I(i.startContainer),s=I(i.endContainer);return tb(a,i.startOffset,s,i.endOffset)},relative:Ik,exact:tb});return((o,i)=>{var s;return((s,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(u=>!1===u.collapsed).map(u=>Il.rtl(I(u.endContainer),u.endOffset,I(u.startContainer),u.startOffset)).getOrThunk(()=>Zv(0,Il.ltr,c)):Zv(0,Il.ltr,c)})(0,(s=o,i.match({domRange:c=>({ltr:Fe(c),rtl:T.none}),relative:(c,u)=>({ltr:zr(()=>Jv(s,c,u)),rtl:zr(()=>T.some(Jv(s,u,c)))}),exact:(c,u,f,g)=>({ltr:zr(()=>xf(s,c,u,f,g)),rtl:zr(()=>T.some(xf(s,f,g,c,u)))})})))})(t,r).match({ltr:n,rtl:n})})(Ls.exact(s=a,0,s,0));var s});var i},r=>(e.execCommand("mceTableInsertRowAfter"),i_(e,t,r))),i_=(e,t,n)=>{return o_(e,t,(o=Ho,QS(r=n,void 0).fold(()=>ec.none(r),i=>vg(i.all,r,i.index,1,o))));var r,o},UN=(e,t,n)=>{return o_(e,t,(o=Ho,QS(r=n,void 0).fold(()=>ec.none(),i=>vg(i.all,r,i.index,-1,o))));var r,o},a_=(e,t)=>{const n=["table","li","dl"],r=I(e.getBody()),o=a=>{const s=zt(a);return Rt(a,r)||Pt(n,s)},i=e.selection.getRng();return(a=I(t?i.endContainer:i.startContainer),s=o,((l,c,u=Ot)=>u(c)?T.none():Pt(l,zt(c))?T.some(c):Zi(c,l.join(","),f=>Xt(f,"table")||u(f)))(["td","th"],a,s)).map(a=>(XS(a,o).each(s=>{e.model.table.clearSelectedCells(s.dom)}),e.selection.collapse(!t),(t?i_:UN)(e,o,a).each(s=>{e.selection.setRng(s)}),!0)).getOr(!1);var a,s},Xo=(e,t)=>({container:e,offset:t}),Dd=Kt.DOM,Md=e=>t=>e===t?-1:0,bg=(e,t,n)=>{if(Ie(e)&&t>=0)return T.some(Xo(e,t));{const r=Ha(Dd);return T.from(r.backwards(e,t,Md(e),n)).map(o=>Xo(o.container,o.container.data.length))}},yg=(e,t,n)=>{if(!Ie(e))return T.none();if(t>=0&&t<=e.data.length)return T.some(Xo(e,t));{const o=Ha(Dd);return T.from(o.backwards(e,t,Md(e),n)).bind(i=>yg(i.container,t+i.container.data.length,n))}},s_=(e,t,n)=>{if(!Ie(e))return T.none();const r=e.data;if(t<=r.length)return T.some(Xo(e,t));{const o=Ha(Dd);return T.from(o.forwards(e,t,Md(e),n)).bind(i=>s_(i.container,t-r.length,n))}},Cg=(e,t,n,r,o)=>{const i=Ha(e,(a=e,s=>a.isBlock(s)||Pt(["BR","IMG","HR","INPUT"],s.nodeName)||"false"===a.getContentEditable(s)));var a;return T.from(i.backwards(t,n,r,o))},l_=e=>Li(e.toString().replace(/\u00A0/g," ")),c_=e=>""!==e&&-1!==" \xa0\f\n\r\t\v".indexOf(e),Sg=(e,t)=>e.substring(t.length),d_=(e,t,n,r=0)=>{return(o=I(t.startContainer),_o(o,Tb)).fold(()=>((i,a,s,l=0)=>{if(!(c=a).collapsed||!Ie(c.startContainer))return T.none();var c;const u={text:"",offset:0},f=i.getParent(a.startContainer,i.isBlock)||i.getRoot();return Cg(i,a.startContainer,a.startOffset,(g,v,m)=>(u.text=m+u.text,u.offset+=v,((y,h,S)=>{let x;const k=S.charAt(0);for(x=h-1;x>=0;x--){const N=y.charAt(x);if(c_(N))return T.none();if(k===N&&an(y,S,x,h))break}return T.some(x)})(u.text,u.offset,s).getOr(v)),f).bind(g=>{const v=a.cloneRange();if(v.setStart(g.container,g.offset),v.setEnd(a.endContainer,a.endOffset),v.collapsed)return T.none();const m=l_(v);return 0!==m.lastIndexOf(s)||Sg(m,s).length<l?T.none():T.some({text:Sg(m,s),range:v,trigger:s})})})(e,t,n,r),i=>{const a=e.createRng();a.selectNode(i.dom);const s=l_(a);return T.some({range:a,text:Sg(s,n),trigger:n})});var o},u_=e=>{if(3===e.nodeType)return Xo(e,e.data.length);{const t=e.childNodes;return t.length>0?u_(t[t.length-1]):Xo(e,t.length)}},f_=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?f_(n[t],0):n.length>0&&1===e.nodeType&&n.length===t?u_(n[n.length-1]):Xo(e,t)},p_=(e,t,n,r={})=>{var o;const i=t(),a=null!==(o=e.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",s=gt(i.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>{return u=e.dom,f=>{const g=f_(f.startContainer,f.startOffset);return!((v,m)=>{var y;const h=null!==(y=v.getParent(m.container,v.isBlock))&&void 0!==y?y:v.getRoot();return Cg(v,m.container,m.offset,(S,x)=>0===x?-1:x,h).filter(S=>{const x=S.container.data.charAt(S.offset-1);return!c_(x)}).isSome()})(u,g)};var u})(n.range,a,n.text));if(0===s.length)return T.none();const l=Promise.all(wt(s,c=>c.fetch(n.text,c.maxResults,r).then(u=>({matchText:n.text,items:u,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return T.some({lookupData:l,context:n})};var Ci;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(Ci||(Ci={}));const _g=(e,t,n)=>e.stype===Ci.Error?t(e.serror):n(e.svalue),zs=e=>({stype:Ci.Value,svalue:e}),tc=e=>({stype:Ci.Error,serror:e}),HN=_g,Eg=e=>ne(e)&&on(e).length>100?" removed due to size":JSON.stringify(e,null,2),Id=(e,t)=>tc([{path:e,getErrorInfo:t}]),g_=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<t.length;r++){const o=t[r];for(const i in o)yt(o,i)&&(n[i]=e(n[i],o[i]))}return n},wg=g_((e,t)=>Y(e)&&Y(t)?wg(e,t):t),m_=(g_((e,t)=>t),e=>({tag:"defaultedThunk",process:Fe(e)})),h_=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},xg=e=>({extract:(t,n)=>{return(r=e(n)).stype===Ci.Error?Id(t,Fe(r.serror)):r;var r},toString:Fe("val")}),zN=xg(zs),v_=(e,t,n,r)=>r(Ut(e,t).getOrThunk(()=>n(e))),VN=(e,t,n,r,o)=>{const i=s=>o.extract(t.concat([r]),s),a=s=>s.fold(()=>zs(T.none()),l=>{return(u=o.extract(t.concat([r]),l)).stype===Ci.Value?{stype:Ci.Value,svalue:(0,T.some)(u.svalue)}:u;var u});switch(e.tag){case"required":return s=t,u=i,Ut(l=n,c=r).fold(()=>{return g=c,v=l,Id(s,()=>'Could not find valid *required* value for "'+g+'" in '+Eg(v));var g,v},u);case"defaultedThunk":return v_(n,r,e.process,i);case"option":return((s,l,c)=>c(Ut(s,l)))(n,r,a);case"defaultedOptionThunk":return((s,l,c,u)=>u(Ut(s,l).map(f=>!0===f?c(s):f)))(n,r,e.process,a);case"mergeWithThunk":return v_(n,r,Fe({}),s=>{const l=wg(e.process(n),s);return i(l)})}var s,l,c,u},kg=e=>({extract:(t,n)=>((r,o,i)=>{const a={},s=[];for(const l of i)h_(l,(c,u,f,g)=>{const v=VN(f,r,o,c,g);HN(v,m=>{s.push(...m)},m=>{a[u]=m})},(c,u)=>{a[c]=u(o)});return s.length>0?tc(s):zs(a)})(t,n,e),toString:()=>"obj{\n"+wt(e,n=>h_(n,(r,o,i,a)=>r+" -> "+a.toString(),(r,o)=>"state("+r+")")).join("\n")+"}"}),b_=e=>({extract:(t,n)=>(e=>{const t=(r=>{const o=[],i=[];return Ae(r,a=>{_g(a,s=>i.push(s),s=>o.push(s))}),{values:o,errors:i}})(e);return t.errors.length>0?(n=t.errors,Mt(tc,_a)(n)):zs(t.values);var n})(wt(n,(o,i)=>e.extract(t.concat(["["+i+"]"]),o))),toString:()=>"array("+e.toString()+")"}),y_=(e,t)=>((e,t)=>({extract:(n,r)=>Ut(r,e).fold(()=>{return i=e,Id(n,()=>'Choice schema did not contain choice key: "'+i+'"');var i},o=>{return i=n,a=r,Ut(s=t,l=o).fold(()=>{return u=s,f=l,Id(i,()=>'The chosen schema: "'+f+'" did not exist in branches: '+Eg(u));var u,f},c=>c.extract(i.concat(["branch: "+l]),a));var i,a,s,l}),toString:()=>"chooseOn("+e+"). Possible values: "+on(t)}))(e,ho(t,kg)),KN=Fe(zN),Ld=(e,t)=>xg(n=>{const r=typeof n;return e(n)?zs(n):tc(`Expected type: ${t} but got: ${r}`)}),$N=Ld(b,"number"),Bd=Ld(D,"string"),YN=Ld(Le,"boolean"),Tg=Ld(me,"function"),nc=(e,t,n,r)=>({tag:"field",key:e,newKey:t,presence:n,prop:r}),C_=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),S_=(e,t)=>nc(e,e,{tag:"required",process:{}},t),__=e=>S_(e,Bd),E_=e=>S_(e,Tg),Ag=(e,t)=>nc(e,e,{tag:"option",process:{}},t),jd=e=>Ag(e,Bd),Vs=(e,t,n)=>nc(e,e,m_(t),n),w_=(e,t)=>Vs(e,t,$N),x_=(e,t,n)=>{return Vs(e,t,(r=n,o=i=>Pt(r,i)?Tr.value(i):Tr.error(`Unsupported value: "${i}", choose one of "${r.join(", ")}".`),xg(i=>o(i).fold(tc,zs))));var r,o},Ng=(e,t)=>Vs(e,t,YN),Rg=(e,t)=>Vs(e,t,Tg),XN=__("type"),QN=E_("fetch"),Pg=E_("onAction"),JN=Rg("onSetup",()=>We),ZN=jd("text"),eR=jd("icon"),tR=jd("tooltip"),nR=jd("label"),rR=Ng("active",!1),oR=Ng("enabled",!0),k_=Ng("primary",!1),rc=e=>Vs("type",e,Bd),iR=kg([XN,__("trigger"),w_("minChars",1),((e,t)=>nc(e,e,m_(1),KN()))("columns"),w_("maxResults",10),Ag("matches",Tg),QN,Pg,(T_=Bd,Vs("highlightOn",[],b_(T_)))]);var T_;const Og=[oR,tR,eR,ZN,JN],A_=[rR].concat(Og),aR=[Rg("predicate",Ot),x_("scope","node",["node","editor"]),x_("position","selection",["node","selection","line"])],sR=Og.concat([rc("contextformbutton"),k_,Pg,C_("original",Ct)]),lR=A_.concat([rc("contextformbutton"),k_,Pg,C_("original",Ct)]),cR=Og.concat([rc("contextformbutton")]),dR=A_.concat([rc("contextformtogglebutton")]),uR=y_("type",{contextformbutton:sR,contextformtogglebutton:lR});kg([rc("contextform"),Rg("initValue",Fe("")),nR,((e,t)=>nc(e,e,{tag:"required",process:{}},b_(t)))("commands",uR),Ag("launch",y_("type",{contextformbutton:cR,contextformtogglebutton:dR}))].concat(aR));const pR=e=>{const t=sa(),n=jn(!1),r=t.isSet,o=()=>{r()&&(vn(e).autocompleter.removeDecoration(),e.dispatch("AutocompleterEnd"),n.set(!1),t.clear())},i=zr(()=>(e=>{const t=e.ui.registry.getAll().popups,n=ho(t,i=>{return(a=i,((e,t,n)=>{return r=(s=t.extract([e],a=n)).stype===Ci.Error?{stype:Ci.Error,serror:(s=>({input:a,errors:s}))(s.serror)}:s,_g(r,Tr.error,Tr.value);var a,s,r})("Autocompleter",iR,rt({trigger:a.ch},a))).fold(s=>{throw new Error("Errors: \n"+(c=>{const u=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:Fe("... (only showing first ten failures)")}]):c;return wt(u,f=>"Failed path: ("+f.path.join(" > ")+")\n"+f.getErrorInfo())})((l=s).errors).join("\n")+"\n\nInput object: "+Eg(l.input));var l},Ct);var a}),r=Jn(Ro(n,i=>i.trigger)),o=vo(n);return{dataset:n,triggers:r,lookupByTrigger:i=>gt(o,a=>a.trigger===i)}})(e)),a=s=>{var l;(l=s,t.get().map(c=>d_(e.dom,e.selection.getRng(),c.trigger).bind(u=>p_(e,i,u,l))).getOrThunk(()=>((c,u)=>{const f=u(),g=c.selection.getRng();return(v=c.dom,m=g,y=f,kn(y.triggers,h=>d_(v,m,h))).bind(v=>p_(c,u,v));var v,m,y})(e,i))).fold(o,l=>{var c,f;c=l.context,r()||(f=c.range,vn(e).autocompleter.addDecoration(f),t.set({trigger:c.trigger,matchLength:c.text.length})),l.lookupData.then(c=>{t.get().map(u=>{const f=l.context;u.trigger===f.trigger&&(f.text.length-u.matchLength>=10?o():(t.set(Wt(rt({},u),{matchLength:f.text.length})),n.get()?e.dispatch("AutocompleterUpdate",{lookupData:c}):(n.set(!0),e.dispatch("AutocompleterStart",{lookupData:c}))))})})})};e.addCommand("mceAutocompleterReload",(s,l)=>{const c=ne(l)?l.fetchOptions:{};a(c)}),e.addCommand("mceAutocompleterClose",o),((s,l)=>{const c=Uu(l.load,50);s.on("keypress compositionend",u=>{27!==u.which&&c.throttle()}),s.on("keydown",u=>{const f=u.which;8===f?c.throttle():27===f&&l.cancelIfNecessary()}),s.on("remove",c.cancel)})(e,{cancelIfNecessary:o,load:a})},N_=e=>(t,n,r={})=>{const o=t.getBody(),i={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:We,inputType:n},a=Wm(new InputEvent(e));return t.dispatch(e,rt(rt(rt({},a),i),r))},Fd=N_("input"),Ud=N_("beforeinput"),Gs=(e,t)=>{const n=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const i=(a=>{for(;a;){if($e(a)||Ie(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(t.firstChild);i&&/^(UL|OL|DL)$/.test(i.nodeName)&&t.insertBefore(n.doc.createTextNode(Bn),t.firstChild)}const o=n.createRng();if(t.normalize(),t.hasChildNodes()){const i=new Pn(t,t);let a,s=t;for(;a=i.current();){if(Ie(a)){o.setStart(a,0),o.setEnd(a,0);break}if(r[a.nodeName.toLowerCase()]){o.setStartBefore(a),o.setEndBefore(a);break}s=a,a=i.next()}a||(o.setStart(s,0),o.setEnd(s,0))}else dn(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),Ll(e,o)},Hd=(e,t)=>{const n=e.getRoot();let r,o=t;for(;o!==n&&o&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(r=o),o=o.parentNode;return o!==n?r:n},Dg=e=>T.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),R_=(e,t)=>{const n=null==e?void 0:e.parentNode;return z(n)&&n.nodeName===t},P_=e=>z(e)&&/^(OL|UL|LI)$/.test(e.nodeName),Wd=e=>{const t=e.parentNode;return z(n=t)&&/^(LI|DT|DD)$/.test(n.nodeName)?t:e;var n},qd=(e,t,n)=>{let r=e[n?"firstChild":"lastChild"];for(;r&&!$e(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},gR=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),Mg=e=>{e.innerHTML='<br data-mce-bogus="1">'},Ig=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Lg=(e,t)=>z(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),Bg=(e,t,n)=>Ie(t)?e?1===n&&t.data.charAt(n-1)===lr?0:n:n===t.data.length-1&&t.data.charAt(n)===lr?t.data.length:n:n,oc=(e,t)=>{Ar(e).toLowerCase()===t.tagName.toLowerCase()&&((n,r,o)=>{const i=n.dom;T.from(o.style).map(i.parseStyle).each(u=>{const f=rt(rt({},ke(I(r))),u);i.setStyles(r,f)});const a=T.from(o.class).map(u=>u.split(/\s+/)),s=T.from(r.className).map(u=>gt(u.split(/\s+/),f=>""!==f));Gt(a,s,(u,f)=>{const g=gt(f,m=>!Pt(u,m)),v=[...u,...g];i.setAttrib(r,"class",v.join(" "))});const l=["style","class"],c=_r(o,(u,f)=>!Pt(l,f));i.setAttribs(r,c)})(e,t,_l(e))},O_={insert:(e,t)=>{let n,r,o,i,a=!1;const s=e.dom,l=e.schema,c=l.getNonEmptyElements(),u=e.selection.getRng(),f=Ar(e),g=u.collapsed&&u.startContainer===e.dom.getRoot(),v=I(u.startContainer),m=Zn(v,u.startOffset),y=m.exists(H=>ii(H)&&!Ho(H)),h=g&&y,S=H=>{let X=n;const V=l.getTextInlineElements();let ae;ae=H||"TABLE"===o||"HR"===o?s.create(H||f):U.cloneNode(!1);let Ue=ae;if(!1===Z1(e))s.setAttrib(ae,"style",null),s.setAttrib(ae,"class",null);else do{if(V[X.nodeName]){if(xo(X)||so(X))continue;const Me=X.cloneNode(!1);s.setAttrib(Me,"id",""),ae.hasChildNodes()?(Me.appendChild(ae.firstChild),ae.appendChild(Me)):(Ue=Me,ae.appendChild(Me))}}while((X=X.parentNode)&&X!==L);return oc(e,ae),Mg(Ue),ae},x=H=>{const X=Bg(H,n,r);if(Ie(n)&&(H?X>0:X<n.data.length))return!1;if(n.parentNode===U&&a&&!H||H&&$e(n)&&n===U.firstChild)return!0;if(Ig(n,"TABLE")||Ig(n,"HR"))return a&&!H||!a&&H;const V=new Pn(n,U);let ae;for(Ie(n)&&(H&&0===X?V.prev():H||X!==n.data.length||V.next());ae=V.current();){if($e(ae)){if(!ae.getAttribute("data-mce-bogus")){const Ue=ae.nodeName.toLowerCase();if(c[Ue]&&"br"!==Ue)return!1}}else if(Ie(ae)&&!Ia(ae.data))return!1;H?V.prev():V.next()}return!0},k=()=>{let H;return H=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==Z?S(f):S(),((X,V)=>{const ae=ex(X);return!Ve(V)&&(D(ae)?Pt(xe.explode(ae),V.nodeName.toLowerCase()):ae)})(e,i)&&Lg(s,i)&&s.isEmpty(U,void 0,{includeZwsp:!0})?H=s.split(i,U):s.insertAfter(H,U),Gs(e,H),H};Zc(s,u).each(H=>{u.setStart(H.startContainer,H.startOffset),u.setEnd(H.endContainer,H.endOffset)}),n=u.startContainer,r=u.startOffset;const N=!(!t||!t.shiftKey),P=!(!t||!t.ctrlKey);$e(n)&&n.hasChildNodes()&&!h&&(a=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=a&&Ie(n)?n.data.length:0);const L=Hd(s,n);if(!L||((H,X)=>{const V=H.dom.getParent(X,"ol,ul,dl");return null!==V&&"false"===H.dom.getContentEditableParent(V)})(e,n))return;N||(n=((H,X,V,ae,Ue)=>{var Me,nt;const qe=H.dom,ht=null!==(Me=Hd(qe,ae))&&void 0!==Me?Me:qe.getRoot();let bt=qe.getParent(ae,qe.isBlock);if(!bt||!Lg(qe,bt)){if(bt=bt||ht,!bt.hasChildNodes()){const W=qe.create(X);return oc(H,W),bt.appendChild(W),V.setStart(W,0),V.setEnd(W,0),W}let Ge,tt=ae;for(;tt&&tt.parentNode!==bt;)tt=tt.parentNode;for(;tt&&!qe.isBlock(tt);)Ge=tt,tt=tt.previousSibling;const ut=null===(nt=null==Ge?void 0:Ge.parentElement)||void 0===nt?void 0:nt.nodeName;if(Ge&&ut&&H.schema.isValidChild(ut,X.toLowerCase())){const W=Ge.parentNode,K=qe.create(X);for(oc(H,K),W.insertBefore(K,Ge),tt=Ge;tt&&!qe.isBlock(tt);){const be=tt.nextSibling;K.appendChild(tt),tt=be}V.setStart(ae,Ue),V.setEnd(ae,Ue)}}return ae})(e,f,u,n,r));let U=s.getParent(n,s.isBlock)||s.getRoot();i=z(null==U?void 0:U.parentNode)?s.getParent(U.parentNode,s.isBlock):null,o=U?U.nodeName.toUpperCase():"";const Z=i?i.nodeName.toUpperCase():"";if("LI"!==Z||P||(U=i,i=i.parentNode,o=Z),$e(i)&&(H=e,V=U,!N&&V.nodeName.toLowerCase()===Ar(H)&&H.dom.isEmpty(V)&&((ae,Ue,Me)=>{let nt=Ue;for(;nt&&nt!==ae&&le(nt.nextSibling);){const ht=nt.parentElement;if(!ht||(qe=ht,!yt(H.schema.getTextBlockElements(),qe.nodeName.toLowerCase())))return vm(ht);nt=ht}var qe;return!1})(H.getBody(),V)))return((H,X,V)=>{var ae,Ue,Me;const nt=X(Ar(H)),qe=H.dom.getParent(V,vm);qe&&(H.dom.insertAfter(nt,qe),Gs(H,nt),(null!==(Me=null===(Ue=null===(ae=V.parentElement)||void 0===ae?void 0:ae.childNodes)||void 0===Ue?void 0:Ue.length)&&void 0!==Me?Me:0)>1&&H.dom.remove(V))})(e,S,U);var H,V;if(/^(LI|DT|DD)$/.test(o)&&$e(i)&&s.isEmpty(U))return void((H,X,V,ae,Ue)=>{const Me=H.dom,nt=H.selection.getRng(),qe=V.parentNode;if(V===H.getBody()||!qe)return;var ht;P_(ht=V)&&P_(ht.parentNode)&&(Ue="LI");let bt=X(Ue);if(qd(V,ae,!0)&&qd(V,ae,!1))if(R_(V,"LI")){const Ge=Wd(V);Me.insertAfter(bt,Ge),(null===(ut=(tt=V).parentNode)||void 0===ut?void 0:ut.firstChild)===tt?Me.remove(Ge):Me.remove(V)}else Me.replace(bt,V);else if(qd(V,ae,!0))R_(V,"LI")?(Me.insertAfter(bt,Wd(V)),bt.appendChild(Me.doc.createTextNode(" ")),bt.appendChild(V)):qe.insertBefore(bt,V),Me.remove(ae);else if(qd(V,ae,!1))Me.insertAfter(bt,Wd(V)),Me.remove(ae);else{V=Wd(V);const Ge=nt.cloneRange();Ge.setStartAfter(ae),Ge.setEndAfter(V);const tt=Ge.extractContents();"LI"===Ue&&((ut,W)=>ut.firstChild&&"LI"===ut.firstChild.nodeName)(tt)?(bt=tt.firstChild,Me.insertAfter(tt,V)):(Me.insertAfter(tt,V),Me.insertAfter(bt,V)),Me.remove(ae)}var tt,ut;Gs(H,bt)})(e,S,i,U,f);if(!(h||U!==e.getBody()&&Lg(s,U)))return;const ve=U.parentNode;let de;if(h)de=S(f),m.fold(()=>{Ze(v,I(de))},H=>{De(H,I(de))}),e.selection.setCursorLocation(de,0);else if(Es(U))de=Su(U),s.isEmpty(U)&&Mg(U),oc(e,de),Gs(e,de);else if(x(!1))de=k();else if(x(!0)&&ve){de=ve.insertBefore(S(),U);const H=I(u.startContainer).dom.hasChildNodes()&&u.collapsed;Gs(e,Ig(U,"HR")||H?de:U)}else{const H=(V=>{const ae=V.cloneRange();return ae.setStart(V.startContainer,Bg(!0,V.startContainer,V.startOffset)),ae.setEnd(V.endContainer,Bg(!1,V.endContainer,V.endOffset)),ae})(u).cloneRange();H.setEndAfter(U);const X=H.extractContents();(V=>{Ae(gc(I(V),rr),ae=>{const Ue=ae.dom;Ue.nodeValue=Li(Ue.data)})})(X),(V=>{let ae=V;do{Ie(ae)&&(ae.data=ae.data.replace(/^[\r\n]+/,"")),ae=ae.firstChild}while(ae)})(X),de=X.firstChild,s.insertAfter(X,U),((V,ae,Ue)=>{var Me;const nt=[];if(!Ue)return;let qe=Ue;for(;qe=qe.firstChild;){if(V.isBlock(qe))return;$e(qe)&&!ae[qe.nodeName.toLowerCase()]&&nt.push(qe)}let ht=nt.length;for(;ht--;)qe=nt[ht],(!qe.hasChildNodes()||qe.firstChild===qe.lastChild&&""===(null===(Me=qe.firstChild)||void 0===Me?void 0:Me.nodeValue)||gR(V,qe))&&V.remove(qe)})(s,c,de),((V,ae)=>{ae.normalize();const Ue=ae.lastChild;(!Ue||$e(Ue)&&/^(left|right)$/gi.test(V.getStyle(Ue,"float",!0)))&&V.add(ae,"br")})(s,U),s.isEmpty(U)&&Mg(U),de.normalize(),s.isEmpty(de)?(s.remove(de),k()):(oc(e,de),Gs(e,de))}s.setAttrib(de,"id",""),e.dispatch("NewBlock",{newBlock:de})},fakeEventName:"insertParagraph"},D_=(e,t,n)=>{const r=e.dom.createRng();n?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),Ll(e,r)},mR=(e,t)=>{const n=ge("br");De(I(t),n),e.undoManager.add()},hR=(e,t)=>{vR(e.getBody(),t)||ot(I(t),ge("br"));const n=ge("br");ot(I(t),n),D_(e,n.dom,!1),e.undoManager.add()},vR=(e,t)=>{return n=he.after(t),!!dn(n.getNode())||br(e,he.after(t)).map(r=>dn(r.getNode())).getOr(!1);var n},M_=e=>e&&"A"===e.nodeName&&"href"in e,bR=e=>e.fold(Ot,M_,M_,Ot),yR=(e,t)=>{t.fold(We,ye(mR,e),ye(hR,e),We)},I_={insert:(e,t)=>{const n=(r=>{const o=ye(Za,r),i=he.fromRangeStart(r.selection.getRng());return bi(o,r.getBody(),i).filter(bR)})(e);n.isSome()?n.each(ye(yR,e)):((r,o)=>{const a=r.dom,s=r.selection.getRng();let l,c=!1;Zc(a,s).each(h=>{s.setStart(h.startContainer,h.startOffset),s.setEnd(h.endContainer,h.endOffset)});let u=s.startOffset,f=s.startContainer;if($e(f)&&f.hasChildNodes()){const h=u>f.childNodes.length-1;f=f.childNodes[Math.min(u,f.childNodes.length-1)]||f,u=h&&Ie(f)?f.data.length:0}let g=a.getParent(f,a.isBlock);const v=g&&g.parentNode?a.getParent(g.parentNode,a.isBlock):null;"LI"!==(v?v.nodeName.toUpperCase():"")||!(!o||!o.ctrlKey)||(g=v),Ie(f)&&u>=f.data.length&&(((h,S,x)=>{const k=new Pn(S,x);let N;const P=h.getNonEmptyElements();for(;N=k.next();)if(P[N.nodeName.toLowerCase()]||Ie(N)&&N.length>0)return!0;return!1})(r.schema,f,g||a.getRoot())||(l=a.create("br"),s.insertNode(l),s.setStartAfter(l),s.setEndAfter(l),c=!0)),l=a.create("br"),Vu(a,s,l),D_(r,l,c),r.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},L_=(e,t)=>Dg(e).filter(n=>t.length>0&&Xt(I(n),t)).isSome(),Kr=di([{br:[]},{block:[]},{none:[]}]),CR=(e,t)=>{return L_(n=e,J1(n));var n},B_=e=>(t,n)=>Dg(t).filter(o=>ll(I(o))).isSome()===e,j_=(e,t)=>(n,r)=>Dg(n).fold(Fe(""),a=>a.nodeName.toUpperCase())===e.toUpperCase()===t,SR=e=>{const t=Hd(e.dom,e.selection.getStart());return Ve(t)},ic=e=>j_("pre",e),zd=e=>(t,n)=>Y1(t)===e,_R=(e,t)=>{return L_(n=e,Q1(n));var n},Vd=(e,t)=>t,ER=e=>{const t=Ar(e),n=Hd(e.dom,e.selection.getStart());return z(n)&&e.schema.isValidChild(n.nodeName,t)},wR=e=>{const t=e.selection.getRng(),n=t.collapsed&&t.startContainer===e.dom.getRoot(),r=I(t.startContainer),o=Zn(r,t.startOffset).map(i=>ii(i)&&!Ho(i));return n&&o.getOr(!0)},go=(e,t)=>(n,r)=>yn(e,(o,i)=>o&&i(n,r),!0)?T.some(t):T.none(),Gd=(e,t,n)=>{t.selection.isCollapsed()||t.execCommand("delete"),z(n)&&Ud(t,e.fakeEventName).isDefaultPrevented()||(e.insert(t,n),z(n)&&Fd(t,e.fakeEventName))},F_=(e,t)=>{const n=()=>Gd(I_,e,t),r=()=>Gd(O_,e,t),o=(i=e,a=t,GC([go([CR],Kr.none()),go([ic(!0),SR],Kr.none()),go([j_("summary",!0)],Kr.br()),go([ic(!0),zd(!1),Vd],Kr.br()),go([ic(!0),zd(!1)],Kr.block()),go([ic(!0),zd(!0),Vd],Kr.block()),go([ic(!0),zd(!0)],Kr.br()),go([B_(!0),Vd],Kr.br()),go([B_(!0)],Kr.block()),go([_R],Kr.br()),go([Vd],Kr.br()),go([ER],Kr.block()),go([wR],Kr.block())],[i,!(!a||!a.shiftKey)]).getOr(Kr.none()));var i,a;switch(X1(e)){case"linebreak":o.fold(n,n,We);break;case"block":o.fold(r,r,We);break;case"invert":o.fold(r,n,We);break;default:o.fold(n,r,We)}},U_=$n(),xR=U_.os.isiOS()&&U_.browser.isSafari(),H_=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(()=>{F_(e,t)}))},kR=$n(),W_=e=>e.stopImmediatePropagation(),q_=e=>e.keyCode===Qe.PAGE_UP||e.keyCode===Qe.PAGE_DOWN,z_=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",W_,!0):!n&&e.get()&&t.off("NodeChange",W_),e.set(n)},V_=(e,t)=>{const n=t.container(),r=t.offset();return Ie(n)?(n.insertData(r,e),T.some(he(n,r+e.length))):Uc(t).map(o=>{const i=Be(e);return t.isAtEnd()?ot(o,i):De(o,i),he(i.dom,e.length)})},G_=ye(V_,Bn),K_=ye(V_," "),$_=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},TR=e=>{const t=he.fromRangeStart(e.selection.getRng()),n=I(e.getBody());if(e.selection.isCollapsed()){const r=ye(Za,e),o=he.fromRangeStart(e.selection.getRng());return bi(r,e.getBody(),o).bind((i=n,a=>a.fold(s=>Nr(i.dom,he.before(s)),s=>yr(s),s=>wo(s),s=>br(i.dom,he.after(s))))).map(i=>()=>{return(a=n,s=t,l=>Zb(a,l)?G_(s):K_(s))(i).each($_(e));var a,s})}var i;return T.none()},AR=e=>{return gr(J.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),()=>{const r=I(e.getBody());var o,i;e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),(o=r,i=he.fromRangeStart(e.selection.getRng()),Zb(o,i)?G_(i):K_(i)).each($_(e))});var t,n},NR=e=>ak(e)?[{keyCode:Qe.TAB,action:_t(a_,e,!0)},{keyCode:Qe.TAB,shiftKey:!0,action:_t(a_,e,!1)}]:[],RR=e=>{if(e.addShortcut("Meta+P","","mcePrint"),pR(e),vi(e))return jn(null);{const t=(e=>{const t=jn(null),n=ye(Za,e);return e.on("NodeChange",r=>{El(e)&&(((o,i,a)=>{const s=wt(sr(I(i.getRoot()),'*[data-mce-selected="inline-boundary"]'),u=>u.dom),l=gt(s,o),c=gt(a,o);Ae(mt(l,c),ye(fS,!1)),Ae(mt(c,l),ye(fS,!0))})(n,e.dom,r.parents),((o,i)=>{const a=i.get();if(o.selection.isCollapsed()&&!o.composing&&a){const s=he.fromRangeStart(o.selection.getRng());he.isTextPosition(s)&&!yu(l=s)&&!Cu(l)&&(Rd(o,((e,t)=>{return he.isTextPosition(t)?(r=t,$h(n=e)&&r.container()===n?((o,i)=>{const a=Xh(o.data.substr(0,i.offset())),s=Xh(o.data.substr(i.offset()));return(a.text+s.text).length>0?(Qh(o),he(o,i.offset()-a.count)):i})(n,r):Jh(n,r)):((n,r)=>r.container()===n.parentNode?((o,i)=>{const a=i.container(),s=((l,c)=>{const u=ur(l,c);return-1===u?T.none():T.some(u)})(gn(a.childNodes),o).map(l=>l<i.offset()?he(a,i.offset()-1):i).getOr(i);return za(o),s})(n,r):Jh(n,r))(e,t);var n,r})(a,s)),i.set(null))}var l})(e,t),((o,i,a,s)=>{if(i.selection.isCollapsed()){const l=gt(s,o);Ae(l,c=>{const u=he.fromRangeStart(i.selection.getRng());bi(o,i.getBody(),u).bind(f=>pS(i,a,f))})}})(n,e,t,r.parents))}),t})(e);return(n=e).on("keyup compositionstart",ye(PN,n)),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((i,a,s)=>{const l=J.os.isMacOS()||J.os.isiOS();Zl([{keyCode:Qe.RIGHT,action:_t(jS,i,!0)},{keyCode:Qe.LEFT,action:_t(jS,i,!1)},{keyCode:Qe.UP,action:_t(FS,i,!1)},{keyCode:Qe.DOWN,action:_t(FS,i,!0)},...l?[{keyCode:Qe.UP,action:_t(Od,i,!1),metaKey:!0,shiftKey:!0},{keyCode:Qe.DOWN,action:_t(Od,i,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Qe.RIGHT,action:_t(n_,i,!0)},{keyCode:Qe.LEFT,action:_t(n_,i,!1)},{keyCode:Qe.UP,action:_t(r_,i,!1)},{keyCode:Qe.DOWN,action:_t(r_,i,!0)},{keyCode:Qe.RIGHT,action:_t(VS,i,!0)},{keyCode:Qe.LEFT,action:_t(VS,i,!1)},{keyCode:Qe.UP,action:_t(GS,i,!1)},{keyCode:Qe.DOWN,action:_t(GS,i,!0)},{keyCode:Qe.RIGHT,action:_t(gS,i,a,!0)},{keyCode:Qe.LEFT,action:_t(gS,i,a,!1)},{keyCode:Qe.RIGHT,ctrlKey:!l,altKey:l,action:_t(CN,i,a)},{keyCode:Qe.LEFT,ctrlKey:!l,altKey:l,action:_t(SN,i,a)},{keyCode:Qe.UP,action:_t(HS,i,!1)},{keyCode:Qe.DOWN,action:_t(HS,i,!0)}],s).each(c=>{s.preventDefault()})})(n,r,o)})})(e,t),((n,r)=>{let o=!1;n.on("keydown",i=>{o=i.keyCode===Qe.BACKSPACE,i.isDefaultPrevented()||((a,s,l)=>{const c=l.keyCode===Qe.BACKSPACE?"deleteContentBackward":"deleteContentForward";zS([{keyCode:Qe.BACKSPACE,action:_t(NS,a)},{keyCode:Qe.BACKSPACE,action:_t(ng,a,!1)},{keyCode:Qe.DELETE,action:_t(ng,a,!0)},{keyCode:Qe.BACKSPACE,action:_t(Zp,a,!1)},{keyCode:Qe.DELETE,action:_t(Zp,a,!0)},{keyCode:Qe.BACKSPACE,action:_t(ug,a,s,!1)},{keyCode:Qe.DELETE,action:_t(ug,a,s,!0)},{keyCode:Qe.BACKSPACE,action:_t(sp,a,!1)},{keyCode:Qe.DELETE,action:_t(sp,a,!0)},{keyCode:Qe.BACKSPACE,action:_t(rg,a,!1)},{keyCode:Qe.DELETE,action:_t(rg,a,!0)},{keyCode:Qe.BACKSPACE,action:_t(gg,a,!1)},{keyCode:Qe.DELETE,action:_t(gg,a,!0)},{keyCode:Qe.BACKSPACE,action:_t(Qp,a,!1)},{keyCode:Qe.DELETE,action:_t(Qp,a,!0)},{keyCode:Qe.BACKSPACE,action:_t(Xp,a,!1)},{keyCode:Qe.DELETE,action:_t(Xp,a,!0)},{keyCode:Qe.BACKSPACE,action:_t(fg,a,!1)},{keyCode:Qe.DELETE,action:_t(fg,a,!0)}],l).filter(u=>a.selection.isEditable()).each(u=>{l.preventDefault(),Ud(a,c).isDefaultPrevented()||(u(),Fd(a,c))})})(n,r,i)}),n.on("keyup",i=>{i.isDefaultPrevented()||((a,s,l)=>{const c=$n(),u=c.os,f=c.browser,g=u.isMacOS()?[{keyCode:Qe.BACKSPACE,altKey:!0,action:_t(Jl,a)},{keyCode:Qe.DELETE,altKey:!0,action:_t(Jl,a)}]:[{keyCode:Qe.BACKSPACE,ctrlKey:!0,action:_t(Jl,a)},{keyCode:Qe.DELETE,ctrlKey:!0,action:_t(Jl,a)}];u.isMacOS()&&l&&g.push({keyCode:f.isFirefox()?224:91,action:_t(Jl,a)}),Zl([{keyCode:Qe.BACKSPACE,action:_t(UC,a)},{keyCode:Qe.DELETE,action:_t(UC,a)},...g],s)})(n,i,o),o=!1})})(e,t),(n=>{let r=T.none();n.on("keydown",o=>{var i;o.keyCode===Qe.ENTER&&(xR&&(i=>{if(!i.collapsed)return!1;const a=i.startContainer;if(Ie(a)){const s=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(i.startOffset-1);return s.test(l)}return!1})(n.selection.getRng())?(r=T.some((i=n).selection.getBookmark()),i.undoManager.add()):H_(n,o))}),n.on("keyup",o=>{o.keyCode===Qe.ENTER&&r.each(()=>{return a=o,(i=n).undoManager.undo(),r.fold(We,s=>i.selection.moveToBookmark(s)),H_(i,a),void(r=T.none());var i,a})})})(e),(n=>{n.on("keydown",r=>{var o,i;r.isDefaultPrevented()||(i=r,zS([{keyCode:Qe.SPACEBAR,action:_t(TR,o=n)},{keyCode:Qe.SPACEBAR,action:_t(AR,o)}],i).each(a=>{i.preventDefault(),Ud(o,"insertText",{data:" "}).isDefaultPrevented()||(a(),Fd(o,"insertText",{data:" "}))}))})})(e),(n=>{n.on("input",r=>{r.isComposing||(o=>{const i=I(o.getBody());o.selection.isCollapsed()&&((e,t)=>{const n=t.container();if(!Ie(n))return T.none();if((r=>{const o=r.container();return Ie(o)&&an(o.data,Bn)})(t)){const r=ny(e,n,!1)||(o=>{const i=o.data,a=(s=>{const l=s.split("");return wt(l,(c,u)=>zc(c)&&u>0&&u<l.length-1&&df(l[u-1])&&df(l[u+1])?" ":c).join("")})(i);return a!==i&&(o.data=a,!0)})(n)||ry(e,n,!1);return gr(r,t)}if(Yf(e,t)){const r=ny(e,n,!0)||ry(e,n,!0);return gr(r,t)}return T.none()})(i,he.fromRangeStart(o.selection.getRng())).each(a=>{o.selection.setRng(a.toRange())})})(n)})})(e),(n=>{n.on("keydown",r=>{var i;r.isDefaultPrevented()||(i=r,Zl([...NR(n)],i).each(a=>{i.preventDefault()}))})})(e),((n,r)=>{n.on("keydown",o=>{o.isDefaultPrevented()||((i,a,s)=>{const l=J.os.isMacOS()||J.os.isiOS();Zl([{keyCode:Qe.END,action:_t(US,i,!0)},{keyCode:Qe.HOME,action:_t(US,i,!1)},...l?[]:[{keyCode:Qe.HOME,action:_t(Od,i,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Qe.END,action:_t(Od,i,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Qe.END,action:_t(KS,i,!0)},{keyCode:Qe.HOME,action:_t(KS,i,!1)},{keyCode:Qe.END,action:_t(Pd,i,!0,a)},{keyCode:Qe.HOME,action:_t(Pd,i,!1,a)}],s).each(c=>{s.preventDefault()})})(n,r,o)})})(e,t),((n,r)=>{if(kR.os.isMacOS())return;const o=jn(!1);n.on("keydown",i=>{q_(i)&&z_(o,n,!0)}),n.on("keyup",i=>{var a,s,l;i.isDefaultPrevented()||(l=i,Zl([{keyCode:Qe.PAGE_UP,action:_t(Pd,a=n,!1,s=r)},{keyCode:Qe.PAGE_DOWN,action:_t(Pd,a,!0,s)}],l)),q_(i)&&o.get()&&(z_(o,n,!1),n.nodeChanged())})})(e,t),t}var n};class PR{constructor(t){let n;this.lastPath=[],this.editor=t;const r=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const i=t.selection.getRng(),a={startContainer:i.startContainer,startOffset:i.startOffset,endContainer:i.endContainer,endOffset:i.endOffset};"nodechange"!==o.type&&Af(a,n)||t.dispatch("SelectionChange"),n=a}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);o&&Gc(t)&&!r.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&Gc(t)&&("IMG"===t.selection.getNode().nodeName?co.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor.selection;let r;if(this.editor.initialized&&n&&!Nx(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();r=n.getStart(!0)||o,r.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o);const i=[];this.editor.dom.getParent(r,a=>a===o||(i.push(a),!1)),this.editor.dispatch("NodeChange",Wt(rt({},t),{element:r,parents:i}))}}isSameElementPath(t){let n;const r=this.editor,o=Sr(r.dom.getParents(t,Ft,r.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=o,!0}return this.lastPath=o,!1}}const Y_=vl("image"),jg=vl("event"),Kd=e=>t=>{t[jg]=e},X_=Kd(0),OR=Kd(2),DR=Kd(1),Fg=vl("mode"),$d=e=>t=>{t[Fg]=e},Q_=(e,t)=>$d(t)(e),J_=$d(0),Ug=$d(2),IR=$d(1),Z_=e=>t=>T.from(t[Fg]).exists(r=>r===e),Ks=Z_(0),eE=Z_(1),LR=["none","copy","link","move"],BR=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Hg=()=>{const e=new window.DataTransfer;let t="move",n="all";const r={get dropEffect(){return t},set dropEffect(o){Pt(LR,o)&&(t=o)},get effectAllowed(){return n},set effectAllowed(o){(e=>T.from(e[jg]).exists(n=>0===n))(r)&&Pt(BR,o)&&(n=o)},get items(){return o=r,Wt(rt({},i=e.items),{get length(){return i.length},add:(a,s)=>{if(Ks(o)){if(!D(a))return i.add(a);if(!Je(s))return i.add(a,s)}return null},remove:a=>{Ks(o)&&i.remove(a)},clear:()=>{Ks(o)&&i.clear()}});var o,i},get files(){return eE(r)?Object.freeze({length:0,item:o=>null}):e.files},get types(){return e.types},setDragImage:(o,i,a)=>{Ks(r)&&(r[Y_]={image:o,x:i,y:a},e.setDragImage(o,i,a))},getData:o=>eE(r)?"":e.getData(o),setData:(o,i)=>{Ks(r)&&e.setData(o,i)},clearData:o=>{Ks(r)&&e.clearData(o)}};return J_(r),r},tE=(e,t)=>e.setData("text/html",t),nE="x-tinymce/html",Yd=Fe(nE),Wg="\x3c!-- "+nE+" --\x3e",jR=e=>Wg+e,rE=e=>-1!==e.indexOf(Wg),oE="%MCEPASTEBIN%",qg=e=>e.dom.get("mcepastebin"),FR=e=>z(e)&&"mcepastebin"===e.id,iE=e=>e===oE,aE=(e,t)=>(xe.each(t,n=>{e=Ne(n,RegExp)?e.replace(n,""):e.replace(n[0],n[1])}),e),sE=e=>aE(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,n,r)=>n||r?Bn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),lE=(e,t)=>({content:e,cancelled:t}),zg=(e,t)=>(e.insertContent(t,{merge:$x(e),paste:!0}),!0),Vg=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),UR=(e,t,n)=>{return!(e.selection.isCollapsed()||!Vg(t)||(r=e,o=t,i=n,r.undoManager.extra(()=>{i(r,o)},()=>{r.execCommand("mceInsertLink",!1,o)}),0));var r,o,i},HR=(e,t,n)=>{return r=e,!(!Vg(o=t)||!Yt(Kh(r),i=>Ai(o.toLowerCase(),`.${i.toLowerCase()}`)))&&((r,o,i)=>(r.undoManager.extra(()=>{i(r,o)},()=>{r.insertContent('<img src="'+o+'">')}),!0))(e,t,n);var r,o},WR=(e=>{let t=0;return()=>"mceclip"+t++})(),qR=e=>{const t=Hg();return tE(t,e),Ug(t),t},cE=(e,t,n,r,o)=>{const i=((c,u,f)=>{const g=c.dispatch("PastePreProcess",{content:u,internal:f}),v=((m,y)=>{const h=Fs({sanitize:ef(m)},m.schema);h.addNodeFilter("meta",x=>{xe.each(x,k=>{k.remove()})});const S=h.parse(y,{forced_root_block:!1,isRootContent:!0});return fa({validate:!0},m.schema).serialize(S)})(c,g.content);return c.hasEventListeners("PastePostProcess")&&!g.isDefaultPrevented()?((m,y,h)=>{const S=m.dom.create("div",{style:"display:none"},y),x=m.dispatch("PastePostProcess",{node:S,internal:h});return lE(x.node.innerHTML,x.isDefaultPrevented())})(c,v,f):lE(v,g.isDefaultPrevented())})(e,t,n);if(!i.cancelled){const a=i.content,s=()=>{return l=e,c=a,void(r||!Yx(l)?zg(l,c):(f=l,g=c,xe.each([UR,HR,zg],v=>!v(f,g,zg))));var l,c,f,g};o?Ud(e,"insertFromPaste",{dataTransfer:qR(a)}).isDefaultPrevented()||(s(),Fd(e,"insertFromPaste")):s()}},Xd=(e,t,n,r)=>{const o=n||rE(t);cE(e,t.replace(Wg,""),o,!1,r)},Gg=(e,t,n)=>{const r=e.dom.encode(t).replace(/\r\n/g,"\n"),o=((i,a,s)=>{const l=i.split(/\n\n/),c=((g,v)=>{let m="<"+g;const y=Ro(v,(h,S)=>S+'="'+ia.encodeAllRaw(h)+'"');return y.length&&(m+=" "+y.join(" ")),m+">"})(a,s),u="</"+a+">",f=wt(l,g=>g.split(/\n/).join("<br />"));return 1===f.length?f[0]:wt(f,g=>c+g+u).join("")})(km(r,Qx(e)),Ar(e),_l(e));cE(e,o,!1,!0,n)},dE=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const r=e.types[n];try{t[r]=e.getData(r)}catch(o){t[r]=""}}return t},ba=(e,t)=>t in e&&e[t].length>0,uE=e=>ba(e,"text/html")||ba(e,"text/plain"),fE=(e,t,n)=>{const r="paste"===t.type?t.clipboardData:t.dataTransfer;var o;if(jc(e)&&r){const i=((a,s)=>{const l=s.items?pn(gn(s.items),u=>"file"===u.kind?[u.getAsFile()]:[]):[],c=s.files?gn(s.files):[];return gt(l.length>0?l:c,(u=>{const f=Kh(u);return g=>Sn(g.type,"image/")&&Yt(f,v=>(m=>{const y=m.toLowerCase(),h={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return xe.hasOwn(h,y)?"image/"+h[y]:"image/"+y})(v)===g.type)})(a))})(e,r);if(i.length>0)return t.preventDefault(),(o=i,Promise.all(wt(o,a=>_0(a).then(s=>({file:a,uri:s}))))).then(a=>{n&&e.selection.setRng(n),Ae(a,s=>{var l,c;l=e,Ap((c=s).uri).each(({data:u,type:f,base64Encoded:g})=>{const v=g?u:btoa(u),m=c.file,y=l.editorUpload.blobCache,h=y.getByData(v,f),S=null!=h?h:((x,k,N,P)=>{const L=WR(),U=Lh(x)&&z(N.name),Z=U?((H,X)=>{const V=X.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return z(V)?H.dom.encode(V[1]):void 0})(x,N.name):L,de=k.create(L,N,P,Z,U?N.name:void 0);return k.add(de),de})(l,y,m,v);Xd(l,`<img src="${S.blobUri()}">`,!1,!0)})})}),!0}return!1},Kg=(e,t,n,r,o)=>{let i=sE(n);const a=ba(t,Yd())||rE(n),s=!a&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(i),l=Vg(i);(iE(i)||!i.length||s&&!l)&&(r=!0),(r||l)&&(i=ba(t,"text/plain")&&s?t["text/plain"]:(c=>{const u=aa(),f=Fs({},u);let g="";const v=u.getVoidElements(),m=xe.makeMap("script noscript style textarea video audio iframe object"," "),y=u.getBlockElements(),h=S=>{const x=S.name,k=S;if("br"!==x){if("wbr"!==x)if(v[x]&&(g+=" "),m[x])g+=" ";else{if(3===S.type&&(g+=S.value),!(S.name in u.getVoidElements())){let N=S.firstChild;if(N)do{h(N)}while(N=N.next)}y[x]&&k.next&&(g+="\n","p"===x&&(g+="\n"))}}else g+="\n"};return c=aE(c,[/<!\[[^\]]+\]>/g]),h(f.parse(c)),g})(i)),iE(i)||(r?Gg(e,i,o):Xd(e,i,a,o))},pE=(e,t,n,r)=>{((o,i,a)=>{if(!o)return!1;try{return o.clearData(),o.setData("text/html",i),o.setData("text/plain",a),o.setData(Yd(),i),!0}catch(s){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},gE=e=>(t,n)=>{const{dom:r,selection:o}=e,i=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=r.create("div",{contenteditable:"true"},t);r.setStyles(i,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),i.appendChild(a),r.add(e.getBody(),i);const s=o.getRng();a.focus();const l=r.createRng();l.selectNodeContents(a),o.setRng(l),co.setEditorTimeout(e,()=>{o.setRng(s),r.remove(i),n()},0)},mE=e=>({html:jR(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),hE=e=>{return!e.selection.isCollapsed()||!!(t=e).dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody());var t},vE=(e,t)=>{var n,r;return Xa.getCaretRangeFromPoint(null!==(n=t.clientX)&&void 0!==n?n:0,null!==(r=t.clientY)&&void 0!==r?r:0,e.getDoc())},bE=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},VR=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,yE=e=>xe.trim(e).replace(VR,Vc).toLowerCase(),GR=(e,t,n)=>{const r=Gx(e);if(n||"all"===r||!Kx(e))return t;const o=r?r.split(/[, ]/):[];if(o&&"none"!==r){const i=e.dom,a=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(s,l,c,u)=>{const f=i.parseStyle(i.decode(c)),g={};for(let m=0;m<o.length;m++){const y=f[o[m]];let h=y,S=i.getStyle(a,o[m],!0);/color/.test(o[m])&&(h=yE(h),S=yE(S)),S!==h&&(g[o[m]]=y)}const v=i.serializeStyle(g,"span");return v?l+' style="'+v+'"'+u:l+u})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(i,a,s,l)=>a+' style="'+s+'"'+l)},CE=e=>ra(I(e)),SE=(e,t)=>{const n=t.getNode();Je(n)||e.selection.setCursorLocation(n,t.offset())},_E=(e,t)=>{var n;return 0===e.startOffset&&e.endOffset===(null===(n=t.textContent)||void 0===n?void 0:n.length)},EE=$n(),wE=EE.os,YR=EE.browser.isSafari(),xE=wE.isMacOS()||wE.isiOS(),$g=(e,t)=>z(e.getParent(t.container(),"details")),kE=(e,t)=>{const n=e.dom.getParent(t.container(),"details");if(n&&!n.open){const r=e.dom.select("summary",n)[0];r&&wo(r).each(o=>SE(e,o))}else SE(e,t)},JR=dn,TE=Ie,ZR=e=>Zt(e.dom),AE=e=>t=>Rt(I(e),t),NE=(e,t)=>wr(I(e),ZR,AE(t)),RE=(e,t,n)=>{const r=new Pn(e,t),o=n?r.next.bind(r):r.prev.bind(r);let i=e;for(let a=n?e:o();a&&!JR(a);a=o())Eo(a)&&(i=a);return i};var $s;!function(e){e.Before="before",e.After="after"}($s||($s={}));const tP=(e,t)=>Math.abs(e.left-t),nP=(e,t)=>Math.abs(e.right-t),oP=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Yg=(e,t,n)=>{const r=c=>Eo(c.node)?T.some(c):$e(c.node)?Yg(gn(c.node.childNodes),t,n):T.none(),o=(c,u)=>{const f=Ao(c,(g,v)=>u(g,t,n)-u(v,t,n));return((g,v)=>{if(g.length>=2){const m=r(g[0]).getOr(g[0]),y=r(g[1]).getOr(g[1]);if(Math.abs(v(m,t,n)-v(y,t,n))<2){if(Ie(m.node))return T.some(m);if(Ie(y.node))return T.some(y)}}return T.none()})(f,u).orThunk(()=>kn(f,r))},[i,a]=((e,t)=>{return(n=gt(e,n=>{return(r=t)>=(o=n).top&&r<=o.bottom;var r,o}),yn(n,(r,o)=>r.fold(()=>T.some(o),i=>{const a=Math.min(o.left,i.left),s=Math.min(o.top,i.top),l=Math.max(o.right,i.right),c=Math.max(o.bottom,i.bottom);return T.some({top:s,right:l,bottom:c,left:a,width:l-a,height:c-s})}),T.none())).fold(()=>[[],e],n=>{const{pass:r,fail:o}=Qr(e,i=>((a,s)=>{const l=(c=a,u=s,Math.max(0,Math.min(c.bottom,u.bottom)-Math.max(c.top,u.top))/Math.min(a.height,s.height));var c,u;return((c,u)=>c.top<u.bottom&&c.bottom>u.top)(a,s)&&l>.5})(i,n));return[r,o]});var n})(iS(e),n),{pass:s,fail:l}=Qr(a,c=>c.top<n);return o(i,oP).orThunk(()=>o(l,ih)).orThunk(()=>o(s,ih))},PE=(e,t,n)=>((r,o,i)=>{const a=I(r),l=((e,t,n)=>T.from(e.dom.elementFromPoint(t,n)).map(_e))(hr(a),o,i).filter(c=>Yn(a,c)).getOr(a);return((c,u,f,g)=>{const v=(m,y)=>{const h=gt(m.dom.childNodes,Jt(S=>$e(S)&&S.classList.contains("mce-drag-container")));return y.fold(()=>Yg(h,f,g),S=>{const x=gt(h,k=>k!==S.dom);return Yg(x,f,g)}).orThunk(()=>(Rt(m,c)?T.none():Mi(m)).bind(S=>v(S,T.some(m))))};return v(u,T.none())})(a,l,o,i)})(e,t,n).filter(r=>xl(r.node)).map(r=>{return{node:(o=r).node,position:tP(o,i=t)<nP(o,i)?$s.Before:$s.After};var o,i}),OE=e=>{var t,n;const r=e.getBoundingClientRect(),o=e.ownerDocument,i=o.documentElement,a=o.defaultView;return{top:r.top+(null!==(t=null==a?void 0:a.scrollY)&&void 0!==t?t:0)-i.clientTop,left:r.left+(null!==(n=null==a?void 0:a.scrollX)&&void 0!==n?n:0)-i.clientLeft}},DE=e=>({target:e,srcElement:e}),ME=Zt,aP=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(ME,zo),sP=(e,t,n,r)=>{const o=e.dom,i=t.cloneNode(!0);o.setStyles(i,{width:n,height:r}),o.setAttrib(i,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(i,{margin:0,boxSizing:"border-box"}),a.appendChild(i),a},Qd=(e,t)=>n=>()=>{n.scroll({[e]:("left"===e?n.scrollX:n.scrollY)+t,behavior:"smooth"})},IE=Qd("left",-32),LE=Qd("left",32),BE=Qd("top",-32),jE=Qd("top",32),FE=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},ac=(e,t,n,r,o)=>{"dragstart"===t&&tE(r,e.dom.getOuterHTML(n));const i=((e,t,n,r)=>{const o=((i,a)=>{const s=(l=>{const c=Hg(),u=T.from(l[Fg]);return Ug(l),X_(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(f=l,T.from(f[Y_])).each(f=>c.setDragImage(f.image,f.x,f.y)),Ae(l.types,f=>{"Files"!==f&&c.setData(f,l.getData(f))}),Ae(l.files,f=>c.items.add(f)),(f=>T.from(f[jg]))(l).each(f=>{var g;g=c,Kd(f)(g)}),u.each(f=>{Q_(l,f),Q_(c,f)}),c;var f})(i);return"dragstart"===a?(X_(s),J_(s)):"drop"===a?(OR(s),Ug(s)):(DR(s),IR(s)),s})(n,e);return Je(r)?((i,a,s)=>{const l=fn("Function not supported on simulated event.");return rt({bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:i,composedPath:l,initEvent:l,preventDefault:We,stopImmediatePropagation:We,stopPropagation:We,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:s},DE(a))})(e,t,o):(i=e,s=t,l=o,rt(Wt(rt({},r),{dataTransfer:l,type:i}),DE(s)));var i,s,l})(t,n,r,o);return e.dispatch(t,i)},UE=(e,t,n)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&n.fold(()=>ac(t,"dragend",r.element,r.dataTransfer),o=>ac(t,"dragend",r.element,r.dataTransfer,o))}),HE(e)},HE=e=>{e.on(t=>{t.intervalId.clear(),FE(t.ghost)}),e.clear()},sc=Zt,WE=(e,t)=>es(e.getBody(),t),dP=e=>{const t=e.selection,n=e.dom,r=e.getBody(),o=((e,t,n,r)=>{const o=sa();let i,a;const s=Ar(e),l=e.dom,c=()=>{(u=>{var f,g;const v=sr(I(u),"*[contentEditable=false],video,audio,embed,object");for(let m=0;m<v.length;m++){const y=v[m].dom;let h=y.previousSibling;if(wc(h)){const S=h.data;1===S.length?null===(f=h.parentNode)||void 0===f||f.removeChild(h):h.deleteData(S.length-1,1)}h=y.nextSibling,Ec(h)&&(1===h.data.length?null===(g=h.parentNode)||void 0===g||g.removeChild(h):h.deleteData(0,1))}})(t),a&&(za(a),a=null),o.on(u=>{l.remove(u.caret),o.clear()}),i&&(clearInterval(i),i=void 0)};return{show:(u,f)=>{let g;if(c(),pk(f))return null;if(!n(f))return a=((v,m)=>{var y;const h=(null!==(y=v.ownerDocument)&&void 0!==y?y:document).createTextNode(lr),S=v.parentNode;if(m){const x=v.previousSibling;if(_s(x)){if(io(x))return x;if(wc(x))return x.splitText(x.data.length-1)}null==S||S.insertBefore(h,v)}else{const x=v.nextSibling;if(_s(x)){if(io(x))return x;if(Ec(x))return x.splitText(1),x}v.nextSibling?null==S||S.insertBefore(h,v.nextSibling):null==S||S.appendChild(h)}return h})(f,u),g=f.ownerDocument.createRange(),wl(a.nextSibling)?(g.setStart(a,0),g.setEnd(a,0)):(g.setStart(a,1),g.setEnd(a,1)),g;{const v=((h,S,x)=>{var k;const N=(null!==(k=S.ownerDocument)&&void 0!==k?k:document).createElement(h);N.setAttribute("data-mce-caret",x?"before":"after"),N.setAttribute("data-mce-bogus","all"),N.appendChild(Sc().dom);const P=S.parentNode;return x?null==P||P.insertBefore(N,S):S.nextSibling?null==P||P.insertBefore(N,S.nextSibling):null==P||P.appendChild(N),N})(s,f,u),m=Zh(t,f,u);l.setStyle(v,"top",m.top),a=v;const y=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(y,rt({},m)),l.add(t,y),o.set({caret:y,element:f,before:u}),u&&l.addClass(y,"mce-visual-caret-before"),i=setInterval(()=>{o.on(h=>{r()?l.toggleClass(h.caret,"mce-visual-caret-hidden"):l.addClass(h.caret,"mce-visual-caret-hidden")})},500),g=f.ownerDocument.createRange(),g.setStart(v,0),g.setEnd(v,0)}return g},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(u=>{const f=Zh(t,u.element,u.before);l.setStyles(u.caret,rt({},f))})},destroy:()=>clearInterval(i)}})(e,r,n.isBlock,()=>Qa(e)),i="sel-"+n.uniqueId(),a="data-mce-selected";let s;const l=h=>h!==r&&(sc(h)||ci(h))&&n.isChildOf(h,r)&&n.isEditable(h.parentNode),c=(h,S,x,k=!0)=>e.dispatch("ShowCaret",{target:S,direction:h,before:x}).isDefaultPrevented()?null:(k&&t.scrollIntoView(S,-1===h),o.show(x,S)),u=h=>io(h)||Ec(h)||wc(h),f=h=>u(h.startContainer)||u(h.endContainer),v=(h,S)=>{if(!h)return null;if(h.collapsed){if(!f(h)){const P=S?1:-1,L=Nl(P,r,h),U=L.getNode(!S);if(z(U)){if(xl(U))return c(P,U,!!S&&!L.isAtEnd(),!1);if(oa(U)&&Zt(U.nextSibling)){const ve=n.createRng();return ve.setStart(U,0),ve.setEnd(U,0),ve}}const Z=L.getNode(S);if(z(Z)){if(xl(Z))return c(P,Z,!S&&!L.isAtEnd(),!1);if(oa(Z)&&Zt(Z.previousSibling)){const ve=n.createRng();return ve.setStart(Z,1),ve.setEnd(Z,1),ve}}}return null}let x=h.startContainer,k=h.startOffset;const N=h.endOffset;if(Ie(x)&&0===k&&sc(x.parentNode)&&(x=x.parentNode,k=n.nodeIndex(x),x=x.parentNode),!$e(x))return null;if(N===k+1&&x===h.endContainer){const P=x.childNodes[k];if(l(P))return(L=>{const U=L.cloneNode(!0),Z=e.dispatch("ObjectSelected",{target:L,targetClone:U});if(Z.isDefaultPrevented())return null;const ve=((H,X)=>{const V=I(e.getBody()),ae=e.getDoc(),Ue=si(V,"#"+i).getOrThunk(()=>{const qe=Oe('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ae);return Tn(qe,"id",i),Ze(V,qe),qe}),Me=n.createRng();kt(Ue),It(Ue,[Be(Bn,ae),I(X),Be(Bn,ae)]),Me.setStart(Ue.dom.firstChild,1),Me.setEnd(Ue.dom.lastChild,0),ea(Ue,{top:n.getPos(H,e.getBody()).y+"px"}),mb(Ue);const nt=t.getSel();return nt&&(nt.removeAllRanges(),nt.addRange(Me)),Me})(L,Z.targetClone),de=I(L);return Ae(sr(I(e.getBody()),`*[${a}]`),H=>{Rt(de,H)||Mn(H,a)}),n.getAttrib(L,a)||L.setAttribute(a,"1"),s=L,y(),ve})(P)}return null},m=()=>{s&&s.removeAttribute(a),si(I(e.getBody()),"#"+i).each(st),s=null},y=()=>{o.hide()};return vi(e)||(e.on("click",h=>{n.isEditable(h.target)||(h.preventDefault(),e.focus())}),e.on("blur NewBlock",m),e.on("ResizeWindow FullscreenStateChanged",o.reposition),e.on("tap",h=>{const S=h.target,x=WE(e,S);sc(x)?(h.preventDefault(),$l(e,x).each(v)):l(S)&&$l(e,S).each(v)},!0),e.on("mousedown",h=>{const S=h.target;if(S!==r&&"HTML"!==S.nodeName&&!n.isChildOf(S,r)||!((k,N,P)=>{const L=I(k.getBody()),U=k.inline?L:I(hr(L).dom.documentElement),Z=((ve,de,H,X)=>{const V=de.dom.getBoundingClientRect();return{x:H-(ve?V.left+de.dom.clientLeft+BA(de):0),y:X-(ve?V.top+de.dom.clientTop+LA(de):0)}})(k.inline,U,N,P);return((ve,de,H)=>{const X=MA(ve),V=IA(ve);return de>=0&&H>=0&&de<=X&&H<=V})(U,Z.x,Z.y)})(e,h.clientX,h.clientY))return;m(),y();const x=WE(e,S);sc(x)?(h.preventDefault(),$l(e,x).each(v)):PE(r,h.clientX,h.clientY).each(k=>{var N;h.preventDefault(),(N=c(1,k.node,k.position===$s.Before,!1))&&t.setRng(N),$e(x)?x.focus():e.getBody().focus()})}),e.on("keypress",h=>{Qe.modifierPressed(h)||sc(t.getNode())&&h.preventDefault()}),e.on("GetSelectionRange",h=>{let S=h.range;if(s){if(!s.parentNode)return void(s=null);S=S.cloneRange(),S.selectNode(s),h.range=S}}),e.on("SetSelectionRange",h=>{h.range=(h=>{const S=e.schema.getVoidElements(),x=n.createRng(),k=h.startContainer,N=h.startOffset,P=h.endContainer,L=h.endOffset;return yt(S,k.nodeName.toLowerCase())?0===N?x.setStartBefore(k):x.setStartAfter(k):x.setStart(k,N),yt(S,P.nodeName.toLowerCase())?0===L?x.setEndBefore(P):x.setEndAfter(P):x.setEnd(P,L),x})(h.range);const S=v(h.range,h.forward);S&&(h.range=S)}),e.on("AfterSetSelectionRange",h=>{const S=h.range,x=S.startContainer.parentElement;var k,N;f(S)||$e(k=x)&&"mcepastebin"===k.id||y(),z(N=x)&&n.hasClass(N,"mce-offscreen-selection")||m()}),(e=>{const t=sa(),n=Kt.DOM,r=document,o=(l=t,c=e,u=>{if(0===u.button){const f=rn(c.dom.getParents(u.target),aP).getOr(null);if(z(f)&&(g=c.dom,v=c.getBody(),ME(m=f)&&m!==v&&g.isEditable(m.parentElement))){const g=c.dom.getPos(f),v=c.getBody(),m=c.getDoc().documentElement;l.set({element:f,dataTransfer:Hg(),dragging:!1,screenX:u.screenX,screenY:u.screenY,maxX:(c.inline?v.scrollWidth:m.offsetWidth)-2,maxY:(c.inline?v.scrollHeight:m.offsetHeight)-2,relX:u.pageX-g.x,relY:u.pageY-g.y,width:f.offsetWidth,height:f.offsetHeight,ghost:sP(c,f,f.offsetWidth,f.offsetHeight),intervalId:I1(100)})}}var g,v,m}),i=((e,t)=>{const n=Oc((o,i)=>{return s=o,l=i,(a=t)._selectionOverrides.hideFakeCaret(),void PE(a.getBody(),s,l).fold(()=>a.selection.placeCaretAt(s,l),c=>{const u=a._selectionOverrides.showCaret(1,c.node,c.position===$s.Before,!1);u?a.selection.setRng(u):a.selection.placeCaretAt(s,l)});var a,s,l},0);t.on("remove",n.cancel);const r=e;return o=>e.on(i=>{const a=Math.max(Math.abs(o.screenX-i.screenX),Math.abs(o.screenY-i.screenY));if(!i.dragging&&a>10){const c=ac(t,"dragstart",i.element,i.dataTransfer,o);if(z(c.dataTransfer)&&(i.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;i.dragging=!0,t.focus()}if(i.dragging){const c=o.currentTarget===t.getDoc().documentElement,u=((f,g)=>({pageX:g.pageX-f.relX,pageY:g.pageY+5}))(i,(g=o,v=(h=f=t).inline?OE(h.getBody()):{left:0,top:0},m=(h=>{const S=h.getBody();return h.inline?{left:S.scrollLeft,top:S.scrollTop}:{left:0,top:0}})(f),y=((h,S)=>{if(S.target.ownerDocument!==h.getDoc()){const x=OE(h.getContentAreaContainer()),k=(N=>{const P=N.getBody(),L=N.getDoc().documentElement;return N.inline?{left:P.scrollLeft,top:P.scrollTop}:{left:P.scrollLeft||L.scrollLeft,top:P.scrollTop||L.scrollTop}})(h);return{left:S.pageX-x.left+k.left,top:S.pageY-x.top+k.top}}return{left:S.pageX,top:S.pageY}})(f,g),{pageX:y.left-v.left+m.left,pageY:y.top-v.top+m.top}));s=i.ghost,l=t.getBody(),s.parentNode!==l&&l.appendChild(s),((f,g,v,m,y,h,S,x,k,N,P,L)=>{let U=0,Z=0;f.style.left=g.pageX+"px",f.style.top=g.pageY+"px",g.pageX+v>y&&(U=g.pageX+v-y),g.pageY+m>h&&(Z=g.pageY+m-h),f.style.width=v-U+"px",f.style.height=m-Z+"px";const ve=k.clientHeight,de=k.clientWidth,H=S+k.getBoundingClientRect().top,X=x+k.getBoundingClientRect().left;P.on(V=>{V.intervalId.clear(),V.dragging&&L&&(S+8>=ve?V.intervalId.set(jE(N)):S-8<=0?V.intervalId.set(BE(N)):x+8>=de?V.intervalId.set(LE(N)):x-8<=0?V.intervalId.set(IE(N)):H+16>=window.innerHeight?V.intervalId.set(jE(window)):H-16<=0?V.intervalId.set(BE(window)):X+16>=window.innerWidth?V.intervalId.set(LE(window)):X-16<=0&&V.intervalId.set(IE(window)))})})(i.ghost,u,i.width,i.height,i.maxX,i.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),r,c),n.throttle(o.clientX,o.clientY)}var f,g,h,v,m,y,s,l})})(t,e),a=((l,c)=>u=>{l.on(f=>{var g,v,m,y;if(f.intervalId.clear(),f.dragging){if(v=c,m=(v=>{const m=v.getSel();if(z(m)){const y=m.getRangeAt(0).startContainer;return Ie(y)?y.parentNode:y}return null})(c.selection),y=f.element,!Ve(m)&&m!==y&&!v.dom.isChildOf(m,y)&&v.dom.isEditable(m)){const v=null!==(g=c.getDoc().elementFromPoint(u.clientX,u.clientY))&&void 0!==g?g:c.getBody();ac(c,"drop",v,f.dataTransfer,u).isDefaultPrevented()||c.undoManager.transact(()=>{((m,y)=>{const h=m.getParent(y.parentNode,m.isBlock);FE(y),h&&h!==m.getRoot()&&m.isEmpty(h)&&ra(I(h))})(c.dom,f.element),(m=>{const y=m.getData("text/html");return""===y?T.none():T.some(y)})(f.dataTransfer).each(m=>c.insertContent(m)),c._selectionOverrides.hideFakeCaret()})}ac(c,"dragend",c.getBody(),f.dataTransfer,u)}}),HE(l)})(t,e),s=((l,c)=>u=>UE(l,c,T.some(u)))(t,e);var l,c;e.on("mousedown",o),e.on("mousemove",i),e.on("mouseup",a),n.bind(r,"mousemove",i),n.bind(r,"mouseup",s),e.on("remove",()=>{n.unbind(r,"mousemove",i),n.unbind(r,"mouseup",s)}),e.on("keydown",l=>{l.keyCode===Qe.ESC&&UE(t,e,T.none())})})(h=e),Ox(h)&&(S=>{const x=P=>{if(!P.isDefaultPrevented()){const L=P.dataTransfer;L&&(Pt(L.types,"Files")||L.files.length>0)&&(P.preventDefault(),"drop"===P.type&&Ed(S,"Dropped file type is not supported"))}},k=P=>{nd(S,P.target)&&x(P)},N=()=>{const P=Kt.DOM,L=S.dom,U=document,Z=S.inline?S.getBody():S.getDoc(),ve=["drop","dragover"];Ae(ve,de=>{P.bind(U,de,k),L.bind(Z,de,x)}),S.on("remove",()=>{Ae(ve,de=>{P.unbind(U,de,k),L.unbind(Z,de,x)})})};S.on("init",()=>{co.setEditorTimeout(S,N,0)})})(h),(h=>{const S=Oc(()=>{if(!h.removed&&h.getBody().contains(document.activeElement)){const x=h.selection.getRng();if(x.collapsed){const k=Jp(h,x,!1);h.selection.setRng(k)}}},0);h.on("focus",()=>{S.throttle()}),h.on("blur",()=>{S.cancel()})})(e),(h=>{h.on("init",()=>{h.on("focusin",S=>{const x=S.target;if(ci(x)){const k=es(h.getBody(),x),N=Zt(k)?k:x;h.selection.getNode()!==N&&$l(h,N).each(P=>h.selection.setRng(P))}})})})(e)),{showCaret:c,showBlockCaretContainer:h=>{h.hasAttribute("data-mce-caret")&&(Su(h),t.scrollIntoView(h))},hideFakeCaret:y,destroy:()=>{o.destroy(),s=null}};var h},uP=(e,t)=>{let n=t;for(let r=e.previousSibling;Ie(r);r=r.previousSibling)n+=r.data.length;return n},qE=(e,t,n,r,o)=>{if(Ie(n)&&(r<0||r>n.data.length))return[];const i=o&&Ie(n)?[uP(n,r)]:[r];let a=n;for(;a!==t&&a.parentNode;)i.push(e.nodeIndex(a,o)),a=a.parentNode;return a===t?i.reverse():[]},Xg=(e,t,n,r,o,i,a=!1)=>({start:qE(e,t,n,r,a),end:qE(e,t,o,i,a)}),zE=(e,t)=>{const n=t.slice(),r=n.pop();return b(r)?yn(n,(o,i)=>o.bind(a=>T.from(a.childNodes[i])),T.some(e)).bind(o=>Ie(o)&&(r<0||r>o.data.length)?T.none():T.some({node:o,offset:r})):T.none()},VE=(e,t)=>zE(e,t.start).bind(({node:n,offset:r})=>zE(e,t.end).map(({node:o,offset:i})=>{const a=document.createRange();return a.setStart(n,r),a.setEnd(o,i),a})),Ys=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const r=t.parentNode;e.remove(t),Ys(e,r,n)}},Jd=(e,t,n,r=!0)=>{const o=t.startContainer.parentNode,i=t.endContainer.parentNode;t.deleteContents(),r&&!n(t.startContainer)&&(Ie(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),Ie(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),Ys(e,o,n),o!==i&&Ys(e,i,n))},Qg=(e,t)=>T.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),GE=(e,t,n)=>{const r=e.dynamicPatternsLookup({text:n,block:t});return Wt(rt({},e),{blockPatterns:Ah(r).concat(e.blockPatterns),inlinePatterns:Nh(r).concat(e.inlinePatterns)})},KE=(e,t,n,r)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,r),o.toString()},$E=(e,t,n)=>{((r,o,i)=>{if(Ie(r)&&0>=r.length)return T.some(Xo(r,0));{const a=Ha(Dd);return T.from(a.forwards(r,0,Md(r),i)).map(s=>Xo(s.container,0))}})(t,0,t).each(r=>{const o=r.container;s_(o,n.start.length,t).each(s=>{const l=e.createRng();l.setStart(o,0),l.setEnd(s.container,s.offset),Jd(e,l,c=>c===t)});const i=I(o),a=bc(i);var s,l;/^\s[^\s]/.test(a)&&(s=i,l=a.slice(1),vu.set(s,l))})},YE=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Zd=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},XE=(e,t,n)=>{const r=VE(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,i=r.endContainer,a=0===r.endOffset?i:i.splitText(r.endOffset),s=0===r.startOffset?o:o.splitText(r.startOffset),l=s.parentNode;return{prefix:t,end:a.parentNode.insertBefore(YE(e,t+"-end"),a),start:l.insertBefore(YE(e,t+"-start"),s)}},QE=(e,t,n)=>{Ys(e,e.get(t.prefix+"-end"),n),Ys(e,e.get(t.prefix+"-start"),n)},Jg=e=>0===e.start.length,JE=(e,t,n,r)=>{const o=t.start;var i;return Cg(e,r.container,r.offset,(i=o,(a,s)=>{const l=a.data.substring(0,s),c=l.lastIndexOf(i.charAt(i.length-1)),u=l.lastIndexOf(i);return-1!==u?u+i.length:-1!==c?c+1:-1}),n).bind(a=>{var s,l;const c=null!==(l=null===(s=n.textContent)||void 0===s?void 0:s.indexOf(o))&&void 0!==l?l:-1;if(-1!==c&&a.offset>=c+o.length){const u=e.createRng();return u.setStart(a.container,a.offset-o.length),u.setEnd(a.container,a.offset),T.some(u)}return yg(a.container,a.offset-o.length,n).map(f=>{const g=e.createRng();return g.setStart(f.container,f.offset),g.setEnd(a.container,a.offset),g}).filter(f=>f.toString()===o).orThunk(()=>JE(e,t,n,Xo(a.container,0)))})},fP=(e,t,n,r)=>{const o=e.dom,i=o.getRoot(),a=n.pattern,s=n.position.container,l=n.position.offset;return yg(s,l-n.pattern.end.length,t).bind(c=>{const u=Xg(o,i,c.container,c.offset,s,l,r);if(Jg(a))return T.some({matches:[{pattern:a,startRng:u,endRng:u}],position:c});{const f=eu(e,n.remainingPatterns,c.container,c.offset,t,r),g=f.getOr({matches:[],position:c}),v=g.position;return((y,h,S,x,k,N=!1)=>{if(0===h.start.length&&!N){const P=y.createRng();return P.setStart(S,x),P.setEnd(S,x),T.some(P)}return bg(S,x,k).bind(P=>JE(y,h,k,P).bind(L=>{var U;return N&&(L.endContainer===P.container&&L.endOffset===P.offset||0===P.offset&&(null===(U=L.endContainer.textContent)||void 0===U?void 0:U.length)===L.endOffset)?T.none():T.some(L)}))})(o,a,v.container,v.offset,t,f.isNone()).map(y=>{const h=((S,x,k,N=!1)=>Xg(S,x,k.startContainer,k.startOffset,k.endContainer,k.endOffset,N))(o,i,y,r);return{matches:g.matches.concat([{pattern:a,startRng:h,endRng:u}]),position:Xo(y.startContainer,y.startOffset)}})}})},eu=(e,t,n,r,o,i)=>{const a=e.dom;return bg(n,r,a.getRoot()).bind(s=>{const l=KE(a,o,n,r);for(let c=0;c<t.length;c++){const u=t[c];if(!Ai(l,u.end))continue;const f=t.slice();f.splice(c,1);const g=fP(e,o,{pattern:u,remainingPatterns:f,position:s},i);if(g.isNone()&&r>0)return eu(e,t,n,r-1,o,i);if(g.isSome())return g}return T.none()})},ZE=(e,t,n)=>{e.selection.setRng(n),"inline-format"===t.type?Ae(t.format,r=>{e.formatter.apply(r)}):e.execCommand(t.cmd,!1,t.value)},ew=(e,t,n,r,o,i)=>{var a;return((s,l)=>{const c=fr(s,u=>Yt(l,f=>u.pattern.start===f.pattern.start&&u.pattern.end===f.pattern.end));return s.length===l.length?c?s:l:s.length>l.length?s:l})(eu(e,o.inlinePatterns,n,r,t,i).fold(()=>[],s=>s.matches),eu(e,(a=o.inlinePatterns,Ao(a,(s,l)=>l.end.length-s.end.length)),n,r,t,i).fold(()=>[],s=>s.matches))},tw=(e,t)=>{if(0===t.length)return;const n=e.dom,r=e.selection.getBookmark(),o=((i,a)=>{const s=vl("mce_textpattern"),l=To(a,(c,u)=>{const f=XE(i,s+`_end${c.length}`,u.endRng);return c.concat([Wt(rt({},u),{endMarker:f})])},[]);return To(l,(c,u)=>{const f=l.length-c.length-1,g=Jg(u.pattern)?u.endMarker:XE(i,s+`_start${f}`,u.startRng);return c.concat([Wt(rt({},u),{startMarker:g})])},[])})(n,t);Ae(o,i=>{const a=n.getParent(i.startMarker.start,n.isBlock),s=l=>l===a;Jg(i.pattern)?((l,c,u,f)=>{const g=Zd(l.dom,u);Jd(l.dom,g,f),ZE(l,c,g)})(e,i.pattern,i.endMarker,s):((l,c,u,f,g)=>{const v=l.dom,m=Zd(v,f),y=Zd(v,u);Jd(v,y,g),Jd(v,m,g);const S=Zd(v,{prefix:u.prefix,start:u.end,end:f.start});ZE(l,c,S)})(e,i.pattern,i.startMarker,i.endMarker,s),QE(n,i.endMarker,s),QE(n,i.startMarker,s)}),e.selection.moveToBookmark(r)},nw=(e,t,n)=>{for(let r=0;r<e.length;r++)if(n(e[r],t))return!0;return!1},Zg=Kt.DOM,mP=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,em=e=>_r(e,t=>!1===Je(t)),rw=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return em({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:mP(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},ow=e=>{const t=e.options.get;return em({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},iw=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,aw=e=>{const t=iw(e),n=Uh(e),r=e.contentCSS,o=()=>{t.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(n)},i=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let l="";xe.each(e.contentStyles,c=>{l+=c+"\r\n"}),e.dom.addStyle(l)}const a=Promise.all(((l,c,u)=>{const f=[iw(l).loadAll(c)];return l.inline?f:f.concat([l.ui.styleSheetLoader.loadAll(u)])})(e,r,n)).then(i).catch(i),s=ux(e);return s&&((l,c)=>{const u=I(l.getBody()),f=hn(en(u)),g=ge("style");Tn(g,"type","text/css"),Ze(g,Be(c)),Ze(f,g),l.on("remove",()=>{st(g)})})(e,s),a},tm=e=>{var t;!0!==e.removed&&(vi(t=e)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,t.dispatch("Init"),t.focus(!0),(r=>{const o=r.dom.getRoot();r.inline||Gc(r)&&r.selection.getStart(!0)!==o||yr(o).each(i=>{const a=i.getNode(),s=Ii(a)?yr(a).getOr(i):i;r.selection.setRng(s.toRange())})})(t),t.nodeChanged({initial:!0});const n=Bx(t);me(n)&&n.call(t,t),(r=>{const o=Fx(r);o&&co.setEditorTimeout(r,()=>{let i;i=!0===o?r:r.editorManager.get(o),i&&!i.destroyed&&(i.focus(),i.selection.scrollIntoView())},100)})(t)})(e))},sw=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Zg.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const r=e.getBody();var a;r.disabled=!0,e.readonly=qh(e),e._editableRoot=Rx(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&"static"===Zg.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=(e=>{const t=(()=>{let y=[];const h=k=>{if(!k.blob||!k.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const N=k.id||"blobid"+FA+++(()=>{const Z=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+Z()+Z()+Z()})(),P=k.name||N,L=k.blob;var U;return{id:Fe(N),name:Fe(P),filename:Fe(k.filename||P+"."+(U=L.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[U.toLowerCase()]||"dat")),blob:Fe(L),base64:Fe(k.base64),blobUri:Fe(k.blobUri||URL.createObjectURL(L)),uri:Fe(k.uri)}},S=k=>rn(y,k).getOrUndefined(),x=k=>S(N=>N.id()===k);return{create:(k,N,P,L,U)=>{if(D(k))return h({id:k,name:L,filename:U,blob:N,base64:P});if(ne(k))return h(k);throw new Error("Unknown input type")},add:k=>{x(k.id())||y.push(k)},get:x,getByUri:k=>S(N=>N.blobUri()===k),getByData:(k,N)=>S(P=>P.base64()===k&&P.blob().type===N),findFirst:S,removeByUri:k=>{y=gt(y,N=>N.blobUri()!==k||(URL.revokeObjectURL(N.blobUri()),!1))},destroy:()=>{Ae(y,k=>{URL.revokeObjectURL(k.blobUri())}),y=[]}}})();let n,r;const o=yC(),i=[],a=y=>h=>e.selection?y(h):[],s=(y,h,S)=>{let x=0;do{x=y.indexOf(h,x),-1!==x&&(y=y.substring(0,x)+S+y.substr(x+h.length),x+=S.length-h.length+1)}while(-1!==x);return y},l=(y,h,S)=>(y=s(y,`src="${h}"`,`src="${S}"${S===J.transparentSrc?' data-mce-placeholder="1"':""}`),s(y,'data-mce-src="'+h+'"','data-mce-src="'+S+'"')),c=(y,h)=>{Ae(e.undoManager.data,S=>{"fragmented"===S.type?S.fragments=wt(S.fragments,x=>l(x,y,h)):S.content=l(S.content,y,h)})},u=()=>(n||(n=SC(e,o)),v().then(a(y=>{const h=wt(y,S=>S.blobInfo);return n.upload(h,CC(e)).then(a(S=>{const x=[];let k=!1;const N=wt(S,(P,L)=>{const{blobInfo:U,image:Z}=y[L];let ve=!1;return P.status&&tx(e)?(P.url&&!an(Z.src,P.url)&&(k=!0),t.removeByUri(Z.src),vi(e)||((de,H)=>{const X=e.convertURL(H,"src");var V;c(de.src,H),Lo(I(de),{src:Lh(e)?(V=H,V+(-1===V.indexOf("?")?"?":"&")+(new Date).getTime()):H,"data-mce-src":X})})(Z,P.url)):P.error&&(P.error.remove&&(c(Z.src,J.transparentSrc),x.push(Z),ve=!0),Ed(e,Vo.translate(["Failed to upload image: {0}",P.error.message]))),{element:Z,status:P.status,uploadUri:P.url,blobInfo:U,removed:ve}});return x.length>0&&!vi(e)?e.undoManager.transact(()=>{Ae(Tt(x),P=>{const L=Vt(P);var U;st(P),L.each((U=e,Z=>{var ve,de;(ve=U).dom.isEmpty((de=Z).dom)&&z(ve.schema.getTextBlockElements()[zt(de)])&&Ze(Z,Oe('<br data-mce-bogus="1" />'))})),t.removeByUri(P.dom.src)})}):k&&e.undoManager.dispatchChange(),N}))}))),f=()=>Ih(e)?u():Promise.resolve([]),g=y=>fr(i,h=>h(y)),v=()=>(r||(r=((e,t)=>{const n={};return{findAll:(r,o=Ft)=>{const i=gt((s=r)?gn(s.getElementsByTagName("img")):[],s=>{const l=s.src;return!s.hasAttribute("data-mce-bogus")&&!s.hasAttribute("data-mce-placeholder")&&!(!l||l===J.transparentSrc)&&(Sn(l,"blob:")?!e.isUploaded(l)&&o(s):!!Sn(l,"data:")&&o(s))}),a=wt(i,s=>{const l=s.src;if(yt(n,l))return n[l].then(c=>D(c)?c:{image:s,blobInfo:c.blobInfo});{const c=((u,f)=>{const g=()=>Promise.reject("Invalid data URI");if(Sn(f,"blob:")){const y=u.getByUri(f);return z(y)?Promise.resolve(y):(v=f,Sn(v,"blob:")?(h=v,fetch(h).then(S=>S.ok?S.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${h} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Sn(v,"data:")?(m=v,new Promise((h,S)=>{Ap(m).bind(({type:x,data:k,base64Encoded:N})=>S0(x,k,N)).fold(()=>S("Invalid data URI"),h)})):Promise.reject("Unknown URI format")).then(h=>_0(h).then(S=>E0(S,!1,x=>T.some(w0(u,h,x))).getOrThunk(g)))}var h,v,m;return Sn(f,"data:")?x0(u,f).fold(g,y=>Promise.resolve(y)):Promise.reject("Unknown image data format")})(t,l).then(u=>(delete n[l],{image:s,blobInfo:u})).catch(u=>(delete n[l],u));return n[l]=c,c}});var s;return Promise.all(a)}}})(o,t)),r.findAll(e.getBody(),g).then(a(y=>{const h=gt(y,S=>D(S)?(Ed(e,S),!1):"blob"!==S.uriType);return vi(e)||Ae(h,S=>{c(S.image.src,S.blobInfo.blobUri()),S.image.src=S.blobInfo.blobUri(),S.image.removeAttribute("data-mce-src")}),h}))),m=y=>y.replace(/src="(blob:[^"]+)"/g,(h,S)=>{const x=o.getResultUri(S);if(x)return'src="'+x+'"';let k=t.getByUri(S);return k||(k=yn(e.editorManager.get(),(N,P)=>N||P.editorUpload&&P.editorUpload.blobCache.getByUri(S),void 0)),k?'src="data:'+k.blob().type+";base64,"+k.base64()+'"':h});return e.on("SetContent",()=>{Ih(e)?f():v()}),e.on("RawSaveContent",y=>{y.content=m(y.content)}),e.on("GetContent",y=>{y.source_view||"raw"===y.format||"tree"===y.format||(y.content=m(y.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",y=>{Ae(y,h=>{const S=h.attr("src");if(!S||t.getByUri(S))return;const x=o.getResultUri(S);x&&h.attr("src",x)})})}),{blobCache:t,addFilter:y=>{i.push(y)},uploadImages:u,uploadImagesAuto:f,scanForImages:v,destroy:()=>{t.destroy(),o.destroy(),r=n=null}}})(e),e.schema=aa(ow(e)),e.dom=Kt(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:sx(e),referrerPolicy:Qu(e),onSetAttrib:a=>{e.dispatch("SetAttrib",a)}}),e.parser=(a=>{const s=Fs(rw(a),a.schema);return s.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const u=a.dom,f="data-mce-"+c;let g=l.length;for(;g--;){const v=l[g];let m=v.attr(c);if(m&&!v.attr(f)){if(0===m.indexOf("data:")||0===m.indexOf("blob:"))continue;"style"===c?(m=u.serializeStyle(u.parseStyle(m),v.name),m.length||(m=null),v.attr(f,m),v.attr(c,m)):"tabindex"===c?(v.attr(f,m),v.attr(c,null)):v.attr(f,a.convertURL(m,c,v.name))}}}),s.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const u=l[c],f=u.attr("type")||"no/type";0!==f.indexOf("mce-")&&u.attr("type","mce-"+f)}}),rk(a)&&s.addNodeFilter("#cdata",l=>{var c;let u=l.length;for(;u--;){const f=l[u];f.type=8,f.name="#comment",f.value="[CDATA["+a.dom.encode(null!==(c=f.value)&&void 0!==c?c:"")+"]]"}}),s.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const u=a.schema.getNonEmptyElements();for(;c--;){const f=l[c];f.isEmpty(u)&&0===f.getAll("br").length&&f.append(new Rr("br",1))}}),s})(e),e.serializer=cC((a=>{const s=a.options.get;return rt(rt(rt({},rw(a)),ow(a)),em({remove_trailing_brs:s("remove_trailing_brs"),pad_empty_with_br:s("pad_empty_with_br"),url_converter:s("url_converter"),url_converter_scope:s("url_converter_scope"),element_format:s("element_format"),entities:s("entities"),entity_encoding:s("entity_encoding"),indent:s("indent"),indent_after:s("indent_after"),indent_before:s("indent_before")}))})(e),e),e.selection=lC(e.dom,e.getWin(),e.serializer,e),e.annotator=Wv(e),e.formatter=wC(e),e.undoManager=kC(e),e._nodeChangeDispatcher=new PR(e),e._selectionOverrides=dP(e),(a=>{const s=sa(),l=jn(!1),c=Uu(u=>{a.dispatch("longpress",Wt(rt({},u),{type:"longpress"})),l.set(!0)},400);a.on("touchstart",u=>{PS(u).each(f=>{c.cancel();const g={x:f.clientX,y:f.clientY,target:u.target};c.throttle(u),l.set(!1),s.set(g)})},!0),a.on("touchmove",u=>{c.cancel(),PS(u).each(f=>{s.on(g=>{((v,m)=>{const y=Math.abs(v.clientX-m.x),h=Math.abs(v.clientY-m.y);return y>5||h>5})(f,g)&&(s.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",u=>{c.cancel(),"touchcancel"!==u.type&&s.get().filter(f=>f.target.isEqualNode(u.target)).each(()=>{l.get()?u.preventDefault():a.dispatch("tap",Wt(rt({},u),{type:"tap"}))})},!0)})(e),(e=>{var t;(t=e).on("click",n=>{t.dom.getParent(n.target,"details")&&n.preventDefault()}),(t=>{t.parser.addNodeFilter("details",n=>{const r=sk(t);Ae(n,o=>{"expanded"===r?o.attr("open","open"):"collapsed"===r&&o.attr("open",null)})}),t.serializer.addNodeFilter("details",n=>{const r=lk(t);Ae(n,o=>{"expanded"===r?o.attr("open","open"):"collapsed"===r&&o.attr("open",null)})})})(e),(t=>{t.on("keydown",n=>{n.keyCode!==Qe.BACKSPACE&&n.keyCode!==Qe.DELETE||((r,o)=>{const i=T.from(r.getParent(o.startContainer,"details")),a=T.from(r.getParent(o.endContainer,"details"));if(i.isSome()||a.isSome()){const s=i.bind(l=>T.from(r.select("summary",l)[0]));return T.some({startSummary:s,startDetails:i,endDetails:a})}return T.none()})(t.dom,t.selection.getRng()).fold(()=>{((r,o)=>{const{dom:i,selection:a}=r,s=r.getBody();if(r.selection.isCollapsed()){const l=he.fromRangeStart(a.getRng()),c=i.getParent(l.container(),i.isBlock);if(c&&i.isEmpty(c))if(le(c.nextSibling)){const u=Nr(s,l).filter(f=>$g(i,f));if(u.isSome())return u.each(f=>{o||kE(r,f)}),!0}else if(le(c.previousSibling)&&br(s,l).filter(u=>$g(i,u)))return!0;return Rl(o,s,l).fold(Ot,u=>!!$g(i,u)&&(c&&i.isEmpty(c)&&r.dom.remove(c),o||kE(r,u),!0))}return!1})(t,n.keyCode===Qe.DELETE)&&n.preventDefault()},r=>{((e,t,n)=>{const r=e.selection,o=r.getNode(),i=r.getRng(),a=n.keyCode===Qe.BACKSPACE,s=n.keyCode===Qe.DELETE,l=e.selection.isCollapsed(),c=he.fromRangeStart(i),u=e.getBody();return!((l||!((f,g)=>{const v=g.startSummary.exists(h=>h.contains(f.startContainer)),m=g.startSummary.exists(h=>h.contains(f.endContainer)),y=g.startDetails.forall(h=>g.endDetails.forall(S=>h!==S));return(v||m)&&!(v&&m)||y})(i,t))&&!(l&&a&&(f=c,g=t,g.startSummary.exists(v=>{return m=f,yr(v).exists(h=>h.isEqual(m));var m})))&&!(l&&s&&((f,g)=>g.startSummary.exists(v=>{return m=f,wo(y=v).exists(h=>dn(h.getNode())&&Nr(y,h).exists(S=>S.isEqual(m))||h.isEqual(m));var m,y}))(c,t))&&!(l&&a&&((f,g)=>g.startDetails.exists(v=>Nr(v,f).forall(m=>g.startSummary.exists(y=>!y.contains(f.container())&&y.contains(m.container())))))(c,t))&&!(l&&s&&((f,g,v)=>v.startDetails.exists(m=>br(f,g).forall(y=>!m.contains(y.container()))))(u,c,t))&&(!YR||!e1(o)||(!l&&_E(i,o)||fy(s,c,o)?CE(o):e.undoManager.transact(()=>{const f=r.getSel();let{anchorNode:g,anchorOffset:v,focusNode:m,focusOffset:y}=null!=f?f:{};const h=()=>{z(g)&&z(v)&&z(m)&&z(y)&&(null==f||f.setBaseAndExtent(g,v,m,y))},S=(k,N)=>{Ae(k.childNodes,P=>{Ol(P)&&N.appendChild(P)})},x=e.dom.create("span",{"data-mce-bogus":"all"});S(o,x),o.appendChild(x),h(),l&&(xE&&(n.altKey||a&&n.metaKey)||!xE&&n.ctrlKey)&&(null==f||f.modify("extend",a?"left":"right",n.metaKey?"line":"word")),!r.isCollapsed()&&_E(r.getRng(),x)?CE(o):(e.execCommand(a?"Delete":"ForwardDelete"),g=null==f?void 0:f.anchorNode,v=null==f?void 0:f.anchorOffset,m=null==f?void 0:f.focusNode,y=null==f?void 0:f.focusOffset,S(x,o),h()),e.dom.remove(x)}),0)));var f,g})(t,r,n)&&n.preventDefault()})})})(e)})(e),(a=>{const s="contenteditable",l=" "+xe.trim(tk(a))+" ",c=" "+xe.trim(Gh(a))+" ",u=MS(l),f=MS(c),g=nk(a);g.length>0&&a.on("BeforeSetContent",v=>{((m,y,h)=>{let S=y.length,x=h.content;if("raw"!==h.format){for(;S--;)x=x.replace(y[S],RN(m,x,Gh(m)));h.content=x}})(a,g,v)}),a.parser.addAttributeFilter("class",v=>{let m=v.length;for(;m--;){const y=v[m];u(y)?y.attr(s,"true"):f(y)&&y.attr(s,"false")}}),a.serializer.addAttributeFilter(s,v=>{let m=v.length;for(;m--;){const y=v[m];(u(y)||f(y))&&(g.length>0&&y.attr("data-mce-content")?(y.name="#text",y.type=3,y.raw=!0,y.value=y.attr("data-mce-content")):y.attr(s,null))}})})(e),vi(e)||((a=e).on("mousedown",s=>{s.detail>=3&&(s.preventDefault(),(e=>{const t=((n,r)=>{const o=he.fromRangeStart(n).getNode(),i=(u=r,wr(I(o),f=>zo(f.dom)||oo(f),AE(u)).getOr(I(u)).dom),a=RE(o,i,!1),s=RE(o,i,!0),l=document.createRange();var u;return NE(a,i).fold(()=>{TE(a)?l.setStart(a,0):l.setStartBefore(a)},c=>l.setStartBefore(c.dom)),NE(s,i).fold(()=>{TE(s)?l.setEnd(s,s.data.length):l.setEndAfter(s)},c=>l.setEndAfter(c.dom)),l})(e.selection.getRng(),e.getBody());e.selection.setRng(fp(t))})(a))}),(a=>{(s=>{const l=[",",".",";",":","!","?"],c=[32],u=()=>{return v=Zx(s),m=ek(s),{inlinePatterns:Nh(v),blockPatterns:Ah(v),dynamicPatternsLookup:m};var v,m},f=()=>s.options.isSet("text_patterns_lookup");s.on("keydown",v=>{if(13===v.keyCode&&!Qe.modifierPressed(v)&&s.selection.isCollapsed()){const m=u();(m.inlinePatterns.length>0||m.blockPatterns.length>0||f())&&((e,t)=>{const n=e.selection.getRng();return Qg(e,n).map(r=>{var o;const i=Math.max(0,n.startOffset),a=GE(t,r,null!==(o=r.textContent)&&void 0!==o?o:""),s=ew(e,r,n.startContainer,i,a,!0),l=((c,u,f,g)=>{var v;const m=c.dom,y=Ar(c);if(!m.is(u,y))return[];const h=null!==(v=u.textContent)&&void 0!==v?v:"";return((S,x)=>{const k=Ao(S,(L,U)=>U.start.length-L.start.length),N=x.replace(Bn," ");return rn(k,P=>0===x.indexOf(P.start)||0===N.indexOf(P.start))})(f.blockPatterns,h).map(S=>xe.trim(h).length===S.start.length?[]:[{pattern:S,range:Xg(m,m.getRoot(),u,0,u,0,!0)}]).getOr([])})(e,r,a);return(l.length>0||s.length>0)&&(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent("\ufeff"),tw(e,s),((f,g)=>{if(0===g.length)return;const v=f.selection.getBookmark();Ae(g,m=>((y,h)=>{const x=h.pattern,k=VE(y.dom.getRoot(),h.range).getOrDie("Unable to resolve path range");return Qg(y,k).each(N=>{"block-format"===x.type?((P,L)=>{const U=L.get(P);return fe(U)&&xn(U).exists(Z=>yt(Z,"block"))})(x.format,y.formatter)&&y.undoManager.transact(()=>{$E(y.dom,N,x),y.formatter.apply(x.format)}):"block-command"===x.type&&y.undoManager.transact(()=>{$E(y.dom,N,x),y.execCommand(x.cmd,!1,x.value)})}),!0})(f,m)),f.selection.moveToBookmark(v)})(e,l);const c=e.selection.getRng(),u=bg(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const g=f.container;"\ufeff"===g.data.charAt(f.offset-1)&&(g.deleteData(f.offset-1,1),Ys(e.dom,g.parentNode,v=>v===e.dom.getRoot()))})}),!0)}).getOr(!1)})(s,m)&&v.preventDefault()}},!0);const g=()=>{if(s.selection.isCollapsed()){const v=u();(v.inlinePatterns.length>0||f())&&((m,y)=>{const h=m.selection.getRng();Qg(m,h).map(S=>{const x=Math.max(0,h.startOffset-1),k=KE(m.dom,S,h.startContainer,x),N=GE(y,S,k),P=ew(m,S,h.startContainer,x,N,!1);P.length>0&&m.undoManager.transact(()=>{tw(m,P)})})})(s,v)}};s.on("keyup",v=>{nw(c,v,(m,y)=>m===y.keyCode&&!Qe.modifierPressed(y))&&g()}),s.on("keypress",v=>{nw(l,v,(m,y)=>m.charCodeAt(0)===y.charCode)&&co.setEditorTimeout(s,g)})})(a)})(e));const o=RR(e);((e,t)=>{e.addCommand("delete",()=>{var n;RS(n=e,t,!1).fold(()=>{Jf(n),Zf(n)},$t)}),e.addCommand("forwardDelete",()=>{var n;RS(n=e,t,!0).fold(()=>uy(n,"ForwardDelete"),$t)})})(e,o),(a=>{a.on("NodeChange",ye(NN,a))})(e),(a=>{var s;const l=a.dom,c=Ar(a),u=null!==(s=mx(a))&&void 0!==s?s:"",f=(g,v)=>{if((h=>{if(AC(h)){const S=h.keyCode;return!NC(h)&&(Qe.metaKeyPressed(h)||h.altKey||S>=112&&S<=123||Pt(GA,S))}return!1})(g))return;const m=a.getBody(),y=!(AC(h=g)&&!(NC(h)||"keyup"===h.type&&229===h.keyCode))&&((h,S,x)=>{if(En(I(S),!1)){const k=S.firstElementChild;return!k||!h.getStyle(S.firstElementChild,"padding-left")&&!h.getStyle(S.firstElementChild,"padding-right")&&x===k.nodeName.toLowerCase()}return!1})(l,m,c);var h;(""!==l.getAttrib(m,TC)!==y||v)&&(l.setAttrib(m,TC,y?u:null),l.setAttrib(m,"aria-placeholder",y?u:null),((h,S)=>{h.dispatch("PlaceholderToggle",{state:S})})(a,y),a.on(y?"keydown":"keyup",f),a.off(y?"keyup":"keydown",f))};nr(u)&&a.on("init",g=>{f(g,!0),a.on("change SetContent ExecCommand",f),a.on("paste",v=>co.setEditorTimeout(a,()=>f(v)))})})(e),(e=>{const t=jn(!1),n=jn(Xx(e)?"text":"html"),r=(o=>{const i=jn(null);return{create:()=>((a,s)=>{const{dom:l,selection:c}=a,u=a.getBody();s.set(c.getRng());const f=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},oE);J.browser.isFirefox()&&l.setStyle(f,"left","rtl"===l.getStyle(u,"direction",!0)?65535:-65535),l.bind(f,"beforedeactivate focusin focusout",g=>{g.stopPropagation()}),f.focus(),c.select(f,!0)})(o,i),remove:()=>((a,s)=>{const l=a.dom;if(qg(a)){let c;const u=s.get();for(;c=qg(a);)l.remove(c),l.unbind(c);u&&a.selection.setRng(u)}s.set(null)})(o,i),getEl:()=>qg(o),getHtml:()=>(a=>{const s=a.dom,l=(g,v)=>{g.appendChild(v),s.remove(v,!0)},[c,...u]=gt(a.getBody().childNodes,FR);Ae(u,g=>{l(c,g)});const f=s.select("div[id=mcepastebin]",c);for(let g=f.length-1;g>=0;g--){const v=s.create("div");c.insertBefore(v,f[g]),l(v,f[g])}return c?c.innerHTML:""})(o),getLastRng:i.get}})(e);var o,i,a;o=e,(J.browser.isChromium()||J.browser.isSafari())&&(a=GR,(i=o).on("PastePreProcess",s=>{s.content=a(i,s.content,s.internal)})),((o,i)=>{o.addCommand("mceTogglePlainTextPaste",()=>{((a,s)=>{"text"===s.get()?(s.set("html"),Yv(a,!1)):(s.set("text"),Yv(a,!0)),a.focus()})(o,i)}),o.addCommand("mceInsertClipboardContent",(a,s)=>{s.html&&Xd(o,s.html,s.internal,!1),s.text&&Gg(o,s.text,!1)})})(e,n),(o=>{const i=l=>c=>{l(o,c)},a=qx(o);me(a)&&o.on("PastePreProcess",i(a));const s=zx(o);me(s)&&o.on("PastePostProcess",i(s))})(e),e.on("PreInit",()=>{(o=>{o.on("cut",(i=>a=>{!a.isDefaultPrevented()&&hE(i)&&pE(a,mE(i),gE(i),()=>{if(J.browser.isChromium()||J.browser.isFirefox()){const s=i.selection.getRng();co.setEditorTimeout(i,()=>{i.selection.setRng(s),i.execCommand("Delete")},0)}else i.execCommand("Delete")})})(o)),o.on("copy",(i=>a=>{!a.isDefaultPrevented()&&hE(i)&&pE(a,mE(i),gE(i),We)})(o))})(e),((o,i)=>{Wx(o)&&o.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),jc(o)||o.on("drop",a=>{const s=a.dataTransfer;s&&Yt(s.files,c=>/^image\//.test(c.type))&&a.preventDefault()}),o.on("drop",a=>{if(a.isDefaultPrevented())return;const s=vE(o,a);if(Ve(s))return;const l=dE(a.dataTransfer),c=ba(l,Yd());if((!uE(l)||(v=>{const m=v["text/plain"];return!!m&&0===m.indexOf("file://")})(l))&&fE(o,a,s))return;const u=l[Yd()],f=u||l["text/html"]||l["text/plain"],g=((v,m,y,h)=>{const S=v.getParent(y,x=>La(m,x));if(S&&yt(h,"text/html")){const x=(new DOMParser).parseFromString(h["text/html"],"text/html").body;return!le(x.querySelector(S.nodeName.toLowerCase()))}return!1})(o.dom,o.schema,s.startContainer,l);i.get()&&!g||f&&(a.preventDefault(),co.setEditorTimeout(o,()=>{o.undoManager.transact(()=>{u&&o.execCommand("Delete"),bE(o,s);const v=sE(f);l["text/html"]?Xd(o,v,c,!0):Gg(o,v,!0)})}))}),o.on("dragstart",a=>{i.set(!0)}),o.on("dragover dragend",a=>{jc(o)&&!i.get()&&(a.preventDefault(),bE(o,vE(o,a))),"dragend"===a.type&&i.set(!1)})})(e,t),((e,t,n)=>{((r,o,i)=>{let a;r.on("keydown",s=>{var l;(Qe.metaKeyPressed(l=s)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!s.isDefaultPrevented()&&(a=s.shiftKey&&86===s.keyCode)}),r.on("paste",s=>{if(s.isDefaultPrevented()||(u=s,J.os.isAndroid()&&0===(null===(g=null===(f=u.clipboardData)||void 0===f?void 0:f.items)||void 0===g?void 0:g.length)))return;var u,f,g;const l="text"===i.get()||a;a=!1;const c=dE(s.clipboardData);!uE(c)&&fE(r,s,o.getLastRng()||r.selection.getRng())||(ba(c,"text/html")?(s.preventDefault(),Kg(r,c,c["text/html"],l,!0)):ba(c,"text/plain")&&ba(c,"text/uri-list")?(s.preventDefault(),Kg(r,c,c["text/plain"],l,!0)):(o.create(),co.setEditorTimeout(r,()=>{const u=o.getHtml();o.remove(),Kg(r,c,u,l,!1)},0)))})})(e,t,n),(r=>{const o=a=>Sn(a,"webkit-fake-url"),i=a=>Sn(a,"data:");r.parser.addNodeFilter("img",(a,s,l)=>{if(!jc(r)&&!0===(null===(u=l.data)||void 0===u?void 0:u.paste))for(const c of a){const u=c.attr("src");D(u)&&!c.attr("data-mce-object")&&u!==J.transparentSrc&&(o(u)||!Jx(r)&&i(u))&&c.remove()}var u})})(e)})(e,r,n)})})(e);const i=(a=>{const s=a;return(l=a,Ut(l.plugins,"rtc").bind(c=>T.from(c.setup))).fold(()=>(s.rtcInstance=nC(a),T.none()),l=>(s.rtcInstance=(()=>{const c=Fe(null),u=Fe("");return{init:{bindEvents:We},undoManager:{beforeChange:We,add:c,undo:c,redo:c,clear:We,reset:We,hasUndo:Ot,hasRedo:Ot,transact:c,ignore:We,extra:We},formatter:{match:Ot,matchAll:Fe([]),matchNode:Fe(void 0),canApply:Ot,closest:u,apply:We,remove:We,toggle:We,formatChanged:Fe({unbind:We})},editor:{getContent:u,setContent:Fe({content:"",html:""}),insertContent:Fe(""),addVisual:We},selection:{getContent:u},autocompleter:{addDecoration:We,removeDecoration:We},raw:{getModel:Fe(T.none())}}})(),T.some(()=>l().then(c=>(s.rtcInstance=(u=>{const f=k=>ne(k)?k:{},{init:g,undoManager:v,formatter:m,editor:y,selection:h,autocompleter:S,raw:x}=u;return{init:{bindEvents:g.bindEvents},undoManager:{beforeChange:v.beforeChange,add:v.add,undo:v.undo,redo:v.redo,clear:v.clear,reset:v.reset,hasUndo:v.hasUndo,hasRedo:v.hasRedo,transact:(k,N,P)=>v.transact(P),ignore:(k,N)=>v.ignore(N),extra:(k,N,P,L)=>v.extra(P,L)},formatter:{match:(k,N,P,L)=>m.match(k,f(N),L),matchAll:m.matchAll,matchNode:m.matchNode,canApply:k=>m.canApply(k),closest:k=>m.closest(k),apply:(k,N,P)=>m.apply(k,f(N)),remove:(k,N,P,L)=>m.remove(k,f(N)),toggle:(k,N,P)=>m.toggle(k,f(N)),formatChanged:(k,N,P,L,U)=>m.formatChanged(N,P,L,U)},editor:{getContent:k=>y.getContent(k),setContent:(k,N)=>({content:y.setContent(k,N),html:""}),insertContent:(k,N)=>(y.insertContent(k),""),addVisual:y.addVisual},selection:{getContent:(k,N)=>h.getContent(N)},autocompleter:{addDecoration:S.addDecoration,removeDecoration:S.removeDecoration},raw:{getModel:()=>T.some(x.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(e);(a=>{const s=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),Ux(a)||(s.body.spellcheck=!1,Zg.setAttrib(l,"spellcheck","false")),a.quirks=(e=>{const t=xe.each,n=Qe.BACKSPACE,r=Qe.DELETE,o=e.dom,i=e.selection,a=e.parser,s=J.browser,l=s.isFirefox(),c=s.isChromium()||s.isSafari(),u=J.deviceType.isiPhone()||J.deviceType.isiPad(),f=J.os.isMacOS()||J.os.isiOS(),g=(H,X)=>{try{e.getDoc().execCommand(H,!1,String(X))}catch(V){}},v=H=>H.isDefaultPrevented(),m=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},y=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",H=>{let X;if(H.target===e.getDoc().documentElement)if(X=i.getRng(),e.getBody().focus(),"mousedown"===H.type){if(io(X.startContainer))return;i.placeCaretAt(H.clientX,H.clientY)}else i.setRng(X)})},h=()=>{Range.prototype.getClientRects||e.on("mousedown",H=>{if(!v(H)&&"HTML"===H.target.nodeName){const X=e.getBody();X.blur(),co.setEditorTimeout(e,()=>{X.focus()})}})},S=()=>{const H=Vh(e);e.on("click",X=>{const V=X.target;/^(IMG|HR)$/.test(V.nodeName)&&o.isEditable(V.parentNode)&&(X.preventDefault(),e.selection.select(V),e.nodeChanged()),"A"===V.nodeName&&o.hasClass(V,H)&&0===V.childNodes.length&&o.isEditable(V.parentNode)&&(X.preventDefault(),i.select(V))})},x=()=>{e.on("keydown",H=>{if(!v(H)&&H.keyCode===n&&i.isCollapsed()&&0===i.getRng().startOffset){const X=i.getNode().previousSibling;if(X&&X.nodeName&&"table"===X.nodeName.toLowerCase())return H.preventDefault(),!1}return!0})},k=()=>{qh(e)||e.on("BeforeExecCommand mousedown",()=>{g("StyleWithCSS",!1),g("enableInlineTableEditing",!1),Hh(e)||g("enableObjectResizing",!1)})},N=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},P=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},L=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",H=>{let X;"HTML"===H.target.nodeName&&(X=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(X),e.selection.normalize(),e.nodeChanged())}))},U=()=>{f&&e.on("keydown",H=>{!Qe.metaKeyPressed(H)||H.shiftKey||37!==H.keyCode&&39!==H.keyCode||(H.preventDefault(),e.selection.getSel().modify("move",37===H.keyCode?"backward":"forward","lineboundary"))})},Z=()=>{e.on("click",H=>{let X=H.target;do{if("A"===X.tagName)return void H.preventDefault()}while(X=X.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ve=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",H=>{H.preventDefault()})})},de=We;return vi(e)?(c&&(y(),S(),ve(),m(),u&&(P(),L(),Z())),l&&(h(),k(),N(),U())):(e.on("keydown",H=>{if(v(H)||H.keyCode!==Qe.BACKSPACE)return;let X=i.getRng();const V=X.startContainer,ae=X.startOffset,Ue=o.getRoot();let Me=V;if(X.collapsed&&0===ae){for(;Me.parentNode&&Me.parentNode.firstChild===Me&&Me.parentNode!==Ue;)Me=Me.parentNode;"BLOCKQUOTE"===Me.nodeName&&(e.formatter.toggle("blockquote",void 0,Me),X=o.createRng(),X.setStart(V,0),X.setEnd(V,0),i.setRng(X))}}),(()=>{const H=X=>{const V=o.create("body"),ae=X.cloneContents();return V.appendChild(ae),i.serializer.serialize(V,{format:"html"})};e.on("keydown",X=>{const V=X.keyCode;if(!v(X)&&(V===r||V===n)&&e.selection.isEditable()){const ae=e.selection.isCollapsed(),Ue=e.getBody();if(ae&&!o.isEmpty(Ue)||!ae&&!(Me=>{const nt=H(Me),qe=o.createRng();return qe.selectNode(e.getBody()),nt===H(qe)})(e.selection.getRng()))return;X.preventDefault(),e.setContent(""),Ue.firstChild&&o.isBlock(Ue.firstChild)?e.selection.setCursorLocation(Ue.firstChild,0):e.selection.setCursorLocation(Ue,0),e.nodeChanged()}})})(),J.windowsPhone||e.on("keyup focusin mouseup",H=>{Qe.modifierPressed(H)||(X=>{const V=X.getBody(),ae=X.selection.getRng();return ae.startContainer===ae.endContainer&&ae.startContainer===V&&0===ae.startOffset&&ae.endOffset===V.childNodes.length})(e)||i.normalize()},!0),c&&(y(),S(),e.on("init",()=>{g("DefaultParagraphSeparator",Ar(e))}),ve(),x(),a.addNodeFilter("br",H=>{let X=H.length;for(;X--;)"Apple-interchange-newline"===H[X].attr("class")&&H[X].remove()}),u?(P(),L(),Z()):m()),l&&(e.on("keydown",H=>{if(!v(H)&&H.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(i.isCollapsed()&&0===i.getRng().startOffset){const X=i.getNode(),V=X.previousSibling;if("HR"===X.nodeName)return o.remove(X),void H.preventDefault();V&&V.nodeName&&"hr"===V.nodeName.toLowerCase()&&(o.remove(V),H.preventDefault())}}}),h(),(()=>{const H=()=>{const V=o.getAttribs(i.getStart().cloneNode(!1));return()=>{const ae=i.getStart();ae!==e.getBody()&&(o.setAttrib(ae,"style",null),t(V,Ue=>{ae.setAttributeNode(Ue.cloneNode(!0))}))}},X=()=>!i.isCollapsed()&&o.getParent(i.getStart(),o.isBlock)!==o.getParent(i.getEnd(),o.isBlock);e.on("keypress",V=>{let ae;return!(!(v(V)||8!==V.keyCode&&46!==V.keyCode)&&X()&&(ae=H(),e.getDoc().execCommand("delete",!1),ae(),V.preventDefault(),1))}),o.bind(e.getDoc(),"cut",V=>{if(!v(V)&&X()){const ae=H();co.setEditorTimeout(e,()=>{ae()})}})})(),k(),e.on("SetContent ExecCommand",H=>{"setcontent"!==H.type&&"mceInsertLink"!==H.command||t(o.select("a:not([data-mce-block])"),X=>{var V;let ae=X.parentNode;const Ue=o.getRoot();if((null==ae?void 0:ae.lastChild)===X){for(;ae&&!o.isBlock(ae);){if((null===(V=ae.parentNode)||void 0===V?void 0:V.lastChild)!==ae||ae===Ue)return;ae=ae.parentNode}o.add(ae,"br",{"data-mce-bogus":1})}})}),N(),U(),x(),e.on("drop",H=>{var X;const V=null===(X=H.dataTransfer)||void 0===X?void 0:X.getData("text/html");D(V)&&/^<img[^>]*>$/.test(V)&&e.dispatch("dragend",new window.DragEvent("dragend",H))}))),{refreshContentEditable:de,isHidden:()=>{if(!l||e.removed)return!1;const H=e.selection.getSel();return!H||!H.rangeCount||0===H.rangeCount}}})(a),a.dispatch("PostRender");const c=fx(a);void 0!==c&&(l.dir=c);const u=Hx(a);u&&a.on("BeforeSetContent",f=>{xe.each(u,g=>{f.content=f.content.replace(g,v=>"\x3c!--mce:protected "+escape(v)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",f=>{a.composing="compositionstart"===f.type})})(e),i.fold(()=>{aw(e).then(()=>tm(e))},a=>{e.setProgressState(!0),aw(e).then(()=>{a().then(s=>{e.setProgressState(!1),tm(e),rC(e)},s=>{e.notificationManager.open({type:"error",text:String(s)}),tm(e),rC(e)})})})},hP=Ft,nm=Kt.DOM,lw=Kt.DOM,cw=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),dw=e=>{const t=e.getElement();return e.inline?cw(null):(n=>{const r=lw.create("div");return lw.insertAfter(r,n),cw(r,r)})(t)},vP=e=>Yw(this,null,function*(){e.dispatch("ScriptsLoaded"),(n=>{const r=xe.trim(Bh(n)),o=n.ui.registry.getAll().icons,i=rt(rt({},_d.get("default").icons),_d.get(r).icons);qt(i,(a,s)=>{yt(o,s)||n.ui.registry.addIcon(s,a)})})(e),(n=>{const r=As(n);if(D(r)){const o=os.get(r);n.theme=o(n,os.urls[r])||{},me(n.theme.init)&&n.theme.init(n,os.urls[r]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(e),(n=>{const r=Ju(n),o=Us.get(r);n.model=o(n,Us.urls[r])})(e),(n=>{const r=[];Ae(Bc(n),o=>{((i,a,s)=>{const l=Hs.get(s),c=Hs.urls[s]||i.documentBaseUrl.replace(/\/$/,"");if(s=xe.trim(s),l&&-1===xe.inArray(a,s)){if(i.plugins[s])return;try{const u=l(i,c)||{};i.plugins[s]=u,me(u.init)&&(u.init(i,c),a.push(s))}catch(u){((f,g,v)=>{const m=Vo.translate(["Failed to initialize plugin: {0}",g]);zv(f,"PluginLoadError",{message:m}),wd(m,v),Ed(f,m)})(i,s,u)}}})(n,r,o.replace(/^\-/,""))})})(e);const t=yield(n=>{const r=n.getElement();return n.orgDisplay=r.style.display,D(As(n))?(o=>{const i=o.theme.renderUI;return i?i():dw(o)})(n):me(As(n))?(o=>{const i=o.getElement(),a=As(o)(o,i);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||o.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||o.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:i.offsetHeight,a})(n):dw(n)})(e);var n,r;((n,r)=>{const o={show:T.from(r.show).getOr(We),hide:T.from(r.hide).getOr(We),isEnabled:T.from(r.isEnabled).getOr(Ft),setEnabled:i=>{n.mode.isReadOnly()||T.from(r.setEnabled).each(a=>a(i))}};n.ui=rt(rt({},n.ui),o)})(e,T.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(n=e).contentCSS=n.contentCSS.concat(bC(r=n,dx(r)),(r=>bC(r,Uh(r)))(n)),e.inline?sw(e):((n,r)=>{((o,i)=>{const a=o.translate("Rich Text Area"),s=Bo(I(o.getElement()),"tabindex").bind(Ni),l=((c,u,f,g)=>{const v=ge("iframe");return g.each(m=>Tn(v,"tabindex",m)),Lo(v,f),Lo(v,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:u}),M(v,"tox-edit-area__iframe"),v})(o.id,a,V1(o),s).dom;l.onload=()=>{l.onload=null,o.dispatch("load")},o.contentAreaContainer=i.iframeContainer,o.iframeElement=l,o.iframeHTML=(c=>{let u=G1(c)+"<html><head>";Dh(c)!==c.documentBaseUrl&&(u+='<base href="'+c.documentBaseURI.getURI()+'" />'),u+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const f=K1(c),g=$1(c),v=c.translate(Ix(c));return Mh(c)&&(u+='<meta http-equiv="Content-Security-Policy" content="'+Mh(c)+'" />'),u+=`</head><body id="${f}" class="mce-content-body ${g}" data-id="${c.id}" aria-label="${v}"><br></body></html>`,u})(o),nm.add(i.iframeContainer,l)})(n,r),r.editorContainer&&(r.editorContainer.style.display=n.orgDisplay,n.hidden=nm.isHidden(r.editorContainer)),n.getElement().style.display="none",nm.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(o=>{const i=o.iframeElement,a=()=>{o.contentDocument=i.contentDocument,sw(o)};if(ik(o)||J.browser.isFirefox()){const l=o.getDoc();l.open(),l.write(o.iframeHTML),l.close(),a()}else{const l=((e,t,n,r)=>((o,i,a,s,l)=>{const c=(u=a,f=s,g=>{u(g)&&f((v=>{const m=I(to(v).getOr(v.target)),y=()=>v.stopPropagation(),h=()=>v.preventDefault(),S=Mt(h,y);return{target:m,x:v.clientX,y:v.clientY,stop:y,prevent:h,kill:S,raw:v}})(g))});var u,f;return o.dom.addEventListener(i,c,!1),{unbind:ye(xr,o,i,c,!1)}})(e,"load",n,()=>{l.unbind(),a()}))(I(i),0,hP);i.srcdoc=o.iframeHTML}})(n)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})}),is=Kt.DOM,uw=e=>"-"===e.charAt(0),fw=(e,t,n)=>T.from(t).filter(r=>nr(r)&&!_d.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${n}.js`,name:T.some(r)})),pw=$n().deviceType,gw=pw.isPhone(),yP=pw.isTablet(),lc=e=>{if(Ve(e))return[];{const t=fe(e)?e:e.split(/[ ,]/),n=wt(t,Lr);return gt(n,nr)}},rm=(e,t)=>yt(e.sections(),t),SP=(e,t)=>rt({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ut(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},t?{menubar:!1}:{}),_P=(e,t)=>{var n;const r=null!==(n=t.external_plugins)&&void 0!==n?n:{};return e&&e.external_plugins?xe.extend({},e.external_plugins,r):r},xP=(e,t)=>{const n=e.selection,r=e.dom;return/^ | $/.test(t)?((o,i,a)=>{const s=I(o.getRoot());return a=Fl(s,he.fromRangeStart(i))?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),Ul(s,he.fromRangeEnd(i))?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),t):t},tu=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:r}=(o=>{if("string"!=typeof o){const i=xe.extend({paste:o.paste,data:{paste:o.paste}},o);return{content:o.content,details:i}}return{content:o,details:{}}})(t);Fp(e,Wt(rt({},r),{content:xP(e,n),format:"html",set:!1,selection:!0})).each(o=>{const i=(s=o.content,l=r,Gp(e).editor.insertContent(s,l));var s,l;Up(e,i,o),e.addVisual()})}},kP={"font-size":"size","font-family":"face"},TP=nl("font"),mw=e=>(t,n)=>T.from(n).map(I).filter(Dn).bind(r=>{return(o=e,i=t,a=r.dom,hp(I(a),s=>{return ie(l=s,o).orThunk(()=>TP(l)?Ut(kP,o).bind(c=>Bo(l,c)):T.none());var l},s=>Rt(I(i),s))).or(((o,i)=>T.from(Kt.DOM.getStyle(i,o,!0)))(e,r.dom));var o,i,a}).getOr(""),AP=mw("font-size"),NP=Mt(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),mw("font-family")),RP=e=>yr(e.getBody()).bind(t=>{const n=t.container();return T.from(Ie(n)?n.parentNode:n)}),om=(e,t)=>{return n=e,r=qn(T.some,t),(o=n,T.from(o.selection.getRng()).bind(i=>{const a=o.getBody();return i.startContainer===a&&0===i.startOffset?T.none():T.from(o.selection.getStart(!0))})).orThunk(ye(RP,n)).map(I).filter(Dn).bind(r);var n,r,o},hw=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const r=xe.explode(e.options.get("font_size_style_values")),o=xe.explode(e.options.get("font_size_classes"));return o.length>0?o[n-1]||t:r[n-1]||t}return t}return t},PP=e=>{const t=e.split(/\s*,\s*/);return wt(t,n=>-1===n.indexOf(" ")||Sn(n,'"')||Sn(n,"'")?n:`'${n}'`).join(",")},DP=["toggleview"],vw=e=>Pt(DP,e.toLowerCase());class bw{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,r,o){const i=this.editor,a=t.toLowerCase(),s=null==o?void 0:o.skip_focus;if(i.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||s?Mf(c=i).each(u=>c.selection.setRng(u)):i.focus()),i.dispatch("BeforeExecCommand",{command:t,ui:n,value:r}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[a];return!!me(l)&&(l(a,n,r),i.dispatch("ExecCommand",{command:t,ui:n,value:r}),!0)}queryCommandState(t){if(!vw(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),r=this.commands.state[n];return!!me(r)&&r(n)}queryCommandValue(t){if(!vw(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),r=this.commands.value[n];return me(r)?r(n):""}addCommands(t,n="exec"){const r=this.commands;qt(t,(o,i)=>{Ae(i.toLowerCase().split(","),a=>{r[n][a]=o})})}addCommand(t,n,r){const o=t.toLowerCase();this.commands.exec[o]=(i,a,s)=>n.call(null!=r?r:this.editor,a,s)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,r){this.commands.state[t.toLowerCase()]=()=>n.call(null!=r?r:this.editor)}addQueryValueHandler(t,n,r){this.commands.value[t.toLowerCase()]=()=>n.call(null!=r?r:this.editor)}}const as="data-mce-contenteditable",im=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch(r){}},nu=(e,t)=>{e.dom.contentEditable=t?"true":"false"},ss=e=>e.readonly,yw=e=>{e.parser.addAttributeFilter("contenteditable",t=>{ss(e)&&Ae(t,n=>{n.attr(as,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(as,t=>{ss(e)&&Ae(t,n=>{n.attr("contenteditable",n.attr(as))})}),e.serializer.addTempAttr(as)},IP=["copy"],LP=xe.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class am{static isNative(t){return!!LP[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ot}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const r=t.toLowerCase(),o=Iu(r,null!=n?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const i=this.bindings[r];if(i)for(let a=0,s=i.length;a<s;a++){const l=i[a];if(!l.removed){if(l.once&&this.off(r,l.func),o.isImmediatePropagationStopped())return o;if(!1===l.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(t,n,r,o){if(!1===n&&(n=Ot),n){const i={func:n,removed:!1};o&&xe.extend(i,o);const a=t.toLowerCase().split(" ");let s=a.length;for(;s--;){const l=a[s];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=r?[i,...c]:[...c,i],this.bindings[l]=c}}return this}off(t,n){if(t){const r=t.toLowerCase().split(" ");let o=r.length;for(;o--;){const i=r[o];let a=this.bindings[i];if(!i)return qt(this.bindings,(s,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const s=Qr(a,l=>l.func===n);a=s.fail,this.bindings[i]=a,Ae(s.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(t,!1),delete this.bindings[i])}}}else qt(this.bindings,(r,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,r){return this.on(t,n,r,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||0===n.length)}}const cc=e=>(e._eventDispatcher||(e._eventDispatcher=new am({scope:e,toggleEvent:(t,n)=>{am.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),sm={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const r=this;if(r.removed&&"remove"!==e&&"detach"!==e)return Iu(e.toLowerCase(),null!=t?t:{},r);const o=cc(r).dispatch(e,t);if(!1!==n&&r.parent){let i=r.parent();for(;i&&!o.isPropagationStopped();)i.dispatch(e,o,!1),i=i.parent?i.parent():void 0}return o},on(e,t,n){return cc(this).on(e,t,n)},off(e,t){return cc(this).off(e,t)},once(e,t){return cc(this).once(e,t)},hasEventListeners(e){return cc(this).has(e)}},ru=Kt.DOM;let ls;const ou=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=Wh(e);return n?(e.eventRoot||(e.eventRoot=ru.select(n)[0]),e.eventRoot):e.getBody()},Cw=(e,t,n)=>{var r;(r=e).hidden||ss(r)?ss(e)&&((r,o)=>{if("click"!==o.type||Qe.metaKeyPressed(o))Pt(IP,o.type)&&r.dispatch(o.type,o);else{const i=I(o.target);(a=r,s=i,_o(s,"a",l=>Rt(l,I(a.getBody()))).bind(l=>Bo(l,"href"))).each(a=>{if(o.preventDefault(),/^#/.test(a)){const s=r.dom.select(`${a},[name="${xa(a,"#")}"]`);s.length&&r.selection.scrollIntoView(s[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var a,s})(e,n):e.dispatch(t,n)},Sw=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=ou(e,t);if(Wh(e)){if(ls||(ls={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||ls&&(qt(ls,(o,i)=>{e.dom.unbind(ou(e,i))}),ls=null)})),ls[t])return;const r=o=>{const i=o.target,a=e.editorManager.get();let s=a.length;for(;s--;){const l=a[s].getBody();(l===i||ru.isChildOf(i,l))&&Cw(a[s],t,o)}};ls[t]=r,ru.bind(n,t,r)}else{const r=o=>{Cw(e,t,o)};ru.bind(n,t,r),e.delegates[t]=r}},_w=Wt(rt({},sm),{bindPendingEventDelegates(){const e=this;xe.each(e._pendingNativeEvents,t=>{Sw(e,t)})},toggleNativeEvent(e,t){const n=this;"focus"!==e&&"blur"!==e&&(n.removed||(t?n.initialized?Sw(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(ou(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(qt(e.delegates,(r,o)=>{e.dom.unbind(ou(e,o),o,r)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}}),BP=e=>D(e)?{value:e.split(/[ ,]/),valid:!0}:He(e,D)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Ew=(e,t)=>e+(ti(t.message)?"":`. ${t.message}`),ww=e=>e.valid,lm=(e,t,n="")=>{const r=t(e);return Le(r)?r?{value:e,valid:!0}:{valid:!1,message:n}:r},jP=["design","readonly"],xw=(e,t,n,r)=>{const o=n[t.get()],i=n[r];try{i.activate()}catch(a){return void console.error(`problem while activating editor mode ${r}:`,a)}var a;o.deactivate(),o.editorReadOnly!==i.editorReadOnly&&((e,t)=>{const n=I(e.getBody());var r,o,i;i=t,ue(r=n,o="mce-content-readonly")&&!i?G(r,o):i&&M(r,o),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(r=>{T.from(r.selection.getNode()).each(o=>{o.removeAttribute("data-mce-selected")})})(e),e.readonly=!0,nu(n,!1),Ae(sr(n,'*[contenteditable="true"]'),r=>{Tn(r,as,"true"),nu(r,!1)})):(e.readonly=!1,e.hasEditableRoot()&&nu(n,!0),Ae(sr(n,`*[${as}="true"]`),r=>{Mn(r,as),nu(r,!0)}),im(e,"StyleWithCSS",!1),im(e,"enableInlineTableEditing",!1),im(e,"enableObjectResizing",!1),(r=>Qa(r)||(o=>{const i=en(I(o.getElement()));return Of(i).filter(a=>!Lf(a.dom)&&nd(o,a.dom)).isSome()})(r))(e)&&e.focus(),(r=>{r.selection.setRng(r.selection.getRng())})(e),e.nodeChanged())})(e,i.editorReadOnly),t.set(r),(a=e).dispatch("SwitchMode",{mode:r})},cm=xe.each,dm=xe.explode,FP={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},kw=xe.makeMap("alt,ctrl,shift,meta,access"),UP=e=>{const t={},n=J.os.isMacOS()||J.os.isiOS();cm(dm(e.toLowerCase(),"+"),i=>{i in kw?t[i]=!0:/^[0-9]{2,}$/.test(i)?t.keyCode=parseInt(i,10):(t.charCode=i.charCodeAt(0),t.keyCode=FP[i]||i.toUpperCase().charCodeAt(0))});const r=[t.keyCode];let o;for(o in kw)t[o]?r.push(o):t[o]=!1;return t.id=r.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class Tw{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",r=>{!n.hasModifier(r)&&!n.isFunctionKey(r)||r.isDefaultPrevented()||(cm(n.shortcuts,o=>{n.matchShortcut(r,o)&&(n.pendingPatterns=o.subpatterns.slice(0),"keydown"===r.type&&n.executeShortcutAction(o))}),n.matchShortcut(r,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===r.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,r,o){const i=this,a=i.normalizeCommandFunc(r);return cm(dm(xe.trim(t)),s=>{const l=i.createShortcut(s,n,a,o);i.shortcuts[l.id]=l}),!0}remove(t){const n=this.createShortcut(t);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(t){const n=this,r=t;return"string"==typeof r?()=>{n.editor.execCommand(r,!1,null)}:xe.isArray(r)?()=>{n.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(t,n,r,o){const i=xe.map(dm(t,">"),UP);return i[i.length-1]=xe.extend(i[i.length-1],{func:r,scope:o||this.editor}),xe.extend(i[0],{desc:this.editor.translate(n),subpatterns:i.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!!n&&n.ctrl===t.ctrlKey&&n.meta===t.metaKey&&n.alt===t.altKey&&n.shift===t.shiftKey&&!!(t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const HP=()=>{const e=(()=>{const t={},n={},r={},o={},i={},a={},s={},l={},c=(u,f)=>(g,v)=>{u[g.toLowerCase()]=Wt(rt({},v),{type:f})};return{addButton:c(t,"button"),addGroupToolbarButton:c(t,"grouptoolbarbutton"),addToggleButton:c(t,"togglebutton"),addMenuButton:c(t,"menubutton"),addSplitButton:c(t,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(r,"autocompleter"),addContextMenu:c(i,"contextmenu"),addContextToolbar:c(a,"contexttoolbar"),addContextForm:c(a,"contextform"),addSidebar:c(s,"sidebar"),addView:c(l,"views"),addIcon:(u,f)=>o[u.toLowerCase()]=f,getAll:()=>({buttons:t,menuItems:n,icons:o,popups:r,contextMenus:i,contextToolbars:a,sidebars:s,views:l})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},cs=Kt.DOM,Aw=xe.extend,WP=xe.each;class iu{constructor(t,n,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,Aw(this,_w);const o=this;this.id=t,this.hidden=!1;const i=((e,t,n,r,o)=>{var i;const a=e?{mobile:SP(null!==(i=o.mobile)&&void 0!==i?i:{},t)}:{},s=((e,t)=>{const n=((i,a)=>{const s={},l={};return Jr(i,(c,u)=>Pt(e,u),wi(s),wi(l)),{t:s,f:l}})(t);return o=n.f,{sections:Fe(n.t),options:Fe(o)};var o})(["mobile"],wg(a,o)),l=xe.extend(n,r,s.options(),e&&rm(s,"mobile")?((c,u,f={})=>{const g=c.sections(),v=Ut(g,u).getOr({});return xe.extend({},f,v)})(s,"mobile"):{},{external_plugins:_P(r,s.options())});return((c,u,f,g)=>{const v=lc(f.forced_plugins),m=lc(g.plugins),y=rm(x=u,"mobile")?x.sections().mobile:{},h=((x,k,N,P)=>x&&rm(k,"mobile")?P:N)(c,u,m,y.plugins?lc(y.plugins):m),S=((x,k)=>[...lc(x),...lc(k)])(v,h);var x;return xe.extend(g,{forced_plugins:v,plugins:S})})(e,s,r,l)})(gw||yP,gw,m=n,r.defaultOptions,m);var m;this.options=((v,m)=>{const y={},h={},S=(k,N,P)=>{const L=lm(N,P);return ww(L)?(h[k]=L.value,!0):(console.warn(Ew(`Invalid value passed for the ${k} option`,L)),!1)},x=k=>yt(y,k);return{register:(k,N)=>{const P=D(N.processor)?(U=>{const Z=(()=>{switch(U){case"array":return fe;case"boolean":return Le;case"function":return me;case"number":return b;case"object":return ne;case"string":return D;case"string[]":return BP;case"object[]":return ve=>He(ve,ne);case"regexp":return ve=>Ne(ve,RegExp);default:return Ft}})();return ve=>lm(ve,Z,`The value must be a ${U}.`)})(N.processor):N.processor,L=((U,Z,ve)=>{if(!Je(Z)){const de=lm(Z,ve);if(ww(de))return de.value;console.error(Ew(`Invalid default value passed for the "${U}" option`,de))}})(k,N.default,P);y[k]=Wt(rt({},N),{default:L,processor:P}),Ut(h,k).orThunk(()=>Ut(m,k)).each(U=>S(k,U,P))},isRegistered:x,get:k=>Ut(h,k).orThunk(()=>Ut(y,k).map(N=>N.default)).getOrUndefined(),set:(k,N)=>{if(x(k)){const P=y[k];return P.immutable?(console.error(`"${k}" is an immutable option and cannot be updated`),!1):S(k,N,P.processor)}return console.warn(`"${k}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:k=>{const N=x(k);return N&&delete h[k],N},isSet:k=>yt(h,k)}})(0,i),(v=>{const m=v.options.register;m("id",{processor:"string",default:v.id}),m("selector",{processor:"string"}),m("target",{processor:"object"}),m("suffix",{processor:"string"}),m("cache_suffix",{processor:"string"}),m("base_url",{processor:"string"}),m("referrer_policy",{processor:"string",default:""}),m("language_load",{processor:"boolean",default:!0}),m("inline",{processor:"boolean",default:!1}),m("iframe_attrs",{processor:"object",default:{}}),m("doctype",{processor:"string",default:"<!DOCTYPE html>"}),m("document_base_url",{processor:"string",default:v.documentBaseUrl}),m("body_id",{processor:Oh(v,"tinymce"),default:"tinymce"}),m("body_class",{processor:Oh(v),default:""}),m("content_security_policy",{processor:"string",default:""}),m("br_in_pre",{processor:"boolean",default:!0}),m("forced_root_block",{processor:y=>{const h=D(y)&&nr(y);return h?{value:y,valid:h}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),m("forced_root_block_attrs",{processor:"object",default:{}}),m("newline_behavior",{processor:y=>{const h=Pt(["block","linebreak","invert","default"],y);return h?{value:y,valid:h}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),m("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),m("no_newline_selector",{processor:"string",default:""}),m("keep_styles",{processor:"boolean",default:!0}),m("end_container_on_empty_block",{processor:y=>Le(y)||D(y)?{valid:!0,value:y}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),m("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),m("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),m("font_size_classes",{processor:"string",default:""}),m("automatic_uploads",{processor:"boolean",default:!0}),m("images_reuse_filename",{processor:"boolean",default:!1}),m("images_replace_blob_uris",{processor:"boolean",default:!0}),m("icons",{processor:"string",default:""}),m("icons_url",{processor:"string",default:""}),m("images_upload_url",{processor:"string",default:""}),m("images_upload_base_path",{processor:"string",default:""}),m("images_upload_credentials",{processor:"boolean",default:!1}),m("images_upload_handler",{processor:"function"}),m("language",{processor:"string",default:"en"}),m("language_url",{processor:"string",default:""}),m("entity_encoding",{processor:"string",default:"named"}),m("indent",{processor:"boolean",default:!0}),m("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),m("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),m("indent_use_margin",{processor:"boolean",default:!1}),m("indentation",{processor:"string",default:"40px"}),m("content_css",{processor:y=>{const h=!1===y||D(y)||He(y,D);return h?D(y)?{value:wt(y.split(","),Lr),valid:h}:fe(y)?{value:y,valid:h}:!1===y?{value:[],valid:h}:{value:y,valid:h}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Zu(v)?[]:["default"]}),m("content_style",{processor:"string"}),m("content_css_cors",{processor:"boolean",default:!1}),m("font_css",{processor:y=>{const h=D(y)||He(y,D);return h?{value:fe(y)?y:wt(y.split(","),Lr),valid:h}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),m("inline_boundaries",{processor:"boolean",default:!0}),m("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),m("object_resizing",{processor:y=>{const h=Le(y)||D(y);return h?!1===y||Yu.isiPhone()||Yu.isiPad()?{value:"",valid:h}:{value:!0===y?"table,img,figure.image,div,video,iframe":y,valid:h}:{valid:!1,message:"Must be boolean or a string"}},default:!q1}),m("resize_img_proportional",{processor:"boolean",default:!0}),m("event_root",{processor:"object"}),m("service_message",{processor:"string"}),m("theme",{processor:y=>!1===y||D(y)||me(y),default:"silver"}),m("theme_url",{processor:"string"}),m("formats",{processor:"object"}),m("format_empty_lines",{processor:"boolean",default:!1}),m("format_noneditable_selector",{processor:"string",default:""}),m("preview_styles",{processor:y=>{const h=!1===y||D(y);return h?{value:!1===y?"":y,valid:h}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),m("custom_ui_selector",{processor:"string",default:""}),m("hidden_input",{processor:"boolean",default:!0}),m("submit_patch",{processor:"boolean",default:!0}),m("encoding",{processor:"string"}),m("add_form_submit_trigger",{processor:"boolean",default:!0}),m("add_unload_trigger",{processor:"boolean",default:!0}),m("custom_undo_redo_levels",{processor:"number",default:0}),m("disable_nodechange",{processor:"boolean",default:!1}),m("readonly",{processor:"boolean",default:!1}),m("editable_root",{processor:"boolean",default:!0}),m("plugins",{processor:"string[]",default:[]}),m("external_plugins",{processor:"object"}),m("forced_plugins",{processor:"string[]"}),m("model",{processor:"string",default:v.hasPlugin("rtc")?"plugin":"dom"}),m("model_url",{processor:"string"}),m("block_unsupported_drop",{processor:"boolean",default:!0}),m("visual",{processor:"boolean",default:!0}),m("visual_table_class",{processor:"string",default:"mce-item-table"}),m("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),m("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),m("setup",{processor:"function"}),m("init_instance_callback",{processor:"function"}),m("url_converter",{processor:"function",default:v.convertURL}),m("url_converter_scope",{processor:"object",default:v}),m("urlconverter_callback",{processor:"function"}),m("allow_conditional_comments",{processor:"boolean",default:!1}),m("allow_html_data_urls",{processor:"boolean",default:!1}),m("allow_svg_data_urls",{processor:"boolean"}),m("allow_html_in_named_anchor",{processor:"boolean",default:!1}),m("allow_script_urls",{processor:"boolean",default:!1}),m("allow_unsafe_link_target",{processor:"boolean",default:!1}),m("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),m("fix_list_elements",{processor:"boolean",default:!1}),m("preserve_cdata",{processor:"boolean",default:!1}),m("remove_trailing_brs",{processor:"boolean",default:!0}),m("pad_empty_with_br",{processor:"boolean",default:!1}),m("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),m("element_format",{processor:"string",default:"html"}),m("entities",{processor:"string"}),m("schema",{processor:"string",default:"html5"}),m("convert_urls",{processor:"boolean",default:!0}),m("relative_urls",{processor:"boolean",default:!0}),m("remove_script_host",{processor:"boolean",default:!0}),m("custom_elements",{processor:"string"}),m("extended_valid_elements",{processor:"string"}),m("invalid_elements",{processor:"string"}),m("invalid_styles",{processor:Xu}),m("valid_children",{processor:"string"}),m("valid_classes",{processor:Xu}),m("valid_elements",{processor:"string"}),m("valid_styles",{processor:Xu}),m("verify_html",{processor:"boolean",default:!0}),m("auto_focus",{processor:y=>D(y)||!0===y}),m("browser_spellcheck",{processor:"boolean",default:!1}),m("protect",{processor:"array"}),m("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),m("deprecation_warnings",{processor:"boolean",default:!0}),m("a11y_advanced_options",{processor:"boolean",default:!1}),m("api_key",{processor:"string"}),m("paste_block_drop",{processor:"boolean",default:!1}),m("paste_data_images",{processor:"boolean",default:!0}),m("paste_preprocess",{processor:"function"}),m("paste_postprocess",{processor:"function"}),m("paste_webkit_styles",{processor:"string",default:"none"}),m("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),m("paste_merge_formats",{processor:"boolean",default:!0}),m("smart_paste",{processor:"boolean",default:!0}),m("paste_as_text",{processor:"boolean",default:!1}),m("paste_tab_spaces",{processor:"number",default:4}),m("text_patterns",{processor:y=>He(y,ne)||!1===y?{value:Rh(!1===y?[]:y),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),m("text_patterns_lookup",{processor:y=>{return me(y)?{value:(h=y,S=>{const x=h(S);return Rh(x)}),valid:!0}:{valid:!1,message:"Must be a single function"};var h},default:y=>[]}),m("noneditable_class",{processor:"string",default:"mceNonEditable"}),m("editable_class",{processor:"string",default:"mceEditable"}),m("noneditable_regexp",{processor:y=>He(y,Ph)?{value:y,valid:!0}:Ph(y)?{value:[y],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),m("table_tab_navigation",{processor:"boolean",default:!0}),m("highlight_on_focus",{processor:"boolean",default:!1}),m("xss_sanitization",{processor:"boolean",default:!0}),m("details_initial_state",{processor:y=>{const h=Pt(["inherited","collapsed","expanded"],y);return h?{value:y,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),m("details_serialized_state",{processor:y=>{const h=Pt(["inherited","collapsed","expanded"],y);return h?{value:y,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),m("init_content_sync",{processor:"boolean",default:!1}),m("newdocument_content",{processor:"string",default:""}),v.on("ScriptsLoaded",()=>{m("directionality",{processor:"string",default:Vo.isRtl()?"rtl":void 0}),m("placeholder",{processor:"string",default:z1.getAttrib(v.getElement(),"placeholder")})})})(o);const a=this.options.get;a("deprecation_warnings")&&((v,m)=>{((y,h)=>{const S=(e=>{const t=uC(e,kA),n=e.forced_root_block;return!1!==n&&""!==n||t.push("forced_root_block (false only)"),Ao(t)})(y),x=(e=>fC(e,AA))(h),k=x.length>0,N=S.length>0,P="mobile"===h.theme;if(k||N||P){const L="\n- ",U=P?`\n\nThemes:${L}mobile`:"",Z=k?`\n\nPlugins:${L}${x.join(L)}`:"",ve=N?`\n\nOptions:${L}${S.join(L)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+U+Z+ve)}})(v,m),((y,h)=>{const S=(e=>uC(e,TA))(y),x=(e=>fC(e,dC.map(t=>t.name)))(h),k=x.length>0,N=S.length>0;if(k||N){const P="\n- ",L=k?`\n\nPlugins:${P}${x.map(DA).join(P)}`:"",U=N?`\n\nOptions:${P}${S.join(P)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+L+U)}})(v,m)})(n,i);const s=a("suffix");s&&(r.suffix=s),this.suffix=r.suffix;const l=a("base_url");l&&r._setBaseUrl(l),this.baseUri=r.baseURI;const c=Qu(o);c&&(Bi.ScriptLoader._setReferrerPolicy(c),Kt.DOM.styleSheetLoader._setReferrerPolicy(c));const u=zh(o);z(u)&&Kt.DOM.styleSheetLoader._setContentCssCors(u),vr.languageLoad=a("language_load"),vr.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Yo(Dh(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Zu(o),this.hasVisual=Dx(o),this.shortcuts=new Tw(this),this.editorCommands=new bw(this),(e=>{var t;(e=>{(t=>{const n=r=>()=>{Ae("left,center,right,justify".split(","),o=>{r!==o&&t.formatter.remove("align"+o)}),"none"!==r&&(t.formatter.toggle("align"+r,void 0),t.nodeChanged())};t.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(e),(t=>{const n=r=>()=>{const o=t.selection,i=o.isCollapsed()?[t.dom.getParent(o.getNode(),t.dom.isBlock)]:o.getSelectedBlocks();return Yt(i,a=>z(t.formatter.matchNode(a,r)))};t.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(e)})(e),(t=e).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const r=t.getDoc();let o;try{r.execCommand(n)}catch(i){o=!0}if("paste"!==n||r.queryCommandEnabled(n)||(o=!0),o||!r.queryCommandSupported(n)){let i=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(J.os.isMacOS()||J.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:i,type:"error"})}}}),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(e),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(n,r,o)=>{let i=0;t.dom.getParent(t.selection.getNode(),a=>!$e(a)||i++!==o||(t.selection.select(a),!1),t.getBody())},mceSelectNode:(n,r,o)=>{t.selection.select(o)},selectAll:()=>{const n=t.dom.getParent(t.selection.getStart(),zo);if(n){const r=t.dom.createRng();r.selectNodeContents(n),t.selection.setRng(r)}}})})(e),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const n=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(n)},insertImage:(n,r,o)=>{tu(t,t.dom.createHTML("img",{src:o}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,r,o)=>{tu(t,t.dom.encode(o))},insertHTML:(n,r,o)=>{tu(t,o)},mceInsertContent:(n,r,o)=>{tu(t,o)},mceSetContent:(n,r,o)=>{t.setContent(o)},mceReplaceContent:(n,r,o)=>{t.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(Vx(t))}})})(e),(t=>{const n=(r,o,i)=>{const a=D(i)?{href:i}:i,s=t.dom.getParent(t.selection.getNode(),"a");ne(a)&&D(a.href)&&(a.href=a.href.replace(/ /g,"%20"),s&&a.href||t.formatter.remove("link"),a.href&&t.formatter.apply("link",a,s))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const r=t.dom.getParent(t.selection.getStart(),"a");return void(r&&t.dom.remove(r,!0))}t.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(e),(t=>{t.editorCommands.addCommands({Indent:()=>{TS(t,"indent")},Outdent:()=>{AS(t)}}),t.editorCommands.addCommands({Outdent:()=>wS(t)},"state")})(e),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{Gd(O_,t)},mceInsertNewLine:(n,r,o)=>{F_(t,o)},InsertLineBreak:(n,r,o)=>{Gd(I_,t)}})})(e),(t=>{var n;(n=t).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{n.getDoc().execCommand(r);const o=n.dom.getParent(n.selection.getNode(),"ol,ul");if(o){const i=o.parentNode;if(i&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)){const a=n.selection.getBookmark();n.dom.split(i,o),n.selection.moveToBookmark(a)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":r=>{const o=n.dom.getParent(n.selection.getNode(),"ul,ol");return o&&("insertunorderedlist"===r&&"UL"===o.tagName||"insertorderedlist"===r&&"OL"===o.tagName)}},"state")})(t)})(e),(t=>{(n=>{const r=(o,i)=>{n.formatter.toggle(o,i),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{r(o)},"ForeColor,HiliteColor":(o,i,a)=>{r(o,{value:a})},BackColor:(o,i,a)=>{r("hilitecolor",{value:a})},FontName:(o,i,a)=>{((s,l)=>{const c=hw(s,l);s.formatter.toggle("fontname",{value:PP(c)}),s.nodeChanged()})(n,a)},FontSize:(o,i,a)=>{var s;(s=n).formatter.toggle("fontsize",{value:hw(s,a)}),s.nodeChanged()},LineHeight:(o,i,a)=>{var s;(s=n).formatter.toggle("lineheight",{value:String(a)}),s.nodeChanged()},Lang:(o,i,a)=>{var s;r(o,{value:a.code,customValue:null!==(s=a.customCode)&&void 0!==s?s:null})},RemoveFormat:o=>{n.formatter.remove(o)},mceBlockQuote:()=>{r("blockquote")},FormatBlock:(o,i,a)=>{r(D(a)?a:"p")},mceToggleFormat:(o,i,a)=>{r(a)}})})(t),(n=>{const r=o=>n.formatter.match(o);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>r(o),mceBlockQuote:()=>r("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return om(o=n,i=>NP(o.getBody(),i.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return om(o=n,i=>AP(o.getBody(),i.dom)).getOr("");var o}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return om(o=n,i=>{const a=I(o.getBody());return hp(i,l=>ie(l,"line-height"),ye(Rt,a)).getOrThunk(()=>{const l=parseFloat(ro(i,"line-height")),c=parseFloat(ro(i,"font-size"));return String(l/c)})}).getOr("");var o})})(t)})(e),(t=>{t.editorCommands.addCommands({mceRemoveNode:(n,r,o)=>{const i=null!=o?o:t.selection.getNode();if(i!==t.getBody()){const a=t.selection.getBookmark();t.dom.remove(i,!0),t.selection.moveToBookmark(a)}},mcePrint:()=>{t.getWin().print()},mceFocus:(n,r,o)=>{var i;(i=t).removed||(!0===o?Ff(i):(s=>{const l=s.selection,c=s.getBody();let u=l.getRng();s.quirks.refreshContentEditable(),z(s.bookmark)&&!Qa(s)&&Mf(s).each(g=>{s.selection.setRng(g),u=g});const f=(g=s,v=l.getNode(),g.dom.getParent(v,m=>"true"===g.dom.getContentEditable(m)));var g,v;if(f&&s.dom.isChildOf(f,c))return jf(f),Sb(s,u),void Ff(s);s.inline||(J.browser.isOpera()||jf(c),s.getWin().focus()),(J.browser.isFirefox()||s.inline)&&(jf(c),Sb(s,u)),Ff(s)})(i))},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(e)})(this);const f=a("cache_suffix");f&&(J.cacheSuffix=f.replace(/^[\?\&]+/,"")),this.ui={registry:HP(),styleSheetLoader:void 0,show:We,hide:We,setEnabled:We,isEnabled:Ft},this.mode=(v=>{const m=jn("design"),y=jn({design:{activate:We,deactivate:We,editorReadOnly:!1},readonly:{activate:We,deactivate:We,editorReadOnly:!0}});return(h=v).serializer?yw(h):h.on("PreInit",()=>{yw(h)}),(h=>{h.on("ShowCaret",S=>{ss(h)&&S.preventDefault()}),h.on("ObjectSelected",S=>{ss(h)&&S.preventDefault()})})(v),{isReadOnly:()=>ss(v),set:h=>((S,x,k,N)=>{if(N!==k.get()){if(!yt(x,N))throw new Error(`Editor mode '${N}' is invalid`);S.initialized?xw(S,k,x,N):S.on("init",()=>xw(S,k,x,N))}})(v,y.get(),m,h),get:()=>m.get(),register:(h,S)=>{y.set(((x,k,N)=>{if(Pt(jP,k))throw new Error(`Cannot override default mode ${k}`);return Wt(rt({},x),{[k]:Wt(rt({},N),{deactivate:()=>{try{N.deactivate()}catch(P){console.error(`problem while deactivating editor mode ${k}:`,P)}}})})})(y.get(),h,S))}};var h})(o),r.dispatch("SetupEditor",{editor:this});const g=Lx(o);me(g)&&g.call(o,o)}render(){(t=>{const n=t.id;Vo.setCode(jh(t));const r=()=>{is.unbind(window,"ready",r),t.render()};if(!ja.Event.domLoaded)return void is.bind(window,"ready",r);if(!t.getElement())return;const o=I(t.getElement()),i=d(o);var l;t.on("remove",()=>{Wr(o.dom.attributes,s=>Mn(o,s.name)),Lo(o,i)}),t.ui.styleSheetLoader=Dm.forElement(o,{contentCssCors:zh(l=t),referrerPolicy:Qu(l)}),Zu(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const a=t.getElement().form||is.getParent(n,"form");a&&(t.formElement=a,wx(t)&&!gu(t.getElement())&&(is.insertAfter(is.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=s=>{t.dispatch(s.type,s)},is.bind(a,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!xx(t)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),a._mceOldSubmit(a)))),t.windowManager=hC(t),t.notificationManager=mC(t),"xml"===t.options.get("encoding")&&t.on("GetContent",s=>{s.save&&(s.content=is.encode(s.content))}),kx(t)&&t.on("submit",()=>{t.initialized&&t.save()}),Tx(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),((e,t)=>{const n=Bi.ScriptLoader,r=()=>{!e.removed&&(o=>{const i=As(o);return!D(i)||z(os.get(i))})(e)&&(o=>{const i=Ju(o);return z(Us.get(i))})(e)&&vP(e)};((o,i)=>{const a=As(o);if(D(a)&&!uw(a)&&!yt(os.urls,a)){const s=vx(o),l=s?o.documentBaseURI.toAbsolute(s):`themes/${a}/theme${i}.js`;os.load(a,l).catch(()=>{Gl(o,"ThemeLoadError",Kl("theme",l,a))})}})(e,t),((o,i)=>{const a=Ju(o);if("plugin"!==a&&!yt(Us.urls,a)){const s=bx(o),l=D(s)?o.documentBaseURI.toAbsolute(s):`models/${a}/model${i}.js`;Us.load(a,l).catch(()=>{Gl(o,"ModelLoadError",Kl("model",l,a))})}})(e,t),((o,i)=>{const a=jh(i),s=lx(i);if(!Vo.hasCode(a)&&"en"!==a){const l=nr(s)?s:`${i.editorManager.baseURL}/langs/${a}.js`;o.add(l).catch(()=>{Gl(i,"LanguageLoadError",Kl("language",l,a))})}})(n,e),((o,i,a)=>{const s=fw(i,"default",a),l=(c=i,T.from(nx(c)).filter(nr).map(u=>({url:u,name:T.none()}))).orThunk(()=>fw(i,Bh(i),""));var c;Ae((c=>{const u=[],f=g=>{u.push(g)};for(let g=0;g<c.length;g++)c[g].each(f);return u})([s,l]),c=>{o.add(c.url).catch(()=>{var u,f,g;u=i,f=c.url,g=c.name.getOrUndefined(),Gl(u,"IconsLoadError",Kl("icons",f,g))})})})(n,e,t),((o,i)=>{const a=(s,l)=>{Hs.load(s,l).catch(()=>{Gl(o,"PluginLoadError",Kl("plugin",l,s))})};qt(Px(o),(s,l)=>{a(l,s),o.options.set("plugins",Bc(o).concat(l))}),Ae(Bc(o),s=>{!(s=xe.trim(s))||Hs.urls[s]||uw(s)||a(s,`plugins/${s}/plugin${i}.js`)})})(e,t),n.loadQueue().then(r,r)})(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return Qa(this)}translate(t){return Vo.translate(t)}getParam(t,n,r){const o=this.options;return o.isRegistered(t)||(z(r)?o.register(t,{processor:r,default:n}):o.register(t,{processor:Ft,default:n})),o.isSet(t)||Je(n)?o.get(t):n}hasPlugin(t,n){return!(!Pt(Bc(this),t)||n&&void 0===Hs.get(t))}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,r){this.editorCommands.addCommand(t,n,r)}addQueryStateHandler(t,n,r){this.editorCommands.addQueryStateHandler(t,n,r)}addQueryValueHandler(t,n,r){this.editorCommands.addQueryValueHandler(t,n,r)}addShortcut(t,n,r,o){this.shortcuts.add(t,n,r,o)}execCommand(t,n,r,o){return this.editorCommands.execCommand(t,n,r,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(cs.show(t.getContainer()),cs.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(cs.hide(t.getContainer()),cs.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,r=n.getElement();if(n.removed)return"";if(r){const o=Wt(rt({},t),{load:!0}),i=gu(r)?r.value:r.innerHTML,a=n.setContent(i,o);return o.no_events||n.dispatch("LoadContent",Wt(rt({},o),{element:r})),a}return""}save(t={}){const n=this;let r=n.getElement();if(!r||!n.initialized||n.removed)return"";const o=Wt(rt({},t),{save:!0,element:r});let i=n.getContent(o);const a=Wt(rt({},o),{content:i});if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),i=a.content,gu(r))r.value=i;else{!t.is_removing&&n.inline||(r.innerHTML=i);const s=cs.getParent(n.id,"form");s&&WP(s.elements,l=>l.name!==n.id||(l.value=i,!1))}return a.element=o.element=r=null,!1!==a.set_dirty&&n.setDirty(!1),i}setContent(t,n){return Kp(this,t,n)}getContent(t){return((n,r={})=>{const o=(a=r.format?r.format:"html",Wt(rt({},r),{format:a,get:!0,getInner:!0}));var a;return z0(n,o).fold(Ct,i=>{const a=(l=i,Gp(n).editor.getContent(l));var l;return V0(n,a,i)})})(this,t)}insertContent(t,n){n&&(t=Aw({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){void 0===t?Kp(this,this.startContent,{format:"raw"}):Kp(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||cs.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=cs.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const r=this.getDoc();return null!==(n=null!==(t=this.bodyElement)&&void 0!==t?t:null==r?void 0:r.body)&&void 0!==n?n:null}convertURL(t,n,r){const o=this,i=o.options.get,a=jx(o);return me(a)?a.call(o,t,r,!0,n):!i("convert_urls")||"link"===r||ne(r)&&"LINK"===r.nodeName||0===t.indexOf("file:")||0===t.length?t:i("relative_urls")?o.documentBaseURI.toRelative(t):t=o.documentBaseURI.toAbsolute(t,i("remove_script_host"))}addVisual(t){((n,r)=>{var i;i=r,vn(this).editor.addVisual(i)})(0,t)}setEditableRoot(t){var n,r;(n=this)._editableRoot!==(r=t)&&(n._editableRoot=r,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:r}))}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){const{_selectionOverrides:n,editorUpload:r}=t,o=t.getBody(),i=t.getElement();o&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&z(null==i?void 0:i.nextSibling)&&Cd.remove(i.nextSibling),t.dispatch("remove"),t.editorManager.remove(t),!t.inline&&o&&Cd.setStyle((a=t).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(t),Cd.remove(t.getContainer()),Sd(n),Sd(r),t.destroy()}var a})(this)}destroy(t){((n,r)=>{const{selection:o,dom:i}=n;n.destroyed||(r||n.removed?(r||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),Sd(o),Sd(i)),(a=>{const s=a.formElement;s&&(s._mceOldSubmit&&(s.submit=s._mceOldSubmit,delete s._mceOldSubmit),Cd.unbind(s,"submit reset",a.formEventDelegate))})(n),(a=>{const s=a;s.contentAreaContainer=s.formElement=s.container=s.editorContainer=null,s.bodyElement=s.contentDocument=s.contentWindow=null,s.iframeElement=s.targetElm=null;const l=a.selection;l&&(s.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Xs=Kt.DOM,au=xe.each;let su,Nw=!1,Pr=[];const lu=e=>{const t=e.type;au(ya.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}})},Rw=e=>{if(e!==Nw){const t=Kt.DOM;e?(t.bind(window,"resize",lu),t.bind(window,"scroll",lu)):(t.unbind(window,"resize",lu),t.unbind(window,"scroll",lu)),Nw=e}},Pw=e=>{const t=Pr;return Pr=gt(Pr,n=>e!==n),ya.activeEditor===e&&(ya.activeEditor=Pr.length>0?Pr[0]:null),ya.focusedEditor===e&&(ya.focusedEditor=null),t.length!==Pr.length},qP="CSS1Compat"!==document.compatMode,ya=Wt(rt({},sm),{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"6.2",releaseDate:"2023-08-09",i18n:Vo,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",r=Yo.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,n=o.suffix;else{const a=document.getElementsByTagName("script");for(let s=0;s<a.length;s++){const l=a[s].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),t=l.substring(0,l.lastIndexOf("/"));break}}if(!t&&document.currentScript){const s=document.currentScript.src;-1!==s.indexOf(".min")&&(n=".min"),t=s.substring(0,s.lastIndexOf("/"))}}var i;e.baseURL=new Yo(r).toAbsolute(t),e.documentBaseURL=r,e.baseURI=new Yo(e.baseURL),e.suffix=n,(i=e).on("AddEditor",ye(Xk,i)),i.on("RemoveEditor",ye(Qk,i))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const r=e.plugin_base_urls;void 0!==r&&qt(r,(o,i)=>{vr.PluginManager.urls[i]=o})},init(e){const t=this;let n;const r=xe.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=a=>{n=a};const i=()=>{let a=0;const s=[];let l;var c;Xs.unbind(window,"ready",i),(c=>{const u=e.onpageload;u&&u.apply(t,[])})(),l=((c,u)=>{const f=[],g=me(u)?v=>Yt(f,m=>u(m,v)):v=>Pt(f,v);for(let v=0,m=c.length;v<m;v++){const y=c[v];g(y)||f.push(y)}return f})((c=e,J.browser.isIE()||J.browser.isEdge()?(wd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):qP?(wd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):D(c.selector)?Xs.select(c.selector):z(c.target)?[c.target]:[])),xe.each(l,c=>{var u;(u=t.get(c.id))&&u.initialized&&!(u.getContainer()||u.getBody()).parentNode&&(Pw(u),u.unbindAllNativeEvents(),u.destroy(!0),u.removed=!0)}),l=xe.grep(l,c=>!t.get(c.id)),0===l.length?o([]):au(l,c=>{e.inline&&c.tagName.toLowerCase()in r?wd("Could not initialize inline editor on invalid inline target element",c):((u,f,g)=>{const v=new iu(u,f,t);s.push(v),v.on("init",()=>{++a===l.length&&o(s)}),v.targetElm=v.targetElm||g,v.render()})((u=>{let f=u.id;return f||(f=Ut(u,"name").filter(g=>!Xs.get(g)).getOrThunk(Xs.uniqueId),u.setAttribute("id",f)),f})(c),e,c)})};return Xs.bind(window,"ready",i),new Promise(a=>{n?a(n):o=s=>{a(s)}})},get(e){return 0===arguments.length?Pr.slice(0):D(e)?rn(Pr,t=>t.id===e).getOr(null):b(e)&&Pr[e]?Pr[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(null===n&&Pr.push(e),Rw(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),su||(su=r=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return r.preventDefault(),r.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",su))),e},createEditor(e,t){return this.add(new iu(e,t,this))},remove(e){const t=this;let n;if(e){if(!D(e))return n=e,le(t.get(n.id))?null:(Pw(n)&&t.dispatch("RemoveEditor",{editor:n}),0===Pr.length&&window.removeEventListener("beforeunload",su),n.remove(),Rw(Pr.length>0),n);au(Xs.select(e),r=>{n=t.get(r.id),n&&t.remove(n)})}else for(let r=Pr.length-1;r>=0;r--)t.remove(Pr[r])},execCommand(e,t,n){var r;const o=this,i=ne(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(e){case"mceAddEditor":return o.get(i)||new iu(i,n.options,o).render(),!0;case"mceRemoveEditor":{const a=o.get(i);return a&&a.remove(),!0}case"mceToggleEditor":{const a=o.get(i);return a?(a.isHidden()?a.show():a.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(e,t,n)},triggerSave:()=>{au(Pr,e=>{e.save()})},addI18n:(e,t)=>{Vo.add(e,t)},translate:e=>Vo.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Yo(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Yo(this.baseURL)}});ya.setup();const zP=(()=>{const e=sa();return{FakeClipboardItem:t=>({items:t,types:on(t),getType:n=>Ut(t,n).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),Ow=Math.min,Qs=Math.max,cu=Math.round,Dw=(e,t,n)=>{let r=t.x,o=t.y;const i=e.w,a=e.h,s=t.w,l=t.h,c=(n||"").split("");return"b"===c[0]&&(o+=l),"r"===c[1]&&(r+=s),"c"===c[0]&&(o+=cu(l/2)),"c"===c[1]&&(r+=cu(s/2)),"b"===c[3]&&(o-=a),"r"===c[4]&&(r-=i),"c"===c[3]&&(o-=cu(a/2)),"c"===c[4]&&(r-=cu(i/2)),Js(r,o,i,a)},Js=(e,t,n,r)=>({x:e,y:t,w:n,h:r}),VP={inflate:(e,t,n)=>Js(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:Dw,findBestRelativePosition:(e,t,n,r)=>{for(let o=0;o<r.length;o++){const i=Dw(e,t,r[o]);if(i.x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o]}return null},intersect:(e,t)=>{const n=Qs(e.x,t.x),r=Qs(e.y,t.y),o=Ow(e.x+e.w,t.x+t.w),i=Ow(e.y+e.h,t.y+t.h);return o-n<0||i-r<0?null:Js(n,r,o-n,i-r)},clamp:(e,t,n)=>{let r=e.x,o=e.y,i=e.x+e.w,a=e.y+e.h;const s=t.x+t.w,l=t.y+t.h,c=Qs(0,t.x-r),u=Qs(0,t.y-o),f=Qs(0,i-s),g=Qs(0,a-l);return r+=c,o+=u,n&&(i+=c,a+=u,r-=f,o-=g),i-=f,a-=g,Js(r,o,i-r,a-o)},create:Js,fromClientRect:e=>Js(e.left,e.top,e.width,e.height)},GP=(()=>{const e={},t={};return{load:(n,r)=>{const o=`Script at URL "${r}" failed to load`,i=`Script at URL "${r}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==e[n])return e[n];{const a=new Promise((s,l)=>{const c=((u,f,g=1e3)=>{let v=!1,m=null;const y=x=>(...k)=>{v||(v=!0,null!==m&&(clearTimeout(m),m=null),x.apply(null,k))},h=y(u),S=y(f);return{start:(...x)=>{v||null!==m||(m=setTimeout(()=>S.apply(null,x),g))},resolve:h,reject:S}})(s,l);t[n]=c.resolve,Bi.ScriptLoader.loadScript(r).then(()=>c.start(i),()=>c.reject(o))});return e[n]=a,a}},add:(n,r)=>{void 0!==t[n]&&(t[n](r),delete t[n]),e[n]=Promise.resolve(r)},unload:n=>{delete e[n]}}})();let dc;try{const e="__storage_test__";dc=window.localStorage,dc.setItem(e,e),dc.removeItem(e)}catch(e){dc=(()=>{let t={},n=[];const r={getItem:o=>t[o]||null,setItem:(o,i)=>{n.push(o),t[o]=String(i)},key:o=>n[o],removeItem:o=>{n=n.filter(i=>i===o),delete t[o]},clear:()=>{n=[],t={}},length:0};return Object.defineProperty(r,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),r})()}const KP={geom:{Rect:VP},util:{Delay:co,Tools:xe,VK:Qe,URI:Yo,EventDispatcher:am,Observable:sm,I18n:Vo,LocalStorage:dc,ImageUploader:e=>{const t=yC(),n=SC(e,t);return{upload:(r,o=!0)=>n.upload(r,o?CC(e):void 0)}}},dom:{EventUtils:ja,TreeWalker:Pn,TextSeeker:Ha,DOMUtils:Kt,ScriptLoader:Bi,RangeUtils:Xa,Serializer:cC,StyleSheetLoader:Om,ControlSelection:Qv,BookmarkManager:Ml,Selection:lC,Event:ja.Event},html:{Styles:Mu,Entities:ia,Node:Rr,Schema:aa,DomParser:Fs,Writer:Ib,Serializer:fa},Env:J,AddOnManager:vr,Annotator:Wv,Formatter:wC,UndoManager:kC,EditorCommands:bw,WindowManager:hC,NotificationManager:mC,EditorObservable:_w,Shortcuts:Tw,Editor:iu,FocusManager:Cb,EditorManager:ya,DOM:Kt.DOM,ScriptLoader:Bi.ScriptLoader,PluginManager:Hs,ThemeManager:os,ModelManager:Us,IconManager:_d,Resource:GP,FakeClipboard:zP,trim:xe.trim,isArray:xe.isArray,is:xe.is,toArray:xe.toArray,makeMap:xe.makeMap,each:xe.each,map:xe.map,grep:xe.grep,inArray:xe.inArray,extend:xe.extend,walk:xe.walk,resolve:xe.resolve,explode:xe.explode,_addCacheSuffix:xe._addCacheSuffix},Mw=xe.extend(ya,KP);(e=>{window.tinymce=e,window.tinyMCE=e})(Mw),(e=>{if("object"==typeof module)try{module.exports=e}catch(t){}})(Mw)}(),function(B,Ee){"object"==typeof exports&&"undefined"!=typeof module?Ee(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],Ee):Ee((B="undefined"!=typeof globalThis?globalThis:B||self).bootstrap={},B.jQuery,B.Popper)}(this,function(B,Ee,ct){"use strict";function Pe(pe){return pe&&"object"==typeof pe&&"default"in pe?pe:{default:pe}}var w=Pe(Ee),oe=Pe(ct);function j(pe,re){for(var _=0;_<re.length;_++){var O=re[_];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(pe,O.key,O)}}function ee(pe,re,_){return re&&j(pe.prototype,re),_&&j(pe,_),Object.defineProperty(pe,"prototype",{writable:!1}),pe}function te(){return te=Object.assign?Object.assign.bind():function(pe){for(var re=1;re<arguments.length;re++){var _=arguments[re];for(var O in _)Object.prototype.hasOwnProperty.call(_,O)&&(pe[O]=_[O])}return pe},te.apply(this,arguments)}function ce(pe,re){return(ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,O){return _.__proto__=O,_})(pe,re)}var Xe="transitionend",Ne={TRANSITION_END:"bsTransitionEnd",getUID:function(pe){do{pe+=~~(1e6*Math.random())}while(document.getElementById(pe));return pe},getSelectorFromElement:function(pe){var re=pe.getAttribute("data-target");if(!re||"#"===re){var _=pe.getAttribute("href");re=_&&"#"!==_?_.trim():""}try{return document.querySelector(re)?re:null}catch(O){return null}},getTransitionDurationFromElement:function(pe){if(!pe)return 0;var re=w.default(pe).css("transition-duration"),_=w.default(pe).css("transition-delay"),O=parseFloat(re),q=parseFloat(_);return O||q?(re=re.split(",")[0],_=_.split(",")[0],1e3*(parseFloat(re)+parseFloat(_))):0},reflow:function(pe){return pe.offsetHeight},triggerTransitionEnd:function(pe){w.default(pe).trigger(Xe)},supportsTransitionEnd:function(){return Boolean(Xe)},isElement:function(pe){return(pe[0]||pe).nodeType},typeCheckConfig:function(pe,re,_){for(var O in _)if(Object.prototype.hasOwnProperty.call(_,O)){var q=_[O],J=re[O],we=J&&Ne.isElement(J)?"element":null===(it=J)||void 0===it?""+it:{}.toString.call(it).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(q).test(we))throw new Error(pe.toUpperCase()+': Option "'+O+'" provided type "'+we+'" but expected type "'+q+'".')}var it},findShadowRoot:function(pe){if(!document.documentElement.attachShadow)return null;if("function"==typeof pe.getRootNode){var re=pe.getRootNode();return re instanceof ShadowRoot?re:null}return pe instanceof ShadowRoot?pe:pe.parentNode?Ne.findShadowRoot(pe.parentNode):null},jQueryDetection:function(){if(void 0===w.default)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var pe=w.default.fn.jquery.split(" ")[0].split(".");if(pe[0]<2&&pe[1]<9||1===pe[0]&&9===pe[1]&&pe[2]<1||pe[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};Ne.jQueryDetection(),w.default.fn.emulateTransitionEnd=function(pe){var re=this,_=!1;return w.default(this).one(Ne.TRANSITION_END,function(){_=!0}),setTimeout(function(){_||Ne.triggerTransitionEnd(re)},pe),this},w.default.event.special[Ne.TRANSITION_END]={bindType:Xe,delegateType:Xe,handle:function(pe){if(w.default(pe.target).is(this))return pe.handleObj.handler.apply(this,arguments)}};var D="bs.alert",ne=w.default.fn.alert,Y=function(){function pe(_){this._element=_}var re=pe.prototype;return re.close=function(_){var O=this._element;_&&(O=this._getRootElement(_)),this._triggerCloseEvent(O).isDefaultPrevented()||this._removeElement(O)},re.dispose=function(){w.default.removeData(this._element,D),this._element=null},re._getRootElement=function(_){var O=Ne.getSelectorFromElement(_),q=!1;return O&&(q=document.querySelector(O)),q||(q=w.default(_).closest(".alert")[0]),q},re._triggerCloseEvent=function(_){var O=w.default.Event("close.bs.alert");return w.default(_).trigger(O),O},re._removeElement=function(_){var O=this;if(w.default(_).removeClass("show"),w.default(_).hasClass("fade")){var q=Ne.getTransitionDurationFromElement(_);w.default(_).one(Ne.TRANSITION_END,function(J){return O._destroyElement(_,J)}).emulateTransitionEnd(q)}else this._destroyElement(_)},re._destroyElement=function(_){w.default(_).detach().trigger("closed.bs.alert").remove()},pe._jQueryInterface=function(_){return this.each(function(){var O=w.default(this),q=O.data(D);q||(q=new pe(this),O.data(D,q)),"close"===_&&q[_](this)})},pe._handleDismiss=function(_){return function(O){O&&O.preventDefault(),_.close(this)}},ee(pe,null,[{key:"VERSION",get:function(){return"4.6.2"}}]),pe}();w.default(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',Y._handleDismiss(new Y)),w.default.fn.alert=Y._jQueryInterface,w.default.fn.alert.Constructor=Y,w.default.fn.alert.noConflict=function(){return w.default.fn.alert=ne,Y._jQueryInterface};var fe="bs.button",le=w.default.fn.button,Le="active",Je='[data-toggle^="button"]',Ve='input:not([type="hidden"])',z=".btn",me=function(){function pe(_){this._element=_,this.shouldAvoidTriggerChange=!1}var re=pe.prototype;return re.toggle=function(){var _=!0,O=!0,q=w.default(this._element).closest('[data-toggle="buttons"]')[0];if(q){var J=this._element.querySelector(Ve);if(J){if("radio"===J.type)if(J.checked&&this._element.classList.contains(Le))_=!1;else{var we=q.querySelector(".active");we&&w.default(we).removeClass(Le)}_&&("checkbox"!==J.type&&"radio"!==J.type||(J.checked=!this._element.classList.contains(Le)),this.shouldAvoidTriggerChange||w.default(J).trigger("change")),J.focus(),O=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(O&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(Le)),_&&w.default(this._element).toggleClass(Le))},re.dispose=function(){w.default.removeData(this._element,fe),this._element=null},pe._jQueryInterface=function(_,O){return this.each(function(){var q=w.default(this),J=q.data(fe);J||(J=new pe(this),q.data(fe,J)),J.shouldAvoidTriggerChange=O,"toggle"===_&&J[_]()})},ee(pe,null,[{key:"VERSION",get:function(){return"4.6.2"}}]),pe}();w.default(document).on("click.bs.button.data-api",Je,function(pe){var re=pe.target,_=re;if(w.default(re).hasClass("btn")||(re=w.default(re).closest(z)[0]),!re||re.hasAttribute("disabled")||re.classList.contains("disabled"))pe.preventDefault();else{var O=re.querySelector(Ve);if(O&&(O.hasAttribute("disabled")||O.classList.contains("disabled")))return void pe.preventDefault();"INPUT"!==_.tagName&&"LABEL"===re.tagName||me._jQueryInterface.call(w.default(re),"toggle","INPUT"===_.tagName)}}).on("focus.bs.button.data-api blur.bs.button.data-api",Je,function(pe){var re=w.default(pe.target).closest(z)[0];w.default(re).toggleClass("focus",/^focus(in)?$/.test(pe.type))}),w.default(window).on("load.bs.button.data-api",function(){for(var pe=[].slice.call(document.querySelectorAll('[data-toggle="buttons"] .btn')),re=0,_=pe.length;re<_;re++){var O=pe[re],q=O.querySelector(Ve);q.checked||q.hasAttribute("checked")?O.classList.add(Le):O.classList.remove(Le)}for(var J=0,we=(pe=[].slice.call(document.querySelectorAll('[data-toggle="button"]'))).length;J<we;J++){var it=pe[J];"true"===it.getAttribute("aria-pressed")?it.classList.add(Le):it.classList.remove(Le)}}),w.default.fn.button=me._jQueryInterface,w.default.fn.button.Constructor=me,w.default.fn.button.noConflict=function(){return w.default.fn.button=le,me._jQueryInterface};var b="carousel",He="bs.carousel",We=w.default.fn[b],Mt="active",qn="next",Fe="prev",Ct="slid.bs.carousel",bn=".active.carousel-item",ye={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Jt={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},fn={TOUCH:"touch",PEN:"pen"},ln=function(){function pe(_,O){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(O),this._element=_,this._indicatorsElement=this._element.querySelector(".carousel-indicators"),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var re=pe.prototype;return re.next=function(){this._isSliding||this._slide(qn)},re.nextWhenVisible=function(){var _=w.default(this._element);!document.hidden&&_.is(":visible")&&"hidden"!==_.css("visibility")&&this.next()},re.prev=function(){this._isSliding||this._slide(Fe)},re.pause=function(_){_||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(Ne.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},re.cycle=function(_){_||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},re.to=function(_){var O=this;this._activeElement=this._element.querySelector(bn);var q=this._getItemIndex(this._activeElement);if(!(_>this._items.length-1||_<0))if(this._isSliding)w.default(this._element).one(Ct,function(){return O.to(_)});else{if(q===_)return this.pause(),void this.cycle();this._slide(_>q?qn:Fe,this._items[_])}},re.dispose=function(){w.default(this._element).off(".bs.carousel"),w.default.removeData(this._element,He),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},re._getConfig=function(_){return _=te({},ye,_),Ne.typeCheckConfig(b,_,Jt),_},re._handleSwipe=function(){var _=Math.abs(this.touchDeltaX);if(!(_<=40)){var O=_/this.touchDeltaX;this.touchDeltaX=0,O>0&&this.prev(),O<0&&this.next()}},re._addEventListeners=function(){var _=this;this._config.keyboard&&w.default(this._element).on("keydown.bs.carousel",function(O){return _._keydown(O)}),"hover"===this._config.pause&&w.default(this._element).on("mouseenter.bs.carousel",function(O){return _.pause(O)}).on("mouseleave.bs.carousel",function(O){return _.cycle(O)}),this._config.touch&&this._addTouchEventListeners()},re._addTouchEventListeners=function(){var _=this;if(this._touchSupported){var O=function(J){_._pointerEvent&&fn[J.originalEvent.pointerType.toUpperCase()]?_.touchStartX=J.originalEvent.clientX:_._pointerEvent||(_.touchStartX=J.originalEvent.touches[0].clientX)},q=function(J){_._pointerEvent&&fn[J.originalEvent.pointerType.toUpperCase()]&&(_.touchDeltaX=J.originalEvent.clientX-_.touchStartX),_._handleSwipe(),"hover"===_._config.pause&&(_.pause(),_.touchTimeout&&clearTimeout(_.touchTimeout),_.touchTimeout=setTimeout(function(we){return _.cycle(we)},500+_._config.interval))};w.default(this._element.querySelectorAll(".carousel-item img")).on("dragstart.bs.carousel",function(J){return J.preventDefault()}),this._pointerEvent?(w.default(this._element).on("pointerdown.bs.carousel",function(J){return O(J)}),w.default(this._element).on("pointerup.bs.carousel",function(J){return q(J)}),this._element.classList.add("pointer-event")):(w.default(this._element).on("touchstart.bs.carousel",function(J){return O(J)}),w.default(this._element).on("touchmove.bs.carousel",function(J){var we;_.touchDeltaX=(we=J).originalEvent.touches&&we.originalEvent.touches.length>1?0:we.originalEvent.touches[0].clientX-_.touchStartX}),w.default(this._element).on("touchend.bs.carousel",function(J){return q(J)}))}},re._keydown=function(_){if(!/input|textarea/i.test(_.target.tagName))switch(_.which){case 37:_.preventDefault(),this.prev();break;case 39:_.preventDefault(),this.next()}},re._getItemIndex=function(_){return this._items=_&&_.parentNode?[].slice.call(_.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(_)},re._getItemByDirection=function(_,O){var q=_===qn,J=_===Fe,we=this._getItemIndex(O);if((J&&0===we||q&&we===this._items.length-1)&&!this._config.wrap)return O;var St=(we+(_===Fe?-1:1))%this._items.length;return-1===St?this._items[this._items.length-1]:this._items[St]},re._triggerSlideEvent=function(_,O){var q=this._getItemIndex(_),J=this._getItemIndex(this._element.querySelector(bn)),we=w.default.Event("slide.bs.carousel",{relatedTarget:_,direction:O,from:J,to:q});return w.default(this._element).trigger(we),we},re._setActiveIndicatorElement=function(_){if(this._indicatorsElement){var O=[].slice.call(this._indicatorsElement.querySelectorAll(".active"));w.default(O).removeClass(Mt);var q=this._indicatorsElement.children[this._getItemIndex(_)];q&&w.default(q).addClass(Mt)}},re._updateInterval=function(){var _=this._activeElement||this._element.querySelector(bn);if(_){var O=parseInt(_.getAttribute("data-interval"),10);O?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=O):this._config.interval=this._config.defaultInterval||this._config.interval}},re._slide=function(_,O){var q,J,we,it=this,St=this._element.querySelector(bn),xe=this._getItemIndex(St),Ht=O||St&&this._getItemByDirection(_,St),Gt=this._getItemIndex(Ht),gr=Boolean(this._interval);if(_===qn?(q="carousel-item-left",J="carousel-item-next",we="left"):(q="carousel-item-right",J="carousel-item-prev",we="right"),Ht&&w.default(Ht).hasClass(Mt))this._isSliding=!1;else if(!this._triggerSlideEvent(Ht,we).isDefaultPrevented()&&St&&Ht){this._isSliding=!0,gr&&this.pause(),this._setActiveIndicatorElement(Ht),this._activeElement=Ht;var oi=w.default.Event(Ct,{relatedTarget:Ht,direction:we,from:xe,to:Gt});if(w.default(this._element).hasClass("slide")){w.default(Ht).addClass(J),Ne.reflow(Ht),w.default(St).addClass(q),w.default(Ht).addClass(q);var Xi=Ne.getTransitionDurationFromElement(St);w.default(St).one(Ne.TRANSITION_END,function(){w.default(Ht).removeClass(q+" "+J).addClass(Mt),w.default(St).removeClass("active "+J+" "+q),it._isSliding=!1,setTimeout(function(){return w.default(it._element).trigger(oi)},0)}).emulateTransitionEnd(Xi)}else w.default(St).removeClass(Mt),w.default(Ht).addClass(Mt),this._isSliding=!1,w.default(this._element).trigger(oi);gr&&this.cycle()}},pe._jQueryInterface=function(_){return this.each(function(){var O=w.default(this).data(He),q=te({},ye,w.default(this).data());"object"==typeof _&&(q=te({},q,_));var J="string"==typeof _?_:q.slide;if(O||(O=new pe(this,q),w.default(this).data(He,O)),"number"==typeof _)O.to(_);else if("string"==typeof J){if(void 0===O[J])throw new TypeError('No method named "'+J+'"');O[J]()}else q.interval&&q.ride&&(O.pause(),O.cycle())})},pe._dataApiClickHandler=function(_){var O=Ne.getSelectorFromElement(this);if(O){var q=w.default(O)[0];if(q&&w.default(q).hasClass("carousel")){var J=te({},w.default(q).data(),w.default(this).data()),we=this.getAttribute("data-slide-to");we&&(J.interval=!1),pe._jQueryInterface.call(w.default(q),J),we&&w.default(q).data(He).to(we),_.preventDefault()}}},ee(pe,null,[{key:"VERSION",get:function(){return"4.6.2"}},{key:"Default",get:function(){return ye}}]),pe}();w.default(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",ln._dataApiClickHandler),w.default(window).on("load.bs.carousel.data-api",function(){for(var pe=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),re=0,_=pe.length;re<_;re++){var O=w.default(pe[re]);ln._jQueryInterface.call(O,O.data())}}),w.default.fn[b]=ln._jQueryInterface,w.default.fn[b].Constructor=ln,w.default.fn[b].noConflict=function(){return w.default.fn[b]=We,ln._jQueryInterface};var $t="collapse",Ot="bs.collapse",Ft=w.default.fn[$t],T="show",Hr="collapse",zn="collapsing",Xr="collapsed",Pt='[data-toggle="collapse"]',Yt={toggle:!0,parent:""},wt={toggle:"boolean",parent:"(string|element)"},Ae=function(){function pe(_,O){this._isTransitioning=!1,this._element=_,this._config=this._getConfig(O),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+_.id+'"],[data-toggle="collapse"][data-target="#'+_.id+'"]'));for(var q=[].slice.call(document.querySelectorAll(Pt)),J=0,we=q.length;J<we;J++){var it=q[J],St=Ne.getSelectorFromElement(it),xe=[].slice.call(document.querySelectorAll(St)).filter(function(Ht){return Ht===_});null!==St&&xe.length>0&&(this._selector=St,this._triggerArray.push(it))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var re=pe.prototype;return re.toggle=function(){w.default(this._element).hasClass(T)?this.hide():this.show()},re.show=function(){var _,O,q=this;if(!(this._isTransitioning||w.default(this._element).hasClass(T)||(this._parent&&0===(_=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter(function(xe){return"string"==typeof q._config.parent?xe.getAttribute("data-parent")===q._config.parent:xe.classList.contains(Hr)})).length&&(_=null),_&&(O=w.default(_).not(this._selector).data(Ot))&&O._isTransitioning))){var J=w.default.Event("show.bs.collapse");if(w.default(this._element).trigger(J),!J.isDefaultPrevented()){_&&(pe._jQueryInterface.call(w.default(_).not(this._selector),"hide"),O||w.default(_).data(Ot,null));var we=this._getDimension();w.default(this._element).removeClass(Hr).addClass(zn),this._element.style[we]=0,this._triggerArray.length&&w.default(this._triggerArray).removeClass(Xr).attr("aria-expanded",!0),this.setTransitioning(!0);var it="scroll"+(we[0].toUpperCase()+we.slice(1)),St=Ne.getTransitionDurationFromElement(this._element);w.default(this._element).one(Ne.TRANSITION_END,function(){w.default(q._element).removeClass(zn).addClass("collapse show"),q._element.style[we]="",q.setTransitioning(!1),w.default(q._element).trigger("shown.bs.collapse")}).emulateTransitionEnd(St),this._element.style[we]=this._element[it]+"px"}}},re.hide=function(){var _=this;if(!this._isTransitioning&&w.default(this._element).hasClass(T)){var O=w.default.Event("hide.bs.collapse");if(w.default(this._element).trigger(O),!O.isDefaultPrevented()){var q=this._getDimension();this._element.style[q]=this._element.getBoundingClientRect()[q]+"px",Ne.reflow(this._element),w.default(this._element).addClass(zn).removeClass("collapse show");var J=this._triggerArray.length;if(J>0)for(var we=0;we<J;we++){var it=this._triggerArray[we],St=Ne.getSelectorFromElement(it);null!==St&&(w.default([].slice.call(document.querySelectorAll(St))).hasClass(T)||w.default(it).addClass(Xr).attr("aria-expanded",!1))}this.setTransitioning(!0),this._element.style[q]="";var xe=Ne.getTransitionDurationFromElement(this._element);w.default(this._element).one(Ne.TRANSITION_END,function(){_.setTransitioning(!1),w.default(_._element).removeClass(zn).addClass(Hr).trigger("hidden.bs.collapse")}).emulateTransitionEnd(xe)}}},re.setTransitioning=function(_){this._isTransitioning=_},re.dispose=function(){w.default.removeData(this._element,Ot),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},re._getConfig=function(_){return(_=te({},Yt,_)).toggle=Boolean(_.toggle),Ne.typeCheckConfig($t,_,wt),_},re._getDimension=function(){return w.default(this._element).hasClass("width")?"width":"height"},re._getParent=function(){var _,O=this;Ne.isElement(this._config.parent)?(_=this._config.parent,void 0!==this._config.parent.jquery&&(_=this._config.parent[0])):_=document.querySelector(this._config.parent);var J=[].slice.call(_.querySelectorAll('[data-toggle="collapse"][data-parent="'+this._config.parent+'"]'));return w.default(J).each(function(we,it){O._addAriaAndCollapsedClass(pe._getTargetFromElement(it),[it])}),_},re._addAriaAndCollapsedClass=function(_,O){var q=w.default(_).hasClass(T);O.length&&w.default(O).toggleClass(Xr,!q).attr("aria-expanded",q)},pe._getTargetFromElement=function(_){var O=Ne.getSelectorFromElement(_);return O?document.querySelector(O):null},pe._jQueryInterface=function(_){return this.each(function(){var O=w.default(this),q=O.data(Ot),J=te({},Yt,O.data(),"object"==typeof _&&_?_:{});if(!q&&J.toggle&&"string"==typeof _&&/show|hide/.test(_)&&(J.toggle=!1),q||(q=new pe(this,J),O.data(Ot,q)),"string"==typeof _){if(void 0===q[_])throw new TypeError('No method named "'+_+'"');q[_]()}})},ee(pe,null,[{key:"VERSION",get:function(){return"4.6.2"}},{key:"Default",get:function(){return Yt}}]),pe}();w.default(document).on("click.bs.collapse.data-api",Pt,function(pe){"A"===pe.currentTarget.tagName&&pe.preventDefault();var re=w.default(this),_=Ne.getSelectorFromElement(this),O=[].slice.call(document.querySelectorAll(_));w.default(O).each(function(){var q=w.default(this),J=q.data(Ot)?"toggle":re.data();Ae._jQueryInterface.call(q,J)})}),w.default.fn[$t]=Ae._jQueryInterface,w.default.fn[$t].Constructor=Ae,w.default.fn[$t].noConflict=function(){return w.default.fn[$t]=Ft,Ae._jQueryInterface};var Wr="dropdown",Qr="bs.dropdown",gt=w.default.fn[Wr],To=new RegExp("38|40|27"),yn="disabled",Cn="show",rn="dropdown-menu-right",Zo="hide.bs.dropdown",_a="hidden.bs.dropdown",pn="click.bs.dropdown.data-api",fr="keydown.bs.dropdown.data-api",Sr='[data-toggle="dropdown"]',mt=".dropdown-menu",Vn={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},Ao={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},Mr=function(){function pe(_,O){this._element=_,this._popper=null,this._config=this._getConfig(O),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var re=pe.prototype;return re.toggle=function(){if(!this._element.disabled&&!w.default(this._element).hasClass(yn)){var _=w.default(this._menu).hasClass(Cn);pe._clearMenus(),_||this.show(!0)}},re.show=function(_){if(void 0===_&&(_=!1),!(this._element.disabled||w.default(this._element).hasClass(yn)||w.default(this._menu).hasClass(Cn))){var O={relatedTarget:this._element},q=w.default.Event("show.bs.dropdown",O),J=pe._getParentFromElement(this._element);if(w.default(J).trigger(q),!q.isDefaultPrevented()){if(!this._inNavbar&&_){if(void 0===oe.default)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var we=this._element;"parent"===this._config.reference?we=J:Ne.isElement(this._config.reference)&&(we=this._config.reference,void 0!==this._config.reference.jquery&&(we=this._config.reference[0])),"scrollParent"!==this._config.boundary&&w.default(J).addClass("position-static"),this._popper=new oe.default(we,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===w.default(J).closest(".navbar-nav").length&&w.default(document.body).children().on("mouseover",null,w.default.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),w.default(this._menu).toggleClass(Cn),w.default(J).toggleClass(Cn).trigger(w.default.Event("shown.bs.dropdown",O))}}},re.hide=function(){if(!this._element.disabled&&!w.default(this._element).hasClass(yn)&&w.default(this._menu).hasClass(Cn)){var _={relatedTarget:this._element},O=w.default.Event(Zo,_),q=pe._getParentFromElement(this._element);w.default(q).trigger(O),O.isDefaultPrevented()||(this._popper&&this._popper.destroy(),w.default(this._menu).toggleClass(Cn),w.default(q).toggleClass(Cn).trigger(w.default.Event(_a,_)))}},re.dispose=function(){w.default.removeData(this._element,Qr),w.default(this._element).off(".bs.dropdown"),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},re.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},re._addEventListeners=function(){var _=this;w.default(this._element).on("click.bs.dropdown",function(O){O.preventDefault(),O.stopPropagation(),_.toggle()})},re._getConfig=function(_){return _=te({},this.constructor.Default,w.default(this._element).data(),_),Ne.typeCheckConfig(Wr,_,this.constructor.DefaultType),_},re._getMenuElement=function(){if(!this._menu){var _=pe._getParentFromElement(this._element);_&&(this._menu=_.querySelector(mt))}return this._menu},re._getPlacement=function(){var _=w.default(this._element.parentNode),O="bottom-start";return _.hasClass("dropup")?O=w.default(this._menu).hasClass(rn)?"top-end":"top-start":_.hasClass("dropright")?O="right-start":_.hasClass("dropleft")?O="left-start":w.default(this._menu).hasClass(rn)&&(O="bottom-end"),O},re._detectNavbar=function(){return w.default(this._element).closest(".navbar").length>0},re._getOffset=function(){var _=this,O={};return"function"==typeof this._config.offset?O.fn=function(q){return q.offsets=te({},q.offsets,_._config.offset(q.offsets,_._element)),q}:O.offset=this._config.offset,O},re._getPopperConfig=function(){var _={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(_.modifiers.applyStyle={enabled:!1}),te({},_,this._config.popperConfig)},pe._jQueryInterface=function(_){return this.each(function(){var O=w.default(this).data(Qr);if(O||(O=new pe(this,"object"==typeof _?_:null),w.default(this).data(Qr,O)),"string"==typeof _){if(void 0===O[_])throw new TypeError('No method named "'+_+'"');O[_]()}})},pe._clearMenus=function(_){if(!_||3!==_.which&&("keyup"!==_.type||9===_.which))for(var O=[].slice.call(document.querySelectorAll(Sr)),q=0,J=O.length;q<J;q++){var we=pe._getParentFromElement(O[q]),it=w.default(O[q]).data(Qr),St={relatedTarget:O[q]};if(_&&"click"===_.type&&(St.clickEvent=_),it){var xe=it._menu;if(w.default(we).hasClass(Cn)&&!(_&&("click"===_.type&&/input|textarea/i.test(_.target.tagName)||"keyup"===_.type&&9===_.which)&&w.default.contains(we,_.target))){var Ht=w.default.Event(Zo,St);w.default(we).trigger(Ht),Ht.isDefaultPrevented()||("ontouchstart"in document.documentElement&&w.default(document.body).children().off("mouseover",null,w.default.noop),O[q].setAttribute("aria-expanded","false"),it._popper&&it._popper.destroy(),w.default(xe).removeClass(Cn),w.default(we).removeClass(Cn).trigger(w.default.Event(_a,St)))}}}},pe._getParentFromElement=function(_){var O,q=Ne.getSelectorFromElement(_);return q&&(O=document.querySelector(q)),O||_.parentNode},pe._dataApiKeydownHandler=function(_){if(!(/input|textarea/i.test(_.target.tagName)?32===_.which||27!==_.which&&(40!==_.which&&38!==_.which||w.default(_.target).closest(mt).length):!To.test(_.which))&&!this.disabled&&!w.default(this).hasClass(yn)){var O=pe._getParentFromElement(this),q=w.default(O).hasClass(Cn);if(q||27!==_.which){if(_.preventDefault(),_.stopPropagation(),!q||27===_.which||32===_.which)return 27===_.which&&w.default(O.querySelector(Sr)).trigger("focus"),void w.default(this).trigger("click");var J=[].slice.call(O.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)")).filter(function(it){return w.default(it).is(":visible")});if(0!==J.length){var we=J.indexOf(_.target);38===_.which&&we>0&&we--,40===_.which&&we<J.length-1&&we++,we<0&&(we=0),J[we].focus()}}}},ee(pe,null,[{key:"VERSION",get:function(){return"4.6.2"}},{key:"Default",get:function(){return Vn}},{key:"DefaultType",get:function(){return Ao}}]),pe}();w.default(document).on(fr,Sr,Mr._dataApiKeydownHandler).on(fr,mt,Mr._dataApiKeydownHandler).on(pn+" keyup.bs.dropdown.data-api",Mr._clearMenus).on(pn,Sr,function(pe){pe.preventDefault(),pe.stopPropagation(),Mr._jQueryInterface.call(w.default(this),"toggle")}).on(pn,".dropdown form",function(pe){pe.stopPropagation()}),w.default.fn[Wr]=Mr._jQueryInterface,w.default.fn[Wr].Constructor=Mr,w.default.fn[Wr].noConflict=function(){return w.default.fn[Wr]=gt,Mr._jQueryInterface};var xn="bs.modal",mo=w.default.fn.modal,gn="modal-open",kn="fade",on="show",No="modal-static",qt="hidden.bs.modal",ho="show.bs.modal",Ei="focusin.bs.modal",wi="resize.bs.modal",Jr="click.dismiss.bs.modal",_r="keydown.dismiss.bs.modal",Ro="mousedown.dismiss.bs.modal",vo=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ut={backdrop:!0,keyboard:!0,focus:!0,show:!0},yt={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},mn=function(){function pe(_,O){this._config=this._getConfig(O),this._element=_,this._dialog=_.querySelector(".modal-dialog"),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var re=pe.prototype;return re.toggle=function(_){return this._isShown?this.hide():this.show(_)},re.show=function(_){var O=this;if(!this._isShown&&!this._isTransitioning){var q=w.default.Event(ho,{relatedTarget:_});w.default(this._element).trigger(q),q.isDefaultPrevented()||(this._isShown=!0,w.default(this._element).hasClass(kn)&&(this._isTransitioning=!0),this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),w.default(this._element).on(Jr,'[data-dismiss="modal"]',function(J){return O.hide(J)}),w.default(this._dialog).on(Ro,function(){w.default(O._element).one("mouseup.dismiss.bs.modal",function(J){w.default(J.target).is(O._element)&&(O._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return O._showElement(_)}))}},re.hide=function(_){var O=this;if(_&&_.preventDefault(),this._isShown&&!this._isTransitioning){var q=w.default.Event("hide.bs.modal");if(w.default(this._element).trigger(q),this._isShown&&!q.isDefaultPrevented()){this._isShown=!1;var J=w.default(this._element).hasClass(kn);if(J&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),w.default(document).off(Ei),w.default(this._element).removeClass(on),w.default(this._element).off(Jr),w.default(this._dialog).off(Ro),J){var we=Ne.getTransitionDurationFromElement(this._element);w.default(this._element).one(Ne.TRANSITION_END,function(it){return O._hideModal(it)}).emulateTransitionEnd(we)}else this._hideModal()}}},re.dispose=function(){[window,this._element,this._dialog].forEach(function(_){return w.default(_).off(".bs.modal")}),w.default(document).off(Ei),w.default.removeData(this._element,xn),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},re.handleUpdate=function(){this._adjustDialog()},re._getConfig=function(_){return _=te({},Ut,_),Ne.typeCheckConfig("modal",_,yt),_},re._triggerBackdropTransition=function(){var _=this,O=w.default.Event("hidePrevented.bs.modal");if(w.default(this._element).trigger(O),!O.isDefaultPrevented()){var q=this._element.scrollHeight>document.documentElement.clientHeight;q||(this._element.style.overflowY="hidden"),this._element.classList.add(No);var J=Ne.getTransitionDurationFromElement(this._dialog);w.default(this._element).off(Ne.TRANSITION_END),w.default(this._element).one(Ne.TRANSITION_END,function(){_._element.classList.remove(No),q||w.default(_._element).one(Ne.TRANSITION_END,function(){_._element.style.overflowY=""}).emulateTransitionEnd(_._element,J)}).emulateTransitionEnd(J),this._element.focus()}},re._showElement=function(_){var O=this,q=w.default(this._element).hasClass(kn),J=this._dialog?this._dialog.querySelector(".modal-body"):null;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),w.default(this._dialog).hasClass("modal-dialog-scrollable")&&J?J.scrollTop=0:this._element.scrollTop=0,q&&Ne.reflow(this._element),w.default(this._element).addClass(on),this._config.focus&&this._enforceFocus();var we=w.default.Event("shown.bs.modal",{relatedTarget:_}),it=function(){O._config.focus&&O._element.focus(),O._isTransitioning=!1,w.default(O._element).trigger(we)};if(q){var St=Ne.getTransitionDurationFromElement(this._dialog);w.default(this._dialog).one(Ne.TRANSITION_END,it).emulateTransitionEnd(St)}else it()},re._enforceFocus=function(){var _=this;w.default(document).off(Ei).on(Ei,function(O){document!==O.target&&_._element!==O.target&&0===w.default(_._element).has(O.target).length&&_._element.focus()})},re._setEscapeEvent=function(){var _=this;this._isShown?w.default(this._element).on(_r,function(O){_._config.keyboard&&27===O.which?(O.preventDefault(),_.hide()):_._config.keyboard||27!==O.which||_._triggerBackdropTransition()}):this._isShown||w.default(this._element).off(_r)},re._setResizeEvent=function(){var _=this;this._isShown?w.default(window).on(wi,function(O){return _.handleUpdate(O)}):w.default(window).off(wi)},re._hideModal=function(){var _=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._showBackdrop(function(){w.default(document.body).removeClass(gn),_._resetAdjustments(),_._resetScrollbar(),w.default(_._element).trigger(qt)})},re._removeBackdrop=function(){this._backdrop&&(w.default(this._backdrop).remove(),this._backdrop=null)},re._showBackdrop=function(_){var O=this,q=w.default(this._element).hasClass(kn)?kn:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",q&&this._backdrop.classList.add(q),w.default(this._backdrop).appendTo(document.body),w.default(this._element).on(Jr,function(St){O._ignoreBackdropClick?O._ignoreBackdropClick=!1:St.target===St.currentTarget&&("static"===O._config.backdrop?O._triggerBackdropTransition():O.hide())}),q&&Ne.reflow(this._backdrop),w.default(this._backdrop).addClass(on),!_)return;if(!q)return void _();var J=Ne.getTransitionDurationFromElement(this._backdrop);w.default(this._backdrop).one(Ne.TRANSITION_END,_).emulateTransitionEnd(J)}else if(!this._isShown&&this._backdrop){w.default(this._backdrop).removeClass(on);var we=function(){O._removeBackdrop(),_&&_()};if(w.default(this._element).hasClass(kn)){var it=Ne.getTransitionDurationFromElement(this._backdrop);w.default(this._backdrop).one(Ne.TRANSITION_END,we).emulateTransitionEnd(it)}else we()}else _&&_()},re._adjustDialog=function(){var _=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&_&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!_&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},re._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},re._checkScrollbar=function(){var _=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(_.left+_.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},re._setScrollbar=function(){var _=this;if(this._isBodyOverflowing){var O=[].slice.call(document.querySelectorAll(vo)),q=[].slice.call(document.querySelectorAll(".sticky-top"));w.default(O).each(function(it,St){var xe=St.style.paddingRight,Ht=w.default(St).css("padding-right");w.default(St).data("padding-right",xe).css("padding-right",parseFloat(Ht)+_._scrollbarWidth+"px")}),w.default(q).each(function(it,St){var xe=St.style.marginRight,Ht=w.default(St).css("margin-right");w.default(St).data("margin-right",xe).css("margin-right",parseFloat(Ht)-_._scrollbarWidth+"px")});var J=document.body.style.paddingRight,we=w.default(document.body).css("padding-right");w.default(document.body).data("padding-right",J).css("padding-right",parseFloat(we)+this._scrollbarWidth+"px")}w.default(document.body).addClass(gn)},re._resetScrollbar=function(){var _=[].slice.call(document.querySelectorAll(vo));w.default(_).each(function(J,we){var it=w.default(we).data("padding-right");w.default(we).removeData("padding-right"),we.style.paddingRight=it||""});var O=[].slice.call(document.querySelectorAll(".sticky-top"));w.default(O).each(function(J,we){var it=w.default(we).data("margin-right");void 0!==it&&w.default(we).css("margin-right",it).removeData("margin-right")});var q=w.default(document.body).data("padding-right");w.default(document.body).removeData("padding-right"),document.body.style.paddingRight=q||""},re._getScrollbarWidth=function(){var _=document.createElement("div");_.className="modal-scrollbar-measure",document.body.appendChild(_);var O=_.getBoundingClientRect().width-_.clientWidth;return document.body.removeChild(_),O},pe._jQueryInterface=function(_,O){return this.each(function(){var q=w.default(this).data(xn),J=te({},Ut,w.default(this).data(),"object"==typeof _&&_?_:{});if(q||(q=new pe(this,J),w.default(this).data(xn,q)),"string"==typeof _){if(void 0===q[_])throw new TypeError('No method named "'+_+'"');q[_](O)}else J.show&&q.show(O)})},ee(pe,null,[{key:"VERSION",get:function(){return"4.6.2"}},{key:"Default",get:function(){return Ut}}]),pe}();w.default(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(pe){var re,_=this,O=Ne.getSelectorFromElement(this);O&&(re=document.querySelector(O));var q=w.default(re).data(xn)?"toggle":te({},w.default(re).data(),w.default(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||pe.preventDefault();var J=w.default(re).one(ho,function(we){we.isDefaultPrevented()||J.one(qt,function(){w.default(_).is(":visible")&&_.focus()})});mn._jQueryInterface.call(w.default(re),q,this)}),w.default.fn.modal=mn._jQueryInterface,w.default.fn.modal.Constructor=mn,w.default.fn.modal.noConflict=function(){return w.default.fn.modal=mo,mn._jQueryInterface};var Jn=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],zi=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Ea=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function ei(pe,re,_){if(0===pe.length)return pe;if(_&&"function"==typeof _)return _(pe);for(var O=(new window.DOMParser).parseFromString(pe,"text/html"),q=Object.keys(re),J=[].slice.call(O.body.querySelectorAll("*")),we=function(xe,Ht){var Gt=J[xe],gr=Gt.nodeName.toLowerCase();if(-1===q.indexOf(Gt.nodeName.toLowerCase()))return Gt.parentNode.removeChild(Gt),"continue";var oi=[].slice.call(Gt.attributes),Xi=[].concat(re["*"]||[],re[gr]||[]);oi.forEach(function(hs){(function(Ra,zt){var Di=Ra.nodeName.toLowerCase();if(-1!==zt.indexOf(Di))return-1===Jn.indexOf(Di)||Boolean(zi.test(Ra.nodeValue)||Ea.test(Ra.nodeValue));for(var Io=zt.filter(function(rr){return rr instanceof RegExp}),ii=0,Dn=Io.length;ii<Dn;ii++)if(Io[ii].test(Di))return!0;return!1})(hs,Xi)||Gt.removeAttribute(hs.nodeName)})},it=0,St=J.length;it<St;it++)we(it);return O.body.innerHTML}var xi="tooltip",Er="bs.tooltip",Zr=w.default.fn.tooltip,Vi=new RegExp("(^|\\s)bs-tooltip\\S+","g"),qr=["sanitize","whiteList","sanitizeFn"],zr="fade",ki="show",Po="show",Ti="hover",xa={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},an={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",customClass:"",sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},Sn={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},Ai={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},Ir=function(){function pe(_,O){if(void 0===oe.default)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=_,this.config=this._getConfig(O),this.tip=null,this._setListeners()}var re=pe.prototype;return re.enable=function(){this._isEnabled=!0},re.disable=function(){this._isEnabled=!1},re.toggleEnabled=function(){this._isEnabled=!this._isEnabled},re.toggle=function(_){if(this._isEnabled)if(_){var O=this.constructor.DATA_KEY,q=w.default(_.currentTarget).data(O);q||(q=new this.constructor(_.currentTarget,this._getDelegateConfig()),w.default(_.currentTarget).data(O,q)),q._activeTrigger.click=!q._activeTrigger.click,q._isWithActiveTrigger()?q._enter(null,q):q._leave(null,q)}else{if(w.default(this.getTipElement()).hasClass(ki))return void this._leave(null,this);this._enter(null,this)}},re.dispose=function(){clearTimeout(this._timeout),w.default.removeData(this.element,this.constructor.DATA_KEY),w.default(this.element).off(this.constructor.EVENT_KEY),w.default(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&w.default(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},re.show=function(){var _=this;if("none"===w.default(this.element).css("display"))throw new Error("Please use show on visible elements");var O=w.default.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){w.default(this.element).trigger(O);var q=Ne.findShadowRoot(this.element),J=w.default.contains(null!==q?q:this.element.ownerDocument.documentElement,this.element);if(O.isDefaultPrevented()||!J)return;var we=this.getTipElement(),it=Ne.getUID(this.constructor.NAME);we.setAttribute("id",it),this.element.setAttribute("aria-describedby",it),this.setContent(),this.config.animation&&w.default(we).addClass(zr);var St="function"==typeof this.config.placement?this.config.placement.call(this,we,this.element):this.config.placement,xe=this._getAttachment(St);this.addAttachmentClass(xe);var Ht=this._getContainer();w.default(we).data(this.constructor.DATA_KEY,this),w.default.contains(this.element.ownerDocument.documentElement,this.tip)||w.default(we).appendTo(Ht),w.default(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new oe.default(this.element,we,this._getPopperConfig(xe)),w.default(we).addClass(ki),w.default(we).addClass(this.config.customClass),"ontouchstart"in document.documentElement&&w.default(document.body).children().on("mouseover",null,w.default.noop);var Gt=function(){_.config.animation&&_._fixTransition();var oi=_._hoverState;_._hoverState=null,w.default(_.element).trigger(_.constructor.Event.SHOWN),"out"===oi&&_._leave(null,_)};if(w.default(this.tip).hasClass(zr)){var gr=Ne.getTransitionDurationFromElement(this.tip);w.default(this.tip).one(Ne.TRANSITION_END,Gt).emulateTransitionEnd(gr)}else Gt()}},re.hide=function(_){var O=this,q=this.getTipElement(),J=w.default.Event(this.constructor.Event.HIDE),we=function(){O._hoverState!==Po&&q.parentNode&&q.parentNode.removeChild(q),O._cleanTipClass(),O.element.removeAttribute("aria-describedby"),w.default(O.element).trigger(O.constructor.Event.HIDDEN),null!==O._popper&&O._popper.destroy(),_&&_()};if(w.default(this.element).trigger(J),!J.isDefaultPrevented()){if(w.default(q).removeClass(ki),"ontouchstart"in document.documentElement&&w.default(document.body).children().off("mouseover",null,w.default.noop),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,w.default(this.tip).hasClass(zr)){var it=Ne.getTransitionDurationFromElement(q);w.default(q).one(Ne.TRANSITION_END,we).emulateTransitionEnd(it)}else we();this._hoverState=""}},re.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},re.isWithContent=function(){return Boolean(this.getTitle())},re.addAttachmentClass=function(_){w.default(this.getTipElement()).addClass("bs-tooltip-"+_)},re.getTipElement=function(){return this.tip=this.tip||w.default(this.config.template)[0],this.tip},re.setContent=function(){var _=this.getTipElement();this.setElementContent(w.default(_.querySelectorAll(".tooltip-inner")),this.getTitle()),w.default(_).removeClass("fade show")},re.setElementContent=function(_,O){"object"!=typeof O||!O.nodeType&&!O.jquery?this.config.html?(this.config.sanitize&&(O=ei(O,this.config.whiteList,this.config.sanitizeFn)),_.html(O)):_.text(O):this.config.html?w.default(O).parent().is(_)||_.empty().append(O):_.text(w.default(O).text())},re.getTitle=function(){var _=this.element.getAttribute("data-original-title");return _||(_="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),_},re._getPopperConfig=function(_){var O=this;return te({},{placement:_,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(q){q.originalPlacement!==q.placement&&O._handlePopperPlacementChange(q)},onUpdate:function(q){return O._handlePopperPlacementChange(q)}},this.config.popperConfig)},re._getOffset=function(){var _=this,O={};return"function"==typeof this.config.offset?O.fn=function(q){return q.offsets=te({},q.offsets,_.config.offset(q.offsets,_.element)),q}:O.offset=this.config.offset,O},re._getContainer=function(){return!1===this.config.container?document.body:Ne.isElement(this.config.container)?w.default(this.config.container):w.default(document).find(this.config.container)},re._getAttachment=function(_){return xa[_.toUpperCase()]},re._setListeners=function(){var _=this;this.config.trigger.split(" ").forEach(function(O){if("click"===O)w.default(_.element).on(_.constructor.Event.CLICK,_.config.selector,function(we){return _.toggle(we)});else if("manual"!==O){var q=O===Ti?_.constructor.Event.MOUSEENTER:_.constructor.Event.FOCUSIN,J=O===Ti?_.constructor.Event.MOUSELEAVE:_.constructor.Event.FOCUSOUT;w.default(_.element).on(q,_.config.selector,function(we){return _._enter(we)}).on(J,_.config.selector,function(we){return _._leave(we)})}}),this._hideModalHandler=function(){_.element&&_.hide()},w.default(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=te({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},re._fixTitle=function(){var _=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==_)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},re._enter=function(_,O){var q=this.constructor.DATA_KEY;(O=O||w.default(_.currentTarget).data(q))||(O=new this.constructor(_.currentTarget,this._getDelegateConfig()),w.default(_.currentTarget).data(q,O)),_&&(O._activeTrigger["focusin"===_.type?"focus":Ti]=!0),w.default(O.getTipElement()).hasClass(ki)||O._hoverState===Po?O._hoverState=Po:(clearTimeout(O._timeout),O._hoverState=Po,O.config.delay&&O.config.delay.show?O._timeout=setTimeout(function(){O._hoverState===Po&&O.show()},O.config.delay.show):O.show())},re._leave=function(_,O){var q=this.constructor.DATA_KEY;(O=O||w.default(_.currentTarget).data(q))||(O=new this.constructor(_.currentTarget,this._getDelegateConfig()),w.default(_.currentTarget).data(q,O)),_&&(O._activeTrigger["focusout"===_.type?"focus":Ti]=!1),O._isWithActiveTrigger()||(clearTimeout(O._timeout),O._hoverState="out",O.config.delay&&O.config.delay.hide?O._timeout=setTimeout(function(){"out"===O._hoverState&&O.hide()},O.config.delay.hide):O.hide())},re._isWithActiveTrigger=function(){for(var _ in this._activeTrigger)if(this._activeTrigger[_])return!0;return!1},re._getConfig=function(_){var O=w.default(this.element).data();return Object.keys(O).forEach(function(q){-1!==qr.indexOf(q)&&delete O[q]}),"number"==typeof(_=te({},this.constructor.Default,O,"object"==typeof _&&_?_:{})).delay&&(_.delay={show:_.delay,hide:_.delay}),"number"==typeof _.title&&(_.title=_.title.toString()),"number"==typeof _.content&&(_.content=_.content.toString()),Ne.typeCheckConfig(xi,_,this.constructor.DefaultType),_.sanitize&&(_.template=ei(_.template,_.whiteList,_.sanitizeFn)),_},re._getDelegateConfig=function(){var _={};if(this.config)for(var O in this.config)this.constructor.Default[O]!==this.config[O]&&(_[O]=this.config[O]);return _},re._cleanTipClass=function(){var _=w.default(this.getTipElement()),O=_.attr("class").match(Vi);null!==O&&O.length&&_.removeClass(O.join(""))},re._handlePopperPlacementChange=function(_){this.tip=_.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(_.placement))},re._fixTransition=function(){var _=this.getTipElement(),O=this.config.animation;null===_.getAttribute("x-placement")&&(w.default(_).removeClass(zr),this.config.animation=!1,this.hide(),this.show(),this.config.animation=O)},pe._jQueryInterface=function(_){return this.each(function(){var O=w.default(this),q=O.data(Er),J="object"==typeof _&&_;if((q||!/dispose|hide/.test(_))&&(q||(q=new pe(this,J),O.data(Er,q)),"string"==typeof _)){if(void 0===q[_])throw new TypeError('No method named "'+_+'"');q[_]()}})},ee(pe,null,[{key:"VERSION",get:function(){return"4.6.2"}},{key:"Default",get:function(){return an}},{key:"NAME",get:function(){return xi}},{key:"DATA_KEY",get:function(){return Er}},{key:"Event",get:function(){return Ai}},{key:"EVENT_KEY",get:function(){return".bs.tooltip"}},{key:"DefaultType",get:function(){return Sn}}]),pe}();w.default.fn.tooltip=Ir._jQueryInterface,w.default.fn.tooltip.Constructor=Ir,w.default.fn.tooltip.noConflict=function(){return w.default.fn.tooltip=Zr,Ir._jQueryInterface};var Lr="bs.popover",fs=w.default.fn.popover,ps=new RegExp("(^|\\s)bs-popover\\S+","g"),nr=te({},Ir.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),ti=te({},Ir.DefaultType,{content:"(string|element|function)"}),Ni={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"},Oo=function(pe){var re,_;function O(){return pe.apply(this,arguments)||this}_=pe,(re=O).prototype=Object.create(_.prototype),re.prototype.constructor=re,ce(re,_);var q=O.prototype;return q.isWithContent=function(){return this.getTitle()||this._getContent()},q.addAttachmentClass=function(J){w.default(this.getTipElement()).addClass("bs-popover-"+J)},q.getTipElement=function(){return this.tip=this.tip||w.default(this.config.template)[0],this.tip},q.setContent=function(){var J=w.default(this.getTipElement());this.setElementContent(J.find(".popover-header"),this.getTitle());var we=this._getContent();"function"==typeof we&&(we=we.call(this.element)),this.setElementContent(J.find(".popover-body"),we),J.removeClass("fade show")},q._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},q._cleanTipClass=function(){var J=w.default(this.getTipElement()),we=J.attr("class").match(ps);null!==we&&we.length>0&&J.removeClass(we.join(""))},O._jQueryInterface=function(J){return this.each(function(){var we=w.default(this).data(Lr),it="object"==typeof J?J:null;if((we||!/dispose|hide/.test(J))&&(we||(we=new O(this,it),w.default(this).data(Lr,we)),"string"==typeof J)){if(void 0===we[J])throw new TypeError('No method named "'+J+'"');we[J]()}})},ee(O,null,[{key:"VERSION",get:function(){return"4.6.2"}},{key:"Default",get:function(){return nr}},{key:"NAME",get:function(){return"popover"}},{key:"DATA_KEY",get:function(){return Lr}},{key:"Event",get:function(){return Ni}},{key:"EVENT_KEY",get:function(){return".bs.popover"}},{key:"DefaultType",get:function(){return ti}}]),O}(Ir);w.default.fn.popover=Oo._jQueryInterface,w.default.fn.popover.Constructor=Oo,w.default.fn.popover.noConflict=function(){return w.default.fn.popover=fs,Oo._jQueryInterface};var Gn="scrollspy",Ri="bs.scrollspy",el=w.default.fn[Gn],yo="active",Gi="position",Ki=".nav, .list-group",Pi={offset:10,method:"auto",target:""},ka={offset:"number",method:"string",target:"(string|element)"},Kn=function(){function pe(_,O){var q=this;this._element=_,this._scrollElement="BODY"===_.tagName?window:_,this._config=this._getConfig(O),this._selector=this._config.target+" .nav-link,"+this._config.target+" .list-group-item,"+this._config.target+" .dropdown-item",this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,w.default(this._scrollElement).on("scroll.bs.scrollspy",function(J){return q._process(J)}),this.refresh(),this._process()}var re=pe.prototype;return re.refresh=function(){var _=this,q="auto"===this._config.method?this._scrollElement===this._scrollElement.window?"offset":Gi:this._config.method,J=q===Gi?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(we){var it,St=Ne.getSelectorFromElement(we);if(St&&(it=document.querySelector(St)),it){var xe=it.getBoundingClientRect();if(xe.width||xe.height)return[w.default(it)[q]().top+J,St]}return null}).filter(Boolean).sort(function(we,it){return we[0]-it[0]}).forEach(function(we){_._offsets.push(we[0]),_._targets.push(we[1])})},re.dispose=function(){w.default.removeData(this._element,Ri),w.default(this._scrollElement).off(".bs.scrollspy"),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},re._getConfig=function(_){if("string"!=typeof(_=te({},Pi,"object"==typeof _&&_?_:{})).target&&Ne.isElement(_.target)){var O=w.default(_.target).attr("id");O||(O=Ne.getUID(Gn),w.default(_.target).attr("id",O)),_.target="#"+O}return Ne.typeCheckConfig(Gn,_,ka),_},re._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},re._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},re._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},re._process=function(){var _=this._getScrollTop()+this._config.offset,O=this._getScrollHeight(),q=this._config.offset+O-this._getOffsetHeight();if(this._scrollHeight!==O&&this.refresh(),_>=q){var J=this._targets[this._targets.length-1];this._activeTarget!==J&&this._activate(J)}else{if(this._activeTarget&&_<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var we=this._offsets.length;we--;)this._activeTarget!==this._targets[we]&&_>=this._offsets[we]&&(void 0===this._offsets[we+1]||_<this._offsets[we+1])&&this._activate(this._targets[we])}},re._activate=function(_){this._activeTarget=_,this._clear();var O=this._selector.split(",").map(function(J){return J+'[data-target="'+_+'"],'+J+'[href="'+_+'"]'}),q=w.default([].slice.call(document.querySelectorAll(O.join(","))));q.hasClass("dropdown-item")?(q.closest(".dropdown").find(".dropdown-toggle").addClass(yo),q.addClass(yo)):(q.addClass(yo),q.parents(Ki).prev(".nav-link, .list-group-item").addClass(yo),q.parents(Ki).prev(".nav-item").children(".nav-link").addClass(yo)),w.default(this._scrollElement).trigger("activate.bs.scrollspy",{relatedTarget:_})},re._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(_){return _.classList.contains(yo)}).forEach(function(_){return _.classList.remove(yo)})},pe._jQueryInterface=function(_){return this.each(function(){var O=w.default(this).data(Ri);if(O||(O=new pe(this,"object"==typeof _&&_),w.default(this).data(Ri,O)),"string"==typeof _){if(void 0===O[_])throw new TypeError('No method named "'+_+'"');O[_]()}})},ee(pe,null,[{key:"VERSION",get:function(){return"4.6.2"}},{key:"Default",get:function(){return Pi}}]),pe}();w.default(window).on("load.bs.scrollspy.data-api",function(){for(var pe=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),re=pe.length;re--;){var _=w.default(pe[re]);Kn._jQueryInterface.call(_,_.data())}}),w.default.fn[Gn]=Kn._jQueryInterface,w.default.fn[Gn].Constructor=Kn,w.default.fn[Gn].noConflict=function(){return w.default.fn[Gn]=el,Kn._jQueryInterface};var eo="bs.tab",$i=w.default.fn.tab,Vr="active",Aa=".active",Oi="> li > .active",Do=function(){function pe(_){this._element=_}var re=pe.prototype;return re.show=function(){var _=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&w.default(this._element).hasClass(Vr)||w.default(this._element).hasClass("disabled")||this._element.hasAttribute("disabled"))){var O,q,J=w.default(this._element).closest(".nav, .list-group")[0],we=Ne.getSelectorFromElement(this._element);if(J){var it="UL"===J.nodeName||"OL"===J.nodeName?Oi:Aa;q=(q=w.default.makeArray(w.default(J).find(it)))[q.length-1]}var St=w.default.Event("hide.bs.tab",{relatedTarget:this._element}),xe=w.default.Event("show.bs.tab",{relatedTarget:q});if(q&&w.default(q).trigger(St),w.default(this._element).trigger(xe),!xe.isDefaultPrevented()&&!St.isDefaultPrevented()){we&&(O=document.querySelector(we)),this._activate(this._element,J);var Ht=function(){var Gt=w.default.Event("hidden.bs.tab",{relatedTarget:_._element}),gr=w.default.Event("shown.bs.tab",{relatedTarget:q});w.default(q).trigger(Gt),w.default(_._element).trigger(gr)};O?this._activate(O,O.parentNode,Ht):Ht()}}},re.dispose=function(){w.default.removeData(this._element,eo),this._element=null},re._activate=function(_,O,q){var J=this,we=(!O||"UL"!==O.nodeName&&"OL"!==O.nodeName?w.default(O).children(Aa):w.default(O).find(Oi))[0],it=q&&we&&w.default(we).hasClass("fade"),St=function(){return J._transitionComplete(_,we,q)};if(we&&it){var xe=Ne.getTransitionDurationFromElement(we);w.default(we).removeClass("show").one(Ne.TRANSITION_END,St).emulateTransitionEnd(xe)}else St()},re._transitionComplete=function(_,O,q){if(O){w.default(O).removeClass(Vr);var J=w.default(O.parentNode).find("> .dropdown-menu .active")[0];J&&w.default(J).removeClass(Vr),"tab"===O.getAttribute("role")&&O.setAttribute("aria-selected",!1)}w.default(_).addClass(Vr),"tab"===_.getAttribute("role")&&_.setAttribute("aria-selected",!0),Ne.reflow(_),_.classList.contains("fade")&&_.classList.add("show");var we=_.parentNode;if(we&&"LI"===we.nodeName&&(we=we.parentNode),we&&w.default(we).hasClass("dropdown-menu")){var it=w.default(_).closest(".dropdown")[0];if(it){var St=[].slice.call(it.querySelectorAll(".dropdown-toggle"));w.default(St).addClass(Vr)}_.setAttribute("aria-expanded",!0)}q&&q()},pe._jQueryInterface=function(_){return this.each(function(){var O=w.default(this),q=O.data(eo);if(q||(q=new pe(this),O.data(eo,q)),"string"==typeof _){if(void 0===q[_])throw new TypeError('No method named "'+_+'"');q[_]()}})},ee(pe,null,[{key:"VERSION",get:function(){return"4.6.2"}}]),pe}();w.default(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',function(pe){pe.preventDefault(),Do._jQueryInterface.call(w.default(this),"show")}),w.default.fn.tab=Do._jQueryInterface,w.default.fn.tab.Constructor=Do,w.default.fn.tab.noConflict=function(){return w.default.fn.tab=$i,Do._jQueryInterface};var Mo="bs.toast",Na=w.default.fn.toast,ni="show",ri="showing",gs="click.dismiss.bs.toast",ms={animation:!0,autohide:!0,delay:500},$n={animation:"boolean",autohide:"boolean",delay:"number"},Gr=function(){function pe(_,O){this._element=_,this._config=this._getConfig(O),this._timeout=null,this._setListeners()}var re=pe.prototype;return re.show=function(){var _=this,O=w.default.Event("show.bs.toast");if(w.default(this._element).trigger(O),!O.isDefaultPrevented()){this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");var q=function(){_._element.classList.remove(ri),_._element.classList.add(ni),w.default(_._element).trigger("shown.bs.toast"),_._config.autohide&&(_._timeout=setTimeout(function(){_.hide()},_._config.delay))};if(this._element.classList.remove("hide"),Ne.reflow(this._element),this._element.classList.add(ri),this._config.animation){var J=Ne.getTransitionDurationFromElement(this._element);w.default(this._element).one(Ne.TRANSITION_END,q).emulateTransitionEnd(J)}else q()}},re.hide=function(){if(this._element.classList.contains(ni)){var _=w.default.Event("hide.bs.toast");w.default(this._element).trigger(_),_.isDefaultPrevented()||this._close()}},re.dispose=function(){this._clearTimeout(),this._element.classList.contains(ni)&&this._element.classList.remove(ni),w.default(this._element).off(gs),w.default.removeData(this._element,Mo),this._element=null,this._config=null},re._getConfig=function(_){return _=te({},ms,w.default(this._element).data(),"object"==typeof _&&_?_:{}),Ne.typeCheckConfig("toast",_,this.constructor.DefaultType),_},re._setListeners=function(){var _=this;w.default(this._element).on(gs,'[data-dismiss="toast"]',function(){return _.hide()})},re._close=function(){var _=this,O=function(){_._element.classList.add("hide"),w.default(_._element).trigger("hidden.bs.toast")};if(this._element.classList.remove(ni),this._config.animation){var q=Ne.getTransitionDurationFromElement(this._element);w.default(this._element).one(Ne.TRANSITION_END,O).emulateTransitionEnd(q)}else O()},re._clearTimeout=function(){clearTimeout(this._timeout),this._timeout=null},pe._jQueryInterface=function(_){return this.each(function(){var O=w.default(this),q=O.data(Mo);if(q||(q=new pe(this,"object"==typeof _&&_),O.data(Mo,q)),"string"==typeof _){if(void 0===q[_])throw new TypeError('No method named "'+_+'"');q[_](this)}})},ee(pe,null,[{key:"VERSION",get:function(){return"4.6.2"}},{key:"DefaultType",get:function(){return $n}},{key:"Default",get:function(){return ms}}]),pe}();w.default.fn.toast=Gr._jQueryInterface,w.default.fn.toast.Constructor=Gr,w.default.fn.toast.noConflict=function(){return w.default.fn.toast=Na,Gr._jQueryInterface},B.Alert=Y,B.Button=me,B.Carousel=ln,B.Collapse=Ae,B.Dropdown=Mr,B.Modal=mn,B.Popover=Oo,B.Scrollspy=Kn,B.Tab=Do,B.Toast=Gr,B.Tooltip=Ir,B.Util=Ne,Object.defineProperty(B,"__esModule",{value:!0})}),window.configsettings={},window.CognoWise={},window.enterpriseResources={};var log={},s_gi=function(){},oldmodule=!1;function getQueryStringValue(B,Ee){return decodeURIComponent(B.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent(Ee).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}function init(){arguments.callee.done||(arguments.callee.done=!0,CognoWise.GlobalConfigSetting.apendPreLoadingIndicator())}"function"!=typeof Object.assign&&(Object.assign=function(B){"use strict";if(null==B)throw new TypeError("Cannot convert undefined or null to object");B=Object(B);for(var Ee=1;Ee<arguments.length;Ee++){var ct=arguments[Ee];if(null!=ct)for(var Pe in ct)Object.prototype.hasOwnProperty.call(ct,Pe)&&(B[Pe]=ct[Pe])}return B}),window.EPS=window.EPS||{},window.EPS.AcademicSuccess={},window.EPS.Integration={},window.EPS.Analytics={None:"None",ModuleName:"ModuleName",PersonId:"PersonId",UserName:"UserName",Gender:"Gender",Major:"Major",AgeGroup:"AgeGroup",OnOffTrack:"OnOffTrack",ClassStanding:"ClassStanding",AcademicStanding:"AcademicStanding",RegisteredCourse:"RegisteredCourse",StudentType:"StudentType",StudentCatalog:"StudentCatalog",StudentSchool:"StudentSchool",UserRoles:"UserRoles"},window.EPS.Module={None:"None",AcademicSuccess:"AcademicSuccess",AdvisingSoftware:"AdvisingSoftware",GradPlanner:"GraduationPlanner",GradPlannerOld:"GraduationPlannerOld",GraduationRules:"GraduationRules",StudentPerformance:"StudentPerformance",ExperientialLearning:"ExperientialLearning",EducationalStrategy:"EducationalStrategy",Homepage:"HomePage",Enterprise:"Enterprise",PredictiveAnalytics:"PredictiveAnalytics",CareerInternships:"CareerInternships",CollegePreparation:"CollegePreparation",Survey:"Survey",StudentPerformanceReports:"StudentPerformanceReports",MasterAgreement:"MasterAgreement",EmploymentPortal:"EmploymentPortal",RetentionDashBoard:"RetentionDashBoard",MarkAttendance:"MarkAttendance",SystemConfiguration:"SystemConfiguration",Dashboard:"Dashboard",IPLAN:"IPLAN",ParentalAccess:"ParentalAccess",CurriculumCreator:"CurriculumCreator",Profiling:"Profiling",AboutMe:"AboutMe",Membership:"Membership",SurveyBuilder:"SurveyBuilder",FIN:"FIN",Audit:"Audit",Workflow:"Workflow",Badge:"Badge",SectionPlanner:"SectionPlanner",EarlyAlert:"EarlyAlert"},window.CognoWise.GlobalConfigSetting=function(){function w(oe,j,ee){var te=window.location.href,ce=te.substring(0,te.indexOf("/",14));$.when(CognoWise.GlobalConfigSetting.setConfigSettings(oe,j,ee)).then(function(Xe,Ne,D){CognoWise.GlobalConfigSetting.SessionId=function Pe(oe){for(var j=document.cookie.split(";"),ee=0;ee<j.length;ee++){var te=j[ee].split("=");if(oe==te[0].trim())return decodeURIComponent(te[1])}return null}("SessionId");var ne=Xe.commonWebSettings;$.extend(ne,Xe.moduleSettings),ne.ModuleConfig=Xe.ModuleConfig,window.configsettings=ne,window.location.href=ne.ServerHostName+"/"+ne.EnterpriseVD+"/#/userDashboard",oldmodule=!0,oldgpvd=ne.OldGpVd,isoldvdrequired=ne.IsOldVdRequired,oldmodule&&isoldvdrequired&&(ne.ModuleConfig.ResourceServers.GraduationPlanner=oldgpvd),CognoWise.GlobalConfigSetting.SetModulesSettings(ne.ModuleConfig,ee),CognoWise.ModuleConfig.EnableBundlingAndMinification=ne.EnableBundlingAndMinification,D.getResponseHeader("RequestVerificationToken")&&(CognoWise.RequestVerificationToken=D.getResponseHeader("RequestVerificationToken")),CognoWise.GlobalConfigSetting.getPersonSpecificConfigSetting(oe,j,ee).then(function(Y,fe){try{$.ajax({url:CognoWise.ModuleConfig.CDNHostName+"/enterprise/ClientApp/app/css/preloading.css?v="+ee,type:"GET",crossDomain:!0,async:!1,success:function(){CognoWise.GlobalConfigSetting.bootStrapApplication(oe),ne.BaseUrl=ce+"/",CognoWise.GlobalConfigSetting.CreateGlobalConfigSettings(oe,ne),CognoWise.GlobalConfigSetting.LoadModuleResources(oe,function(){CognoWise.GlobalConfigSetting.SetInitAppSettingAfterConfigSettings(oe,j)}),CognoWise.GlobalConfigSetting.setPersonSpecificConfigSetting(Y,ee),CognoWise.GlobalConfigSetting.getPersonSpecificOtherConfigSetting(oe,j,ee).then(function(le,Le){CognoWise.GlobalConfigSetting.logModuleUsage(oe),CognoWise.GlobalConfigSetting.setPersonSpecificOtherConfigSetting(le,ee)})},error:function(){ne.BaseUrl=ce+"/",CognoWise.ModuleConfig.CDNHostName=ne.BaseUrl,CognoWise.GlobalConfigSetting.bootStrapApplication(oe),window.configsettings=ne,CognoWise.GlobalConfigSetting.CreateGlobalConfigSettings(oe,ne),CognoWise.GlobalConfigSetting.LoadModuleResources(oe,function(){CognoWise.GlobalConfigSetting.SetInitAppSettingAfterConfigSettings(oe,j)}),CognoWise.GlobalConfigSetting.setPersonSpecificConfigSetting(Y[0],ee),CognoWise.GlobalConfigSetting.getPersonSpecificOtherConfigSetting(oe,j,ee).then(function(le,Le){CognoWise.GlobalConfigSetting.setPersonSpecificOtherConfigSetting(le,ee)})},complete:function(){$("head").append('<link rel="stylesheet" href="'+CognoWise.ModuleConfig.CDNHostName+"/enterprise/ClientApp/app/css/preloading.css?v="+ee+'"/>')}})}catch(le){console.log(le),window.location.assign(ce)}})},function(Xe,Ne,D){if(401===Xe.status){var ne=Xe.getResponseHeader("Location");window.location.href=null!=ne?ne:Xe.LoginUrl}else 500==Xe.status?CognoWise.GlobalConfigSetting.RedirectToCustomError(xmlhttp):503==Xe.status?window.location.href="/apihost/offline/App_Offline.htm":477==errorResponse.status&&(window.location.href="/enterprise/clientapp/app/partials/ExpiredImpersonationSession.html")})}return EPS,{setConfigSettings:function(oe,j,ee){var te=window.location.href,ce=te.substring(0,te.indexOf("/",14));if(window.location.origin){for(var Ne=window.location.search.substring(1).split("&"),D=window.location.hostname,ne=0;ne<Ne.length;ne++){var Y=Ne[ne].split("=");if("domain"==decodeURIComponent(Y[0])){D=Y[1];break}}ce=window.location.protocol+"//"+D+(window.location.port?":"+window.location.port:"")}else ce=(te=window.location.href).substring(0,te.indexOf("/",14));var fe=ce+"/apihost/enterprise/api/SystemConfiguration/GetConfigSettings?moduleName="+oe+"&version="+ee,le=CognoWise.GlobalConfigSetting.getPersonationID();null!=le&&""!=le&&(fe+="&"+CognoWise.GlobalConfigSetting.getImpersontionOrParentalAccess()+"="+le);try{return $.ajax({url:fe,type:"POST",dataType:"json",async:!1,cache:!0,xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"Content-type":"application/json; charset=UTF-8"},data:{redirectUrl:encodeURIComponent(te)},beforeSend:function(Le){Le.setRequestHeader("Content-Type","application/json; charset=UTF-8")}})}catch(Le){console.log(Le),window.location.assign(ce)}},getConfigVersion:function(oe,j){var ee=window.location.href,te=ee.substring(0,ee.indexOf("/",14));if(window.location.origin){for(var Xe=window.location.search.substring(1).split("&"),Ne=window.location.hostname,D=0;D<Xe.length;D++){var ne=Xe[D].split("=");if("domain"==decodeURIComponent(ne[0])){Ne=ne[1];break}}te=window.location.protocol+"//"+Ne+(window.location.port?":"+window.location.port:"")}else te=(ee=window.location.href).substring(0,ee.indexOf("/",14));var Y=te+"/apihost/enterprise/api/SystemConfiguration/GetVersionAsync?v="+(new Date).getTime().toString();try{$.ajax({url:Y,type:"GET",dataType:"json",async:!1,xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"Content-type":"application/json; charset=UTF-8",RequestVerificationToken:CognoWise.RequestVerificationToken},success:function(fe,le,Le){w(oe,j,fe.Version)},error:function(fe,le,Le){if(401===fe.status){var Je=fe.getResponseHeader("Location");null!=Je&&(window.location.href=Je)}else w(oe,j,(new Date).getTime().toString())}})}catch(fe){console.log(fe),window.location.assign(te)}},getPersonSpecificConfigSetting:function(oe,j,ee){var te=window.location.href,ce=te.substring(0,te.indexOf("/",14));if(window.location.origin){for(var Ne=window.location.search.substring(1).split("&"),D=window.location.hostname,ne=0;ne<Ne.length;ne++){var Y=Ne[ne].split("=");if("domain"==decodeURIComponent(Y[0])){D=Y[1];break}}ce=window.location.protocol+"//"+D+(window.location.port?":"+window.location.port:"")}else ce=(te=window.location.href).substring(0,te.indexOf("/",14));var fe=ce+"/apihost/enterprise/api/SystemConfiguration/GetPersonSpecificSettings?moduleName="+oe+"&version="+ee,le=CognoWise.GlobalConfigSetting.getPersonationID();null!=le&&""!=le&&(fe+="&"+CognoWise.GlobalConfigSetting.getImpersontionOrParentalAccess()+"="+le);try{return $.ajax({url:fe,type:"POST",dataType:"json",async:!1,cache:!0,xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"Content-type":"application/json; charset=UTF-8",RequestVerificationToken:CognoWise.RequestVerificationToken},data:{redirectUrl:encodeURIComponent(te)},beforeSend:function(Le){Le.setRequestHeader("Content-Type","application/json; charset=UTF-8")},success:function(Le){}})}catch(Le){console.log(Le),window.location.assign(ce)}},getPersonSpecificOtherConfigSetting:function(oe,j,ee){var te=window.location.href,ce=te.substring(0,te.indexOf("/",14));if(window.location.origin){for(var Ne=window.location.search.substring(1).split("&"),D=window.location.hostname,ne=0;ne<Ne.length;ne++){var Y=Ne[ne].split("=");if("domain"==decodeURIComponent(Y[0])){D=Y[1];break}}ce=window.location.protocol+"//"+D+(window.location.port?":"+window.location.port:"")}else ce=(te=window.location.href).substring(0,te.indexOf("/",14));var fe=ce+"/apihost/enterprise/api/SystemConfiguration/GetPersonSpecificOtherSettings?moduleName="+oe+"&version="+ee+"&personId="+CognoWise.Enterprise.ConfigSections.PersonId.toString()+"&navigationVersion="+CognoWise.ModuleConfig.NavigationVersion,le=CognoWise.GlobalConfigSetting.getPersonationID();null!=le&&""!=le&&(fe+="&"+CognoWise.GlobalConfigSetting.getImpersontionOrParentalAccess()+"="+le);try{return $.ajax({url:fe,type:"POST",dataType:"json",async:!1,cache:!0,xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"Content-type":"application/json; charset=UTF-8",RequestVerificationToken:CognoWise.RequestVerificationToken},data:{redirectUrl:encodeURIComponent(te)},beforeSend:function(Le){Le.setRequestHeader("Content-Type","application/json; charset=UTF-8")},success:function(Le){}})}catch(Le){console.log(Le),window.location.assign(ce)}},isMobileView:function(){return window.matchMedia("(max-width: 1024px)").matches},setPersonSpecificConfigSetting:function(oe,j){for(var ee in oe)CognoWise.Enterprise.ConfigSections[ee]=oe[ee],window.configsettings[ee]=oe[ee],CognoWise.Enterprise.User.hasOwnProperty(ee)&&(CognoWise.Enterprise.User[ee]=oe[ee]);CognoWise.Enterprise.ConfigSections.iNumber=CognoWise.Enterprise.ConfigSections.INumber,CognoWise.Enterprise.ConfigSections.BuildNumber=CognoWise.ModuleConfig.Version,CognoWise.Enterprise.ConfigSections.ConfigVersion=j,CognoWise.Enterprise.ConfigSections.AppVersion=CognoWise.ModuleConfig.AppVersion,CognoWise.Enterprise.ConfigSections.PAHostName=CognoWise.Enterprise.ConfigSections.ServerHostName},setPersonSpecificOtherConfigSetting:function(oe,j){for(var ee in oe)null!=oe[ee]&&(CognoWise.Enterprise.ConfigSections[ee]=oe[ee],window.configsettings[ee]=oe[ee],CognoWise.Enterprise.User.hasOwnProperty(ee)&&(CognoWise.Enterprise.User[ee]=oe[ee]))},SetModulesSettings:function(oe,j){var ee=window.CognoWise||{};oe.APIHosts&&oe.APIHosts[window.location.hostname]&&(oe.APIHost=oe.APIHosts[window.location.hostname]),(ee=window.CognoWise||{}).ModuleConfig=oe,ee.ModuleConfig.ConfigVersion=j},LoadModuleResources:function(oe,j){switch(CognoWise.GlobalConfigSetting.GetModuleResource(oe,j),oe){case EPS.Module.EducationalStrategy:CognoWise.GlobalConfigSetting.GetModuleResource(EPS.Module.GradPlanner);break;case EPS.Module.GradPlanner:case EPS.Module.GradPlannerOld:CognoWise.GlobalConfigSetting.GetModuleResource(EPS.Module.EducationalStrategy)}},GetModuleResource:function(oe,j){var ee=oe;if(oe!=EPS.Module.RetentionDashBoard&&oe!=EPS.Module.PredictiveAnalytics&&oe!=EPS.Module.StudentPerformance&&oe!=EPS.Module.StudentPerformanceReports){oe==EPS.Module.GradPlannerOld&&(oe=EPS.Module.GradPlanner);var te=CognoWise.Url.resolveModuleServiceAPI(EPS.Module.Enterprise)+"/GlobalResource/GetModuleResourceFile?module="+oe+"&version="+(CognoWise.ModuleConfig.AppVersion||CognoWise.Enterprise.ConfigSections.BuildNumber),ce=CognoWise.GlobalConfigSetting.getXmlHttpRequestObject();ce.open("GET",te,!1),ce.setRequestHeader("RequestVerificationToken",CognoWise.RequestVerificationToken),ce.onreadystatechange=function(){4==ce.readyState&&200==ce.status&&(CognoWise.Resources=CognoWise.Resources||{},CognoWise.Resources[ee]=JSON.parse(ce.responseText).result,CognoWise.Resources[EPS.Module.Enterprise]=JSON.parse(ce.responseText).result,j&&"[object Function]"==={}.toString.call(j)&&j())},ce.send()}else j&&"[object Function]"==={}.toString.call(j)&&j()},RedirectToCustomError:function(oe){var j="/Enterprise/CustomError/DefaultErrorPage.html?",ee=void 0!==oe.getResponseHeader?oe.getResponseHeader("CustomErrorStatus"):"Off";if(void 0!==ee&&"On"===ee){var te=oe.getResponseHeader("CustomErrorUrl");void 0!==te&&(j=te+"?returnUrl="+encodeURIComponent(window.location.href)+"&");var ce=oe.getResponseHeader("CustomErrorData");void 0!==ce&&(j=j+"customErrorData="+encodeURIComponent(ce)+"&");var Xe=oe.getResponseHeader("IsTenantIncidentEmailEnabled");void 0!==Xe&&(j=j+"isTenantIncidentEmailEnabled="+Xe+"&");var Ne=oe.getResponseHeader("RequestId").split(",")[0];void 0!==Ne&&(j=j+"&requestId="+Ne+"&"),console.log("redirect to custom error"),window.location.href=j}},RedirectToCustomErrorHttpService:function(oe){var j="/Enterprise/CustomError/DefaultErrorPage.html?",ee=void 0!==oe?oe("CustomErrorStatus"):"Off";if(void 0!==ee&&"On"===ee){var te=oe("CustomErrorUrl");void 0!==te&&(j=te+"?returnUrl="+encodeURIComponent(window.location.href)+"&");var ce=oe("CustomErrorData");void 0!==ce&&(j=j+"customErrorData="+encodeURIComponent(ce)+"&");var Xe=oe("IsTenantIncidentEmailEnabled");void 0!==Xe&&(j=j+"isTenantIncidentEmailEnabled="+Xe+"&");var Ne=oe("RequestId").split(",")[0];void 0!==Ne&&(j=j+"requestId="+Ne+"&"),console.log("redirect to custom error http service"),window.location.href=j}},RedirectToReturnURL:function(oe){try{var j=CognoWise.GlobalConfigSetting.getXmlHttpRequestObject();j.open("GET",decodeURIComponent(oe),!1),j.onreadystatechange=function(){4==j.readyState&&(200==j.status?window.location.href=decodeURIComponent(oe):CognoWise.GlobalConfigSetting.RedirectToLogin())},j.send()}catch(ee){window.location.assign(baseURL)}},RedirectToIPlan:function(){window.location.href="/"},setTimeZoneSettings:function(){var j;(window.CognoWise.Enterprise||{}).TimeZone=(j=jstz.determine(),{TimeZoneName:OlsonWindowsTimeZoneMapping[j.name()],TimeZoneOffset:(new Date).getTimezoneOffset()})},setGoogleAnalyticsSettings:function(){if(configsettings.IsGoogleAnalyticsEnabled){var j,oe=document.createElement("script");oe.textContent="window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}",document.head.appendChild(oe),(j=document.createElement("script")).src="https://www.googletagmanager.com/gtag/js?id="+CognoWise.Enterprise.ConfigSections.GATrackingID,document.head.appendChild(j),(j=document.createElement("script")).src="/Enterprise/ClientApp/app/js/AngularGoogleAnalytics.js",document.head.appendChild(j)}},getPersonationID:function(){var oe=window.location.href,j="",ee=0,te=0;if(oe.indexOf("?")>-1&&(ee=oe.indexOf("?")+1)<(te=oe.indexOf("#"))){var ce=oe.substring(ee,te);if(ce.length>0)if(null!=(ce=ce.split("&"))&&ce.length>0)for(var Xe=0;Xe<ce.length;Xe++)(ce[Xe].toLowerCase().indexOf("personationid")>-1||ce[Xe].toLowerCase().indexOf("impersonationid")>-1||ce[Xe].toLowerCase().indexOf("parentalaccessid")>-1)&&(j=ce[Xe].toLowerCase().replace("personationid=","").replace("impersonationid=","").replace("parentalaccessid=",""));else j=ce}return j},getXmlHttpRequestObject:function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},getStaticResourcePath:function(oe){return null!=CognoWise.ModuleConfig.CDNHostName&&""!=CognoWise.ModuleConfig.CDNHostName?CognoWise.ModuleConfig.CDNHostName+"/"+CognoWise.ModuleConfig.ResourceServers[oe]:CognoWise.ModuleConfig.ServerHostName+"/"+CognoWise.ModuleConfig.ResourceServers[oe]},getStaticResourceServer:function(){return null!=CognoWise.ModuleConfig.CDNHostName&&""!=CognoWise.ModuleConfig.CDNHostName?CognoWise.ModuleConfig.CDNHostName:CognoWise.ModuleConfig.ServerHostName},setExternalDependencyApplicationLevelSettings:function(){CognoWise.GlobalConfigSetting.setGoogleAnalyticsSettings()},apendPreLoadingIndicator:function(oe){var j='<div class="WaitingIndicator"><div class="overlayfull"><span class="loading-big"><svg class="spinner" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" x="0px" y="0px" width="25px" height="25px" viewBox="-3 -0.601 25 25" enable-background="new -3 -0.601 25 25" xml:space="preserve"> <polyline fill="none"stroke-linecap="round" stroke-miterlimit="10" points="5.935,0.5 9.738,2.706 7.536,6.508"/> <path fill="none" stroke-linecap="round" stroke-miterlimit="10" d="M13.938,4.065 c2.724,1.547,4.562,4.475,4.562,7.832c0,4.97-4.03,9-9,9c-4.971,0-9-4.029-9-9c0-4.857,3.849-8.817,8.663-8.995"/></svg><em class="ShowWaitMessage"></em></span></div></div>';this.moduleName===EPS.Module.PredictiveAnalytics&&$("#eps_pa_app").append(j),void 0!==this.moduleName&&this.moduleName!=EPS.Module.EducationalStrategy&&this.moduleName!=EPS.Module.AdvisingSoftware&&this.moduleName!=EPS.Module.StudentPerformance&&this.moduleName!=EPS.Module.CollegePreparation&&this.moduleName!=EPS.Module.PredictiveAnalytics&&this.moduleName!=EPS.Module.SystemConfiguration&&this.moduleName!=EPS.Module.EmploymentPortal&&this.moduleName!=EPS.Module.SurveyBuilder&&(document.body.innerHTML+=j)},detachPreLoadingIndicator:function(){document.querySelectorAll(".WaitingIndicator").forEach(function(j){j.parentNode.removeChild(j)})},initApp:function(oe,j){var ee=oe;oe==EPS.Module.MarkAttendance&&(ee=EPS.Module.AcademicSuccess),CognoWise.GlobalConfigSetting.getConfigVersion(ee,oe)},bootStrapApplication:function(oe){var j=oe;this.moduleName=oe,CognoWise.GlobalConfigSetting.loadJsFilesAsPerDomainExisting(j,oe)},loadJsFilesAsPerDomainExisting:function(oe,j){oe==EPS.Module.MasterAgreement&&(j=EPS.Module.ExperientialLearning),j==EPS.Module.None&&(j=EPS.Module.Enterprise),j==EPS.Module.MarkAttendance&&(j=EPS.Module.AcademicSuccess),(oe===EPS.Module.GradPlanner||oe===EPS.Module.GradPlannerOld)&&$("head").append('<link rel="stylesheet" href="'+CognoWise.GlobalConfigSetting.getStaticResourcePath(EPS.Module.Enterprise)+"/ClientApp/app/css/font-awesome.css?v="+CognoWise.ModuleConfig.Version+'"/>'),CognoWise.ModuleConfig.EnableBundlingAndMinification&&(oe!=EPS.Module.PredictiveAnalytics&&oe!=EPS.Module.StudentPerformanceReports&&oe!=EPS.Module.StudentPerformance&&$("head").append('<link rel="stylesheet" href="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/dist/min.css?v="+CognoWise.ModuleConfig.Version+'"/>'),oe==EPS.Module.ExperientialLearning?$("head").append('<link rel="stylesheet" href="'+CognoWise.Url.resolveModulePartial(j)+"/dist/min_EP1.css?v="+CognoWise.ModuleConfig.Version+'"/>'):oe==EPS.Module.CareerInternships?(j=EPS.Module.ExperientialLearning,$("head").append('<link rel="stylesheet" href="'+CognoWise.Url.resolveModulePartial(j)+"/dist/min.css?v="+CognoWise.ModuleConfig.Version+'"/>')):oe==EPS.Module.GradPlannerOld?$("head").append('<link rel="stylesheet" href="'+CognoWise.Url.resolveModulePartial(j)+"/dist/minOld.css?v="+CognoWise.ModuleConfig.Version+'"/>'):oe==EPS.Module.GradPlanner?window.CognoWise.GlobalConfigSetting.isMobileView()?$("head").append('<link rel="stylesheet" href="'+CognoWise.Url.resolveModulePartial(j)+"/dist/minMobile.css?v="+CognoWise.ModuleConfig.Version+'"/>'):$("head").append('<link rel="stylesheet" href="'+CognoWise.Url.resolveModulePartial(j)+"/dist/min.css?v="+CognoWise.ModuleConfig.Version+'"/>'):oe!=EPS.Module.PredictiveAnalytics&&oe!=EPS.Module.StudentPerformanceReports&&oe!=EPS.Module.StudentPerformance&&$("head").append('<link rel="stylesheet" href="'+CognoWise.Url.resolveModulePartial(j)+"/dist/min.css?v="+CognoWise.ModuleConfig.Version+'"/>'))},setModuleName:function(oe){this.moduleName=oe},SetInitAppSettingAfterConfigSettings:function(oe,j,ee=!0){CognoWise.GlobalConfigSetting.SetModuleSpecificSettings(oe);var te=jQuery.ajaxSettings.cache;if(jQuery.ajaxSettings.cache=!0,CognoWise.Enterprise.ConfigSections.FaviconImagesExists){var ce=document.createElement("link");ce.type="image/x-icon",ce.rel="shortcut icon",ce.href=CognoWise.Url.resolveModuleServiceAPI(EPS.Module.Enterprise)+"/ConfigSettings/UniversityFaviconIcon?_="+CognoWise.ModuleConfig.Version,document.getElementsByTagName("head")[0].appendChild(ce)}else $("head").append('<link rel="icon" type="image/x-icon" href="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/img/favico.ico?_="+CognoWise.ModuleConfig.Version+'"></link>');if(j==EPS.Module.None||!ee||[EPS.Module.SystemConfiguration,EPS.Module.Profiling,EPS.Module.AnalyticalDashboard,EPS.Module.AboutMe,EPS.Module.Membership,EPS.Module.Workflow,EPS.Module.Badge,EPS.Module.SurveyBuilder,EPS.Module.Dashboard,EPS.Module.None].includes(j))return!0;configsettings.EnableBundlingAndMinification?j==EPS.Module.ExperientialLearning?$("head").append('<script async="async" data-main="'+CognoWise.Url.resolveModulePartial(oe)+"/dist/js/main_EP1.js?v="+CognoWise.ModuleConfig.Version+'" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/require.js?v="+CognoWise.ModuleConfig.Version+'"><\/script>'):j==EPS.Module.CareerInternships?(oe=EPS.Module.ExperientialLearning,$("head").append('<script async="async" data-main="'+CognoWise.Url.resolveModulePartial(oe)+"/dist/js/main.js?v="+CognoWise.ModuleConfig.Version+'" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/require.js?v="+CognoWise.ModuleConfig.Version+'"><\/script>')):j==EPS.Module.MarkAttendance?$("head").append('<script data-main="ClientApp/app/js/main_Attendance.js" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+'/js/require.js"><\/script>'):j==EPS.Module.StudentPerformanceReports?$("head").append('<script async="async" data-main="resources/scripts/dist/main.js?v='+CognoWise.ModuleConfig.Version+'" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/require.js?v="+CognoWise.ModuleConfig.Version+'"><\/script>'):j==EPS.Module.GradPlanner&&!configsettings.isGPFullVersion||[EPS.Module.SystemConfiguration,EPS.Module.CurriculumCreator,EPS.Module.Membership,EPS.Module.GradPlanner,EPS.Module.Workflow,EPS.Module.Badge].includes(j)||(j==EPS.Module.EmploymentPortal?configsettings.EnableBundlingAndMinification?(oe=EPS.Module.EmploymentPortal,$("head").append('<script data-main="'+CognoWise.GlobalConfigSetting.getStaticResourcePath(oe)+"/app/dist/js/main.js?v="+CognoWise.ModuleConfig.Version+'" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/require.js?v="+CognoWise.ModuleConfig.Version+'"><\/script>'),$("head").append('<link rel="stylesheet" href="'+CognoWise.GlobalConfigSetting.getStaticResourcePath(EPS.Module.Enterprise)+"/ClientApp/app/dist/min.css?v="+CognoWise.ModuleConfig.Version+'"/>'),$("head").append('<link rel="stylesheet" href="'+CognoWise.GlobalConfigSetting.getStaticResourcePath(oe)+"/css/min.css?v="+CognoWise.ModuleConfig.Version+'"/>')):(oe=EPS.Module.EmploymentPortal,$("head").append('<script data-main="'+CognoWise.GlobalConfigSetting.getStaticResourcePath(oe)+"/app/main.js?v="+CognoWise.ModuleConfig.Version+'" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/require.js?v="+CognoWise.ModuleConfig.Version+'"><\/script>')):$("head").append('<script async="async" data-main="'+CognoWise.Url.resolveModulePartial(oe)+"/dist/js/main.js?v="+CognoWise.ModuleConfig.Version+'" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/require.js?v="+CognoWise.ModuleConfig.Version+'"><\/script>')):j==EPS.Module.ExperientialLearning?$("head").append('<script async="async" data-main="'+CognoWise.Url.resolveModulePartial(oe)+"/js/main_EP1.js?v="+CognoWise.ModuleConfig.Version+'" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/require.js?v="+CognoWise.ModuleConfig.Version+'"><\/script>'):j==EPS.Module.CareerInternships?(oe=EPS.Module.ExperientialLearning,$("head").append('<script async="async" data-main="'+CognoWise.Url.resolveModulePartial(oe)+"/js/main.js?v="+CognoWise.ModuleConfig.Version+'" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/require.js?v="+CognoWise.ModuleConfig.Version+'"><\/script>')):j==EPS.Module.MasterAgreement?$("head").append('<script async="async" data-main="'+CognoWise.Url.resolveModulePartial(oe)+"/js/main_MA.js?v="+CognoWise.ModuleConfig.Version+'" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/require.js?v="+CognoWise.ModuleConfig.Version+'"><\/script>'):j==EPS.Module.StudentPerformanceReports?$("head").append('<script async="async" data-main="resources/scripts/main.js?v='+CognoWise.ModuleConfig.Version+'" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/require.js?v="+CognoWise.ModuleConfig.Version+'"><\/script>'):j==EPS.Module.MarkAttendance?$("head").append('<script data-main="ClientApp/app/js/main_Attendance.js" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+'/js/require.js"><\/script>'):j==EPS.Module.Audit?$("head").append('<script async="async" data-main="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/main.js?v="+CognoWise.ModuleConfig.Version+'" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/require.js?v="+CognoWise.ModuleConfig.Version+'"><\/script>'):j==EPS.Module.GradPlanner&&!configsettings.isGPFullVersion||[EPS.Module.SystemConfiguration,EPS.Module.CurriculumCreator,EPS.Module.GradPlanner,EPS.Module.Membership,EPS.Module.FIN,EPS.Module.Workflow,EPS.Module.Badge].includes(j)||(j==EPS.Module.EmploymentPortal?configsettings.EnableBundlingAndMinification?(oe=EPS.Module.EmploymentPortal,$("head").append('<script data-main="'+CognoWise.GlobalConfigSetting.getStaticResourcePath(oe)+"/app/dist/js/main.js?v="+CognoWise.ModuleConfig.Version+'" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/require.js?v="+CognoWise.ModuleConfig.Version+'"><\/script>'),$("head").append('<link rel="stylesheet" href="'+CognoWise.GlobalConfigSetting.getStaticResourcePath(EPS.Module.Enterprise)+"/ClientApp/app/dist/min.css?v="+CognoWise.ModuleConfig.Version+'"/>'),$("head").append('<link rel="stylesheet" href="'+CognoWise.GlobalConfigSetting.getStaticResourcePath(oe)+"/css/min.css?v="+CognoWise.ModuleConfig.Version+'"/>')):(oe=EPS.Module.EmploymentPortal,$("head").append('<script data-main="'+CognoWise.GlobalConfigSetting.getStaticResourcePath(oe)+"/app/main.js?v="+CognoWise.ModuleConfig.Version+'" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/require.js?v="+CognoWise.ModuleConfig.Version+'"><\/script>')):$("head").append('<script async="async" data-main="'+CognoWise.Url.resolveModulePartial(oe)+"/js/main.js?v="+CognoWise.ModuleConfig.Version+'" src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+"/js/require.js?v="+CognoWise.ModuleConfig.Version+'"><\/script>')),jQuery.ajaxSettings.cache=te,CognoWise.GlobalConfigSetting.setExternalDependencyApplicationLevelSettings(),configsettings.IsAdobeAnalyticsEnabled&&$.getScript(configsettings.AdobeAnalyticsHeaderScriptSource,function(){_satellite.pageBottom()})},SetModuleSpecificSettings:function(oe){switch(oe){case EPS.Module.Homepage:EducationStrategyUrl=configsettings.ESHostName;break;case EPS.Module.GradPlanner:case EPS.Module.GradPlannerOld:EducationStrategyUrl=configsettings.ESHostName,GPUrl=configsettings.GPHostName,appSettings={emsiUrl:location.protocol+"//byui.emsicareercoach.com",token:"x-Password=944c8e5971db726e0a516f3c6fa2eb922c5a79bb732975421b7f2bf52acce51f",geoToken:"x-Password=172650bbca04195b3a54c10fc5d208ebcd59326b554adb35526d9479a0b993b3",umbracoUrl:configsettings.UmbracoHostName,relatedMentors:CognoWise.Url.resolveModulePartial(EPS.Module.EducationalStrategy)+"/js/factories/relatedMentorFactory.js?v="+CognoWise.ModuleConfig.Version,pageSize:10,modules:{EP:"CareerInternships",GP:"GraduationPlanner"}},appName="gpApp";break;case EPS.Module.AcademicSuccess:$("head").append('<script src="/enterprise/ClientApp/app/lib/jquery/jquery-3.6.0.min.js?v='+CognoWise.ModuleConfig.Version+'"><\/script>');break;case EPS.Module.EducationalStrategy:CognoWise.GlobalConfigSetting.RemoveSessionStorage(["CareerDetail","CareerList"]);break;case EPS.Module.AdvisingSoftware:$("head").append('<script src="'+CognoWise.ModuleConfig.APIHost+'/signalr/hubs"><\/script>')}},RemoveSessionStorage:function(oe){"undefined"!=typeof Storage&&oe.forEach(function(j){sessionStorage.removeItem(j)})},CreateGlobalConfigSettings:function(oe,j){for(var ee in CognoWise.Enterprise=function(){try{return{ConfigSections:{IsPayloadCompressionEnabled:j.IsPayloadCompressionEnabled,StudentFinanceAnimationVideoUrl:j.StudentFinanceAnimationVideoUrl,TutoringHostName:j.TutoringHostName,AdminEmail:j.AdminEmail,FileUploadSizeLimit:j.FileUploadSizeLimit,MegaMenuVisibility:j.MegaMenuVisibility,GPHostName:j.GPHostName,GATrackingID:j.GATrackingID,VideoPageSize:j.VideoPageSize,HistoryPageSize:j.HistoryPageSize,EnterpriseHostName:j.EnterpriseHostName,EPHostName:j.EPHostName,OMHostName:j.OMHostName,OMPlatformId:j.OMPlatformId,OMAPIHostName:j.OMAPIHostName,BuildNumber:j.BuildNumber,UserName:j.UserName,DisplayName:j.DisplayName,HPHostName:j.HPHostName,ADVHostName:j.ADVHostName,BaseUrl:j.BaseUrl,iNumber:j.iNumber,PrivacyBlockStatus:j.PrivacyBlockStatus,ESHostName:j.ESHostName,ExposeGP4Options:j.ExposeGP4Options,IsPAAppliction:j.IsPAAppliction,Associations:j.Associations,StartUpPage:j.StartUpPage,ShowLeftNavigation:j.ShowLeftNavigation,PAHostName:j.PAHostName,CollegePreparationHostName:j.CollegePreparationHostName,UmbracoHostName:j.UmbracoHostName,LocalmoduleStaticResourcePath:CognoWise.GlobalConfigSetting.getStaticResourcePath(oe),AllowCrossDomainUrls:["self",j.CDNHostName+"/**"],CurrentModule:oe,ServerHostName:j.ServerHostName,currentUniversity:j.currentUniversity,CurrentUniversity:j.currentUniversity,isMultitenant:j.isMultitenant,FaviconImagesExists:j.FaviconImagesExists,AppLogoImagesExists:j.AppLogoImagesExists,MasterRoleList:j.MasterRoleList,IsPublicUser:j.IsPublicUser,ScrollerOffset:function(){return screen.width<=980?100:0},HideUIiNumber:j.HideUIiNumber,UniversityAssets:j.UniversityAssets,EnterpriseCache:{CacheMaxAge:j.CacheMaxAge,CacheFlushInterval:j.CacheFlushInterval},EnableJSONlogger:j.EnableJSONlogger,EnableUserJsnClientLogging:j.EnableUserJsnClientLogging,MoodlePrivateKey:j.MoodlePrivateKey,GPRolePermission:j.GPRolePermission,FeatureEnum:null!=j.FeatureEnum&&"object"==typeof j.FeatureEnum?Object.freeze(j.FeatureEnum):j.FeatureEnum,MasterRolePermission:j.MasterRolePermission,FeatureRolePermission:j.FeatureRolePermission,PermissionModeEnum:j.PermissionModeEnum,PersonId:j.PersonId,FeedbackLink:j.FeedbackLink,AllowedProviders:j.AllowedProviders,IsWaitingSignalRRefresh:j.IsWaitingSignalRRefresh,EnableBundlingAndMinification:j.EnableBundlingAndMinification,LDSPath:j.LDSPath,CurrentAuthProvider:j.CurrentAuthProvider,PAIntegrationAuthenticationKey:j.PAIntegrationAuthenticationKey,PAIntegrationAuthenticationValue:j.PAIntegrationAuthenticationValue,IsImpersonatedUser:j.IsImpersonatedUser,ActiveCatalogYears:j.ActiveCatalogYears,CurrentCatalogYear:j.CurrentCatalogYear,IsParentalAccess:j.IsParentalAccess,IsGPNewDesign:j.IsGpNewDesign,APITimeOut:j.APITimeOut,RunInvalidateSubAudit:j.RunInvalidateSubAudit,APIHostName:j.ModuleConfig.APIHost,CustomModuleNameGA:j.CustomModuleNameGA},User:{IsImpersonatedUser:j.IsImpersonatedUser,IsOnline:j.IsOnline,CampaignInvite:j.CampaignInvite}}}catch(te){console.log(te)}}(),EPS.Role=Object.freeze(j.RoleList?j.RoleList:j.commonWebSettings.RoleList),EPS.Integration={ConfigSections:{APIHostName:j.RESTHostName}},EPS.AuthorizeUrls={AllowedUrlList:{urls:j.urls}},EPS.keyboard=Object.freeze({BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,KEY_0:48,KEY_1:49,KEY_2:50,KEY_3:51,KEY_4:52,KEY_5:53,KEY_6:54,KEY_7:55,KEY_8:56,KEY_9:57,KEY_A:65,KEY_B:66,KEY_C:67,KEY_D:68,KEY_E:69,KEY_F:70,KEY_G:71,KEY_H:72,KEY_I:73,KEY_J:74,KEY_K:75,KEY_L:76,KEY_M:77,KEY_N:78,KEY_O:79,KEY_P:80,KEY_Q:81,KEY_R:82,KEY_S:83,KEY_T:84,KEY_U:85,KEY_V:86,KEY_W:87,KEY_X:88,KEY_Y:89,KEY_Z:90,LEFT_META:91,RIGHT_META:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMICOLON:186,EQUALS:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222}),j)CognoWise.Enterprise=CognoWise.Enterprise||{},CognoWise.Enterprise.ConfigSections=CognoWise.Enterprise.ConfigSections||{},j.hasOwnProperty(ee)&&(CognoWise.Enterprise.ConfigSections[ee]=j[ee])},injectEnterpriseScript:function(j){$("head").append('<script src="'+CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)+j+"?v="+CognoWise.ModuleConfig.Version+'"><\/script>')},injectOldEnterpriseScript:function(j){$("head").append('<script src="'+configsettings.EnterpriseHostName+j+"?v="+CognoWise.ModuleConfig.Version+'"><\/script>')},injectStyle:function(j){$("head").append('<link href="'+configsettings.EnterpriseHostName+j+"?v="+CognoWise.ModuleConfig.Version+'"></link>')},getImpersontionOrParentalAccess:function(){return window.location.href.indexOf("parentalAccessId")>-1?"parentalAccessId":window.location.href.indexOf("personationId")>-1?"personationId":""},logModuleUsage:function(oe){const j=window.location.href.toLowerCase();var ee=null;j.includes("advising")&&(j.includes("dashboard")||j.includes("mentoring"))?ee="Mentoring Dashboard":j.includes("enterprise")&&j.includes("userdashboard")&&(ee="Home");var te={ModuleName:null!=ee?ee:oe,ModuleIdText:oe},ce=window.location.protocol+"//"+window.location.hostname+"/apihost/enterprise/api/SystemConfiguration/SavePersonModuleUsage";try{return $.ajax({url:ce,type:"POST",async:!1,crossDomain:!0,headers:{RequestVerificationToken:CognoWise.RequestVerificationToken},data:te})}catch(Xe){console.log(Xe)}}}}(),window.CognoWise.Url={resolveModuleServiceAPI:function(B){return(CognoWise.Enterprise.ConfigSections.APIHostName||CognoWise.Enterprise.ConfigSections.RESTHostName)+"/"+CognoWise.ModuleConfig.APIServers[B]+"/api"},resolveGPModuleServiceAPI:function(B){return B=this.getCorrectGPModuleIfNewDesign(B),(CognoWise.Enterprise.ConfigSections.APIHostName||CognoWise.Enterprise.ConfigSections.RESTHostName)+"/"+CognoWise.ModuleConfig.APIServers[B]+"/api"},resolveCurrentModulePartial:function(){return CognoWise.Enterprise.ConfigSections.LocalmoduleStaticResourcePath+"/ClientApp/app"},getCorrectGPModuleIfNewDesign:function(B){return CognoWise.Enterprise.ConfigSections.EnabledModuleList&&CognoWise.Enterprise.ConfigSections.EnabledModuleList.indexOf(EPS.Module.GradPlannerOld)>-1&&(B==EPS.Module.GradPlanner||B==EPS.Module.GradPlannerOld)&&(B=1==CognoWise.Enterprise.ConfigSections.IsGPNewDesign?EPS.Module.GradPlanner:EPS.Module.GradPlannerOld),B},resolveModulePartial:function(B){return CognoWise.GlobalConfigSetting.getStaticResourcePath(B)+"/ClientApp/app"},resolveEmploymentPortalModulePartial:function(){return EPS.GlobalConfigSetting.getStaticResourcePath(EPS.Module.EmploymentPortal)+"/app"},resolveGPModulePartial:function(B){return"GraduationPlanner"==(B=this.getCorrectGPModuleIfNewDesign(B))&&oldmodule&&isoldvdrequired?CognoWise.GlobalConfigSetting.getStaticResourcePath(B)+"/ClientApp/app":CognoWise.GlobalConfigSetting.getStaticResourcePath(B)},resolveEntperiseModulePartial:function(){return CognoWise.Url.resolveModulePartial(EPS.Module.Enterprise)},resolveModuleIndexPageRelative:function(B){return B=this.getCorrectGPModuleIfNewDesign(B),hostPath="/"+CognoWise.ModuleConfig.ResourceServers[B],hostPath+"/index.html"},resolveModuleIndexPage:function(B,Ee=!1){return B=this.getCorrectGPModuleIfNewDesign(B),hostPath=CognoWise.Enterprise.ConfigSections.ServerHostName+"/"+CognoWise.ModuleConfig.ResourceServers[B],EPS.Module.EmploymentPortal==B||EPS.Module.Membership==B||EPS.Module.Workflow==B||EPS.Module.Badge==B?hostPath:hostPath+(Ee?"/":"/index.html")},resolveGPModuleIndexPageRelative:function(B,Ee){return B=this.getCorrectGPModuleIfNewDesign(B),hostPath="/"+CognoWise.ModuleConfig.ResourceServers[B],hostPath+("GraduationPlanner"==B&&oldmodule&&isoldvdrequired?"/index.html":"/")},resolveGPModuleIndexPage:function(B,Ee){return Ee||(B=this.getCorrectGPModuleIfNewDesign(B)),hostPath=CognoWise.Enterprise.ConfigSections.ServerHostName+"/"+CognoWise.ModuleConfig.ResourceServers[B],hostPath+("GraduationPlanner"==B&&oldmodule&&isoldvdrequired?"/index.html":"/")},resolveModuleIndexPageWithImpersonation:function(B){return hostPath=CognoWise.Enterprise.ConfigSections.ServerHostName+"/"+CognoWise.ModuleConfig.ResourceServers[B],CognoWise.Enterprise.User.IsImpersonatedUser||CognoWise.Enterprise.ConfigSections.IsParentalAccess?hostPath+"/index.html?"+CognoWise.GlobalConfigSetting.getImpersontionOrParentalAccess()+"="+CognoWise.Enterprise.ConfigSections.PersonId:hostPath+"/index.html"},resolveModuleIndexPageForEducationalStrategy:function(B,Ee){return hostPath=CognoWise.Enterprise.ConfigSections.ServerHostName+"/"+CognoWise.ModuleConfig.ResourceServers[B],hostPath},resolveHomePageModuleStudentInformation:function(B){return CognoWise.Enterprise.ConfigSections.ServerHostName+"/"+CognoWise.ModuleConfig.ResourceServers[B]+"/studentInformation.html"},resolveUnAuthorizedPage:function(){return"/unauthorized"},resolveModuleHostName:function(B){return B=this.getCorrectGPModuleIfNewDesign(B),hostPath=CognoWise.Enterprise.ConfigSections.ServerHostName+"/"+CognoWise.ModuleConfig.ResourceServers[B],hostPath+"/index.html"},getImpersontionOrParentalAccess:function(){return"_"+CognoWise.GlobalConfigSetting.getImpersontionOrParentalAccess()},resolveApplicationHostName:function(B){return B=this.getCorrectGPModuleIfNewDesign(B),CognoWise.Enterprise.ConfigSections.ServerHostName},getImageVersion:function(){if(null==window.CognoWise.Url.imageVersion){var B=$('<div class="navbar-brand-default-image" style="display:none"/>').appendTo(document.body),Ee=B.css("background-image").replace("url(","").replace(")","").replace(/\"/gi,"");B.remove();var ct=getQueryStringValue(Ee,"v").split("#")[0];window.CognoWise.Url.imageVersion=null!==ct||""!==ct?ct:CognoWise.ModuleConfig.Version}return window.CognoWise.Url.imageVersion}},document.addEventListener&&document.addEventListener("DOMContentLoaded",init,!1),window.onload=init,String.prototype.format||(String.prototype.format=function(){var B=arguments;return this.replace(/{(\d+)}/g,function(Ee,ct){return void 0!==B[ct]?B[ct]:Ee})}),String.prototype.fullTrim||(String.prototype.fullTrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")}),Array.isArray||(Array.isArray=function(B){return"[object Array]"===Object.prototype.toString.call(B)}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(Ee,ct){"use strict";if(null==Ee)throw new TypeError("Cannot convert undefined or null to object");for(var Pe=Object(Ee),w=1;w<arguments.length;w++){var oe=arguments[w];if(null!=oe)for(var j in oe)Object.prototype.hasOwnProperty.call(oe,j)&&(Pe[j]=oe[j])}return Pe},writable:!0,configurable:!0}),String.prototype.includes||(String.prototype.includes=function(B,Ee){"use strict";return"number"!=typeof Ee&&(Ee=0),!(Ee+B.length>this.length)&&-1!==this.indexOf(B,Ee)}),String.prototype.startsWith||(String.prototype.startsWith=function(B,Ee){return this.substr(Ee||0,B.length)===B}),String.prototype.endsWith||(String.prototype.endsWith=function(B,Ee){return Ee<this.length?Ee|=0:Ee=this.length,this.substr(Ee-B.length,B.length)===B}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(B){if(null==this)throw new TypeError('"this" is null or not defined');var Ee=Object(this),ct=Ee.length>>>0;if("function"!=typeof B)throw new TypeError("predicate must be a function");for(var Pe=arguments[1],w=0;w<ct;){var oe=Ee[w];if(B.call(Pe,oe,w,Ee))return oe;w++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(B){if(null==this)throw new TypeError('"this" is null or not defined');var Ee=Object(this),ct=Ee.length>>>0;if("function"!=typeof B)throw new TypeError("predicate must be a function");for(var Pe=arguments[1],w=0;w<ct;){var oe=Ee[w];if(B.call(Pe,oe,w,Ee))return w;w++}return-1}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(B,Ee){if(null==this)throw new TypeError('"this" is null or not defined');var ct=Object(this),Pe=ct.length>>>0;if(0===Pe)return!1;for(var ee,te,w=0|Ee,oe=Math.max(w>=0?w:Pe-Math.abs(w),0);oe<Pe;){if((ee=ct[oe])===(te=B)||"number"==typeof ee&&"number"==typeof te&&isNaN(ee)&&isNaN(te))return!0;oe++}return!1}});